<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 389253] New: ListBox: exception occurs on setting small height ( one item high etc)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20389253%5D%20New%3A%20ListBox%3A%20exception%20occurs%20on%20setting%0A%20small%20height%20%28%20one%20item%20high%20etc%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="073695.html">
   <LINK REL="Next"  HREF="073678.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 389253] New: ListBox: exception occurs on setting small height ( one item high etc)</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20389253%5D%20New%3A%20ListBox%3A%20exception%20occurs%20on%20setting%0A%20small%20height%20%28%20one%20item%20high%20etc%29&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 389253] New: ListBox: exception occurs on setting small height ( one item high etc)">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon May 12 05:23:34 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="073695.html">[Mono-bugs] [Bug 389250] ListBox: exception on any action when one-column multicolumn
</A></li>
        <LI>Next message: <A HREF="073678.html">[Mono-bugs] [Bug 389253] ListBox: exception occurs on setting small height ( one item high etc)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#73649">[ date ]</a>
              <a href="thread.html#73649">[ thread ]</a>
              <a href="subject.html#73649">[ subject ]</a>
              <a href="author.html#73649">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=389253">https://bugzilla.novell.com/show_bug.cgi?id=389253</A>


           Summary: ListBox: exception occurs on setting small height (one
                    item high etc)
           Product: Mono: Class Libraries
           Version: 1.9.0
          Platform: Other
        OS/Version: Other
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Windows.Forms
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">andyhume32 at yahoo.co.uk</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


Repro app from bug 389250.  Set ListBox to 200 wide (to avoid bug 389250), and
height 40 (to round down to two item 'integral' height of 30 or 32).  The first
exception below will occur.

If one sets the height to zero high(!), then on any action the second exception
occurs (Shift+Tab backwards from the height field to the ListBox then
Down-Arrow to move items.

[[

Unhandled Exception: System.DivideByZeroException: Division by zero
  at System.Windows.Forms.ListBox.GetItemRectangle (Int32 index) [0x00036] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/ListBox.cs:807 
  at System.Windows.Forms.ListBox.GetItemDisplayRectangle (Int32 index, Int32
first_displayble) [0x00000] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/ListBox.cs:1274 
  at System.Windows.Forms.ListBox.LastVisibleItem () [0x00043] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/ListBox.cs:1350 
  at System.Windows.Forms.ListBox.LayoutListBox () [0x00039] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/ListBox.cs:1173 
  at System.Windows.Forms.ListBox.OnResize (System.EventArgs e) [0x00022] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/ListBox.cs:976 
  at System.Windows.Forms.Control.OnSizeChanged (System.EventArgs e) [0x00006]
in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Control.cs:6495 
  at System.Windows.Forms.Control.UpdateBounds (Int32 x, Int32 y, Int32 width,
Int32 height, Int32 clientWidth, Int32 clientHeight) [0x000ec] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Control.cs:5138 
  at System.Windows.Forms.Control.UpdateBounds () [0x0002c] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Control.cs:5087 
  at System.Windows.Forms.Control.WmWindowPosChanged
(System.Windows.Forms.Message&amp; m) [0x00012] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Control.cs:5441 
  at System.Windows.Forms.Control.WndProc (System.Windows.Forms.Message&amp; m)
[0x00164] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Control.cs:5249 
  at System.Windows.Forms.ListBox.WndProc (System.Windows.Forms.Message&amp; m)
[0x00000] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/ListBox.cs:1135 
  at System.Windows.Forms.Control+ControlWindowTarget.OnMessage
(System.Windows.Forms.Message&amp; m) [0x00000] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Control.cs:227 
  at System.Windows.Forms.Control+ControlNativeWindow.WndProc
(System.Windows.Forms.Message&amp; m) [0x00000] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Control.cs:208 
  at System.Windows.Forms.NativeWindow.WndProc (IntPtr hWnd, Msg msg, IntPtr
wParam, IntPtr lParam) [0x00084] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/NativeWindow.cs:240 
  at System.Windows.Forms.XplatUIX11.SendMessage (IntPtr hwnd, Msg message,
IntPtr wParam, IntPtr lParam) [0x0008d] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/XplatUIX11.cs:4982 
  at System.Windows.Forms.XplatUIX11.SetWindowPos (IntPtr handle, Int32 x,
Int32 y, Int32 width, Int32 height) [0x000d4] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/XplatUIX11.cs:5466 
  at System.Windows.Forms.XplatUI.SetWindowPos (IntPtr handle, Int32 x, Int32
y, Int32 width, Int32 height) [0x00000] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/XplatUI.cs:1066 
  at System.Windows.Forms.Control.SetBoundsCore (Int32 x, Int32 y, Int32 width,
Int32 height, BoundsSpecified specified) [0x00028] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Control.cs:4932 
  at System.Windows.Forms.ListBox.SetBoundsCore (Int32 x, Int32 y, Int32 width,
Int32 height, BoundsSpecified specified) [0x00032] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/ListBox.cs:1066 
  at System.Windows.Forms.Control.SetBounds (Int32 x, Int32 y, Int32 width,
Int32 height, BoundsSpecified specified) [0x000e8] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Control.cs:4381 
  at System.Windows.Forms.Control.set_Height (Int32 value) [0x00000] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Control.cs:2893 
  at (wrapper remoting-invoke-with-check)
System.Windows.Forms.Control:set_Height (int)
  at TextBoxLines+&lt;&gt;c__CompilerGenerated6.&lt;Main&gt;c__8 (System.Object +5,
System.EventArgs +6) [0x00032] in d:\Documents and Settings\alan\My
Documents\Suppliers\Mono\WinForms\ListControls\ListBoxHeight.cs:57 
.. ...
]]

[[

Unhandled Exception: System.DivideByZeroException: Division by zero
  at System.Windows.Forms.ListBox.EnsureVisible (Int32 index) [0x000a9] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/ListBox.cs:2034 
  at (wrapper remoting-invoke-with-check)
System.Windows.Forms.ListBox:EnsureVisible (int)
  at System.Windows.Forms.ListBox+SelectedIndexCollection.AddCore (Int32 index)
[0x000b3] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/ListBox.cs:2615 
  at System.Windows.Forms.ListBox+SelectedIndexCollection.Add (Int32 index)
[0x00000] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/ListBox.cs:2590 
  at System.Windows.Forms.ListBox.set_SelectedIndex (Int32 value) [0x00050] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/ListBox.cs:516 
  at System.Windows.Forms.ListBox.SelectedItemFromNavigation (Int32 index)
[0x00027] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/ListBox.cs:1875 
  at System.Windows.Forms.ListBox.OnKeyDownLB (System.Object sender,
System.Windows.Forms.KeyEventArgs e) [0x0014b] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/ListBox.cs:1648 
  at System.Windows.Forms.Control.OnKeyDown (System.Windows.Forms.KeyEventArgs
e) [0x0001c] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Control.cs:6179 
  at System.Windows.Forms.Control.ProcessKeyEventArgs
(System.Windows.Forms.Message&amp; m) [0x0004a] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Control.cs:4665 
  at System.Windows.Forms.Control.ProcessKeyMessage
(System.Windows.Forms.Message&amp; m) [0x0001e] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Control.cs:4710 
  at System.Windows.Forms.Control.WmKeys (System.Windows.Forms.Message&amp; m)
[0x00000] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Control.cs:5804 
  at System.Windows.Forms.Control.WndProc (System.Windows.Forms.Message&amp; m)
[0x0020c] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Control.cs:5364 
  at System.Windows.Forms.ListBox.WndProc (System.Windows.Forms.Message&amp; m)
[0x00000] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/ListBox.cs:1135 
  at System.Windows.Forms.Control+ControlWindowTarget.OnMessage
(System.Windows.Forms.Message&amp; m) [0x00000] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Control.cs:227 
  at System.Windows.Forms.Control+ControlNativeWindow.WndProc
(System.Windows.Forms.Message&amp; m) [0x00000] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Control.cs:208 
  at System.Windows.Forms.NativeWindow.WndProc (IntPtr hWnd, Msg msg, IntPtr
wParam, IntPtr lParam) [0x00084] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/NativeWindow.cs:240 
  at System.Windows.Forms.XplatUIX11.DispatchMessage (System.Windows.Forms.MSG&amp;
msg) [0x00000] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/XplatUIX11.cs:3293 
  at System.Windows.Forms.XplatUI.DispatchMessage (System.Windows.Forms.MSG&amp;
msg) [0x00000] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/XplatUI.cs:576 
  at System.Windows.Forms.Application.RunLoop (Boolean Modal,
System.Windows.Forms.ApplicationContext context) [0x00359] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Application.cs:908 
  at System.Windows.Forms.Application.Run
(System.Windows.Forms.ApplicationContext context) [0x00014] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Application.cs:694 
  at System.Windows.Forms.Application.Run (System.Windows.Forms.Form mainForm)
[0x00000] in
/usr/local/src/mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Application.cs:682 
  at TextBoxLines.Main () [0x00319] in ListBoxHeight.cs:81 
]]


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>



























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="073695.html">[Mono-bugs] [Bug 389250] ListBox: exception on any action when one-column multicolumn
</A></li>
	<LI>Next message: <A HREF="073678.html">[Mono-bugs] [Bug 389253] ListBox: exception occurs on setting small height ( one item high etc)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#73649">[ date ]</a>
              <a href="thread.html#73649">[ thread ]</a>
              <a href="subject.html#73649">[ subject ]</a>
              <a href="author.html#73649">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
