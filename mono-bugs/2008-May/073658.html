<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 389276] New: MemberCache. FindMemberToOverride fails due to a different behaviour of MethodBase. GetGenericArguments between Mono and original
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20389276%5D%20New%3A%20MemberCache.%20FindMemberToOverride%0A%20fails%20due%20to%20a%20different%20behaviour%20of%20MethodBase.%20GetGenericArguments%0A%20between%20Mono%20and%20original&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="073674.html">
   <LINK REL="Next"  HREF="073661.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 389276] New: MemberCache. FindMemberToOverride fails due to a different behaviour of MethodBase. GetGenericArguments between Mono and original</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20389276%5D%20New%3A%20MemberCache.%20FindMemberToOverride%0A%20fails%20due%20to%20a%20different%20behaviour%20of%20MethodBase.%20GetGenericArguments%0A%20between%20Mono%20and%20original&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 389276] New: MemberCache. FindMemberToOverride fails due to a different behaviour of MethodBase. GetGenericArguments between Mono and original">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon May 12 05:57:48 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="073674.html">[Mono-bugs] [Bug 389272] PtrHashtable fails due to a alledged bug in TypeBuilder. GetHashCode (original Microsoft .NET Framework 2.0 SP1)
</A></li>
        <LI>Next message: <A HREF="073661.html">[Mono-bugs] [Bug 389276] MemberCache. FindMemberToOverride fails due to a different behaviour of MethodBase. GetGenericArguments between Mono and original
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#73658">[ date ]</a>
              <a href="thread.html#73658">[ thread ]</a>
              <a href="subject.html#73658">[ subject ]</a>
              <a href="author.html#73658">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=389276">https://bugzilla.novell.com/show_bug.cgi?id=389276</A>


           Summary: MemberCache.FindMemberToOverride fails due to a
                    different behaviour of MethodBase.GetGenericArguments
                    between Mono and original
           Product: Mono: Compilers
           Version: 1.9.0
          Platform: x86
        OS/Version: Windows XP
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: C#
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mihailik at gmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        Depends on: 389272
          Found By: Other


Running under original .NET Framework

Mono.CSharp.MemberCache.FindMemberToOverride(Type invocation_type, string name,
Type [] 

param_types, GenericMethod generic_method, bool is_property)
in decl.cs ~2404ln
Fails due to a different behaviour of MethodBase.GetGenericArguments between
Mono and original Microsoft .NET Framework 2.0 SP1

NullReferenceException 
NET returns null as result to a call to GetGenericArguments, whereas Mono
returns an empty array.

Proposed workaround is to change Mono.CSharp.TypeManager class to be defensive
and translate Microsoft's null behaviour to Mono's empty array behaviour.
In particular, the proposed change is in typemanager.cs file ~line 2930:
        public static Type[] GetGenericArguments (MethodBase mi)
        {
#if GMCS_SOURCE
#if MS_COMPATIBLE
                                      return mi.GetGenericArguments() ??
Type.EmptyTypes;
#else
                return mi.GetGenericArguments ();
#endif
#else
                return Type.EmptyTypes;
#endif
        }


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>








































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="073674.html">[Mono-bugs] [Bug 389272] PtrHashtable fails due to a alledged bug in TypeBuilder. GetHashCode (original Microsoft .NET Framework 2.0 SP1)
</A></li>
	<LI>Next message: <A HREF="073661.html">[Mono-bugs] [Bug 389276] MemberCache. FindMemberToOverride fails due to a different behaviour of MethodBase. GetGenericArguments between Mono and original
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#73658">[ date ]</a>
              <a href="thread.html#73658">[ thread ]</a>
              <a href="subject.html#73658">[ subject ]</a>
              <a href="author.html#73658">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
