<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 389272] New: PtrHashtable fails due to a alledged bug in TypeBuilder. GetHashCode (original Microsoft .NET Framework 2.0 SP1)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20389272%5D%20New%3A%20PtrHashtable%20fails%20due%20to%20a%20alledged%0A%20bug%20in%20TypeBuilder.%20GetHashCode%20%28original%20Microsoft%20.NET%20Framework%202.0%20SP1%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="073685.html">
   <LINK REL="Next"  HREF="073659.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 389272] New: PtrHashtable fails due to a alledged bug in TypeBuilder. GetHashCode (original Microsoft .NET Framework 2.0 SP1)</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20389272%5D%20New%3A%20PtrHashtable%20fails%20due%20to%20a%20alledged%0A%20bug%20in%20TypeBuilder.%20GetHashCode%20%28original%20Microsoft%20.NET%20Framework%202.0%20SP1%29&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 389272] New: PtrHashtable fails due to a alledged bug in TypeBuilder. GetHashCode (original Microsoft .NET Framework 2.0 SP1)">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon May 12 05:56:00 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="073685.html">[Mono-bugs] [Bug 389268] PropertyGrid: String array property can't be emptied ( StringCollectionEditor)
</A></li>
        <LI>Next message: <A HREF="073659.html">[Mono-bugs] [Bug 389272] PtrHashtable fails due to a alledged bug in TypeBuilder. GetHashCode (original Microsoft .NET Framework 2.0 SP1)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#73657">[ date ]</a>
              <a href="thread.html#73657">[ thread ]</a>
              <a href="subject.html#73657">[ subject ]</a>
              <a href="author.html#73657">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=389272">https://bugzilla.novell.com/show_bug.cgi?id=389272</A>


           Summary: PtrHashtable fails due to a alledged bug in
                    TypeBuilder.GetHashCode (original Microsoft .NET
                    Framework 2.0 SP1)
           Product: Mono: Compilers
           Version: 1.9.0
          Platform: x86
        OS/Version: Windows XP
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: C#
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mihailik at gmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: Other


Mono.CSharp.PtrHashtable
in support.cs ~333ln

Fails due to a alledged bug in TypeBuilder.GetHashCode (original Microsoft .NET
Framework 2.0 SP1)

for Enum type builders it throws InvalidOperationException 'Underlying type
information on enumeration is not specified.'




Proposed workaround is to add the following override to PtrHashtable:
#if MS_COMPATIBLE
        protected override int GetHash(object key)
        {
            if (key is Type &amp;&amp; ((Type)key).IsEnum)
            {
                return ((Type)key).FullName.GetHashCode();
            }

            return key.GetHashCode();
        }
#endif


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>





































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="073685.html">[Mono-bugs] [Bug 389268] PropertyGrid: String array property can't be emptied ( StringCollectionEditor)
</A></li>
	<LI>Next message: <A HREF="073659.html">[Mono-bugs] [Bug 389272] PtrHashtable fails due to a alledged bug in TypeBuilder. GetHashCode (original Microsoft .NET Framework 2.0 SP1)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#73657">[ date ]</a>
              <a href="thread.html#73657">[ thread ]</a>
              <a href="subject.html#73657">[ subject ]</a>
              <a href="author.html#73657">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
