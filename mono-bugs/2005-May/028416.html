<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 74830][Maj] Changed - abort in debug mode
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:bugzilla-daemon%40bugzilla.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="028415.html">
   <LINK REL="Next"  HREF="028417.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 74830][Maj] Changed - abort in debug mode
   </H1>
    <B>bugzilla-daemon@bugzilla.ximian.com
    </B> 
    <A HREF="mailto:bugzilla-daemon%40bugzilla.ximian.com"
       TITLE="[Mono-bugs] [Bug 74830][Maj] Changed - abort in debug mode">bugzilla-daemon@bugzilla.ximian.com
       </A><BR>
    <I>Thu,  5 May 2005 12:32:23 -0400 (EDT)</I>
    <P><UL>
        <LI> Previous message: <A HREF="028415.html">[Mono-bugs] [Bug 74824][Nor] Changed - Little typo in Generic.List
</A></li>
        <LI> Next message: <A HREF="028417.html">[Mono-bugs] [Bug 74830][Maj] Changed - abort in debug mode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28416">[ date ]</a>
              <a href="thread.html#28416">[ thread ]</a>
              <a href="subject.html#28416">[ subject ]</a>
              <a href="author.html#28416">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="mailto:miguel@ximian.com.">miguel@ximian.com.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=74830">http://bugzilla.ximian.com/show_bug.cgi?id=74830</A>

--- shadow/74830	2005-05-05 12:05:23.000000000 -0400
+++ shadow/74830.tmp.28329	2005-05-05 12:32:23.000000000 -0400
@@ -439,6 +439,106 @@
 
 
 ------- Additional Comments From <A HREF="mailto:lupus@ximian.com">lupus@ximian.com</A>  2005-05-05 12:05 -------
 I committed a fix in svn: since you didn't give any way to reproduce
 the issue I'll leave the bug open until you confirm it doesn't happen
 in your testing.
+
+------- Additional Comments From <A HREF="mailto:miguel@ximian.com">miguel@ximian.com</A>  2005-05-05 12:32 -------
+Hello,
+
+    The problem still happens after applying r44081.
+
+    I just logged into James machine, here are the details, from
+within the Novell network:
+
+ssh <A HREF="mailto:root@rc-qa-616">root@rc-qa-616</A>
+password: novell
+
+Mono is installed in: /opt/novell/zenworks/bin/mono
+
+To run zmd, on a terminal run:
+bash$ source /root/zen-env.sh
+bash$ /opt/novell/zenworks/sbin/zmd -n
+
+On another terminal run `rug'
+bash$ /opt/novell/zenworks/bin/mono --debug
+/opt/novell/zenworks/lib/rug/rug.exe
+
+The current stack trace of the relevant threads is:
+
+#0  0xffffe410 in ?? ()
+#1  0x40e7a734 in ?? ()
+#2  0x00000002 in ?? ()
+#3  0x00000000 in ?? ()
+#4  0x400b6c5e in __lll_mutex_lock_wait () from /lib/tls/libpthread.so.0
+#5  0x400b3c1c in _L_mutex_lock_88 () from /lib/tls/libpthread.so.0
+#6  0x00000000 in ?? ()
+#7  0x00000000 in ?? ()
+#8  0x081c5e94 in __JCR_LIST__ ()
+#9  0x40f005c0 in ?? ()
+#10 0x0829aea8 in ?? ()
+#11 0x40e7a754 in ?? ()
+#12 0x080f370f in EnterCriticalSection (section=0x81c6940) at
+critical-sections.c:151
+#13 0x080f370f in EnterCriticalSection (section=0x81c693c) at
+critical-sections.c:151
+#14 0x080d0dd0 in mono_debugger_lock () at mono-debug-debugger.c:71
+#15 0x080cfa43 in mono_debug_add_method (method=0x829aea8,
+jit=0x40f005c0, domain=0x821af00) at mono-debug.c:365
+#16 0x0814d6da in mono_debug_close_method (cfg=0x835d138) at
+debug-mini.c:240
+#17 0x08124e4c in mini_method_compile (method=0x829aea8, opts=92555,
+domain=0x821af00, run_cctors=-4, compile_aot=-4, parts=0)
+    at mini.c:9156
+#18 0x08125f5e in mono_jit_compile_method_with_opt (method=0x829aea8,
+opt=Variable &quot;opt&quot; is not available.
+) at mini.c:9341
+#19 0x0809c06c in mono_compile_method (method=0x829aea8) at object.c:384
+#20 0x08150485 in x86_magic_trampoline (eax=-4, ecx=-4, edx=-4,
+esi=-4, edi=-4, ebx=-4, code=0x0, m=0x829aea8) at tramp-x86.c:85
+
+The other thread has:
+#0  0xffffe410 in ?? ()
+#1  0x410fe734 in ?? ()
+#2  0x00000002 in ?? ()
+#3  0x00000000 in ?? ()
+#4  0x400b6c5e in __lll_mutex_lock_wait () from /lib/tls/libpthread.so.0
+#5  0x400b3c1c in _L_mutex_lock_88 () from /lib/tls/libpthread.so.0
+#6  0x00000000 in ?? ()
+#7  0x00000000 in ?? ()
+#8  0x081c5e94 in __JCR_LIST__ ()
+#9  0x40f00b30 in ?? ()
+#10 0x08361978 in ?? ()
+#11 0x410fe754 in ?? ()
+#12 0x080f370f in EnterCriticalSection (section=0x81c6940) at
+critical-sections.c:151
+#13 0x080f370f in EnterCriticalSection (section=0x81c693c) at
+critical-sections.c:151
+#14 0x080d0dd0 in mono_debugger_lock () at mono-debug-debugger.c:71
+#15 0x080cfa43 in mono_debug_add_method (method=0x8361978,
+jit=0x40f00b30, domain=0x821af00) at mono-debug.c:365
+#16 0x0814d6da in mono_debug_close_method (cfg=0x83748c0) at
+debug-mini.c:240
+#17 0x08124e4c in mini_method_compile (method=0x8361978, opts=92555,
+domain=0x821af00, run_cctors=-4, compile_aot=-4, parts=0)
+    at mini.c:9156
+#18 0x08125f5e in mono_jit_compile_method_with_opt (method=0x8361978,
+opt=Variable &quot;opt&quot; is not available.
+) at mini.c:9341
+#19 0x0809c06c in mono_compile_method (method=0x8361978) at object.c:384
+#20 0x08150485 in x86_magic_trampoline (eax=-4, ecx=-4, edx=-4,
+esi=-4, edi=-4, ebx=-4, code=0x0, m=0x8361978) at tramp-x86.c:85
+
+The stack on a third thread has some garbage, but you can see
+something unusual:
+#184 0x401f7bb8 in
+__elf_set___libc_thread_subfreeres_element___rpc_thread_destroy__ ()
+from /lib/tls/libc.so.6
+#185 0x401f84c0 in __malloc_initialize_hook () from /lib/tls/libc.so.6
+#186 0x0843c6c8 in ?? ()
+#187 0x0843c6c8 in ?? ()
+#188 0xbfffe21c in ?? ()
+#189 0x400b3eb0 in pthread_mutex_unlock () from /lib/tls/libpthread.so.0
+
+Frame 184 which could just be noise at that point.
+

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="028415.html">[Mono-bugs] [Bug 74824][Nor] Changed - Little typo in Generic.List
</A></li>
	<LI> Next message: <A HREF="028417.html">[Mono-bugs] [Bug 74830][Maj] Changed - abort in debug mode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28416">[ date ]</a>
              <a href="thread.html#28416">[ thread ]</a>
              <a href="subject.html#28416">[ subject ]</a>
              <a href="author.html#28416">[ author ]</a>
         </LI>
       </UL>
</body></html>
