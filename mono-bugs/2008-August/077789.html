<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 415608] New: Intermittent hang when calling WaitHandle. WaitOne with a timeout specified
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20415608%5D%20New%3A%20Intermittent%20hang%20when%20calling%0A%20WaitHandle.%20WaitOne%20with%20a%20timeout%20specified&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="077787.html">
   <LINK REL="Next"  HREF="077790.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 415608] New: Intermittent hang when calling WaitHandle. WaitOne with a timeout specified</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20415608%5D%20New%3A%20Intermittent%20hang%20when%20calling%0A%20WaitHandle.%20WaitOne%20with%20a%20timeout%20specified&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 415608] New: Intermittent hang when calling WaitHandle. WaitOne with a timeout specified">bugzilla_noreply at novell.com
       </A><BR>
    <I>Thu Aug  7 17:25:40 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="077787.html">[Mono-bugs] [Bug 323511] Add support for Vista 256x256 PNG icons
</A></li>
        <LI>Next message: <A HREF="077790.html">[Mono-bugs] [Bug 415608] Intermittent hang when calling WaitHandle. WaitOne with a timeout specified
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77789">[ date ]</a>
              <a href="thread.html#77789">[ thread ]</a>
              <a href="subject.html#77789">[ subject ]</a>
              <a href="author.html#77789">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=415608">https://bugzilla.novell.com/show_bug.cgi?id=415608</A>


           Summary: Intermittent hang when calling WaitHandle.WaitOne with a
                    timeout specified
           Product: Mono: Runtime
           Version: 1.9
          Platform: x86-64
        OS/Version: SLES 10
            Status: NEW
          Severity: Critical
          Priority: P5 - None
         Component: JIT
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">miguel at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">sharris at nvidia.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: Customer



Sean Harris &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">sharris at nvidia.com</A>&gt; changed:

           What    |Removed                                         |Added
----------------------------------------------------------------------------
               Flag|                                                |SHIP_STOPPER?


Description of Problem:
When running the attached program repeatedly in a loop, the application will
hang intermittently.  Sometimes it'll hang after the first iteration, sometimes
it may take more (sometimes as many as 40).  Once the process hangs, it will
never resume.

Internally, the program is using WaitHandle.WaitOne(timeout) to wait for the
completion of a worker thread which internally calls a simple web service.  The
web service client also appears to use a similar timeout mechanism to implement
it's own timeout mechanism.

This occurs in executables that have not been ahead of time compiled, but it
takes quite a bit more to force the repro.  If however, all three of the
assemblies are AOT'd, the hang will repro very reliably, although not always on
the same iteration.

We can reproduce the behavior on both SLES 10 (our production environment) as
well as Windows Vista x64.  The application was developed o

Steps to reproduce the problem:
1. Build the attached solution in SharpDevelop as a Release build
2. AOT all three of the resulting assemblies (see the aot.ps1 script in the
Release/bin directory)
3. Run the application in a tight loop (see the run.ps1 script also in the
Release bin directory)

Note that all of our machines are dual or quad core Intel CPUs.  We've found
this bug in both the 1.2.6 as well as 1.9 runtimes.

Actual Results:
The application will hang either after first iteration or after some number,
usually less than 20, but we've seen it as high as around 40.

Expected Results:
The application should NEVER hang.  It is designed such that it's execution
time is explicitly limited.  A hang is catastrophic.

How often does this happen? 
Not always on the same iteration, but will always happen eventually.

Additional Information:


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>










































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="077787.html">[Mono-bugs] [Bug 323511] Add support for Vista 256x256 PNG icons
</A></li>
	<LI>Next message: <A HREF="077790.html">[Mono-bugs] [Bug 415608] Intermittent hang when calling WaitHandle. WaitOne with a timeout specified
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77789">[ date ]</a>
              <a href="thread.html#77789">[ thread ]</a>
              <a href="subject.html#77789">[ subject ]</a>
              <a href="author.html#77789">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
