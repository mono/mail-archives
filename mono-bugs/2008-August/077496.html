<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 388425] Mono loads assembly from bin/ referenced in web. config regardless of its version number
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20388425%5D%20Mono%20loads%20assembly%20from%20bin/%20referenced%0A%20in%20web.%20config%20regardless%20of%20its%20version%20number&In-Reply-To=bug-388425-28286%40https.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="077495.html">
   <LINK REL="Next"  HREF="077497.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 388425] Mono loads assembly from bin/ referenced in web. config regardless of its version number</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20388425%5D%20Mono%20loads%20assembly%20from%20bin/%20referenced%0A%20in%20web.%20config%20regardless%20of%20its%20version%20number&In-Reply-To=bug-388425-28286%40https.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 388425] Mono loads assembly from bin/ referenced in web. config regardless of its version number">bugzilla_noreply at novell.com
       </A><BR>
    <I>Fri Aug  1 04:37:57 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="077495.html">[Mono-bugs] [Bug 413786] mono-hash.c:361: error: `node_mem_chunk' undeclared ( first use in this function)
</A></li>
        <LI>Next message: <A HREF="077497.html">[Mono-bugs] [Bug 388425] Mono loads assembly from bin/ referenced in web. config regardless of its version number
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77496">[ date ]</a>
              <a href="thread.html#77496">[ thread ]</a>
              <a href="subject.html#77496">[ subject ]</a>
              <a href="author.html#77496">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=388425">https://bugzilla.novell.com/show_bug.cgi?id=388425</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mhabersack at novell.com</A> added comment
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=388425#c21">https://bugzilla.novell.com/show_bug.cgi?id=388425#c21</A>





--- Comment #21 from Marek Habersack &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mhabersack at novell.com</A>&gt;  2008-08-01 02:37:56 MDT ---
(In reply to comment #18 from Raja Harinath)
&gt;<i> (In reply to comment #14 from Marek Habersack)
</I>&gt;<i> 
</I>&gt;<i> &gt; After applying the current version of the patch and explicitly
</I>&gt;<i> &gt; unsetting the MONO_PATH variable in the mono-wrapper script I no
</I>&gt;<i> &gt; longer get the double free error, but the bootstrap still fails with:
</I>&gt;<i> 
</I>&gt;<i> This is a no-go.  The MONO_PATH is essential for the build.
</I>The patch doesn't touch MONO_PATH - if a path in the MONO_PATH contains correct
assemblies, everything will be loaded just fine.

&gt;<i> &gt; make[1]: Entering directory `/usr/src/tmp/mono/mcs/class/System'
</I>&gt;<i> &gt; MONO_PATH=&quot;../../class/lib/net_2_1_bootstrap:$MONO_PATH&quot;
</I>&gt;<i> &gt; /usr/src/tmp/mono/mono/runtime/mono-wrapper  --security=temporary-smcs-hack
</I>&gt;<i> &gt; ../../class/lib/net_2_1_bootstrap/smcs.exe /codepage:65001  -optimize
</I>&gt;<i> &gt; -d:NET_1_1 -d:NET_2_0 -d:NET_2_1 -debug /noconfig -nowarn:618
</I>&gt;<i> &gt; -d:CONFIGURATION_2_0 -unsafe  -target:library -out:System.dll 
</I>&gt;<i> &gt; @System.dll.sources
</I>&gt;<i> &gt; System.ComponentModel/ComponentCollection.cs(69,43): warning CS0114:
</I>&gt;<i> &gt; `System.ComponentModel.ComponentCollection.this[int]' hides inherited member
</I>&gt;<i> &gt; `System.Collections.Generic.List&lt;System.ComponentModel.IComponent&gt;.this[int]'.
</I>&gt;<i> &gt; To make the current member override that implementation, add the override
</I>&gt;<i> &gt; keyword. Otherwise add the new keyword
</I>&gt;<i> &gt; /home/devel/lib/mono/2.0/mscorlib.dll (Location of the symbol related to
</I>&gt;<i> &gt; previous warning)
</I>&gt;<i> 
</I>&gt;<i> And so, it appears to be picking up the 2.0 mscorlib.dll from the install tree.
</I>&gt;<i> We can't have that.  We need to pick up mscorlib.dll from the build tree, and
</I>&gt;<i> MONO_PATH is how we do it.
</I>The thing is - this behavior is broken and should be fixed. MS.NET doesn't work
that and we shouldn't either (as not loading incorrectly versioned assemblies
is a sane thing)

&gt;<i> 
</I>&gt;<i> Since net_2_1_bootstrap/smcs.exe is emitted by gmcs, which in turn uses SRE, we
</I>&gt;<i> can't control the version numbers of its assemblyrefs.  We use MONO_PATH to
</I>&gt;<i> force the runtime to pick up the 2.1 versioned corlib from the bootstrap tree.
</I>Or we could use cecil to change the assembly versions in smcs.exe

&gt;<i> 
</I>&gt;<i> (That is why we have a 2 stage bootstrap for the 2.0 profile, and the first 2
</I>&gt;<i> of the 3 stages in the 2.1 bootstrap.)
</I>&gt;<i> 
</I>

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="077495.html">[Mono-bugs] [Bug 413786] mono-hash.c:361: error: `node_mem_chunk' undeclared ( first use in this function)
</A></li>
	<LI>Next message: <A HREF="077497.html">[Mono-bugs] [Bug 388425] Mono loads assembly from bin/ referenced in web. config regardless of its version number
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77496">[ date ]</a>
              <a href="thread.html#77496">[ thread ]</a>
              <a href="subject.html#77496">[ subject ]</a>
              <a href="author.html#77496">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
