<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 419222] New: Different finally behaviour compared	to MS
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20419222%5D%20New%3A%20Different%20finally%20behaviour%20compared%0A%09to%20MS&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="078341.html">
   <LINK REL="Next"  HREF="078434.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 419222] New: Different finally behaviour compared	to MS</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20419222%5D%20New%3A%20Different%20finally%20behaviour%20compared%0A%09to%20MS&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 419222] New: Different finally behaviour compared	to MS">bugzilla_noreply at novell.com
       </A><BR>
    <I>Thu Aug 21 10:40:57 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="078341.html">[Mono-bugs] [Bug 373603] Adding TreeNode-Objekte with Methode Add() to an empty TreeNodeCollection returns wrong index
</A></li>
        <LI>Next message: <A HREF="078434.html">[Mono-bugs] [Bug 419222] Different finally behaviour compared to MS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#78342">[ date ]</a>
              <a href="thread.html#78342">[ thread ]</a>
              <a href="subject.html#78342">[ subject ]</a>
              <a href="author.html#78342">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=419222">https://bugzilla.novell.com/show_bug.cgi?id=419222</A>


           Summary: Different finally behaviour compared to MS
           Product: Mono: Runtime
           Version: 2.0
          Platform: PC
        OS/Version: Windows XP
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: misc
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">awunwpa7 at yahoo.com.ph</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: Beta-Customer


There is a different behaviour in MONO compared to MS runtime / framework. When
I set up global unhandled exception handling routines, I find the following
issue:

The MS runtime executes my exception handlers AFTER all finally blocks of the
thread were exectuted. The MONO runtime FIRST executes my exeption handler,
then executes all the finally blocks of the thread.

Is this expected? Have I set up exception handlers the wrong way?


Test case:

public void foo()
{
   Application.ThreadException +=
            new UnhandledExceptionEventHandler(UIHandler);
   AppDomain.CurrentDomain.UnhandledException +=
            new ThreadExceptionEventHandler(OtherHandler);
  
Application.SetUnhandledExceptionMode(UnhandledExceptionMode.CatchException);

  try
  {
        throw (new Exception());
  }
  finally
  {
        Console.WriteLine(&quot;Finally&quot;);
  }
}

private static void UIHandler(object sender, ThreadExceptionEventArgs e)
{
   Console.WriteLine(&quot;Handler 1&quot;);
}

private static void OtherHandler(object sender, UnhandledExceptionEventArgs e)
{
   Console.WriteLine(&quot;Handler 2&quot;);
}



Tested MS framework: 2.0


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>


















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="078341.html">[Mono-bugs] [Bug 373603] Adding TreeNode-Objekte with Methode Add() to an empty TreeNodeCollection returns wrong index
</A></li>
	<LI>Next message: <A HREF="078434.html">[Mono-bugs] [Bug 419222] Different finally behaviour compared to MS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#78342">[ date ]</a>
              <a href="thread.html#78342">[ thread ]</a>
              <a href="subject.html#78342">[ subject ]</a>
              <a href="author.html#78342">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
