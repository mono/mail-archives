<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 419224] New: Infinite 100% CPU when accessing MySQL tinyblob with a null value
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20419224%5D%20New%3A%20Infinite%20100%25%20CPU%20when%20accessing%0A%20MySQL%20tinyblob%20with%20a%20null%20value&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="078550.html">
   <LINK REL="Next"  HREF="078344.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 419224] New: Infinite 100% CPU when accessing MySQL tinyblob with a null value</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20419224%5D%20New%3A%20Infinite%20100%25%20CPU%20when%20accessing%0A%20MySQL%20tinyblob%20with%20a%20null%20value&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 419224] New: Infinite 100% CPU when accessing MySQL tinyblob with a null value">bugzilla_noreply at novell.com
       </A><BR>
    <I>Thu Aug 21 10:48:45 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="078550.html">[Mono-bugs] [Bug 419222] Different finally behaviour compared to MS
</A></li>
        <LI>Next message: <A HREF="078344.html">[Mono-bugs] [Bug 419251] New: FillClosedCurve
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#78343">[ date ]</a>
              <a href="thread.html#78343">[ thread ]</a>
              <a href="subject.html#78343">[ subject ]</a>
              <a href="author.html#78343">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=419224">https://bugzilla.novell.com/show_bug.cgi?id=419224</A>


           Summary: Infinite 100% CPU when accessing MySQL tinyblob with a
                    null value
           Product: Mono: Class Libraries
           Version: 2.0
          Platform: PC
        OS/Version: Windows XP
            Status: NEW
          Severity: Blocker
          Priority: P5 - None
         Component: Sys.Data
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">bnc-blr-team-mono at forge.provo.novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">awunwpa7 at yahoo.com.ph</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: Beta-Customer


I've got a problem using MONO with a MySQL ODBC driver: When I'm working with a
OdbcDataReader instance, MONO goes to 100% CPU and never returns (I'm sure that
it's not my code hanging). This happens when I access a column of MySQL
datatype &quot;tinyblob&quot; AND when the value within the specific database cell is set
to NULL. It does not matter whether I use OdbcDataReader.GetValue(),
GetValues() or IsDBNull() - as soon as the null-&quot;tinyblob&quot; is affected, the
framework uses up all CPU and is lost. So there's no workaround possible from
outside the framework. Maybe this error also goes for other MySQL datatypes
(but I've not tried it).

It's not the same with the MS Runtime and Class Libraries (v2.0, same database
server and ODBC driver), that simply says it's a DBNull value and moves on.

Tested MySQL ODBC-Driver: v5.1
Tested MySQL Server: 5.0.51b-community-nt


C# test case (works errorfree with MS):


public void Foo(string MyValidConnectionString)
{
  OdbcConnection TestConn = new OdbcConnection(MyValidConnectionString);

  TestConn.Open();

  OdbcCommand NewCmd = new OdbcCommand(&quot;SELECT * FROM test_table&quot;, TestConn);

  OdbcDataReader NewRdr = NewCmd.ExecuteReader();

  // some tinyblob column index:
  int TinyblobIdx = 5;

  bool GotSomething = NewRdr.Read();

  if (GotSomething)
  {
    Console.WriteLine(&quot;Cover me! I'm going in...&quot;);

    // no matter what access method is used...
    NewRdr.IsDBNull(TinyblobIdx); // &lt;- ...this let's MONO spin
  }

  Console.WriteLine(&quot;This never happens in MONO&quot;);
}


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>





















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="078550.html">[Mono-bugs] [Bug 419222] Different finally behaviour compared to MS
</A></li>
	<LI>Next message: <A HREF="078344.html">[Mono-bugs] [Bug 419251] New: FillClosedCurve
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#78343">[ date ]</a>
              <a href="thread.html#78343">[ thread ]</a>
              <a href="subject.html#78343">[ subject ]</a>
              <a href="author.html#78343">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
