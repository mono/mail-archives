<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 381876] SystemInformation.DragSize is not taken	into account
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20381876%5D%20SystemInformation.DragSize%20is%20not%20taken%0A%09into%20account&In-Reply-To=bug-381876-28286%40https.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="078325.html">
   <LINK REL="Next"  HREF="078317.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 381876] SystemInformation.DragSize is not taken	into account</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20381876%5D%20SystemInformation.DragSize%20is%20not%20taken%0A%09into%20account&In-Reply-To=bug-381876-28286%40https.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 381876] SystemInformation.DragSize is not taken	into account">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Aug 20 17:17:03 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="078325.html">[Mono-bugs] [Bug 418908] . cctor type initializer causes buggy IL when using a lambda expression with a parameter
</A></li>
        <LI>Next message: <A HREF="078317.html">[Mono-bugs] [Bug 383357] Novell c# LDAP api, LdapConnection. Disconnect does not clear the socket connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#78312">[ date ]</a>
              <a href="thread.html#78312">[ thread ]</a>
              <a href="subject.html#78312">[ subject ]</a>
              <a href="author.html#78312">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=381876">https://bugzilla.novell.com/show_bug.cgi?id=381876</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">calberto.cortez at gmail.com</A> added comment
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=381876#c9">https://bugzilla.novell.com/show_bug.cgi?id=381876#c9</A>





--- Comment #9 from Carlos Alberto Cortez &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">calberto.cortez at gmail.com</A>&gt;  2008-08-20 15:17:02 MDT ---
I committed in rev 111181 a fix to not fire any DragOver event until actually
pointer moves around.

Now, I went and check what I knew, just to be sure: SystemInformation.DragSize
is used mostly by TreeView/ListView (and probably other classes) to fire their
ItemDrag events, but not actually by Control.DoDragDrop.

To test that, I took your sample and modified it to log the MouseMove,
MouseDown, DragEnter and DragOver events, together with their positions, and
this is what I got (in .Net, of course) :

GroupBox =&gt; MouseMove Loc{X=264,Y=87}
GroupBox =&gt; MouseMove Loc{X=263,Y=86}
GroupBox =&gt; MouseDown Loc{X=263,Y=86} 
GroupBox =&gt; DragEnter Loc{X=263,Y=86} -&gt; same loc that MouseDown
GroupBox =&gt; MouseMove Loc{X=263,Y=86}
GroupBox =&gt; MouseDown Loc{X=263,Y=86}
GroupBox =&gt; DragEnter Loc{X=264,Y=87}
GroupBox =&gt; DragOver Loc{X=264,Y=87} -&gt; 1 offset respect to original loc
GroupBox =&gt; DragOver Loc{X=264,Y=87}

As you can see, DragEnter is fired in the same position as MouseDown, which
means that the dnd operation has actually already begun. And second, it seems
that the DragOver events are fired after the minimal movement of the pointer,
as you can see in the DragOver events, only by a 1 offset with respect to the
original MouseDown/DragEnter location (also take into account that DragSize
here is 4x4 pixels).

In other words, DragSize is not used to begin the operation here, but actually
in TreeView/ListView and their respective ItemDrag events.

Hopefully that was clear ;-D

Carlos.


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>


























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="078325.html">[Mono-bugs] [Bug 418908] . cctor type initializer causes buggy IL when using a lambda expression with a parameter
</A></li>
	<LI>Next message: <A HREF="078317.html">[Mono-bugs] [Bug 383357] Novell c# LDAP api, LdapConnection. Disconnect does not clear the socket connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#78312">[ date ]</a>
              <a href="thread.html#78312">[ thread ]</a>
              <a href="subject.html#78312">[ subject ]</a>
              <a href="author.html#78312">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
