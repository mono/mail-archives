<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 415314] New: Generic constructor constraint checking erroneously reports default constructor missing if superclass has said generic parameter and non-public zero-argument constructor
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20415314%5D%20New%3A%20Generic%20constructor%20constraint%0A%20checking%20erroneously%20reports%20default%20constructor%20missing%20if%20superclass%20has%0A%20said%20generic%20parameter%20and%20non-public%20zero-argument%20constructor&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="077722.html">
   <LINK REL="Next"  HREF="077724.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 415314] New: Generic constructor constraint checking erroneously reports default constructor missing if superclass has said generic parameter and non-public zero-argument constructor</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20415314%5D%20New%3A%20Generic%20constructor%20constraint%0A%20checking%20erroneously%20reports%20default%20constructor%20missing%20if%20superclass%20has%0A%20said%20generic%20parameter%20and%20non-public%20zero-argument%20constructor&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 415314] New: Generic constructor constraint checking erroneously reports default constructor missing if superclass has said generic parameter and non-public zero-argument constructor">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Aug  6 22:55:43 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="077722.html">[Mono-bugs] [Bug 410709] System.Windows.Forms. LinkLabel LinkArea behaves different compared to .Net
</A></li>
        <LI>Next message: <A HREF="077724.html">[Mono-bugs] [Bug 398592] Appending an attribute twice throws	runtime error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77723">[ date ]</a>
              <a href="thread.html#77723">[ thread ]</a>
              <a href="subject.html#77723">[ subject ]</a>
              <a href="author.html#77723">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=415314">https://bugzilla.novell.com/show_bug.cgi?id=415314</A>


           Summary: Generic constructor constraint checking erroneously
                    reports default constructor missing if superclass has
                    said generic parameter and non-public zero-argument
                    constructor
           Product: Mono: Compilers
           Version: 2.0
          Platform: x86-64
        OS/Version: openSUSE 10.3
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: C#
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">other+novell at bluecherry.net</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


Created an attachment (id=232145)
 --&gt; (<A HREF="https://bugzilla.novell.com/attachment.cgi?id=232145">https://bugzilla.novell.com/attachment.cgi?id=232145</A>)
Demonostration of bug (Class1.cs) and demonstration of using the constructor
the bug says doesn't exist (Class2.cs)

CS0310 is reported on a class that has a zero-argument default constructor when
subclassing a base class with a type constraint such that the generic parameter
is the subclass.

Example (from attached Class1.cs):
    public class Generic&lt;T&gt; where T : Generic&lt;T&gt;, new() {
        protected Generic() { }
    }
    public class Implementation : Generic&lt;Implementation&gt; {
    }

The &quot;Implementation&quot; class has a default constructor that implicitly calls the
base class's protected Generic(), thus it should meet the new() constraint on T
from Generic&lt;T&gt;.  However, gmcs reports:
Class1.cs(9,35): error CS0310: The type `TestCase.Implementation' must have a
public parameterless constructor in order to use it as parameter `T' in the
generic type or method `TestCase.Generic&lt;T&gt;'
Class1.cs(6,18): (Location of the symbol related to previous error)
Class1.cs(9,18): (Location of the symbol related to previous error)

This error is not reported with csc.exe (2.0).

Strangely, it does not happen if the constraint is not done as part of the
inheritance on itself, such as (Class3.cs):

    public class Generic&lt;T&gt; where T : new() { }
    public class Base {
        protected Base() { }
    }
    public class Derived : Base { }
    public class Test {
        private Generic&lt;Derived&gt; var;
    }

The above sample works fine and does not report a compile error.

This was tested with both the preview release 2.0 and SVN (revision 109742).


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>






































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="077722.html">[Mono-bugs] [Bug 410709] System.Windows.Forms. LinkLabel LinkArea behaves different compared to .Net
</A></li>
	<LI>Next message: <A HREF="077724.html">[Mono-bugs] [Bug 398592] Appending an attribute twice throws	runtime error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#77723">[ date ]</a>
              <a href="thread.html#77723">[ thread ]</a>
              <a href="subject.html#77723">[ subject ]</a>
              <a href="author.html#77723">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
