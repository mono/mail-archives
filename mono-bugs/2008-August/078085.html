<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 417862] New: Generic class with external method triggers mono assertion
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20417862%5D%20New%3A%20Generic%20class%20with%20external%20method%0A%20triggers%20mono%20assertion&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="078079.html">
   <LINK REL="Next"  HREF="078095.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 417862] New: Generic class with external method triggers mono assertion</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20417862%5D%20New%3A%20Generic%20class%20with%20external%20method%0A%20triggers%20mono%20assertion&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 417862] New: Generic class with external method triggers mono assertion">bugzilla_noreply at novell.com
       </A><BR>
    <I>Sun Aug 17 05:45:16 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="078079.html">[Mono-bugs] [Bug 417838] New: NRE while importing type
</A></li>
        <LI>Next message: <A HREF="078095.html">[Mono-bugs] [Bug 417862] Generic class with external method triggers mono assertion
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#78085">[ date ]</a>
              <a href="thread.html#78085">[ thread ]</a>
              <a href="subject.html#78085">[ subject ]</a>
              <a href="author.html#78085">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=417862">https://bugzilla.novell.com/show_bug.cgi?id=417862</A>


           Summary: Generic class with external method triggers mono
                    assertion
           Product: Mono: Runtime
           Version: 1.9
          Platform: i686
        OS/Version: Linux
            Status: NEW
          Severity: Major
          Priority: P5 - None
         Component: generics
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">uhrm at inf.ethz.ch</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: Other


The following code compiles fine but triggers an assertion in the Mono runtime
when executed:

using System;
using System.Runtime.InteropServices;

namespace ReproTest
{
        public class Culprit&lt;T&gt;
        {
                private string msg;
                public Culprit()
                {
                        msg = &quot;Hunt the bug.&quot;;
                }
                public void PrintMsg()
                {
                        Console.WriteLine(msg);
                }
                [DllImport(&quot;somelib&quot;)]
                private static extern void SomeFunc();
        }
        public class ReproMain
        {
                public static void Main(string[] args)
                {
                        Culprit&lt;int&gt; c = new Culprit&lt;int&gt;();
                        c.PrintMsg();
                }
        }
}

Compile with: gmcs -target:exe -out:ReproTest.exe ReproMain.cs

Run with: mono ReproTest.exe

Output:

**
** ERROR:(loader.c:1406):mono_get_method_from_token: assertion failed: (loc)
Stacktrace:


Native stacktrace:

        mono [0x8177145]
        [0xffffe440]
        /lib/libc.so.6(abort+0x108) [0xb7d0f8e8]
        /usr/lib/libglib-2.0.so.0(g_assertion_message+0x10e) [0xb7eaf7aa]

Debug info from gdb:

(no debugging symbols found)
Using host libthread_db library &quot;/lib/libthread_db.so.1&quot;.
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
(no debugging symbols found)
0xffffe410 in __kernel_vsyscall ()


=================================================================
Got a SIGABRT while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
=================================================================

Aborted


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>













































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="078079.html">[Mono-bugs] [Bug 417838] New: NRE while importing type
</A></li>
	<LI>Next message: <A HREF="078095.html">[Mono-bugs] [Bug 417862] Generic class with external method triggers mono assertion
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#78085">[ date ]</a>
              <a href="thread.html#78085">[ thread ]</a>
              <a href="subject.html#78085">[ subject ]</a>
              <a href="author.html#78085">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
