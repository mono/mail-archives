<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 694862] Synchronous Web-Service (.Net 2.0) call becomes stuck if more than 1 MB is to transmitted
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20694862%5D%20Synchronous%20Web-Service%20%28.Net%202.0%29%20call%0A%20becomes%20stuck%20if%20more%20than%201%20MB%20is%20to%20transmitted&In-Reply-To=bug-694862-28286%40http.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="112818.html">
   <LINK REL="Next"  HREF="112820.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 694862] Synchronous Web-Service (.Net 2.0) call becomes stuck if more than 1 MB is to transmitted</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20694862%5D%20Synchronous%20Web-Service%20%28.Net%202.0%29%20call%0A%20becomes%20stuck%20if%20more%20than%201%20MB%20is%20to%20transmitted&In-Reply-To=bug-694862-28286%40http.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 694862] Synchronous Web-Service (.Net 2.0) call becomes stuck if more than 1 MB is to transmitted">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Aug  3 04:33:08 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="112818.html">[Mono-bugs] [Bug 656843] Printing on an iPad using MonoTouch 3.2.x not working as expected
</A></li>
        <LI>Next message: <A HREF="112820.html">[Mono-bugs] [Bug 709999] New: Resurface of Bug 643456 - gmcs fails to infer generic type arguments when the &quot;source&quot; type is a generic constraint
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#112819">[ date ]</a>
              <a href="thread.html#112819">[ thread ]</a>
              <a href="subject.html#112819">[ subject ]</a>
              <a href="author.html#112819">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=694862">https://bugzilla.novell.com/show_bug.cgi?id=694862</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=694862#c6">https://bugzilla.novell.com/show_bug.cgi?id=694862#c6</A>


Franz-Gerold Url &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">gerold.url at efm.at</A>&gt; changed:

           What    |Removed                     |Added
----------------------------------------------------------------------------
             Status|NEEDINFO                    |NEW
       InfoProvider|<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">gerold.url at efm.at</A>           |

--- Comment #6 from Franz-Gerold Url &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">gerold.url at efm.at</A>&gt; 2011-08-03 08:33:04 UTC ---
Ok, here is the code:
This are code snippets. I didn't tried it in this short form, only with the
whole framework.

// === SERVER ===

 #region Testing WEB methods
-----------------------------------------------------

[WebMethod]
public byte[] TestWsHugeReturnConfigurable(float sizeInMegabyte)
{
    int size = Convert.ToInt32(sizeInMegabyte * 1024f * 1024f);
    byte[] myByteArray = new byte[size];
    return myByteArray;    
}

#endregion WEB Methods


// === CLIENT ===

TestWebS.Service1 myWebS = new TestWebS.Service1();
myWebS.Timeout = 50000;
DateTime DT = DateTime.Now;
try
{
    float v = 5f; // 5 MB 
    byte[] bigRetVal = myWebS.TestWsHugeReturnConfigurable(v); 
{
catch(Exception ex) { 
    string msg = Toolkit.GetExceptionStr(ex, Toolkit.ShowTime(DT,
DateTime.Now));
    Toolkit.showMsgBox(msg);
}

// --- Toolkit Funktions ----

        public static bool MsgBoxMutex = true;

        public static string GetExceptionStr(Exception ex)
        {
            return GetExceptionStr(ex, 1);
        }
        public static string GetExceptionStr(Exception ex, string time)
        {
            return &quot;Time: &quot; + time + &quot;\n\n&quot; + GetExceptionStr(ex);
        }
        private static string GetExceptionStr(Exception ex, int depth)
        {
            string msg = depth == 1 ? &quot;&quot; : &quot;\n\n\n&quot;;

            msg += &quot;Error (&quot; + depth.ToString() + &quot;)\n&quot;;
            msg += ex.Message == &quot;&quot; ? &quot;no message&quot; : ex.Message;
            msg +=  &quot;\n\nSource:\n;&quot;;
            msg += ex.Source == &quot;&quot; ? &quot;no source&quot; : ex.Source;
            msg += &quot;\n\nType:\n&quot;;
            msg += ex.GetType() == null ? &quot;no type&quot; : ex.GetType().ToString();
            msg += &quot;\n\nTargetSite:\n&quot;;
            msg += ex.TargetSite == null ? &quot;no targetsite&quot; :
ex.TargetSite.ToString();
            msg += &quot;\n\nTrace:\n&quot;;
            msg += ex.StackTrace == &quot;&quot; ? &quot;no trace&quot; : ex.StackTrace;

            if(ex.InnerException != null) msg +=
GetExceptionStr(ex.InnerException, ++depth);

            return msg;
        }

        public static string ShowTime(DateTime dt1, DateTime dt2)
        {
            if(dt1.Year == 1) return &quot;&quot;;
            if(dt2.Year == 1) return &quot;&quot;;
            TimeSpan sp = dt2.Subtract(dt1);
            return sp.TotalMilliseconds.ToString() + &quot; ms&quot;;
        }

        public static void showMsgBox(string txt)
        {
            Toolkit.showMsgBox(txt, &quot;&quot;);
        }
        public static void showMsgBox(string txt, string title)
        {    
            if(txt == null) txt = &quot;ERROR showMsgBox: The given txt is null&quot;;

            UIAlertView av = new UIAlertView();
            av.Message = txt;
            av.Title = title;
            av.AddButton(&quot;OK&quot;);
            av.Delegate = new MyMsgBoxDelegate();
            av.Show();

            Toolkit.WaitFor(ref Toolkit.MsgBoxMutex, 50);
        }

        public static void WaitFor(ref bool wait, int SleepTime)
        {
            wait = true;
            while(wait)
            {
                NSRunLoop.Current.LimitDateForMode(NSRunLoopMode.Default); 
                if(SleepTime&gt;0) 
                    Thread.Sleep(SleepTime);
            }
        }

        // --------------------------------------------------------------------
        public class MyMsgBoxDelegate : UIAlertViewDelegate    
        {

            public override void Clicked (UIAlertView alertview, int
buttonIndex)
            {
                //Toolkit.MsgBoxIdx   = buttonIndex;
                Toolkit.MsgBoxMutex = false;
            }
            public override void Canceled (UIAlertView alertView)
            {
                //Toolkit.MsgBoxIdx   = -1;
                Toolkit.MsgBoxMutex = false;
            }
        }

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="112818.html">[Mono-bugs] [Bug 656843] Printing on an iPad using MonoTouch 3.2.x not working as expected
</A></li>
	<LI>Next message: <A HREF="112820.html">[Mono-bugs] [Bug 709999] New: Resurface of Bug 643456 - gmcs fails to infer generic type arguments when the &quot;source&quot; type is a generic constraint
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#112819">[ date ]</a>
              <a href="thread.html#112819">[ thread ]</a>
              <a href="subject.html#112819">[ subject ]</a>
              <a href="author.html#112819">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
