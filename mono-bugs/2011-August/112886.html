<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 711286] New: Garbage Collector has conflict with	accelerometer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20711286%5D%20New%3A%20Garbage%20Collector%20has%20conflict%20with%0A%09accelerometer&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="112885.html">
   <LINK REL="Next"  HREF="112887.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 711286] New: Garbage Collector has conflict with	accelerometer</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20711286%5D%20New%3A%20Garbage%20Collector%20has%20conflict%20with%0A%09accelerometer&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 711286] New: Garbage Collector has conflict with	accelerometer">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Aug  9 10:59:10 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="112885.html">[Mono-bugs] [Bug 684281] Section index text is not shown for	UITableView
</A></li>
        <LI>Next message: <A HREF="112887.html">[Mono-bugs] [Bug 711286] Garbage Collector has conflict with	accelerometer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#112886">[ date ]</a>
              <a href="thread.html#112886">[ thread ]</a>
              <a href="subject.html#112886">[ subject ]</a>
              <a href="author.html#112886">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=711286">https://bugzilla.novell.com/show_bug.cgi?id=711286</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=711286#c0">https://bugzilla.novell.com/show_bug.cgi?id=711286#c0</A>


           Summary: Garbage Collector has conflict with accelerometer
    Classification: Mono
           Product: MonoDroid
           Version: SVN
          Platform: Other
        OS/Version: Other
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Runtime
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">chan.ramon at gmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Created an attachment (id=444977)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=444977">http://bugzilla.novell.com/attachment.cgi?id=444977</A>)
Simple game to reproduce and workaround the crashing problem

User-Agent:       Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0.1) Gecko/20100101
Firefox/4.0.1

This case is very similar to the case someone escalated earlier called
&quot;TouchTest&quot;. This problem is happening more often when using accelerometer
input.

If garbage collector is collecting garbage (GC.Collect()) when accelerometer
sensor is turned on, the application will very likely crash without any
debugging information.

This problem had been puzzling me for 3 weeks and I finally confirmed it is
definitely related to Garbage Collection and found out a workaround.



Reproducible: Always

Steps to Reproduce:
1. I have attached a simple &quot;AccelerometerTest&quot; project. The output is just an
android logo moving around controlled by accelerometer. 
2. Try to just tilt around the phone, you will likely get crashed within 20
seconds.  
3. There is a function in GamePanel class called &quot;Update()&quot; which is the update
of a typical game loop. You can see that I enforce GC to collect every 200
updates. When the GC is collecting possibly the accelerometer is also working
at the same time causing the crash. My workwround is adding Sensor.Stop() and
Sensor.Start() will isolate the accelerometer from GC. No more crash if you do
that.


Expected Results:  
Garbage collector should still work properly and the app should not crash even
if I don't have my workaround.

Accelerometer is an important part of mobile game development. Turning it on
will crash the game when garbage collector is working.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="112885.html">[Mono-bugs] [Bug 684281] Section index text is not shown for	UITableView
</A></li>
	<LI>Next message: <A HREF="112887.html">[Mono-bugs] [Bug 711286] Garbage Collector has conflict with	accelerometer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#112886">[ date ]</a>
              <a href="thread.html#112886">[ thread ]</a>
              <a href="subject.html#112886">[ subject ]</a>
              <a href="author.html#112886">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
