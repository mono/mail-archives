<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 445130] New: TreeView ExpandAll() is very slow
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20445130%5D%20New%3A%20TreeView%20ExpandAll%28%29%20is%20very%20slow&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="082300.html">
   <LINK REL="Next"  HREF="082303.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 445130] New: TreeView ExpandAll() is very slow</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20445130%5D%20New%3A%20TreeView%20ExpandAll%28%29%20is%20very%20slow&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 445130] New: TreeView ExpandAll() is very slow">bugzilla_noreply at novell.com
       </A><BR>
    <I>Fri Nov 14 10:10:20 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="082300.html">[Mono-bugs] [Bug 324134] Add support for Mac OS X / ppc64
</A></li>
        <LI>Next message: <A HREF="082303.html">[Mono-bugs] [Bug 445130] TreeView ExpandAll() is very slow
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82301">[ date ]</a>
              <a href="thread.html#82301">[ thread ]</a>
              <a href="subject.html#82301">[ subject ]</a>
              <a href="author.html#82301">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=445130">https://bugzilla.novell.com/show_bug.cgi?id=445130</A>


           Summary: TreeView ExpandAll() is very slow
           Product: Mono: Class Libraries
           Version: 2.0
          Platform: i586
        OS/Version: Windows XP
            Status: NEW
          Severity: Major
          Priority: P5 - None
         Component: Windows.Forms
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">alisdair_little at yahoo.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


Description of Problem:
Using TreeView ExpandAll is very slow with large amounts of nodes, this is
despite wrapping the ExpandAll call in BeginUpdate and EndUpdate.

Doing ExpandAll without mono for 3272 nodes takes less than one second.
Under Mono - Windows XP &amp; Linux Ubuntu: 42 Seconds

I am overriding DrawNode (no graphics, just colored text)

Steps to reproduce the problem:
1. Add a treeview to a form 
2. Create a custom node draw method
  2.1. This can be as simple as using e.Graphics.DrawString
3. Call treeview.BeginUpdate()
4. Add a large number of nodes
5. Call treeview.ExpandAll()
6. Call treeview.EndUpdate()

IMPORTANT
I tried removing BeginUpdate and EndUpdate and it took the same amount of time
(47 seconds). This does seem to point to these statements being ignored.


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>








































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="082300.html">[Mono-bugs] [Bug 324134] Add support for Mac OS X / ppc64
</A></li>
	<LI>Next message: <A HREF="082303.html">[Mono-bugs] [Bug 445130] TreeView ExpandAll() is very slow
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82301">[ date ]</a>
              <a href="thread.html#82301">[ thread ]</a>
              <a href="subject.html#82301">[ subject ]</a>
              <a href="author.html#82301">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
