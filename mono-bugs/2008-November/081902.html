<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 438886] Mono 2.0.1 Windows.Form crashes (Windows	only)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20438886%5D%20Mono%202.0.1%20Windows.Form%20crashes%20%28Windows%0A%09only%29&In-Reply-To=bug-438886-28286%40https.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="082696.html">
   <LINK REL="Next"  HREF="081903.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 438886] Mono 2.0.1 Windows.Form crashes (Windows	only)</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20438886%5D%20Mono%202.0.1%20Windows.Form%20crashes%20%28Windows%0A%09only%29&In-Reply-To=bug-438886-28286%40https.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 438886] Mono 2.0.1 Windows.Form crashes (Windows	only)">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Nov  5 04:43:05 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="082696.html">[Mono-bugs] [Bug 441738] Scrolling on an Panel with AutoScroll = true causes flickering
</A></li>
        <LI>Next message: <A HREF="081903.html">[Mono-bugs] [Bug 438594] Cannot deserialise base64Binary XmlText
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81902">[ date ]</a>
              <a href="thread.html#81902">[ thread ]</a>
              <a href="subject.html#81902">[ subject ]</a>
              <a href="author.html#81902">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=438886">https://bugzilla.novell.com/show_bug.cgi?id=438886</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">andyhume32 at yahoo.co.uk</A> added comment
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=438886#c10">https://bugzilla.novell.com/show_bug.cgi?id=438886#c10</A>


Andy Hume &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">andyhume32 at yahoo.co.uk</A>&gt; changed:

           What    |Removed                                         |Added
----------------------------------------------------------------------------
                 CC|                                                |<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">andyhume32 at yahoo.co.uk</A>




--- Comment #10 from Andy Hume &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">andyhume32 at yahoo.co.uk</A>&gt;  2008-11-05 02:43:04 MST ---
This looks similar to bug 368492 &quot;[win32] OutOfMemoryException when using
ToolStrip with Icons&quot;.  It fixed itself...

I see the problem and also other similar issues on HEAD (well r117246).  For
instance PropertyGrid fails at startup loading its icons with the crash/stack
below, and the repro from that older bug fails too (again below -- this run
failed with SIGILL).  About one out of five times the crash doesn't happen but
the process uses lots of CPU and never appears.

I have reverted r114585 (I think correctly!) and still see the problem.  There
are no strings being marshalled in these two cases so does that also suggest
that that patch isn't to blame?

PropertyGrid:
[[
Stacktrace:

  at (wrapper managed-to-native)
System.Drawing.GDIPlus.GdipLoadImageFromStream(System.Runtime.InteropServices.ComTypes.IStream,intptr&amp;)
&lt;0x00004&gt;
  at (wrapper managed-to-native)
System.Drawing.GDIPlus.GdipLoadImageFromStream(System.Runtime.InteropServices.ComTypes.IStream,intptr&amp;)
&lt;0xffffffff&gt;
  at System.Drawing.Image.InitFromStream (System.IO.Stream) [0x000c1] in
D:\cygwin\usr\src\mono\mcs\class\System.Drawing\System.Drawing\Image.cs:300
  at System.Drawing.Bitmap..ctor (System.Type,string) [0x00047] in
D:\cygwin\usr\src\mono\mcs\class\System.Drawing\System.Drawing\Bitmap.cs:133
  at (wrapper remoting-invoke-with-check) System.Drawing.Bitmap..ctor
(System.Type,string) &lt;0xffffffff&gt;
  at System.Windows.Forms.PropertyGrid..ctor () [0x00265] in
D:\cygwin\usr\src\mono\mcs\class\Managed.Windows.Forms\System.Windows.Forms\PropertyGrid.cs:154
  at (wrapper remoting-invoke-with-check)
System.Windows.Forms.PropertyGrid..ctor () &lt;0xffffffff&gt;
  at PropGridFormControlsTabView.RunGrid () &lt;0x00098&gt;
  at PropGridFormControlsTabView.Main (string[]) &lt;0x00021&gt;
  at (wrapper runtime-invoke)
PropGridFormControlsTabView.runtime_invoke_void_object
(object,intptr,intptr,intptr) &lt;0xffffffff&gt;

This application has requested the Runtime to terminate it in an unusual way.
]]


bug-368492_SimpleToolStrip.exe
[[
Unhandled Exception: System.Reflection.TargetInvocationException: Exception has
been thrown by the target of an invocation. ---&gt;
System.ExecutionEngineException: SIGILL
  at (wrapper managed-to-native)
System.Drawing.GDIPlus:GdipLoadImageFromStream(System.Runtime.InteropServices.ComTypes.IStream,intptr&amp;)
  at System.Drawing.Image.InitFromStream (System.IO.Stream stream) [0x000c1]
inD:\cygwin\usr\src\mono\mcs\class\System.Drawing\System.Drawing\Image.cs:300
  at System.Drawing.Image..ctor (System.Runtime.Serialization.SerializationInfo
info, StreamingContext context) [0x00055] in
D:\cygwin\usr\src\mono\mcs\class\System.Drawing\System.Drawing\Image.cs:76
  at System.Drawing.Bitmap..ctor
(System.Runtime.Serialization.SerializationInfo info, StreamingContext context)
[0x00000] in D:\cygwin\usr\src\mono\mcs\build\common\Consts.cs:1
  at (wrapper managed-to-native) System.Reflection.MonoCMethod:InternalInvoke
(object,object[],System.Exception&amp;)
  at System.Reflection.MonoCMethod.Invoke (System.Object obj, BindingFlags
invokeAttr, System.Reflection.Binder binder, System.Object[] parameters,
System.Globalization.CultureInfo culture) [0x000a6] in
D:\cygwin\usr\src\mono\mcs\class\corlib\System.Reflection\MonoMethod.cs:434
  --- End of inner exception stack trace ---
.. continues into serialization and resources
]]


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="082696.html">[Mono-bugs] [Bug 441738] Scrolling on an Panel with AutoScroll = true causes flickering
</A></li>
	<LI>Next message: <A HREF="081903.html">[Mono-bugs] [Bug 438594] Cannot deserialise base64Binary XmlText
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#81902">[ date ]</a>
              <a href="thread.html#81902">[ thread ]</a>
              <a href="subject.html#81902">[ subject ]</a>
              <a href="author.html#81902">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
