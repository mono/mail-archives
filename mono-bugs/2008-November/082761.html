<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 449577] New: csharp crashes when declaring multidimensional array
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20449577%5D%20New%3A%20csharp%20crashes%20when%20declaring%0A%20multidimensional%20array&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="082759.html">
   <LINK REL="Next"  HREF="082763.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 449577] New: csharp crashes when declaring multidimensional array</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20449577%5D%20New%3A%20csharp%20crashes%20when%20declaring%0A%20multidimensional%20array&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 449577] New: csharp crashes when declaring multidimensional array">bugzilla_noreply at novell.com
       </A><BR>
    <I>Thu Nov 27 03:13:16 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="082759.html">[Mono-bugs] [Bug 390571] [PATCH] Setting Form.WindowState should set Form.ActiveForm
</A></li>
        <LI>Next message: <A HREF="082763.html">[Mono-bugs] [Bug 449793] New: Font info not serialized in the	viewstate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82761">[ date ]</a>
              <a href="thread.html#82761">[ thread ]</a>
              <a href="subject.html#82761">[ subject ]</a>
              <a href="author.html#82761">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=449577">https://bugzilla.novell.com/show_bug.cgi?id=449577</A>


           Summary: csharp crashes when declaring multidimensional array
           Product: Mono: Tools
           Version: SVN
          Platform: x86
        OS/Version: Ubuntu
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: tools
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">Tomasz.Kubacki at gmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: Community User


DESCRIPTION:
csharp crashes when declaring multidimensional array,
mono was taken from svn rev. 120075

STEPS TO REPRODUCE:
1. run csharp tool
2. declare array f.e. int[,] r = new int[2,2];

RESULTS:
tool crash

REAL SESSION LOG:

Mono C# Shell, type &quot;help;&quot; for help

Enter statements below.
csharp&gt; int[,] r = new int[4,3];
MonoArrayMethod**
ERROR:reflection.c:10601:resolve_object: code should not be reached
Stacktrace:

  at Mono.CSharp.Evaluator.Evaluate (string,object&amp;,bool&amp;) &lt;0xffffffff&gt;
  at Mono.CSharp.Evaluator.Evaluate (string,object&amp;,bool&amp;) &lt;0x00084&gt;
  at Mono.CSharpShell.Evaluate (string) &lt;0x00031&gt;
  at Mono.CSharpShell.ReadEvalPrintLoopWith (Mono.CSharpShell/ReadLiner)
&lt;0x00071&gt;
  at Mono.CSharpShell.ReadEvalPrintLoop () &lt;0x0005f&gt;
  at Mono.CSharpShell.Run () &lt;0x00010&gt;
  at Mono.Driver.Main (string[]) &lt;0x00158&gt;
  at (wrapper runtime-invoke) Mono.Driver.runtime_invoke_int_object
(object,intptr,intptr,intptr) &lt;0xffffffff&gt;

Native stacktrace:

        /usr/local/mono//bin/mono [0x80c9b44]
        [0xb803c410]
        /lib/tls/i686/cmov/libc.so.6(abort+0x188) [0xb7dd4248]
        /usr/lib/libglib-2.0.so.0(g_assertion_message+0x123) [0xb7fb2b73]
        /usr/local/mono//bin/mono [0x8175a76]
        /usr/local/mono//bin/mono [0x8175abc]
        /usr/local/mono//bin/mono [0x8120635]
        /usr/local/mono//bin/mono(mono_get_method_full+0xa1) [0x8120a11]
        /usr/local/mono//bin/mono [0x80686f0]
        /usr/local/mono//bin/mono [0x807c3d3]
        /usr/local/mono//bin/mono [0x806198d]
        /usr/local/mono//bin/mono [0x8063356]
        /usr/local/mono//bin/mono [0x80d2430]
        [0xb7d35774]
        [0xb71882e2]
        [0xb7182712]
        [0xb71e3e10]
        [0xb71e3d91]
        [0xb7a9c411]
        [0xb7a9c203]
        /usr/local/mono//bin/mono(mono_runtime_exec_main+0x16e) [0x814b80e]
        /usr/local/mono//bin/mono(mono_runtime_run_main+0x16b) [0x814bf2b]
        /usr/local/mono//bin/mono(mono_main+0x18f2) [0x80b3542]
        /usr/local/mono//bin/mono [0x805aea1]
        /lib/tls/i686/cmov/libc.so.6(__libc_start_main+0xe5) [0xb7dbd685]
        /usr/local/mono//bin/mono [0x805add1]
Cannot access memory at address 0x7e30

Debug info from gdb:

[Thread debugging using libthread_db enabled]
[New Thread 0xb7d7b6d0 (LWP 32304)]
[New Thread 0xb76a4b90 (LWP 32306)]
[New Thread 0xb76c8b90 (LWP 32305)]
0xb803c430 in __kernel_vsyscall ()
  3 Thread 0xb76c8b90 (LWP 32305)  0xb803c430 in __kernel_vsyscall ()
  2 Thread 0xb76a4b90 (LWP 32306)  0xb803c430 in __kernel_vsyscall ()
  1 Thread 0xb7d7b6d0 (LWP 32304)  0xb803c430 in __kernel_vsyscall ()

Thread 3 (Thread 0xb76c8b90 (LWP 32305)):
#0  0xb803c430 in __kernel_vsyscall ()
#1  0xb7f38906 in nanosleep () from /lib/tls/i686/cmov/libpthread.so.0
#2  0x081ab9d8 in collection_thread (unused=0x0) at collection.c:34
#3  0xb7f3150f in start_thread () from /lib/tls/i686/cmov/libpthread.so.0
#4  0xb7e887ee in clone () from /lib/tls/i686/cmov/libc.so.6

Thread 2 (Thread 0xb76a4b90 (LWP 32306)):
#0  0xb803c430 in __kernel_vsyscall ()
#1  0xb7f37405 in sem_wait@@GLIBC_2.1 ()
   from /lib/tls/i686/cmov/libpthread.so.0
#2  0x0815ea69 in finalizer_thread (unused=0x0) at gc.c:928
#3  0x08163f68 in start_wrapper (data=0x8843e90) at threads.c:620
#4  0x081af536 in thread_start_routine (args=0x88498b4) at threads.c:279
#5  0x081c3510 in GC_start_routine (arg=0x35f20) at pthread_support.c:1382
#6  0xb7f3150f in start_thread () from /lib/tls/i686/cmov/libpthread.so.0
#7  0xb7e887ee in clone () from /lib/tls/i686/cmov/libc.so.6

Thread 1 (Thread 0xb7d7b6d0 (LWP 32304)):
#0  0xb803c430 in __kernel_vsyscall ()
#1  0xb7e84dc7 in syscall () from /lib/tls/i686/cmov/libc.so.6
#2  0x080c9be7 in mono_handle_native_sigsegv (signal=6, ctx=0xbfa3cfbc)
    at mini-exceptions.c:1406
#3  &lt;signal handler called&gt;
#4  0xb803c430 in __kernel_vsyscall ()
#5  0xb7dd2880 in raise () from /lib/tls/i686/cmov/libc.so.6
#6  0xb7dd4248 in abort () from /lib/tls/i686/cmov/libc.so.6
#7  0xb7fb2b73 in g_assertion_message () from /usr/lib/libglib-2.0.so.0
#8  0x08175a76 in resolve_object (image=0xde000, obj=0x8ae10, 
    handle_class=0xbfa3d554, context=0x0) at reflection.c:10601
#9  0x08175abc in mono_reflection_lookup_dynamic_token (image=0xde000, 
    token=167772162, valid_token=1, handle_class=0xbfa3d554, context=0x0)
    at reflection.c:10411
#10 0x08120635 in mono_get_method_from_token (image=0xde000, token=167772162, 
    klass=0x0, context=0x0, used_context=0xbfa3d598) at loader.c:1365
#11 0x08120a11 in mono_get_method_full (image=0xde000, token=167772162, 
    klass=0x0, context=0x0) at loader.c:1499
#12 0x080686f0 in mini_get_method (cfg=0x8c3f800, m=0x6, token=32304, 
    klass=0x0, context=0x0) at method-to-ir.c:4336
#13 0x0807c3d3 in mono_method_to_ir (cfg=0x8c3f800, method=0x8c2a8f4, 
    start_bblock=0x8c47e14, end_bblock=0x8c47eac, return_var=0x0, 
    dont_inline=0x8c3f680, inline_args=0x0, inline_offset=0, is_virtual_call=0)
    at method-to-ir.c:7087
#14 0x0806198d in mini_method_compile (method=0x8c2a8f4, opts=64055807, 
    domain=0x34ee0, run_cctors=&lt;value optimized out&gt;, 
    compile_aot=&lt;value optimized out&gt;, parts=0) at mini.c:3264
#15 0x08063356 in mono_jit_compile_method (method=0x8c2a8f4) at mini.c:3914
#16 0x080d2430 in mono_delegate_trampoline (regs=0xbfa3db38, 
    code=0xb7188404 &quot;\203&#196;\020\203&#236;\f&#232;M&quot;, tramp_data=0x8c36154, tramp=0x0)
    at mini-trampolines.c:614
#17 0xb7d35774 in ?? ()
#18 0xb71882e2 in ?? ()
#19 0xb7182712 in ?? ()
#20 0xb71e3e10 in ?? ()
#21 0xb71e3d91 in ?? ()
#22 0xb7a9c411 in ?? ()
#23 0xb7a9c203 in ?? ()
#24 0x0814b80e in mono_runtime_exec_main (method=0x0, args=0x3be70, exc=0x0)
    at object.c:3296
#25 0x0814bf2b in mono_runtime_run_main (method=0x882efbc, argc=0, 
    argv=0xbfa3dfa8, exc=0x0) at object.c:3084
#26 0x080b3542 in mono_main (argc=2, argv=0xbfa3dfa4) at driver.c:967
#27 0x0805aea1 in main (argc=) at main.c:34
#0  0xb803c430 in __kernel_vsyscall ()

=================================================================
Got a SIGABRT while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
=================================================================


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="082759.html">[Mono-bugs] [Bug 390571] [PATCH] Setting Form.WindowState should set Form.ActiveForm
</A></li>
	<LI>Next message: <A HREF="082763.html">[Mono-bugs] [Bug 449793] New: Font info not serialized in the	viewstate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82761">[ date ]</a>
              <a href="thread.html#82761">[ thread ]</a>
              <a href="subject.html#82761">[ subject ]</a>
              <a href="author.html#82761">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
