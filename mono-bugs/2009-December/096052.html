<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 565923] runtime always SEGFAULT booc.exe upon exit and reports exit code 139
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20565923%5D%20runtime%20always%20SEGFAULT%20booc.exe%20upon%20exit%0A%20and%20reports%20exit%20code%20139&In-Reply-To=bug-565923-28286%40http.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="096047.html">
   <LINK REL="Next"  HREF="096053.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 565923] runtime always SEGFAULT booc.exe upon exit and reports exit code 139</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20565923%5D%20runtime%20always%20SEGFAULT%20booc.exe%20upon%20exit%0A%20and%20reports%20exit%20code%20139&In-Reply-To=bug-565923-28286%40http.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 565923] runtime always SEGFAULT booc.exe upon exit and reports exit code 139">bugzilla_noreply at novell.com
       </A><BR>
    <I>Sat Dec 26 08:07:09 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="096047.html">[Mono-bugs] [Bug 565923] runtime always SEGFAULT booc.exe upon exit and reports exit code 139
</A></li>
        <LI>Next message: <A HREF="096053.html">[Mono-bugs] [Bug 565923] runtime always SEGFAULT booc.exe upon exit and reports exit code 139
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#96052">[ date ]</a>
              <a href="thread.html#96052">[ thread ]</a>
              <a href="subject.html#96052">[ subject ]</a>
              <a href="author.html#96052">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=565923">http://bugzilla.novell.com/show_bug.cgi?id=565923</A>

<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=565923#c3">http://bugzilla.novell.com/show_bug.cgi?id=565923#c3</A>


Rodrigo Oliveira &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">rodrigobamboo at gmail.com</A>&gt; changed:

           What    |Removed                     |Added
----------------------------------------------------------------------------
             Status|NEEDINFO                    |NEW
      Info Provider|<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">rodrigobamboo at gmail.com</A>     |

--- Comment #3 from Rodrigo Oliveira &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">rodrigobamboo at gmail.com</A>&gt; 2009-12-26 13:07:04 UTC ---
(In reply to comment #1)
&gt;<i> Please provide a standard alone test case or, at least, a proper stack trace of
</I>&gt;<i> the crash.
</I>&gt;<i> 
</I>&gt;<i> To get a stack trace, run it under gdb and do a &quot;t a a bt&quot; when it stops at the
</I>&gt;<i> signal.
</I>
booc.exe is part of the mono distribution and you could have the stack trace
yourself by simply following my instructions together with yours probably in
less time than it took you to downgrade the bug severity. 

The shutdown crash renders booc.exe almost completely useless for IDEs and
build tools such as msbuild and nant will always assume a failure because of
the faulty exit code. I would really appreciate a little more goodwill on your
part.

For your convenience, here's a dump of my gdb session:

(gdb) run /Library/Frameworks/Mono.framework/Versions/2.6.1/lib/boo/booc.exe
/tmp/bugzilla_565923.boo
Starting program: /Library/Frameworks/Mono.framework/Versions/2.6.1/bin/mono
/Library/Frameworks/Mono.framework/Versions/2.6.1/lib/boo/booc.exe
/tmp/bugzilla_565923.boo
Reading symbols for shared libraries
++++++++...........................................................................
done
Boo Compiler version 0.9.2.3383 (2.6.1 (tarball Thu Dec 17 10:19:23 MST 2009))

Program received signal SIGSEGV, Segmentation fault.
0x000fdc49 in mono_type_size (t=0x105784c, align=0xbffff198) at metadata.c:3822
3822    metadata.c: No such file or directory.
    in metadata.c
(gdb) t a a bt

Thread 3 (process 83445 thread 0x1703):
#0  0x91d983a6 in mach_wait_until ()
#1  0x91e0f3ad in nanosleep ()
#2  0x0016bf13 in collection_thread (unused=0x0) at collection.c:34
#3  0x91dc9155 in _pthread_start ()
#4  0x91dc9012 in thread_start ()

Thread 2 (process 83445 thread 0x1103):
#0  0x91d98286 in mach_msg_trap ()
#1  0x91d9fa7c in mach_msg ()
#2  0x0024da3c in mach_exception_thread (arg=0x0) at mini-darwin.c:131
#3  0x91dc9155 in _pthread_start ()
#4  0x91dc9012 in thread_start ()

Thread 1 (process 83445 local thread 0x2e03):
#0  0x000fdc49 in mono_type_size (t=0x105784c, align=0xbffff198) at
metadata.c:3822
#1  0x00151003 in do_free_special (key=0x105778c, value=0x100003c, data=0x0) at
threads.c:3678
#2  0x008d511f in g_hash_table_foreach ()
#3  0x0015112b in mono_alloc_special_static_data_free
(special_static_fields=0x9f9348) at threads.c:3700
#4  0x000a25a5 in mono_domain_free (domain=0xc04e58, force=1) at domain.c:1934
#5  0x001b541f in mini_cleanup (domain=0xc04e58) at mini.c:5537
#6  0x0000708e in mono_main (argc=3, argv=0xbffff46c) at driver.c:1757
#7  0x00003d86 in main (argc=3, argv=0xbffff46c) at main.c:34
(gdb) 

Please also find a shell script attached to this bug that you might want to use
as an acceptance test.

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="096047.html">[Mono-bugs] [Bug 565923] runtime always SEGFAULT booc.exe upon exit and reports exit code 139
</A></li>
	<LI>Next message: <A HREF="096053.html">[Mono-bugs] [Bug 565923] runtime always SEGFAULT booc.exe upon exit and reports exit code 139
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#96052">[ date ]</a>
              <a href="thread.html#96052">[ thread ]</a>
              <a href="subject.html#96052">[ subject ]</a>
              <a href="author.html#96052">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
