<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 567522] New: BinaryFormatter doesn't deserialize	object right
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20567522%5D%20New%3A%20BinaryFormatter%20doesn%27t%20deserialize%0A%09object%20right&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="096093.html">
   <LINK REL="Next"  HREF="096095.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 567522] New: BinaryFormatter doesn't deserialize	object right</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20567522%5D%20New%3A%20BinaryFormatter%20doesn%27t%20deserialize%0A%09object%20right&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 567522] New: BinaryFormatter doesn't deserialize	object right">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Dec 29 06:15:36 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="096093.html">[Mono-bugs] [Bug 567520] Web Service returns incorrect JSON object when using ASP.NET AJAX
</A></li>
        <LI>Next message: <A HREF="096095.html">[Mono-bugs] [Bug 567530] New: System.ArgumentException: Form cannot be added to the Controls collection that has a valid MDI parent
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#96094">[ date ]</a>
              <a href="thread.html#96094">[ thread ]</a>
              <a href="subject.html#96094">[ subject ]</a>
              <a href="author.html#96094">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=567522">http://bugzilla.novell.com/show_bug.cgi?id=567522</A>

<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=567522#c0">http://bugzilla.novell.com/show_bug.cgi?id=567522#c0</A>


           Summary: BinaryFormatter doesn't deserialize object right
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.6.x
          Platform: x86
        OS/Version: Other
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: CORLIB
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mika.aalto at tut.fi</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Created an attachment (id=334470)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=334470">http://bugzilla.novell.com/attachment.cgi?id=334470</A>)
Testing application

User-Agent:       Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.6)
Gecko/20091216 Mandriva Linux/1.9.1.6-0.1mdv2010.0 (2010.0) Firefox/3.5.6

Object serialized in MS .NET environment using BinaryFormatter can't be
deserialized with mono.

Attached example application contains data.bin file which is object serialized
in MS .NET. Running attached application deserializes this file correctly with
MS .NET but not with mono.

Reproducible: Always

Steps to Reproduce:
1. Run attached example application
2.
3.
Actual Results:  
Unhandled Exception: System.Runtime.Serialization.SerializationException:
Unexpected binary element: 0
  at System.Runtime.Serialization.Formatters.Binary.ObjectReader.ReadObject
(BinaryElement element, System.IO.BinaryReader reader, System.Int64&amp; objectId,
System.Object&amp; value, System.Runtime.Serialization.SerializationInfo&amp; info)
[0x00000] in &lt;filename unknown&gt;:0
  at System.Runtime.Serialization.Formatters.Binary.ObjectReader.ReadValue
(System.IO.BinaryReader reader, System.Object parentObject, Int64
parentObjectId, System.Runtime.Serialization.SerializationInfo info,
System.Type valueType, System.String fieldName, System.Reflection.MemberInfo
memberInfo, System.Int32[] indices) [0x00000] in &lt;filename unknown&gt;:0
  at
System.Runtime.Serialization.Formatters.Binary.ObjectReader.ReadObjectContent
(System.IO.BinaryReader reader,
System.Runtime.Serialization.Formatters.Binary.TypeMetadata metadata, Int64
objectId, System.Object&amp; objectInstance,
System.Runtime.Serialization.SerializationInfo&amp; info) [0x00000] in &lt;filename
unknown&gt;:0
  at
System.Runtime.Serialization.Formatters.Binary.ObjectReader.ReadObjectInstance
(System.IO.BinaryReader reader, Boolean isRuntimeObject, Boolean hasTypeInfo,
System.Int64&amp; objectId, System.Object&amp; value,
System.Runtime.Serialization.SerializationInfo&amp; info) [0x00000] in &lt;filename
unknown&gt;:0
  at System.Runtime.Serialization.Formatters.Binary.ObjectReader.ReadObject
(BinaryElement element, System.IO.BinaryReader reader, System.Int64&amp; objectId,
System.Object&amp; value, System.Runtime.Serialization.SerializationInfo&amp; info)
[0x00000] in &lt;filename unknown&gt;:0
  at System.Runtime.Serialization.Formatters.Binary.ObjectReader.ReadObject
(BinaryElement element, System.IO.BinaryReader reader, System.Int64&amp; objectId,
System.Object&amp; value, System.Runtime.Serialization.SerializationInfo&amp; info)
[0x00000] in &lt;filename unknown&gt;:0
  at System.Runtime.Serialization.Formatters.Binary.ObjectReader.ReadNextObject
(BinaryElement element, System.IO.BinaryReader reader) [0x00000] in &lt;filename
unknown&gt;:0
  at
System.Runtime.Serialization.Formatters.Binary.ObjectReader.ReadObjectGraph
(BinaryElement elem, System.IO.BinaryReader reader, Boolean readHeaders,
System.Object&amp; result, System.Runtime.Remoting.Messaging.Header[]&amp; headers)
[0x00000] in &lt;filename unknown&gt;:0
  at
System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.NoCheckDeserialize
(System.IO.Stream serializationStream,
System.Runtime.Remoting.Messaging.HeaderHandler handler) [0x00000] in &lt;filename
unknown&gt;:0
  at System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Deserialize
(System.IO.Stream serializationStream) [0x00000] in &lt;filename unknown&gt;:0
  at SerializationTest.MainClass.Main (System.String[] args) [0x00000] in
&lt;filename unknown&gt;:0

Expected Results:  
Class deserialized

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="096093.html">[Mono-bugs] [Bug 567520] Web Service returns incorrect JSON object when using ASP.NET AJAX
</A></li>
	<LI>Next message: <A HREF="096095.html">[Mono-bugs] [Bug 567530] New: System.ArgumentException: Form cannot be added to the Controls collection that has a valid MDI parent
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#96094">[ date ]</a>
              <a href="thread.html#96094">[ thread ]</a>
              <a href="subject.html#96094">[ subject ]</a>
              <a href="author.html#96094">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
