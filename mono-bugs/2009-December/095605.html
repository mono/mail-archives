<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 562043] New: Web services request returns 'invalid length' if kernel-mode auth is not enabled on IIS 7.0
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20562043%5D%20New%3A%20Web%20services%20request%20returns%20%27invalid%0A%20length%27%20if%20kernel-mode%20auth%20is%20not%20enabled%20on%20IIS%207.0&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="095609.html">
   <LINK REL="Next"  HREF="095608.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 562043] New: Web services request returns 'invalid length' if kernel-mode auth is not enabled on IIS 7.0</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20562043%5D%20New%3A%20Web%20services%20request%20returns%20%27invalid%0A%20length%27%20if%20kernel-mode%20auth%20is%20not%20enabled%20on%20IIS%207.0&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 562043] New: Web services request returns 'invalid length' if kernel-mode auth is not enabled on IIS 7.0">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Dec  9 19:55:29 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="095609.html">[Mono-bugs] [Bug 562015] deadlock using --compile-all on a bad	assembly
</A></li>
        <LI>Next message: <A HREF="095608.html">[Mono-bugs] [Bug 562043] HttpWebRequest returns 'invalid length' if kernel-mode auth is not enabled on IIS 7.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#95605">[ date ]</a>
              <a href="thread.html#95605">[ thread ]</a>
              <a href="subject.html#95605">[ subject ]</a>
              <a href="author.html#95605">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=562043">http://bugzilla.novell.com/show_bug.cgi?id=562043</A>

<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=562043#c0">http://bugzilla.novell.com/show_bug.cgi?id=562043#c0</A>


           Summary: Web services request returns 'invalid length' if
                    kernel-mode auth is not enabled on IIS 7.0
    Classification: Mono
           Product: MonoTouch
           Version: unspecified
          Platform: Macintosh
        OS/Version: Mac OS X 10.6
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Class Libraries
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">gnorton at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">pbowden at microsoft.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Created an attachment (id=331869)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=331869">http://bugzilla.novell.com/attachment.cgi?id=331869</A>)
Sample MonoTouch code that reproduces the bug

User-Agent:       Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_2; en-us)
AppleWebKit/531.21.8 (KHTML, like Gecko) Version/4.0.4 Safari/531.21.10

Microsoft-based server applications such as Microsoft Exchange install web
service components in IIS and set kernel mode authentication to 'false' (this
is a setting on the Windows auth module of the IIS virtual directory). However,
with this default value, attempts from Mono to retrieve data through web
services result in an 'invalid length' exception. If the server administrator
sets kernel mode auth to 'true' web service requests from Mono then succeed.

A sample MonoTouch app is provided where this behavior can be seen. The app
makes a call to an IIS host called janeksbox.com which is an Exchange Server
hosted on my machine.

Reproducible: Always

Steps to Reproduce:
1. Run the attached MonoTouch code sample in MonoDevelop
2. Click the 'Works' button and look at the web request behavior in the
Application Output window. The request will succeed as expected.
3. Click the 'Doesn't Work' button, and again look at the Application Output
window. Mono is throwing an invalid length exception.

Both URLs resolve to the same web services application. The only difference is
that the server-side IIS virtual directories are configured differently (one
has kernel-mode set, the other doesn't).
Actual Results:  
Invalid length error is thrown unexpectedly.

Expected Results:  
Web services request should succeed.

Feel free to send me mail at <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">pbowden at microsoft.com</A> if you need more info. FYI
-I'm part of the Exchange product development team here at Microsoft.

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>







































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="095609.html">[Mono-bugs] [Bug 562015] deadlock using --compile-all on a bad	assembly
</A></li>
	<LI>Next message: <A HREF="095608.html">[Mono-bugs] [Bug 562043] HttpWebRequest returns 'invalid length' if kernel-mode auth is not enabled on IIS 7.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#95605">[ date ]</a>
              <a href="thread.html#95605">[ thread ]</a>
              <a href="subject.html#95605">[ subject ]</a>
              <a href="author.html#95605">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
