<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 560682] New: ilasm can't compile il code generated	by GPCP
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20560682%5D%20New%3A%20ilasm%20can%27t%20compile%20il%20code%20generated%0A%09by%20GPCP&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="095765.html">
   <LINK REL="Next"  HREF="095506.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 560682] New: ilasm can't compile il code generated	by GPCP</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20560682%5D%20New%3A%20ilasm%20can%27t%20compile%20il%20code%20generated%0A%09by%20GPCP&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 560682] New: ilasm can't compile il code generated	by GPCP">bugzilla_noreply at novell.com
       </A><BR>
    <I>Fri Dec  4 02:14:12 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="095765.html">[Mono-bugs] [Bug 560679] HttpListener with Basic authentication raises an error when a non-Basic request arrived
</A></li>
        <LI>Next message: <A HREF="095506.html">[Mono-bugs] [Bug 560682] ilasm can't compile il code generated by	GPCP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#95504">[ date ]</a>
              <a href="thread.html#95504">[ thread ]</a>
              <a href="subject.html#95504">[ subject ]</a>
              <a href="author.html#95504">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=560682">http://bugzilla.novell.com/show_bug.cgi?id=560682</A>

<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=560682#c0">http://bugzilla.novell.com/show_bug.cgi?id=560682#c0</A>


           Summary: ilasm can't compile il code generated by GPCP
    Classification: Mono
           Product: Mono: Compilers
           Version: 2.4.x
          Platform: x86
        OS/Version: Windows 7
            Status: NEW
          Severity: Critical
          Priority: P5 - None
         Component: IL assembler
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jankit at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">pyle3 at yandex.ru</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 6.1; ru; rv:1.9.1.5)
Gecko/20091102 Firefox/3.5.5 (.NET CLR 3.5.30729)

for .net exist compiler of component pascal
<A HREF="http://plas.fit.qut.edu.au/gpcp/Downloads.aspx">http://plas.fit.qut.edu.au/gpcp/Downloads.aspx</A>
it have version for win .net
i was try start compiler under ubuntu 9-10 + mono
target is way to work GPCP under linux
what i was did:

1) env variables:
PATH=$PATH:$HOME/gpcp-CLR_1.3.9/bin
export PATH
CPSYM=.:$HOME/gpcp-CLR_1.3.9/libs:$HOME/gpcp-CLR_1.3.9/libs/NetSystem
export CPSYM

2) file: gpcp-CLR_1.3.9/source/libs/csharp/GPFiles.cs
changes from:
public static char pathSep = ';';
public static char fileSep = '\\';
public static char optChar = '/';
to:
public static char pathSep = ':';
public static char fileSep = '\u002F';
public static char optChar = '-';

compiling
csc /t:library /debug GPFiles.cs

need copy new GPFiles.dll to gpcp-CLR_1.3.9/bin

3) file: gpcp-CLR_1.3.9/source/gpcp/csharp/MsilAsm.cs 

changes:
from:
return System.IO.Directory.GetParent(s).ToString() + &quot;\\&quot;;
asm.StartInfo.FileName = GetDotNetRuntimeInstallDirectory() + &quot;ilasm&quot;;
to:
return System.IO.Directory.GetParent(s).ToString() + &quot;\u002F&quot;;
asm.StartInfo.FileName = GetDotNetRuntimeInstallDirectory() + &quot;ilasm.exe&quot;;
or simply to:
asm.StartInfo.FileName = &quot;ilasm2&quot;;

compiling:
csc /t:library /r:RTS.dll /debug MsilAsm.cs

need copy new MsilAsm.dll to gpcp-CLR_1.3.9/bin


trying to compile by gpcp:
cd gpcp-CLR_1.3.9/NETexamples/hello/
gpcp Hello.cp  //must make 3 files: cps, il, exe/dll

error by ilasm2:
&quot;Hello.il (28, 9) : Error : irrecoverable syntax error

***** FAILURE *****&quot;

work normally:
gpcp -code Hello.cp // must make only 2 files: cps, il

!!!problem!!!
1) i was try compile Hello.il by hands by ilasm/ilasm2 on ubuntu it make me
this error
2) i was try compile Hello.il by hands by ilasm/ilasm2 on windows7 it make me
this error
3) i was try compile Hello.il by hands by ms ilasm on windows7 and it compile
it correctly
so this is problem in mono's ilasm/ilasm2

Reproducible: Always

Steps to Reproduce:
1.
2.
3.

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="095765.html">[Mono-bugs] [Bug 560679] HttpListener with Basic authentication raises an error when a non-Basic request arrived
</A></li>
	<LI>Next message: <A HREF="095506.html">[Mono-bugs] [Bug 560682] ilasm can't compile il code generated by	GPCP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#95504">[ date ]</a>
              <a href="thread.html#95504">[ thread ]</a>
              <a href="subject.html#95504">[ subject ]</a>
              <a href="author.html#95504">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
