<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 71413][Nor] Changed - Path.GetFullPath is heavy on string allocations
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:bugzilla-daemon%40bugzilla.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="024268.html">
   <LINK REL="Next"  HREF="024270.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 71413][Nor] Changed - Path.GetFullPath is heavy on string allocations
   </H1>
    <B>bugzilla-daemon@bugzilla.ximian.com
    </B> 
    <A HREF="mailto:bugzilla-daemon%40bugzilla.ximian.com"
       TITLE="[Mono-bugs] [Bug 71413][Nor] Changed - Path.GetFullPath is heavy on string allocations">bugzilla-daemon@bugzilla.ximian.com
       </A><BR>
    <I>Tue, 18 Jan 2005 14:52:22 -0500 (EST)</I>
    <P><UL>
        <LI> Previous message: <A HREF="024268.html">[Mono-bugs] [Bug 71416][Blo] New - Mono does not run NAnt anymore
</A></li>
        <LI> Next message: <A HREF="024270.html">[Mono-bugs] [Bug 59296][Nor] Changed - long mul.ovf doesn't always works
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24269">[ date ]</a>
              <a href="thread.html#24269">[ thread ]</a>
              <a href="subject.html#24269">[ subject ]</a>
              <a href="author.html#24269">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="mailto:bmaurer@users.sf.net.">bmaurer@users.sf.net.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=71413">http://bugzilla.ximian.com/show_bug.cgi?id=71413</A>

--- shadow/71413	2005-01-18 14:22:08.000000000 -0500
+++ shadow/71413.tmp.28597	2005-01-18 14:52:22.000000000 -0500
@@ -1,14 +1,14 @@
 Bug#: 71413
 Product: Mono: Class Libraries
 Version: 1.1
-OS: 
+OS: unknown
 OS Details: 
 Status: NEW   
 Resolution: 
-Severity: 
+Severity: Unknown
 Priority: Normal
 Component: CORLIB
 AssignedTo: <A HREF="mailto:mono-bugs@ximian.com">mono-bugs@ximian.com</A>                            
 ReportedBy: <A HREF="mailto:joeshaw@novell.com">joeshaw@novell.com</A>               
 QAContact: <A HREF="mailto:mono-bugs@ximian.com">mono-bugs@ximian.com</A>
 TargetMilestone: ---
@@ -27,6 +27,24 @@
 smarter when looking for multiple path separators and . and ..
 
 Of the 1.1 megs I was able to shave off half of it thanks to
 conditionalizing the call with Path.IsPathRooted, but the other half is
 still there because it's called in the constructor for DirectoryInfo.  Can
 we eliminate that call?  Or at least optimize Path.GetFullPath.
+
+------- Additional Comments From <A HREF="mailto:bmaurer@users.sf.net">bmaurer@users.sf.net</A>  2005-01-18 14:52 -------
+Well, the allocations made are temporary. We are not using
+stringbuilders, so there is no bloat in the strings.
+
+One thing that i did notice is that GetCurrentDirectory returns a
+different string each time. We might want to smartly cache the value
+from the last call.
+
+In Beagle, you can use a clever little trick to reduce memory usage:
+
+Store the path as a combo of directory name and file name. This way,
+if you have:
+
+/home/benm/blah
+/home/benm/foo
+/home/benm/bar
+You can store `/home/benm/' in memory once, and save some ram there.

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="024268.html">[Mono-bugs] [Bug 71416][Blo] New - Mono does not run NAnt anymore
</A></li>
	<LI> Next message: <A HREF="024270.html">[Mono-bugs] [Bug 59296][Nor] Changed - long mul.ovf doesn't always works
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24269">[ date ]</a>
              <a href="thread.html#24269">[ thread ]</a>
              <a href="subject.html#24269">[ subject ]</a>
              <a href="author.html#24269">[ author ]</a>
         </LI>
       </UL>
</body></html>
