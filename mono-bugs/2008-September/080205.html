<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 430504] [2.0 on Win] SslStream.BeginAuthenticateAsServer() does not work
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20430504%5D%20%5B2.0%20on%20Win%5D%0A%20SslStream.BeginAuthenticateAsServer%28%29%20does%20not%20work&In-Reply-To=bug-430504-28286%40https.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="080204.html">
   <LINK REL="Next"  HREF="080081.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 430504] [2.0 on Win] SslStream.BeginAuthenticateAsServer() does not work</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20430504%5D%20%5B2.0%20on%20Win%5D%0A%20SslStream.BeginAuthenticateAsServer%28%29%20does%20not%20work&In-Reply-To=bug-430504-28286%40https.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 430504] [2.0 on Win] SslStream.BeginAuthenticateAsServer() does not work">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Sep 30 18:11:45 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="080204.html">[Mono-bugs] [Bug 430504] [2.0 on Win] SslStream.BeginAuthenticateAsServer() does not work
</A></li>
        <LI>Next message: <A HREF="080081.html">[Mono-bugs] [Bug 430507] New: Evaluator API: error output.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80205">[ date ]</a>
              <a href="thread.html#80205">[ thread ]</a>
              <a href="subject.html#80205">[ subject ]</a>
              <a href="author.html#80205">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=430504">https://bugzilla.novell.com/show_bug.cgi?id=430504</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">amacbeth at gmail.com</A> added comment
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=430504#c3">https://bugzilla.novell.com/show_bug.cgi?id=430504#c3</A>


Adam MacBeth &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">amacbeth at gmail.com</A>&gt; changed:

           What    |Removed                                         |Added
----------------------------------------------------------------------------
                 CC|                                                |<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">amacbeth at gmail.com</A>




--- Comment #3 from Adam MacBeth &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">amacbeth at gmail.com</A>&gt;  2008-09-30 16:11:45 MDT ---
I've been tracking down this bug as well. I have attached a test case that
reproduces the problem. To run, just compile the sample code with gmcs and make
sure the dummy.pfx file is in the executable directory when running it.

What I've found is that until the client sends data on the SslStream, the
authentication will not complete. This is very different from .NET and quite
broken.

The code in the #if 1/#endif does this, which causes authentication to
complete, though the program crashes on exit with this code enabled. This
doesn't work on .NET and fails with an InvalidOperationException.

I've tried running this code with MONO_THREADS_PER_CPU=2000 in the hope that
this is a ThreadPool issue, but this does not help.

Tested with Mono 1.9.1/2.0 on Linux/Windows

Actual Results:

Hangs after 1 authentication completes.

Expected Results (observed on .NET):

Authentication successful for all connections.


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="080204.html">[Mono-bugs] [Bug 430504] [2.0 on Win] SslStream.BeginAuthenticateAsServer() does not work
</A></li>
	<LI>Next message: <A HREF="080081.html">[Mono-bugs] [Bug 430507] New: Evaluator API: error output.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80205">[ date ]</a>
              <a href="thread.html#80205">[ thread ]</a>
              <a href="subject.html#80205">[ subject ]</a>
              <a href="author.html#80205">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
