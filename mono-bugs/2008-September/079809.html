<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 428216] [PATCH] return Dictionary keys as in added	order
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20428216%5D%20%5BPATCH%5D%20return%20Dictionary%20keys%20as%20in%20added%0A%09order&In-Reply-To=bug-428216-28286%40https.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="079753.html">
   <LINK REL="Next"  HREF="079899.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 428216] [PATCH] return Dictionary keys as in added	order</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20428216%5D%20%5BPATCH%5D%20return%20Dictionary%20keys%20as%20in%20added%0A%09order&In-Reply-To=bug-428216-28286%40https.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 428216] [PATCH] return Dictionary keys as in added	order">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon Sep 22 11:02:13 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="079753.html">[Mono-bugs] [Bug 428216] [PATCH] return Dictionary keys as in added	order
</A></li>
        <LI>Next message: <A HREF="079899.html">[Mono-bugs] [Bug 428216] [PATCH] return Dictionary keys as in added	order
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79809">[ date ]</a>
              <a href="thread.html#79809">[ thread ]</a>
              <a href="subject.html#79809">[ subject ]</a>
              <a href="author.html#79809">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=428216">https://bugzilla.novell.com/show_bug.cgi?id=428216</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jpryor at novell.com</A> added comment
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=428216#c4">https://bugzilla.novell.com/show_bug.cgi?id=428216#c4</A>





--- Comment #4 from Jonathan Pryor &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jpryor at novell.com</A>&gt;  2008-09-22 09:02:13 MDT ---
For one thing, the MSDN docs do NOT say that the order of .Keys and .Values
will be the same as the insertion order.  That's an implementation detail. 
Perhaps we should copy it, perhaps not, but it is NOT documented.

For another, I'm missing the point of your patch. 
Dictionary`2.KeyCollection.Enumerator.Current would return
host.keySlots[current] with your patch, instead of host_enumerator.CurrentKey.

But what's Dictionary`2.Enumerator.CurrentKey do?  &quot;return dictionary.keySlots
[cur];&quot;

The only significant change I see is in Enumerator.MoveNext(), where e.g.
Dictionary`2.KeyCollection.Enumerator.MoveNext() just increments an integer,
while Dictionary`2.Enumerator.MoveNext() goes through the dictionary.table or
dictionary.linkSlots arrays.

Wouldn't it be easier to just make Dictionary`2.Enumerator.MoveNext() increment
an index value (as your Dictionary`2.KeyCollection.Enumerator.MoveNext() does),
thus implicitly making KeyCollection &amp; ValueCollection get your updated
behavior, at the &quot;cost&quot; of making Dictionary`2.Enumerator return elements in
insertion order instead of...whatever order it currently uses.  Which shouldn't
matter, as the order of returned values isn't defined (afaik).


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>
































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="079753.html">[Mono-bugs] [Bug 428216] [PATCH] return Dictionary keys as in added	order
</A></li>
	<LI>Next message: <A HREF="079899.html">[Mono-bugs] [Bug 428216] [PATCH] return Dictionary keys as in added	order
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79809">[ date ]</a>
              <a href="thread.html#79809">[ thread ]</a>
              <a href="subject.html#79809">[ subject ]</a>
              <a href="author.html#79809">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
