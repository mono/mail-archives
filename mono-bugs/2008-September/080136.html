<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 430732] New: v0.8.0 : bug in resolve() or serviceremoved() functions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20430732%5D%20New%3A%20v0.8.0%20%3A%20bug%20in%20resolve%28%29%20or%0A%20serviceremoved%28%29%20functions&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="080134.html">
   <LINK REL="Next"  HREF="080142.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 430732] New: v0.8.0 : bug in resolve() or serviceremoved() functions</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20430732%5D%20New%3A%20v0.8.0%20%3A%20bug%20in%20resolve%28%29%20or%0A%20serviceremoved%28%29%20functions&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 430732] New: v0.8.0 : bug in resolve() or serviceremoved() functions">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon Sep 29 14:33:08 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="080134.html">[Mono-bugs] [Bug 419989] Mono crashes in x86_64 SLES10 SP2 (OES2 SP1) virtualized environment - XEN
</A></li>
        <LI>Next message: <A HREF="080142.html">[Mono-bugs] [Bug 430732] v0.8.0 : bug in resolve() or	serviceremoved() functions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80136">[ date ]</a>
              <a href="thread.html#80136">[ thread ]</a>
              <a href="subject.html#80136">[ subject ]</a>
              <a href="author.html#80136">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=430732">https://bugzilla.novell.com/show_bug.cgi?id=430732</A>


           Summary: v0.8.0 : bug in resolve() or serviceremoved() functions
           Product: Mono: Class Libraries
           Version: unspecified
          Platform: Other
        OS/Version: Windows XP
            Status: NEW
          Severity: Blocker
          Priority: P5 - None
         Component: Mono.Zeroconf
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">abockover at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mpfj at mimc.co.uk</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


In the code I'm developing, I have tested simple services scanning using
ServiceAdded and ServiceRemoved.  This all works fine ... i.e. I can see
machines being added / removed as they are powered on / off.

But if I then use ...

args.Service.Resolved += OnServiceResolved;
args.Service.Resolve();

.. I can only see machines being *added* and never removed.

This also shows up with the MZClient tool.  Using MZClient, I first do a
default scan.  As you can see, it returns a list of (Ubuntu) workstations
(which are allrunning Avahi by default).

C:\Desktop&gt;MZClient.exe
Hit ^C when you're bored waiting for responses.

*** Found name = 'ubuntu [00:18:f3:4a:23:70]', type = '_workstation._tcp.',
domain = 'local.'
*** Found name = 'mailhost [00:30:1b:ad:79:33]', type = '_workstation._tcp.',
domain = 'local.'
*** Found name = 'mpfj-ubuntu [00:13:8f:c7:99:f7]', type =
'_workstation._tcp.',domain = 'local.'
*** Found name = 'mob-ubuntu [00:1f:d0:55:7d:33]', type =
'_workstation._tcp.',domain = 'local.'
^C

But if I then use the &quot;--resolve&quot; option, it only gives us one result ...

C:\Desktop&gt;MZClient.exe --resolve
Hit ^C when you're bored waiting for responses.

*** Found name = 'ubuntu [00:18:f3:4a:23:70]', type = '_workstation._tcp.',
domain = 'local.'
*** Resolved name = 'ubuntu\032[00:18:f3:4a:23:70]._workstation._tcp.local.',
host ip = '10.0.0.100', hostname = , port = '9', interface = '3', address
type ='Any', TXT Record = [ = '']

.. and that's it !!

So I'm guessing something's broken in the resolve code ??? 

Note that this test works correctly in 0.7.6 (but I've had to move to 0.8.0 to
fix a the garbage collection bug under .NET in 0.7.6).


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>


































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="080134.html">[Mono-bugs] [Bug 419989] Mono crashes in x86_64 SLES10 SP2 (OES2 SP1) virtualized environment - XEN
</A></li>
	<LI>Next message: <A HREF="080142.html">[Mono-bugs] [Bug 430732] v0.8.0 : bug in resolve() or	serviceremoved() functions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80136">[ date ]</a>
              <a href="thread.html#80136">[ thread ]</a>
              <a href="subject.html#80136">[ subject ]</a>
              <a href="author.html#80136">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
