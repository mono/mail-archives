<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 430409] New: MONO quits when accessing MySQL TINYTEXT with CHARACTER SET ascii
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20430409%5D%20New%3A%20MONO%20quits%20when%20accessing%20MySQL%0A%20TINYTEXT%20with%20CHARACTER%20SET%20ascii&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="080053.html">
   <LINK REL="Next"  HREF="080056.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 430409] New: MONO quits when accessing MySQL TINYTEXT with CHARACTER SET ascii</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20430409%5D%20New%3A%20MONO%20quits%20when%20accessing%20MySQL%0A%20TINYTEXT%20with%20CHARACTER%20SET%20ascii&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 430409] New: MONO quits when accessing MySQL TINYTEXT with CHARACTER SET ascii">bugzilla_noreply at novell.com
       </A><BR>
    <I>Sat Sep 27 10:30:28 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="080053.html">[Mono-bugs] [Bug 430408] New: OdbcDataReader fails on SqlServer	with bigint row
</A></li>
        <LI>Next message: <A HREF="080056.html">[Mono-bugs] [Bug 430413] New: System.Data.OracleClient:
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80054">[ date ]</a>
              <a href="thread.html#80054">[ thread ]</a>
              <a href="subject.html#80054">[ subject ]</a>
              <a href="author.html#80054">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=430409">https://bugzilla.novell.com/show_bug.cgi?id=430409</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">awunwpa7 at yahoo.com.ph</A> added comment
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=430409#c419224">https://bugzilla.novell.com/show_bug.cgi?id=430409#c419224</A>

           Summary: MONO quits when accessing MySQL TINYTEXT with CHARACTER
                    SET ascii
           Product: Mono: Class Libraries
           Version: 2.0
          Platform: PC
        OS/Version: Windows XP
            Status: NEW
          Severity: Minor
          Priority: P5 - None
         Component: Sys.Data
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">bnc-blr-team-mono at forge.provo.novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">awunwpa7 at yahoo.com.ph</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: Beta-Customer


Description of Problem:

There seems to be an issue with the OdbcDataReader that causes the MS framework
to raise an AccessViolationError exception (someone tried to read or write in
protected memory). The MONO framework instead does not throw an exception and
I'm unable to catch one, but the application quits immediately without telling
why. It might be the actual error behind this is in the MySQL ODBC-Driver and
not in the framework, but MONO crashes.

How this happens:

When I access a MySQL cell of type &quot;TINYTEXT&quot; that has a non-null value in it,
for example a simple text like &quot;test&quot;, the OdbcDataReader crashes. This happens
only if the &quot;TINYTEXT&quot; was created with &quot;CHARACTER SET ascii&quot; (utf8 and others
do not cause trouble for some reason).

Test code:

public void Foo(string MyValidConnectionString)
{
  OdbcConnection TestConn = new OdbcConnection(MyValidConnectionString);

  TestConn.Open();

  OdbcCommand NewCmd = new OdbcCommand(&quot;SELECT * FROM test_table&quot;, TestConn);

  OdbcDataReader NewRdr = NewCmd.ExecuteReader();

  // some tinytext column index:
  int TinytextIdx = 0;

  bool GotSomething = NewRdr.Read();

  if (GotSomething)
  {
    Console.WriteLine(&quot;Going in&quot;);

    try
    {
      // no matter what access method is used...
      NewRdr.IsDBNull(TinytextIdx); // &lt;- ...this let's MONO quit
    }
    catch(Exception)
    {
      Console.WriteLine(&quot;Got exception&quot;);
    }
    finally
    {
      Console.WriteLine(&quot;This never happens&quot;);
    }
  }
}

How often does this happen? 

Always (on Windows with MySQL 5.0)

Tested MySQL Server: 5.0.51b-community-nt
Tested MySQL ODBC-Driver: v5.1

Additional info:

I filed a similar bug that got addressed already: #419224


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>



































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="080053.html">[Mono-bugs] [Bug 430408] New: OdbcDataReader fails on SqlServer	with bigint row
</A></li>
	<LI>Next message: <A HREF="080056.html">[Mono-bugs] [Bug 430413] New: System.Data.OracleClient:
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80054">[ date ]</a>
              <a href="thread.html#80054">[ thread ]</a>
              <a href="subject.html#80054">[ subject ]</a>
              <a href="author.html#80054">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
