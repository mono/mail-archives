<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 429926] [Patch] OutputCache doesn't work
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20429926%5D%20%5BPatch%5D%20OutputCache%20doesn%27t%20work&In-Reply-To=bug-429926-28286%40https.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="079969.html">
   <LINK REL="Next"  HREF="079994.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 429926] [Patch] OutputCache doesn't work</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20429926%5D%20%5BPatch%5D%20OutputCache%20doesn%27t%20work&In-Reply-To=bug-429926-28286%40https.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 429926] [Patch] OutputCache doesn't work">bugzilla_noreply at novell.com
       </A><BR>
    <I>Thu Sep 25 11:55:41 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="079969.html">[Mono-bugs] [Bug 429926] [Patch] OutputCache doesn't work
</A></li>
        <LI>Next message: <A HREF="079994.html">[Mono-bugs] [Bug 429926] [Patch] OutputCache doesn't work
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79971">[ date ]</a>
              <a href="thread.html#79971">[ thread ]</a>
              <a href="subject.html#79971">[ subject ]</a>
              <a href="author.html#79971">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=429926">https://bugzilla.novell.com/show_bug.cgi?id=429926</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mhabersack at novell.com</A> added comment
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=429926#c4">https://bugzilla.novell.com/show_bug.cgi?id=429926#c4</A>





--- Comment #4 from Marek Habersack &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mhabersack at novell.com</A>&gt;  2008-09-25 09:55:41 MDT ---
(In reply to comment #3 from Juraj Skripsky)
&gt;<i> Marek, I'm not sure if my patch is really the right fix.
</I>Well, it's not incorrect.

&gt;<i> In my opinion, both the CachedRawResponse items as well as the CachedVaryBy
</I>&gt;<i> items should be stored in InternalCache. Otherwise we're polluting the user's
</I>&gt;<i> cache with items having Request.FilePath as key!
</I>Yes, that would be the ideal course of action. This was the primary goal when I
added the InternalCache.

&gt;<i> 
</I>&gt;<i> Why is the line &quot;internalCache.DependencyCache = cache;&quot; in HttpRuntime.cs
</I>I have no idea, I didn't add the code - but looking at it, using cache for
internalCache's dependency cache is indeed wrong. It should probably be an
entirely separate Cache instance. This cache is set on dependencies using
SetCache (see Cache.cs:160), which is why you see HasChanged in Dependency
using the &quot;normal&quot; cache.

&gt;<i> needed? This seems wrong. It implies that items in the internal cache can only
</I>&gt;<i> depend on items in the user cache.
</I>No, I don't think it implies that. DependencyCache seems to be just a separate
storage area for the depeendencies to use.

&gt;<i> I would much prefer to solve this issue first and then make OutputCache use
</I>&gt;<i> InternalCache for all items. What do you think?
</I>Let's try setting DependencyCache to 'new Cache ()' in HttpRuntime and use
InternalCache in OutputCacheModule for everything - please check if your
scenario works with such changes and, if yes, commit. Thanks!


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>










































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="079969.html">[Mono-bugs] [Bug 429926] [Patch] OutputCache doesn't work
</A></li>
	<LI>Next message: <A HREF="079994.html">[Mono-bugs] [Bug 429926] [Patch] OutputCache doesn't work
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79971">[ date ]</a>
              <a href="thread.html#79971">[ thread ]</a>
              <a href="subject.html#79971">[ subject ]</a>
              <a href="author.html#79971">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
