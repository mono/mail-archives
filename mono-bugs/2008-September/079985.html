<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 430040] New: TcpClient breaks after 1000	consecutive connections
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20430040%5D%20New%3A%20TcpClient%20breaks%20after%201000%0A%09consecutive%20connections&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="079987.html">
   <LINK REL="Next"  HREF="079988.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 430040] New: TcpClient breaks after 1000	consecutive connections</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20430040%5D%20New%3A%20TcpClient%20breaks%20after%201000%0A%09consecutive%20connections&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 430040] New: TcpClient breaks after 1000	consecutive connections">bugzilla_noreply at novell.com
       </A><BR>
    <I>Thu Sep 25 17:26:23 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="079987.html">[Mono-bugs] [Bug 430022] Trying to enable big-arrays for 32 bit pointer machines is not useful
</A></li>
        <LI>Next message: <A HREF="079988.html">[Mono-bugs] [Bug 430040] TcpClient breaks after 1000 consecutive	connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79985">[ date ]</a>
              <a href="thread.html#79985">[ thread ]</a>
              <a href="subject.html#79985">[ subject ]</a>
              <a href="author.html#79985">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=430040">https://bugzilla.novell.com/show_bug.cgi?id=430040</A>


           Summary: TcpClient breaks after 1000 consecutive connections
           Product: Mono: Class Libraries
           Version: 2.0
          Platform: i686
        OS/Version: SLES 10
            Status: NEW
          Severity: Major
          Priority: P5 - None
         Component: System
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">webservices at landmarkdigital.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: Development


We have a class that we have been using for some time which communicates with a
remote server via the class System.Net.Sockets.TcpClient.  We have had code
deployed which uses this class for some time, and have verified that it
functions correctly under mono 1.9.1.  However, when we recently performed a
load test on our services running on mono 2.0, we discovered that after 1000
connections have been established and disposed, the TcpClient constructor
throws an exception:


System.Net.Sockets.SocketException: Too many open files
  at System.Net.Sockets.Socket..ctor (AddressFamily family, SocketType type,
ProtocolType proto) [0x00000]
  at System.Net.Sockets.TcpClient.Init (AddressFamily family) [0x00000]
  at System.Net.Sockets.TcpClient.Connect (System.Net.IPAddress[] ipAddresses,
Int32 port) [0x00000]
  at System.Net.Sockets.TcpClient.Connect (System.String hostname, Int32 port)
[0x00000]
  at System.Net.Sockets.TcpClient..ctor (System.String hostname, Int32 port)
[0x00000] 


This error occurs within the context of web service (apache/mod_mono)
execution, and appears to be an issue with the TcpClient class. To reiterate,
this code has been verified to work in mono 1.9.1.  on the same operating
system.  I do not have example code to give right now, but can hopefully post
some soon.


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>


















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="079987.html">[Mono-bugs] [Bug 430022] Trying to enable big-arrays for 32 bit pointer machines is not useful
</A></li>
	<LI>Next message: <A HREF="079988.html">[Mono-bugs] [Bug 430040] TcpClient breaks after 1000 consecutive	connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79985">[ date ]</a>
              <a href="thread.html#79985">[ thread ]</a>
              <a href="subject.html#79985">[ subject ]</a>
              <a href="author.html#79985">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
