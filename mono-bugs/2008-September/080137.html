<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 430759] New: InvalidOperationException when XmlSerializing a generic collection ( You must implement a default accessor on &lt;MyCollection&gt; because it inherits from ICollection)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20430759%5D%20New%3A%20InvalidOperationException%20when%0A%20XmlSerializing%20a%20generic%20collection%20%28%20You%20must%20implement%20a%20default%20accessor%0A%20on%20%3CMyCollection%3E%20because%20it%20inherits%20from%20ICollection%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="080142.html">
   <LINK REL="Next"  HREF="080140.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 430759] New: InvalidOperationException when XmlSerializing a generic collection ( You must implement a default accessor on &lt;MyCollection&gt; because it inherits from ICollection)</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20430759%5D%20New%3A%20InvalidOperationException%20when%0A%20XmlSerializing%20a%20generic%20collection%20%28%20You%20must%20implement%20a%20default%20accessor%0A%20on%20%3CMyCollection%3E%20because%20it%20inherits%20from%20ICollection%29&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 430759] New: InvalidOperationException when XmlSerializing a generic collection ( You must implement a default accessor on &lt;MyCollection&gt; because it inherits from ICollection)">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon Sep 29 15:54:16 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="080142.html">[Mono-bugs] [Bug 430732] v0.8.0 : bug in resolve() or	serviceremoved() functions
</A></li>
        <LI>Next message: <A HREF="080140.html">[Mono-bugs] [Bug 419989] Mono crashes in x86_64 SLES10 SP2 (OES2 SP1) virtualized environment - XEN
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80137">[ date ]</a>
              <a href="thread.html#80137">[ thread ]</a>
              <a href="subject.html#80137">[ subject ]</a>
              <a href="author.html#80137">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=430759">https://bugzilla.novell.com/show_bug.cgi?id=430759</A>


           Summary: InvalidOperationException when XmlSerializing a generic
                    collection (You must implement a default accessor on
                    &lt;MyCollection&gt; because it inherits from ICollection)
           Product: Mono: Class Libraries
           Version: 1.9
          Platform: x86
        OS/Version: Ubuntu
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Sys.XML
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">atsushi at ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mail at danellis.co.uk</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


Created an attachment (id=242375)
 --&gt; (<A HREF="https://bugzilla.novell.com/attachment.cgi?id=242375">https://bugzilla.novell.com/attachment.cgi?id=242375</A>)
Example application

The following exception is raised when serializing a collection to XML. 
However the issue only occurs if the object is a generic collection without an
'integer' index:-

&quot;System.InvalidOperationException: You must implement a default accessor on
&lt;MyCollection&gt; because it inherits from ICollection&quot;

Example code is attached.  It has been compiled with both gmcs (mono) and csc
(windows).  The .NET compiled version will successfully write the out.xml file.
 The mono compiled version will display the unhandled exception.

Looking at the mono code online, I think the issue is in:-

/trunk/mcs/class/System.XML/System.Xml.Serialization/TypeData.cs

In the method 'GetIndexerProperty'.  It seems that GetIndexerProperty is
incorrectly looking for an int type for an indexer.  Whereas the example
application attached only has a string indexer.

As a hack I am able to add an int indexer which always returns null.  This then
works and the object is correctly serialized.  Thus proving that it doesn't
actually require the indexer to be an int.


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>


































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="080142.html">[Mono-bugs] [Bug 430732] v0.8.0 : bug in resolve() or	serviceremoved() functions
</A></li>
	<LI>Next message: <A HREF="080140.html">[Mono-bugs] [Bug 419989] Mono crashes in x86_64 SLES10 SP2 (OES2 SP1) virtualized environment - XEN
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80137">[ date ]</a>
              <a href="thread.html#80137">[ thread ]</a>
              <a href="subject.html#80137">[ subject ]</a>
              <a href="author.html#80137">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
