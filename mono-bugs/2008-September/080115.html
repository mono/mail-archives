<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 430483] Timer.OnTimer() function got called with	non-gui thread
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20430483%5D%20Timer.OnTimer%28%29%20function%20got%20called%20with%0A%09non-gui%20thread&In-Reply-To=bug-430483-28286%40https.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="080094.html">
   <LINK REL="Next"  HREF="080122.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 430483] Timer.OnTimer() function got called with	non-gui thread</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20430483%5D%20Timer.OnTimer%28%29%20function%20got%20called%20with%0A%09non-gui%20thread&In-Reply-To=bug-430483-28286%40https.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 430483] Timer.OnTimer() function got called with	non-gui thread">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon Sep 29 09:50:50 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="080094.html">[Mono-bugs] [Bug 430483] Timer.OnTimer() function got called with	non-gui thread
</A></li>
        <LI>Next message: <A HREF="080122.html">[Mono-bugs] [Bug 430483] Timer.OnTimer() function got called with	non-gui thread
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80115">[ date ]</a>
              <a href="thread.html#80115">[ thread ]</a>
              <a href="subject.html#80115">[ subject ]</a>
              <a href="author.html#80115">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=430483">https://bugzilla.novell.com/show_bug.cgi?id=430483</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">awunwpa7 at yahoo.com.ph</A> added comment
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=430483#c2">https://bugzilla.novell.com/show_bug.cgi?id=430483#c2</A>





--- Comment #2 from Steve Odbc &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">awunwpa7 at yahoo.com.ph</A>&gt;  2008-09-29 07:50:50 MDT ---
Created an attachment (id=242258)
 --&gt; (<A HREF="https://bugzilla.novell.com/attachment.cgi?id=242258">https://bugzilla.novell.com/attachment.cgi?id=242258</A>)
code that triggers invalid op exception

I mean the System.Windows.Forms.Timer and the method is just called &quot;Tick&quot;
(sorry for that, it used to be called OnTimer in VB years ago). Yes, marshal it
to the gui thread, since I'm convinced MS does the same (but I didn't check
their code).

And also yes, I wanted to state that MONO does not always check the thread. But
that is not a serious bug, since you can workaround with discipline (as long as
the Timer doesn't contradict). In MS you also need to pay attention to this,
since you don't catch those InvalidOperationException, but you avoid them from
the start.

The clue is, you need Application.Run() for those exceptions to work.
Application.Run() (with or without parameter - it does not matter) registers
the calling thread as the main thread. And from that moment on the
InvalidOperationException is thrown nearly always. I don't think you can just
add this functionality to each field, property and method, you rather need a
more general approach that kind of automatically does it for you.

Check my attachment to trigger exceptions.


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>



























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="080094.html">[Mono-bugs] [Bug 430483] Timer.OnTimer() function got called with	non-gui thread
</A></li>
	<LI>Next message: <A HREF="080122.html">[Mono-bugs] [Bug 430483] Timer.OnTimer() function got called with	non-gui thread
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80115">[ date ]</a>
              <a href="thread.html#80115">[ thread ]</a>
              <a href="subject.html#80115">[ subject ]</a>
              <a href="author.html#80115">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
