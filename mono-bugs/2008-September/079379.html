<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 426181] New: System.AccessViolation Doesn' t Contain The Same Private Fields As MS .NET
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20426181%5D%20New%3A%20System.AccessViolation%20Doesn%27%20t%0A%20Contain%20The%20Same%20Private%20Fields%20As%20MS%20.NET&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="079378.html">
   <LINK REL="Next"  HREF="079385.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 426181] New: System.AccessViolation Doesn' t Contain The Same Private Fields As MS .NET</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20426181%5D%20New%3A%20System.AccessViolation%20Doesn%27%20t%0A%20Contain%20The%20Same%20Private%20Fields%20As%20MS%20.NET&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 426181] New: System.AccessViolation Doesn' t Contain The Same Private Fields As MS .NET">bugzilla_noreply at novell.com
       </A><BR>
    <I>Sun Sep 14 18:01:27 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="079378.html">[Mono-bugs] [Bug 348751] System.IO.Ports.SerialPort.ReadExisting() throw NullReferenceException
</A></li>
        <LI>Next message: <A HREF="079385.html">[Mono-bugs] [Bug 426181] System.AccessViolationException Doesn' t Contain The Same Private Fields As MS .NET
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79379">[ date ]</a>
              <a href="thread.html#79379">[ thread ]</a>
              <a href="subject.html#79379">[ subject ]</a>
              <a href="author.html#79379">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=426181">https://bugzilla.novell.com/show_bug.cgi?id=426181</A>


           Summary: System.AccessViolation Doesn't Contain The Same Private
                    Fields As MS .NET
           Product: Mono: Class Libraries
           Version: 1.9
          Platform: All
        OS/Version: All
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: System
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">martin_costello at talk21.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: Customer


Created an attachment (id=239453)
 --&gt; (<A HREF="https://bugzilla.novell.com/attachment.cgi?id=239453">https://bugzilla.novell.com/attachment.cgi?id=239453</A>)
Example for getting private fields via reflection

Viewing the source for AccessViolation, the only field in the class is:

const int Result = unchecked ((int)0x80004003);

However, the Microsoft implementation also has fields for the fault address,
accessed memory address, and whether the access was read or write.  These
private fields can be seen when using MS Visual Studio with the debugger
running.

In some of my own code that uses P/Invoke, I have an exception handling class
that uses reflection to get the value of these fields to help diagnose crashes
in the library being loaded via P/Invoke.  The attachment shows how this is
achieved.

If the Mono implementation is different, this code is doomed to failure.  Due
to it's use of reflection, this wasn't spotted by MoMA, and only noticed at a
cursory glance at the class.

The Mono implementation of AccessViolationException should decalre these fields
in the same order as MS's, even if they cannot be set to anything meaningful.


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>









































































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="079378.html">[Mono-bugs] [Bug 348751] System.IO.Ports.SerialPort.ReadExisting() throw NullReferenceException
</A></li>
	<LI>Next message: <A HREF="079385.html">[Mono-bugs] [Bug 426181] System.AccessViolationException Doesn' t Contain The Same Private Fields As MS .NET
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#79379">[ date ]</a>
              <a href="thread.html#79379">[ thread ]</a>
              <a href="subject.html#79379">[ subject ]</a>
              <a href="author.html#79379">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
