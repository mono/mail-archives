<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 430804] Static readonly field optimization doesn' t account for changes via reflection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20430804%5D%20Static%20readonly%20field%20optimization%20doesn%27%0A%20t%20account%20for%20changes%20via%20reflection&In-Reply-To=bug-430804-28286%40https.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="080168.html">
   <LINK REL="Next"  HREF="080198.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 430804] Static readonly field optimization doesn' t account for changes via reflection</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20430804%5D%20Static%20readonly%20field%20optimization%20doesn%27%0A%20t%20account%20for%20changes%20via%20reflection&In-Reply-To=bug-430804-28286%40https.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 430804] Static readonly field optimization doesn' t account for changes via reflection">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Sep 30 15:14:11 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="080168.html">[Mono-bugs] [Bug 430804] Static readonly field optimization doesn' t account for changes via reflection
</A></li>
        <LI>Next message: <A HREF="080198.html">[Mono-bugs] [Bug 430804] Static readonly field optimization doesn' t account for changes via reflection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80190">[ date ]</a>
              <a href="thread.html#80190">[ thread ]</a>
              <a href="subject.html#80190">[ subject ]</a>
              <a href="author.html#80190">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=430804">https://bugzilla.novell.com/show_bug.cgi?id=430804</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jonbnews at hotmail.com</A> added comment
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=430804#c4">https://bugzilla.novell.com/show_bug.cgi?id=430804#c4</A>





--- Comment #4 from Jon Burgoyne &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jonbnews at hotmail.com</A>&gt;  2008-09-30 13:14:11 MDT ---
I disagree.  readonly fields can indeed be updated outside of the ctor/cctor as
shown in the test.  Using reflection to do the update is legitimate and is not
&quot;working around&quot; the system.  The .NET runtime will run the tests above with
the expected output.  I don't believe that the spec says anything about the
runtime behavior of readonly fields.  It only states the compile-time behavior.
 I believe the JIT is making the assumption that the field can't change once
it's initialized, which is an invalid assumption.  If the intent is to not
allow readonly fields to be changed after they're initialized, then I would
expect that trying to set them via reflection should fail.  Since setting them
via reflection succeeds, it's reasonable to assume that the update is picked up
by future references to that value.

I ask that you re-consider the validity of this issue.


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="080168.html">[Mono-bugs] [Bug 430804] Static readonly field optimization doesn' t account for changes via reflection
</A></li>
	<LI>Next message: <A HREF="080198.html">[Mono-bugs] [Bug 430804] Static readonly field optimization doesn' t account for changes via reflection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80190">[ date ]</a>
              <a href="thread.html#80190">[ thread ]</a>
              <a href="subject.html#80190">[ subject ]</a>
              <a href="author.html#80190">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
