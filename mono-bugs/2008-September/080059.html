<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 430455] New: Generic sharing makes MonoDevelop	crash.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20430455%5D%20New%3A%20Generic%20sharing%20makes%20MonoDevelop%0A%09crash.&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="080065.html">
   <LINK REL="Next"  HREF="080060.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 430455] New: Generic sharing makes MonoDevelop	crash.</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20430455%5D%20New%3A%20Generic%20sharing%20makes%20MonoDevelop%0A%09crash.&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 430455] New: Generic sharing makes MonoDevelop	crash.">bugzilla_noreply at novell.com
       </A><BR>
    <I>Sat Sep 27 22:36:59 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="080065.html">[Mono-bugs] [Bug 430450] ** ERROR **: MVAR 2 (S) cannot be expanded in this context with 2 instantiations
</A></li>
        <LI>Next message: <A HREF="080060.html">[Mono-bugs] [Bug 430455] Generic sharing makes MonoDevelop crash.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80059">[ date ]</a>
              <a href="thread.html#80059">[ thread ]</a>
              <a href="subject.html#80059">[ subject ]</a>
              <a href="author.html#80059">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=430455">https://bugzilla.novell.com/show_bug.cgi?id=430455</A>


           Summary: Generic sharing makes MonoDevelop crash.
           Product: Mono: Runtime
           Version: unspecified
          Platform: Other
        OS/Version: Other
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: generics
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">miguel at novell.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


Unless the value of MONO_GENERIC_SHARING is set to none, corlib or collections,
MonoDevelop will crash when you access the Edit/Preferences dialog box.

**
** ERROR:(method-to-ir.c:7205):mono_method_to_ir2: assertion failed:
(!method-&gt;klass-&gt;valuetype)
Stacktrace:

  at (wrapper static-rgctx-invoke)
System.Collections.Generic.SortedDictionary`2/KeyCollection/Enumerator&lt;string,
MonoDevelop.Components.Commands.ExtensionNodes.SchemeExtensionNode&gt;.static_rgctx_invoke_string__this__
() &lt;0x0001c&gt;
  at (wrapper static-rgctx-invoke)
System.Collections.Generic.SortedDictionary`2/KeyCollection/Enumerator&lt;string,
MonoDevelop.Components.Commands.ExtensionNodes.SchemeExtensionNode&gt;.static_rgctx_invoke_string__this__
() &lt;0xffffffff&gt;
  at MonoDevelop.Ide.Gui.OptionPanels.KeyBindingsPanel..ctor () &lt;0x00726&gt;
  at (wrapper runtime-invoke) object.runtime_invoke_void__this__
(object,intptr,intptr,intptr) &lt;0xffffffff&gt;
  at (wrapper managed-to-native) System.Reflection.MonoCMethod.InternalInvoke
(object,object[],System.Exception&amp;) &lt;0x0004e&gt;
  at (wrapper managed-to-native) System.Reflection.MonoCMethod.InternalInvoke
(object,object[],System.Exception&amp;) &lt;0xffffffff&gt;
  at System.Reflection.MonoCMethod.Invoke
(object,System.Reflection.BindingFlags,System.Reflection.Binder,object[],System.Globalization.CultureInfo)
&lt;0x000d3&gt;
  at System.Reflection.MonoCMethod.Invoke
(System.Reflection.BindingFlags,System.Reflection.Binder,object[],System.Globalization.CultureInfo)
&lt;0x0003d&gt;
  at System.Reflection.ConstructorInfo.Invoke (object[]) &lt;0x0003f&gt;
  at System.Activator.CreateInstance (System.Type,bool) &lt;0x0010b&gt;
  at Mono.Addins.RuntimeAddin.CreateInstance (string,bool) &lt;0x00037&gt;
  at MonoDevelop.Core.Gui.Codons.OptionsPanelNode.CreatePanel () &lt;0x00043&gt;
  at MonoDevelop.Core.Gui.Dialogs.OptionsDialog.CreatePage
(MonoDevelop.Core.Gui.Codons.OptionsDialogSection,object) &lt;0x004fd&gt;
  at MonoDevelop.Core.Gui.Dialogs.OptionsDialog.AddSection
(Gtk.TreeIter,MonoDevelop.Core.Gui.Codons.OptionsDialogSection,object)
&lt;0x003a7&gt;
  at MonoDevelop.Core.Gui.Dialogs.OptionsDialog.AddChildSections
(Gtk.TreeIter,MonoDevelop.Core.Gui.Codons.OptionsDialogSection,object)
&lt;0x00157&gt;
  at MonoDevelop.Core.Gui.Dialogs.OptionsDialog.AddSection
(Gtk.TreeIter,MonoDevelop.Core.Gui.Codons.OptionsDialogSection,object)
&lt;0x00391&gt;
  at MonoDevelop.Core.Gui.Dialogs.OptionsDialog.AddSection
(MonoDevelop.Core.Gui.Codons.OptionsDialogSection,object) &lt;0x00077&gt;
  at MonoDevelop.Core.Gui.Dialogs.OptionsDialog.FillTree () &lt;0x000cb&gt;
  at MonoDevelop.Core.Gui.Dialogs.OptionsDialog..ctor
(Gtk.Window,object,string) &lt;0x003b3&gt;
  at MonoDevelop.Ide.Gui.Workbench.ShowGlobalPreferencesDialog
(Gtk.Window,string) &lt;0x0006b&gt;
  at MonoDevelop.Ide.Gui.Workbench.ShowGlobalPreferencesDialog (Gtk.Window)
&lt;0x00013&gt;
  at MonoDevelop.Ide.Commands.MonodevelopPreferencesHandler.Run () &lt;0x0001b&gt;
  at MonoDevelop.Components.Commands.CommandHandler.Run (object) &lt;0x00010&gt;
  at MonoDevelop.Components.Commands.ActionCommand.DispatchCommand (object)
&lt;0x00084&gt;
  at MonoDevelop.Components.Commands.CommandManager.DispatchCommand
(object,object,object) &lt;0x0077a&gt;
  at MonoDevelop.Components.Commands.CommandManager.DispatchCommandFromAccel
(object,object,object) &lt;0x0007b&gt;
  at MonoDevelop.Components.Commands.CommandMenuItem.OnActivated () &lt;0x00047&gt;
  at Gtk.MenuItem.activated_cb (intptr) &lt;0x0006c&gt;
  at (wrapper native-to-managed) Gtk.MenuItem.activated_cb (intptr)
&lt;0xffffffff&gt;
  at (wrapper managed-to-native) Gtk.Application.gtk_main () &lt;0x00050&gt;
  at (wrapper managed-to-native) Gtk.Application.gtk_main () &lt;0xffffffff&gt;
  at Gtk.Application.Run () &lt;0x0000b&gt;
  at MonoDevelop.Ide.Gui.IdeApp.Run () &lt;0x0000b&gt;
  at MonoDevelop.Ide.Gui.IdeStartup.Run (string[]) &lt;0x00d03&gt;
  at MonoDevelop.Startup.SharpDevelopMain.Main (string[]) &lt;0x00073&gt;
  at (wrapper runtime-invoke)
MonoDevelop.Startup.SharpDevelopMain.runtime_invoke_int_string[]
(object,intptr,intptr,intptr) &lt;0xffffffff&gt;

Native stacktrace:

        monodevelop [0x42bdbe]
        /lib64/libpthread.so.0 [0x7f8e29721b30]
        /lib64/libc.so.6(gsignal+0x35) [0x7f8e291965c5]
        /lib64/libc.so.6(abort+0x183) [0x7f8e29197bb3]
        /usr/lib64/libglib-2.0.so.0(g_assertion_message+0x117) [0x7f8e29fc42a7]
        /usr/lib64/libglib-2.0.so.0 [0x7f8e29fc4742]
        monodevelop(mono_method_to_ir2+0x19149) [0x5990a9]
        monodevelop [0x56ce1d]
        monodevelop [0x56ec91]
        monodevelop [0x42df3e]
        [0x411ce165]

Debug info from gdb:

[Thread debugging using libthread_db enabled]
[New Thread 0x7f8e2a627730 (LWP 28011)]
[New Thread 0x423d0950 (LWP 28049)]
[New Thread 0x421cf950 (LWP 28043)]
[New Thread 0x41191950 (LWP 28039)]
[New Thread 0x40c2a950 (LWP 28038)]
[New Thread 0x41638950 (LWP 28036)]
[New Thread 0x403e5950 (LWP 28016)]
[New Thread 0x407d5950 (LWP 28015)]
[New Thread 0x40a29950 (LWP 28014)]
0x00007f8e2972090b in read () from /lib64/libpthread.so.0
  9 Thread 0x40a29950 (LWP 28014)  0x00007f8e29721251 in nanosleep () from
/lib64/libpthread.so.0
  8 Thread 0x407d5950 (LWP 28015)  0x00007f8e2971ddd9 in
pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
  7 Thread 0x403e5950 (LWP 28016)  0x00007f8e29721251 in nanosleep () from
/lib64/libpthread.so.0
  6 Thread 0x41638950 (LWP 28036)  0x00007f8e2971e05d in
pthread_cond_timedwait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
  5 Thread 0x40c2a950 (LWP 28038)  0x00007f8e2971e05d in
pthread_cond_timedwait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
  4 Thread 0x41191950 (LWP 28039)  0x00007f8e29229f7b in read () from
/lib64/libc.so.6
  3 Thread 0x421cf950 (LWP 28043)  0x00007f8e292376c8 in epoll_wait () from
/lib64/libc.so.6
  2 Thread 0x423d0950 (LWP 28049)  0x00007f8e2971e05d in
pthread_cond_timedwait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
  1 Thread 0x7f8e2a627730 (LWP 28011)  0x00007f8e2972090b in read () from
/lib64/libpthread.so.0

Thread 9 (Thread 0x40a29950 (LWP 28014)):
#0  0x00007f8e29721251 in nanosleep () from /lib64/libpthread.so.0
#1  0x000000000050b232 in collection_thread (unused=&lt;value optimized out&gt;) at
collection.c:34
#2  0x00007f8e2971a040 in start_thread () from /lib64/libpthread.so.0
#3  0x00007f8e292370cd in clone () from /lib64/libc.so.6

Thread 8 (Thread 0x407d5950 (LWP 28015)):
#0  0x00007f8e2971ddd9 in pthread_cond_wait@@GLIBC_2.3.2 () from
/lib64/libpthread.so.0
#1  0x0000000000521f35 in timedwait_signal_poll_cond (cond=0x927ff8,
mutex=0x927fd0, timeout=0x2b, alertable=-1) at handles.c:1490
#2  0x000000000052465f in _wapi_handle_timedwait_signal_handle (handle=&lt;value
optimized out&gt;, timeout=0x0, alertable=9600976) at handles.c:1570
#3  0x000000000051afed in WaitForSingleObjectEx (handle=0x404,
timeout=4294967295, alertable=0) at wait.c:205
#4  0x00000000004ab713 in finalizer_thread (unused=&lt;value optimized out&gt;) at
gc.c:930
#5  0x00000000004a5b13 in start_wrapper (data=&lt;value optimized out&gt;) at
threads.c:621
#6  0x000000000050c2eb in thread_start_routine (args=0x928328) at threadsc:279
#7  0x000000000053fc32 in GC_start_routine (arg=0x7f8e2a4d9e70) at
pthread_support.c:1382
#8  0x00007f8e2971a040 in start_thread () from /lib64/libpthread.so.0
#9  0x00007f8e292370cd in clone () from /lib64/libc.so.6

Thread 7 (Thread 0x403e5950 (LWP 28016)):
#0  0x00007f8e29721251 in nanosleep () from /lib64/libpthread.so.0
#1  0x000000000050b76b in SleepEx (ms=500, alertable=1) at threads.c:1018
#2  0x00000000004a513e in ves_icall_System_Threading_Thread_Sleep_internal
(ms=500) at threads.c:1052
#3  0x0000000040da88c5 in ?? ()
#4  0x0000000000981700 in ?? ()
#5  0x0000000040a21bb0 in ?? ()
#6  0x00007f8e27b0f8d0 in ?? ()
#7  0x0000000000000000 in ?? ()

Thread 6 (Thread 0x41638950 (LWP 28036)):
#0  0x00007f8e2971e05d in pthread_cond_timedwait@@GLIBC_2.3.2 () from
/lib64/libpthread.so.0
#1  0x0000000000521f10 in timedwait_signal_poll_cond (cond=0x92d638,
mutex=0x92d610, timeout=0x41637dc0, alertable=&lt;value optimized out&gt;) at
handles.c:1500
#2  0x000000000052465f in _wapi_handle_timedwait_signal_handle (handle=&lt;value
optimized out&gt;, timeout=0x41637dc0, alertable=9623056) at handles.c:1570
#3  0x000000000051aed8 in WaitForSingleObjectEx (handle=0x477, timeout=5000,
alertable=1) at wait.c:207
#4  0x00000000004a308b in
ves_icall_System_Threading_WaitHandle_WaitOne_internal (this=&lt;value optimized
out&gt;, handle=0x477, ms=5000, exitContext=&lt;value optimized out&gt;) at
threads.c:1441
#5  0x00000000412ce17e in ?? ()
#6  0x0000000000921820 in ?? ()
#7  0x0000000000921820 in ?? ()
#8  0x00007f8e27b0fbc0 in ?? ()
#9  0x0000000000000000 in ?? ()

Thread 5 (Thread 0x40c2a950 (LWP 28038)):
#0  0x00007f8e2971e05d in pthread_cond_timedwait@@GLIBC_2.3.2 () from
/lib64/libpthread.so.0
#1  0x0000000000521f10 in timedwait_signal_poll_cond (cond=0x927cf8,
mutex=0x927cd0, timeout=0x40c29f30, alertable=&lt;value optimized out&gt;) at
handles.c:1500
#2  0x000000000052465f in _wapi_handle_timedwait_signal_handle (handle=&lt;value
optimized out&gt;, timeout=0x40c29f30, alertable=9600208) at handles.c:1570
#3  0x000000000051aed8 in WaitForSingleObjectEx (handle=0x400, timeout=10000,
alertable=1) at wait.c:207
#4  0x00000000004ad811 in async_invoke_thread (data=0x0) at threadpool.c:1220
#5  0x00000000004a5b13 in start_wrapper (data=&lt;value optimized out&gt;) at
threads.c:621
#6  0x000000000050c2eb in thread_start_routine (args=0x92da28) at threadsc:279
#7  0x000000000053fc32 in GC_start_routine (arg=0x7f8e27ac5c08) at
pthread_support.c:1382
#8  0x00007f8e2971a040 in start_thread () from /lib64/libpthread.so.0
#9  0x00007f8e292370cd in clone () from /lib64/libc.so.6

Thread 4 (Thread 0x41191950 (LWP 28039)):
#0  0x00007f8e29229f7b in read () from /lib64/libc.so.6
#1  0x00000000403ec895 in ?? ()
#2  0x0000000000979480 in ?? ()
#3  0x40ed4c1013880000 in ?? ()
#4  0x40cd4c4013880000 in ?? ()
#5  0x3faeb851e0000000 in ?? ()
#6  0x0000000041190fc8 in ?? ()
#7  0x0000000041190f20 in ?? ()
#8  0x0000000041190e60 in ?? ()
#9  0x00007f8e27b0f758 in ?? ()
#10 0x00007f8e16f8b000 in ?? ()
#11 0xffffffffffffffff in ?? ()
#12 0x00007f8e27d60370 in ?? ()
#13 0x00000000403ec6c4 in ?? ()
#14 0x00007f8e2a4d8e08 in ?? ()
#15 0x000000000000000f in ?? ()
#16 0x0000000000000000 in ?? ()

Thread 3 (Thread 0x421cf950 (LWP 28043)):
#0  0x00007f8e292376c8 in epoll_wait () from /lib64/libc.so.6
#1  0x00000000004ace97 in socket_io_epoll_main (p=&lt;value optimized out&gt;) at
threadpool.c:548
#2  0x00000000004a5b13 in start_wrapper (data=&lt;value optimized out&gt;) at
threads.c:621
#3  0x000000000050c2eb in thread_start_routine (args=0x92e3e8) at threadsc:279
#4  0x000000000053fc32 in GC_start_routine (arg=0x7f8e2a4d9d58) at
pthread_support.c:1382
#5  0x00007f8e2971a040 in start_thread () from /lib64/libpthread.so.0
#6  0x00007f8e292370cd in clone () from /lib64/libc.so.6

Thread 2 (Thread 0x423d0950 (LWP 28049)):
#0  0x00007f8e2971e05d in pthread_cond_timedwait@@GLIBC_2.3.2 () from
/lib64/libpthread.so.0
#1  0x0000000000521f10 in timedwait_signal_poll_cond (cond=0x92e2f8,
mutex=0x92e2d0, timeout=0x423cff30, alertable=&lt;value optimized out&gt;) at
handles.c:1500
#2  0x000000000052465f in _wapi_handle_timedwait_signal_handle (handle=&lt;value
optimized out&gt;, timeout=0x423cff30, alertable=9626320) at handles.c:1570
#3  0x000000000051aed8 in WaitForSingleObjectEx (handle=0x488, timeout=10000,
alertable=1) at wait.c:207
#4  0x00000000004ad6a0 in async_invoke_io_thread (data=0xfffffffffffffdfc) at
threadpool.c:280
#5  0x00000000004a5b13 in start_wrapper (data=&lt;value optimized out&gt;) at
threads.c:621
#6  0x000000000050c2eb in thread_start_routine (args=0x92e868) at threadsc:279
#7  0x000000000053fc32 in GC_start_routine (arg=0x7f8e2a4d9d58) at
pthread_support.c:1382
#8  0x00007f8e2971a040 in start_thread () from /lib64/libpthread.so.0
#9  0x00007f8e292370cd in clone () from /lib64/libc.so.6

Thread 1 (Thread 0x7f8e2a627730 (LWP 28011)):
#0  0x00007f8e2972090b in read () from /lib64/libpthread.so.0
#1  0x000000000042beb4 in mono_handle_native_sigsegv (signal=&lt;value optimized
out&gt;, ctx=&lt;value optimized out&gt;) at mini-exceptions.c:1437
#2  &lt;signal handler called&gt;
#3  0x00007f8e291965c5 in raise () from /lib64/libc.so.6
#4  0x00007f8e29197bb3 in abort () from /lib64/libc.so.6
#5  0x00007f8e29fc42a7 in g_assertion_message () from
/usr/lib64/libglib-2.0.so.0
#6  0x00007f8e29fc4742 in g_assertion_message_expr () from
/usr/lib64/libglib-2.0.so.0
#7  0x00000000005990a9 in mono_method_to_ir2 (cfg=0x7f8e212205c0,
method=0x7f8e21228600, start_bblock=0x7f8e21225cb8, end_bblock=0x7f8e21225db8,
return_var=0x0, 
    dont_inline=0x7f8e21219e60, inline_args=0x0, inline_offset=0,
is_virtual_call=0) at method-to-ir.c:7205
#8  0x000000000056ce1d in mini_method_compile (method=0x7f8e212208f0,
opts=22112767, domain=0x7f8e2a4d8e00, run_cctors=&lt;value optimized out&gt;,
compile_aot=&lt;value optimized out&gt;, parts=0)
    at mini.c:12459
#9  0x000000000056ec91 in mono_jit_compile_method (method=0x7f8e212208f0) at
mini.c:13170
#10 0x000000000042df3e in mono_magic_trampoline (regs=0x7fff326459c0,
code=0x40c39efc &quot;H\203&#65533;\b&#65533;&#65533;&#65533;@Y&quot;, m=0x7f8e212208f0, tramp=&lt;value
optimized out&gt;) at mini-trampolines.c:262
#11 0x00000000411ce165 in ?? ()
#12 0x00007fff32645a70 in ?? ()
#13 0x00000000411ce170 in ?? ()
#14 0x00007fff326459b0 in ?? ()
#15 0x0000000000000001 in ?? ()
#16 0x00007f8e2a226780 in ?? () from /usr/lib64/libglib-2.0.so.0
#17 0x00007f8e2a226748 in ?? () from /usr/lib64/libglib-2.0.so.0
#18 0x00007f8e21224600 in ?? ()
#19 0x00007f8e29fc66b7 in g_static_rw_lock_reader_unlock () from
/usr/lib64/libglib-2.0.so.0
#20 0x00007f8e20000020 in ?? ()
#21 0x00007f8e211cd430 in ?? ()
#22 0x00007fff326459b0 in ?? ()
#23 0x0000000000000000 in ?? ()
#0  0x00007f8e2972090b in read () from /lib64/libpthread.so.0

=================================================================
Got a SIGABRT while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
=================================================================

Aborted


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>



































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="080065.html">[Mono-bugs] [Bug 430450] ** ERROR **: MVAR 2 (S) cannot be expanded in this context with 2 instantiations
</A></li>
	<LI>Next message: <A HREF="080060.html">[Mono-bugs] [Bug 430455] Generic sharing makes MonoDevelop crash.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80059">[ date ]</a>
              <a href="thread.html#80059">[ thread ]</a>
              <a href="subject.html#80059">[ subject ]</a>
              <a href="author.html#80059">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
