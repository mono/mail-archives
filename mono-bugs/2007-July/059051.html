<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 77596][Nor] Changed - get rid of global generics	caches in metadata.c
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2077596%5D%5BNor%5D%20Changed%20-%20get%20rid%20of%20global%20generics%0A%09caches%20in%20metadata.c&In-Reply-To=bug-77596%40chernobyl.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="059050.html">
   <LINK REL="Next"  HREF="059052.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 77596][Nor] Changed - get rid of global generics	caches in metadata.c</H1>
    <B>bugzilla-daemon at bugzilla.ximian.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2077596%5D%5BNor%5D%20Changed%20-%20get%20rid%20of%20global%20generics%0A%09caches%20in%20metadata.c&In-Reply-To=bug-77596%40chernobyl.ximian.com"
       TITLE="[Mono-bugs] [Bug 77596][Nor] Changed - get rid of global generics	caches in metadata.c">bugzilla-daemon at bugzilla.ximian.com
       </A><BR>
    <I>Thu Jul 19 10:42:06 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="059050.html">[Mono-bugs] [Bug 80064][Nor] Changed - Type.GetXxx(...) returns too	many members
</A></li>
        <LI>Next message: <A HREF="059052.html">[Mono-bugs] [Bug 82140][Min] New -	ArrayList.Adapter(...).GetEnumerator(int, int) incorrect for NET_1_1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59051">[ date ]</a>
              <a href="thread.html#59051">[ thread ]</a>
              <a href="subject.html#59051">[ subject ]</a>
              <a href="author.html#59051">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">joncham at gmail.com.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=77596">http://bugzilla.ximian.com/show_bug.cgi?id=77596</A>

--- shadow/77596	2007-07-17 07:38:31.000000000 -0400
+++ shadow/77596.tmp.30329	2007-07-19 10:42:06.000000000 -0400
@@ -88,6 +88,116 @@
 8  libmono.0.dylib                    0x012a48b2 mono_image_close + 172
 9  libmono.0.dylib                    0x012da60e mono_debug_cleanup + 87
 10  libglib-2.0.0.dylib                0x013fb513 g_hash_table_destroy + 89
 11  libmono.0.dylib                    0x012da5da mono_debug_cleanup + 35
 12  libmono.0.dylib                    0x0120b2d8 mini_cleanup + 1113
 
+
+------- Additional Comments From <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">joncham at gmail.com</A>  2007-07-19 10:42 -------
+Here is info I get when crashing on windows. In
+mcs/class/Mono.Data.Tds, make PROFILE=net_2_0 causes crash for me
+about 50% of the time. It crashed in ginst_in_image on the line: 
+
+if (type-&gt;type == MONO_TYPE_GENERICINST) {
+
+gdb info:
+(gdb) p image-&gt;name
+$18 = 0x174c6c0
+&quot;D:\\cygwin\\opt\\mono\\lib\\mono\\gac\\System.Xml\\2.0.0.0__b77a5c561934e089\\System.Xml.dll&quot;
+(gdb) p *ginst
+$19 = {id = 242, type_argc = 1, is_open = 0, type_argv = 0x1c95e78}
+(gdb) p *(ginst-&gt;type_argv[0])
+Cannot access memory at address 0x1bd05a8
+
+(gdb) x/256a $sp
+0x22fd00:       0x18d3d00       0x0     0x174c7c8       0x1bbdfb0
+0x22fd10:       0xb94060        0x0     0x22fd48        0x672d2db6
+&lt;_libuser32_a_iname+43558366&gt;
+0x22fd20:       0x1c95e50       0x1c95e50       0x174c7c8      
+0x672f290b &lt;_libuser32_a_iname+43688243&gt;
+0x22fd30:       0x0     0x50    0x68fbd1b4 &lt;ginst_in_image&gt;     0x174c7c8
+0x22fd40:       0x174c7c8       0x1763cd8       0x22fd68       
+0x68fbd2a1 &lt;mono_metadata_clean_for_image+40&gt;
+0x22fd50:       0x174c7c8       0x1     0x174c7c8       0x0
+0x22fd60:       0x77c2c2e3 &lt;msvcrt!free+200&gt;    0x1     0x22fd98     
+  0x68fba2d6 &lt;mono_image_close+115&gt;
+0x22fd70:       0x174c7c8       0x1     0x690675d6
+&lt;_PRETTY_FUNCTION__.8+31&gt;    0x174c6c0
+0x22fd80:       0x174c7c8       0x1723cf0       0x22ffe0        0x1
+0x22fd90:       0xb93080        0x1763cd8       0x22fdc8       
+0x68fb5b4f &lt;mono_assembly_close+298&gt;
+0x22fda0:       0x174c7c8       0x1763cd8       0x69064f3e
+&lt;_PRETTY_FUNCTION__.11+37&gt;   0x1a553cd
+0x22fdb0:       0x1763cd8       0xbc2c40        0x22ffe0        0x2
+0x22fdc0:       0xb93080        0xbdcc40        0x22fdf8       
+0x68fb5b09 &lt;mono_assembly_close+228&gt;
+0x22fdd0:       0x1763cd8       0xbdcc40        0x69064f3e
+&lt;_PRETTY_FUNCTION__.11+37&gt;   0x150538f
+0x22fde0:       0xbdcc40        0x3e7600        0x22ffe0        0xbdcc40
+0x22fdf0:       0xb93080        0xb70ee0        0x22fe38       
+0x68fb8009 &lt;mono_domain_free+274&gt;
+0x22fe00:       0xbdcc40        0x1     0x69065e10
+&lt;_PRETTY_FUNCTION__.6+323&gt;   0xbb3218
+0x22fe10:       0xb70ee0        0x150538f       0xbdcc40        0x1
+0x22fe20:       0x401000 &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">_gnu_exception_handler at 4</A>&gt;     0x0    
+0x22fe38        0x7ffd7000
+0x22fe30:       0x0     0x0     0x22fe48        0x68ee8354
+&lt;mini_cleanup+80&gt;
+0x22fe40:       0xb70ee0        0x1     0x22ff48        0x68f01b50
+&lt;mono_main+4741&gt;
+0x22fe50:       0xb70ee0        0x0     0xe7a88648      0x88ecb3f0
+0x22fe60:       0x3e61a8        0x3e0000        0xe6a9f078      0x80
+0x22fe70:       0x1000070       0x22fe4c        0x0     0x22fee0
+0x22fe80:       0x7c90ee18 &lt;strchr+279&gt; 0x3     0xffffffff     
+0x7c96e707 &lt;ntdll!RtlpNtMakeTemporaryKey+34043&gt;
+0x22fe90:       0x7c94976b
+&lt;ntdll!RtlInsertElementGenericTableAvl+67419&gt;        0x3e0000       
+0x50000061      0x3e61b0
+0x22fea0:       0x401470 &lt;__do_global_dtors&gt;    0x22fef0        0x0  
+  0x3e0000
+0x22feb0:       0x0     0x77c2c02d &lt;msvcrt!_msize+193&gt;  0x401470
+&lt;__do_global_dtors&gt;    0x0
+0x22fec0:       0x0     0x0     0x3e0000        0x3e0000
+0x22fed0:       0x0     0x0     0x0     0x0
+0x22fee0:       0x0     0x0     0x0     0x3
+0x22fef0:       0xd169ff        0x0     0x1     0x1
+0x22ff00:       0x0     0x0     0x3e260a        0xb70ee0
+0x22ff10:       0x401470 &lt;__do_global_dtors&gt;    0x22ff04        0x0  
+  0xbdcc40
+0x22ff20:       0xb70ee0        0x3e260a        0x10    0x3e293c
+0x22ff30:       0xd169ff        0x0     0x22ff48        0x4014d6
+&lt;__do_global_ctors+54&gt;
+0x22ff40:       0x401470 &lt;__do_global_dtors&gt;    0x7ffd7000     
+0x22ff78        0x40131c &lt;main+60&gt;
+0x22ff50:       0x11    0x3e2938        0x403020        0x401305 &lt;main+37&gt;
+0x22ff60:       0x77c3aead &lt;msvcrt!_lock+2290&gt;  0x0     0x0     0x7ffd7000
+0x22ff70:       0x154   0x10    0x22ffb0        0x401246
+&lt;__mingw_CRTStartup+246&gt;
+0x22ff80:       0x11    0x3e2938        0x3e3d80        0x404000
+&lt;_bss_start__&gt;
+0x22ff90:       0x22ffa4        0xffffffff      0x22ffa8        0x0
+0x22ffa0:       0x1     0x3e3d80        0x0     0x7ffd7000
+0x22ffb0:       0x22ffc0        0x401298 &lt;mainCRTStartup+24&gt;    0x1  
+  0x9
+0x22ffc0:       0x22fff0        0x7c816fd7
+&lt;RegisterWaitForInputIdle+73&gt;        0x0     0x0
+0x22ffd0:       0x7ffd7000      0x8054a6ed      0x22ffc8        0x8839ada8
+0x22ffe0:       0xffffffff      0x7c839aa8 &lt;ValidateLocale+688&gt;
+0x7c816fe0 &lt;RegisterWaitForInputIdle+82&gt;        0x0
+0x22fff0:       0x0     0x0     0x401280 &lt;mainCRTStartup&gt;       0x0
+0x230000:       0x78746341      0x20    0x1     0x2498
+0x230010:       0xc4    0x0     0x20    0x0
+0x230020:       0x14    0x1     0x6     0x34
+0x230030:       0x114   0x1     0x0     0x0
+0x230040:       0x0     0x0     0x0     0x2
+0x230050:       0x0     0x0     0x0     0x214
+0x230060:       0x19c   0x0     0x2d59495b      0x3b0
+0x230070:       0x32    0x3e4   0x2d2   0x0
+0x230080:       0x830202e4      0x6b8   0x46    0x700
+0x230090:       0x2ea   0x0     0xd18cd5d2      0x9ec
+0x2300a0:       0x46    0xa34   0x2ea   0x0
+0x2300b0:       0xd86aad2e      0xd20   0x46    0xd68
+0x2300c0:       0x304   0x10    0x4     0xd4
+0x2300d0:       0x2     0x1     0x114   0xf8c
+0x2300e0:       0x1     0x2     0x10a0  0x32c
+0x2300f0:       0x1     0x4     0x13cc  0x1050
+
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="059050.html">[Mono-bugs] [Bug 80064][Nor] Changed - Type.GetXxx(...) returns too	many members
</A></li>
	<LI>Next message: <A HREF="059052.html">[Mono-bugs] [Bug 82140][Min] New -	ArrayList.Adapter(...).GetEnumerator(int, int) incorrect for NET_1_1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59051">[ date ]</a>
              <a href="thread.html#59051">[ thread ]</a>
              <a href="subject.html#59051">[ subject ]</a>
              <a href="author.html#59051">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
