<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 609457] New: Monotouch v3.0.6 SDK OS 4.0 Beta - The app crashes when trying to open an sqllite connection.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20609457%5D%20New%3A%20Monotouch%20v3.0.6%20SDK%20OS%204.0%20Beta%20-%0A%20The%20app%20crashes%20when%20trying%20to%20open%20an%20sqllite%20connection.&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="100989.html">
   <LINK REL="Next"  HREF="100913.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 609457] New: Monotouch v3.0.6 SDK OS 4.0 Beta - The app crashes when trying to open an sqllite connection.</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20609457%5D%20New%3A%20Monotouch%20v3.0.6%20SDK%20OS%204.0%20Beta%20-%0A%20The%20app%20crashes%20when%20trying%20to%20open%20an%20sqllite%20connection.&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 609457] New: Monotouch v3.0.6 SDK OS 4.0 Beta - The app crashes when trying to open an sqllite connection.">bugzilla_noreply at novell.com
       </A><BR>
    <I>Thu May 27 10:01:35 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="100989.html">[Mono-bugs] [Bug 609381] IpcChannelHelper exception thrown when 1+ MB is sent through IPCChannel
</A></li>
        <LI>Next message: <A HREF="100913.html">[Mono-bugs] [Bug 609478] New: Validating control inside Repeater prevents ItemCommand to fire
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#100910">[ date ]</a>
              <a href="thread.html#100910">[ thread ]</a>
              <a href="subject.html#100910">[ subject ]</a>
              <a href="author.html#100910">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=609457">http://bugzilla.novell.com/show_bug.cgi?id=609457</A>

<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=609457#c0">http://bugzilla.novell.com/show_bug.cgi?id=609457#c0</A>


           Summary: Monotouch v3.0.6 SDK OS 4.0 Beta - The app crashes
                    when trying to open an sqllite connection.
    Classification: Mono
           Product: MonoTouch
           Version: SVN
          Platform: Macintosh
        OS/Version: Mac OS X 10.6
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Runtime
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">gnorton at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">Orlandolsilva at gmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Created an attachment (id=365180)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=365180">http://bugzilla.novell.com/attachment.cgi?id=365180</A>)
Test the Sqllite3 with OS v4 Beta (app is crashing with emulator)

User-Agent:       Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_3; en-us)
AppleWebKit/531.21.11 (KHTML, like Gecko) Version/4.0.4 Safari/531.21.10

I was trying to run my app using the Monotouch v3.0.6 SDK to test my
application with the new iphone OS 4 Beta version (which was running well with
the monotouch stable version), and it crashed in runtime (this error just occur
with the new Emulator) when my app was trying to open an sqllite connection.
The next lines shows the error's description:

Unhandled Exception: System.DllNotFoundException:
/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator3.0.sdk/usr/lib/libsqlite3.dylib
  at (wrapper managed-to-native)
Mono.Data.Sqlite.UnsafeNativeMethods:sqlite3_open_v2
(byte[],intptr&amp;,int,intptr)
  at Mono.Data.Sqlite.SQLite3.Open (System.String strFilename,
SQLiteOpenFlagsEnum flags, Int32 maxPoolSize, Boolean usePool) [0x00040] in
/Developer/MonoTouch/Source/mcs/class/Mono.Data.Sqlite/Mono.Data.Sqlite_2.0/SQLite3.cs:119 
  at Mono.Data.Sqlite.SqliteConnection.Open () [0x0021a] in
/Developer/MonoTouch/Source/mcs/class/Mono.Data.Sqlite/Mono.Data.Sqlite_2.0/SQLiteConnection.cs:876 
  at (wrapper remoting-invoke-with-check)
Mono.Data.Sqlite.SqliteConnection:Open ()
  at test.AppDelegate.FinishedLaunching (MonoTouch.UIKit.UIApplication app,
MonoTouch.Foundation.NSDictionary options) [0x0003e] in
/Users/marcosl/Projects/test/test/Main.cs:50 
  at (wrapper managed-to-native)
MonoTouch.UIKit.UIApplication:UIApplicationMain (int,string[],intptr,intptr)
  at MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String
principalClassName, System.String delegateClassName) [0x00038] in
/Users/plasma/Source/iphone/monotouch/UIKit/UIApplication.cs:26 
  at MonoTouch.UIKit.UIApplication.Main (System.String[] args) [0x00000] in
/Users/plasma/Source/iphone/monotouch/UIKit/UIApplication.cs:31 
  at test.Application.Main (System.String[] args) [0x00000] in
/Users/marcosl/Projects/test/test/Main.cs:18

I checked the path and i saw that the folder iPhoneSimulator3.0.sdk is missing
as predicted.

I think that the way to fix this bug is fix that path to point to the folder
iPhoneSimulator4.0.sdk instead of iPhoneSimulator3.0.sdk. To test this, i
copied/created that path displayed in error's message from the folder
iPhoneSimulator4.0.sdk and it worked well using emulator.

Check the sample attached to this bug report.

Reproducible: Always

Steps to Reproduce:
1. Open the project attached to this bug report;
2. Run it using the option Debug|Iphone Simulator;
3. The app crash and shows the error message in console.
Actual Results:  
The app crashes displaying the next message:

Unhandled Exception: System.DllNotFoundException:
/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator3.0.sdk/usr/lib/libsqlite3.dylib
  at (wrapper managed-to-native)
Mono.Data.Sqlite.UnsafeNativeMethods:sqlite3_open_v2
(byte[],intptr&amp;,int,intptr)
  at Mono.Data.Sqlite.SQLite3.Open (System.String strFilename,
SQLiteOpenFlagsEnum flags, Int32 maxPoolSize, Boolean usePool) [0x00040] in
/Developer/MonoTouch/Source/mcs/class/Mono.Data.Sqlite/Mono.Data.Sqlite_2.0/SQLite3.cs:119 
  at Mono.Data.Sqlite.SqliteConnection.Open () [0x0021a] in
/Developer/MonoTouch/Source/mcs/class/Mono.Data.Sqlite/Mono.Data.Sqlite_2.0/SQLiteConnection.cs:876 
  at (wrapper remoting-invoke-with-check)
Mono.Data.Sqlite.SqliteConnection:Open ()
  at test.AppDelegate.FinishedLaunching (MonoTouch.UIKit.UIApplication app,
MonoTouch.Foundation.NSDictionary options) [0x0003e] in
/Users/marcosl/Projects/test/test/Main.cs:50 
  at (wrapper managed-to-native)
MonoTouch.UIKit.UIApplication:UIApplicationMain (int,string[],intptr,intptr)
  at MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String
principalClassName, System.String delegateClassName) [0x00038] in
/Users/plasma/Source/iphone/monotouch/UIKit/UIApplication.cs:26 
  at MonoTouch.UIKit.UIApplication.Main (System.String[] args) [0x00000] in
/Users/plasma/Source/iphone/monotouch/UIKit/UIApplication.cs:31 
  at test.Application.Main (System.String[] args) [0x00000] in
/Users/marcosl/Projects/test/test/Main.cs:18


Expected Results:  
Open the app showing the white screen.

This error only ocurrs running the app on Emulator 4.0.

The app runs well on device.

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>









































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="100989.html">[Mono-bugs] [Bug 609381] IpcChannelHelper exception thrown when 1+ MB is sent through IPCChannel
</A></li>
	<LI>Next message: <A HREF="100913.html">[Mono-bugs] [Bug 609478] New: Validating control inside Repeater prevents ItemCommand to fire
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#100910">[ date ]</a>
              <a href="thread.html#100910">[ thread ]</a>
              <a href="subject.html#100910">[ subject ]</a>
              <a href="author.html#100910">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
