<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 609109] New: Incoming tablular data stream (TDS) remote procedure call (RPC) protocal stream is incorrect.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20609109%5D%20New%3A%20Incoming%20tablular%20data%20stream%20%28TDS%29%0A%20remote%20procedure%20call%20%28RPC%29%20protocal%20stream%20is%20incorrect.&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="100968.html">
   <LINK REL="Next"  HREF="100881.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 609109] New: Incoming tablular data stream (TDS) remote procedure call (RPC) protocal stream is incorrect.</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20609109%5D%20New%3A%20Incoming%20tablular%20data%20stream%20%28TDS%29%0A%20remote%20procedure%20call%20%28RPC%29%20protocal%20stream%20is%20incorrect.&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 609109] New: Incoming tablular data stream (TDS) remote procedure call (RPC) protocal stream is incorrect.">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed May 26 12:22:51 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="100968.html">[Mono-bugs] [Bug 609097] InternalsVisibleTo() assemblyinfo reference not used corectly
</A></li>
        <LI>Next message: <A HREF="100881.html">[Mono-bugs] [Bug 609109] Incoming tablular data stream (TDS) remote procedure call (RPC) protocal stream is incorrect.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#100880">[ date ]</a>
              <a href="thread.html#100880">[ thread ]</a>
              <a href="subject.html#100880">[ subject ]</a>
              <a href="author.html#100880">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=609109">http://bugzilla.novell.com/show_bug.cgi?id=609109</A>

<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=609109#c0">http://bugzilla.novell.com/show_bug.cgi?id=609109#c0</A>


           Summary: Incoming tablular data stream (TDS) remote procedure
                    call (RPC) protocal stream is incorrect.
    Classification: Mono
           Product: Mono: Runtime
           Version: SVN
          Platform: 64bit
        OS/Version: RHEL 5
            Status: NEW
          Severity: Major
          Priority: P5 - None
         Component: misc
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">srfcanada at hotmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


User-Agent:       Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.2; WOW64;
Trident/4.0)

We are getting an sql server client error trying to insert a record into the
database. The strange thing is that its says Parameter 15(&quot;@Pnul&quot;)  , note the
null instide the parameter, its actually using the special nul character so Im
not sure if its just that something is getting corrupt in the stream.When I run
the sqlserver trace, I can see some of the inserts going to the database so Im
not sure if this is an issue returning back information. Note that this works
on windows and mono 2.4 so it looks like something broken after mono 2.4 . This
is the error:

could not insert:
[Drms.Server.EntityModel.EntityWorkflow#38d3d5d2-e4ce-4f0d-85e2-9d8203757665][SQL:
INSERT INTO [EWORKFLOW] ([COMMITCOUNT], [LABEL], [PERSISTABLEBACKREFERENCES],
[PERSISTABLECASECONTEXTID], [PERSISTABLECASECONTEXTREFERENC], [NAME],
[PERSISTABLECOLLECTIONMETADATA], [DOCUMENT], [DEPLOYMENTCATEGORY],
[ISSCRIPTACTIVITY], [MODIFIED], [M_ORIGINAL_CLASS], [M_ORIGINAL_ID],
[ORIGINALOBJTYPE], [ORIGINALOBJID], [ISBACKREFERENCETRACKINGENABLED],
[CASECONTEXTBEHAVIOR], [CREATED], [DESCRIPTION], [ID]) VALUES (?, ?, ?, ?, ?,
?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
Source: NHibernate
Target Site: Void Insert(System.Object, System.Object[], System.Boolean[],
Int32, NHibernate.SqlCommand.SqlCommandInfo, System.Object,
ISessionImplementor)
Stack Trace:   at NHibernate.Persister.Entity.AbstractEntityPersister.Insert
(System.Object id, System.Object[] fields, System.Boolean[] notNull, Int32 j,
NHibernate.SqlCommand.SqlCommandInfo sql, System.Object obj,
ISessionImplementor session) [0x00000] in &lt;filename unknown&gt;:0
  at NHibernate.Persister.Entity.AbstractEntityPersister.Insert (System.Object
id, System.Object[] fields, System.Object obj, ISessionImplementor session)
[0x00000] in &lt;filename unknown&gt;:0
  at NHibernate.Action.EntityInsertAction.Execute () [0x00000] in &lt;filename
unknown&gt;:0
  at NHibernate.Engine.ActionQueue.Execute (IExecutable executable) [0x00000]
in &lt;filename unknown&gt;:0
  at NHibernate.Engine.ActionQueue.ExecuteActions (IList list) [0x00000] in
&lt;filename unknown&gt;:0
  at NHibernate.Engine.ActionQueue.ExecuteActions () [0x00000] in &lt;filename
unknown&gt;:0
  at NHibernate.Event.Default.AbstractFlushingEventListener.PerformExecutions
(IEventSource session) [0x00000] in &lt;filename unknown&gt;:0
Custom Data:
Inner Exception: System.Data.SqlClient.SqlException: The incoming tabular data
stream (TDS) remote procedure call (RPC) protocol stream is incorrect.
Parameter 15 (&quot;@p&#9216;&quot;): Data type 0x40 is unknown.
Source: Mono SqlClient Data Provider
Target Site: Void ErrorHandler(System.Object,
Mono.Data.Tds.Protocol.TdsInternalErrorMessageEventArgs)
Stack Trace:   at System.Data.SqlClient.SqlConnection.ErrorHandler
(System.Object sender, Mono.Data.Tds.Protocol.TdsInternalErrorMessageEventArgs
e) [0x00000] in &lt;filename unknown&gt;:0
  at Mono.Data.Tds.Protocol.Tds.OnTdsErrorMessage
(Mono.Data.Tds.Protocol.TdsInternalErrorMessageEventArgs e) [0x00000] in
&lt;filename unknown&gt;:0
  at Mono.Data.Tds.Protocol.Tds.ProcessMessage (TdsPacketSubType subType)
[0x00000] in &lt;filename unknown&gt;:0
  at Mono.Data.Tds.Protocol.Tds.ProcessSubPacket () [0x00000] in &lt;filename
unknown&gt;:0
  at Mono.Data.Tds.Protocol.Tds.NextResult () [0x00000] in &lt;filename unknown&gt;:0
  at Mono.Data.Tds.Protocol.Tds.SkipToEnd () [0x00000] in &lt;filename unknown&gt;:0
  at Mono.Data.Tds.Protocol.Tds70.ExecRPC (TdsRpcProcId rpcId, System.String
sql, Mono.Data.Tds.TdsMetaParameterCollection parameters, Int32 timeout,
Boolean wantResults) [0x00000] in &lt;filename unknown&gt;:0
  at Mono.Data.Tds.Protocol.Tds70.Execute (System.String commandText,
Mono.Data.Tds.TdsMetaParameterCollection parameters, Int32 timeout, Boolean
wantResults) [0x00000] in &lt;filename unknown&gt;:0
  at System.Data.SqlClient.SqlCommand.Execute (Boolean wantResults) [0x00000]
in &lt;filename unknown&gt;:0
  at System.Data.SqlClient.SqlCommand.ExecuteNonQuery () [0x00000] in &lt;filename
unknown&gt;:0
  at NHibernate.AdoNet.AbstractBatcher.ExecuteNonQuery (IDbCommand cmd)
[0x00000] in &lt;filename unknown&gt;:0
Custom Data:
   Key #1: actual-sql-query
   Value #1: INSERT INTO [EWORKFLOW] ([COMMITCOUNT], [LABEL],
[PERSISTABLEBACKREFERENCES], [PERSISTABLECASECONTEXTID],
[PERSISTABLECASECONTEXTREFERENC], [NAME], [PERSISTABLECOLLECTIONMETADATA],
[DOCUMENT], [DEPLOYMENTCATEGORY], [ISSCRIPTACTIVITY], [MODIFIED],
[M_ORIGINAL_CLASS], [M_ORIGINAL_ID], [ORIGINALOBJTYPE], [ORIGINALOBJID],
[ISBACKREFERENCETRACKINGENABLED], [CASECONTEXTBEHAVIOR], [CREATED],
[DESCRIPTION], [ID]) VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9,
@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19)
Inner Exception:


This is the table definition:
CREATE TABLE [dbo].[EWORKFLOW](
    [ID] [uniqueidentifier] NOT NULL,
    [COMMITCOUNT] [int] NOT NULL,
    [LABEL] [uniqueidentifier] NULL,
    [PERSISTABLEBACKREFERENCES] [varchar](max) NULL,
    [PERSISTABLECASECONTEXTID] [uniqueidentifier] NULL,
    [PERSISTABLECASECONTEXTREFERENC] [int] NULL,
    [NAME] [nvarchar](2000) NULL,
    [PERSISTABLECOLLECTIONMETADATA] [varchar](max) NULL,
    [DOCUMENT] [varchar](max) NULL,
    [DEPLOYMENTCATEGORY] [int] NULL,
    [ISSCRIPTACTIVITY] [bit] NULL,
    [MODIFIED] [datetime] NULL,
    [M_ORIGINAL_CLASS] [nvarchar](2000) NULL,
    [M_ORIGINAL_ID] [uniqueidentifier] NULL,
    [ORIGINALOBJTYPE] [nvarchar](2000) NULL,
    [ORIGINALOBJID] [uniqueidentifier] NULL,
    [ISBACKREFERENCETRACKINGENABLED] [bit] NULL,
    [CASECONTEXTBEHAVIOR] [tinyint] NULL,
    [CREATED] [datetime] NULL,
    [DESCRIPTION] [nvarchar](2000) NULL,
PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF,
ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON, FILLFACTOR = 50) ON [PRIMARY]
) ON [PRIMARY]

GO


Reproducible: Always

Steps to Reproduce:
1.
2.
3.

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>

















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="100968.html">[Mono-bugs] [Bug 609097] InternalsVisibleTo() assemblyinfo reference not used corectly
</A></li>
	<LI>Next message: <A HREF="100881.html">[Mono-bugs] [Bug 609109] Incoming tablular data stream (TDS) remote procedure call (RPC) protocal stream is incorrect.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#100880">[ date ]</a>
              <a href="thread.html#100880">[ thread ]</a>
              <a href="subject.html#100880">[ subject ]</a>
              <a href="author.html#100880">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
