<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 604911] Unable to debug blogengine locally in mono
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20604911%5D%20Unable%20to%20debug%20blogengine%20locally%20in%20mono&In-Reply-To=bug-604911-28286%40http.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="100667.html">
   <LINK REL="Next"  HREF="100738.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 604911] Unable to debug blogengine locally in mono</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20604911%5D%20Unable%20to%20debug%20blogengine%20locally%20in%20mono&In-Reply-To=bug-604911-28286%40http.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 604911] Unable to debug blogengine locally in mono">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed May 19 01:35:56 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="100667.html">[Mono-bugs] [Bug 604911] Unable to debug blogengine locally in mono
</A></li>
        <LI>Next message: <A HREF="100738.html">[Mono-bugs] [Bug 604911] Unable to debug blogengine locally in mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#100668">[ date ]</a>
              <a href="thread.html#100668">[ thread ]</a>
              <a href="subject.html#100668">[ subject ]</a>
              <a href="author.html#100668">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=604911">http://bugzilla.novell.com/show_bug.cgi?id=604911</A>

<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=604911#c5">http://bugzilla.novell.com/show_bug.cgi?id=604911#c5</A>


--- Comment #5 from Martin Baulig &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">martin at novell.com</A>&gt; 2010-05-19 05:35:55 UTC ---
Copy&amp;paste from Linux didn't work, this is the file from Comment 4:
===================================================================

After I long debugging night, I think I finally found the problem which
currently prevents us from
debugging any ASP.NET applications locally on Windows (bug #604911):
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=604911">https://bugzilla.novell.com/show_bug.cgi?id=604911</A>

I can now even reproduce this with a small testcase - the problem
happens whenever the
application's main thread has already exited and another thread stops,
so we're trying to get
a backtrace.

This problem currently only exists on Windows. I added some more
debugging printf's
and finally figured out what's going on (I attached the logfile).

After hitting the breakpoint, MonoVS calls GET_FRAME_INFO to get a
stacktrace. At that time,
suspend_count is 1, so we're calling wait_for_suspend().

In count_thread(), I added

DEBUG(1, fprintf (log_file, &quot; Count thread: %p - %p - %p - %d,%d\n&quot;,
tls, tls-&gt;thread, tls-&gt;thread ? tls-&gt;thread-&gt;tid : NULL, tls-&gt;suspended,
tls-&gt;terminated));

and as you can see in the logfile, it doesn't consider 00000F98 as being
suspended.

That 00000F98 is the first thread we create, and at the beginning that
thread is actually suspended
and resumed like the other one, but then that suddenly stops. We keep
sending it interrupt signals,
but it never seems to get suspended anymore.

My assumption is that that's when the Main() function exited and the
main thread returns to unmanaged
code in the runtime.

I just checked and it's working just fine on Linux, so this seems to be
some weird Windows-only problem.

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="100667.html">[Mono-bugs] [Bug 604911] Unable to debug blogengine locally in mono
</A></li>
	<LI>Next message: <A HREF="100738.html">[Mono-bugs] [Bug 604911] Unable to debug blogengine locally in mono
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#100668">[ date ]</a>
              <a href="thread.html#100668">[ thread ]</a>
              <a href="subject.html#100668">[ subject ]</a>
              <a href="author.html#100668">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
