<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 606142] New: HTTP Does not follow redirects	correctly
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20606142%5D%20New%3A%20HTTP%20Does%20not%20follow%20redirects%0A%09correctly&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="100953.html">
   <LINK REL="Next"  HREF="100582.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 606142] New: HTTP Does not follow redirects	correctly</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20606142%5D%20New%3A%20HTTP%20Does%20not%20follow%20redirects%0A%09correctly&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 606142] New: HTTP Does not follow redirects	correctly">bugzilla_noreply at novell.com
       </A><BR>
    <I>Fri May 14 22:50:03 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="100953.html">[Mono-bugs] [Bug 606131] Opening Tools &gt; Extension manager crashes	VS2k10
</A></li>
        <LI>Next message: <A HREF="100582.html">[Mono-bugs] [Bug 606142] HTTP Does not follow redirects correctly
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#100551">[ date ]</a>
              <a href="thread.html#100551">[ thread ]</a>
              <a href="subject.html#100551">[ subject ]</a>
              <a href="author.html#100551">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=606142">http://bugzilla.novell.com/show_bug.cgi?id=606142</A>

<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=606142#c0">http://bugzilla.novell.com/show_bug.cgi?id=606142#c0</A>


           Summary: HTTP Does not follow redirects correctly
    Classification: Mono
           Product: MonoTouch
           Version: unspecified
          Platform: Other
        OS/Version: Other
            Status: NEW
          Severity: Major
          Priority: P5 - None
         Component: Class Libraries
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">fak at kruegersystems.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Created an attachment (id=362415)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=362415">http://bugzilla.novell.com/attachment.cgi?id=362415</A>)
Project demoing bug

Try to fetch this url:

<A HREF="http://cdn4.libsyn.com/nerdist/Number_14_-_Stan_Lee.mp3?nvb=20100504045911&amp;amp">http://cdn4.libsyn.com/nerdist/Number_14_-_Stan_Lee.mp3?nvb=20100504045911&amp;amp</A>

using WebRequest. It fails with this error and this response URL:

- The remote server returned an error: (404) Not Found.
<A HREF="http://cdn3.libsyn.com/cdn4.libsyn.com/nerdist/Number_14_-_Stan_Lee.mp3?nvb=20100515023123&amp;nva=20100516024123&amp;t=084f35bf52b35aa87a486">http://cdn3.libsyn.com/cdn4.libsyn.com/nerdist/Number_14_-_Stan_Lee.mp3?nvb=20100515023123&amp;nva=20100516024123&amp;t=084f35bf52b35aa87a486</A>

But it should resolve to:

<A HREF="http://cdn4.libsyn.com/nerdist/Number_14_-_Stan_Lee.mp3?nvb=20100515023937&amp;nva=20100516024937&amp;t=0e16d84c4fb7cc40a29c1">http://cdn4.libsyn.com/nerdist/Number_14_-_Stan_Lee.mp3?nvb=20100515023937&amp;nva=20100516024937&amp;t=0e16d84c4fb7cc40a29c1</A>

It seems that it is concatenating URLs together incorrectly. 

Here is a log of the redirect chain:

atom:~ fak$ curl
&quot;<A HREF="http://cdn4.libsyn.com/nerdist/Number_14_-_Stan_Lee.mp3?nvb=20100504045911&amp;amp&quot;">http://cdn4.libsyn.com/nerdist/Number_14_-_Stan_Lee.mp3?nvb=20100504045911&amp;amp&quot;</A>
-i

HTTP/1.1 302 Moved Temporarily
Content-Length: 232
Content-Type: text/html
Location:
<A HREF="http://media.libsyn.com/bounce/http://cdn4.libsyn.com/nerdist/Number_14_-_Stan_Lee.mp3?nvb=20100504045911&amp;amp">http://media.libsyn.com/bounce/http://cdn4.libsyn.com/nerdist/Number_14_-_Stan_Lee.mp3?nvb=20100504045911&amp;amp</A>
Date: Sat, 15 May 2010 02:44:22 GMT
Connection: keep-alive

&lt;HTML&gt;&lt;HEAD&gt;
&lt;TITLE&gt;302 Moved Temporarily&lt;/TITLE&gt;
&lt;/HEAD&gt;
&lt;BODY&gt;
The document has moved &lt;A
HREF=&quot;<A HREF="http://media.libsyn.com/bounce/http://cdn4.libsyn.com/nerdist/Number_14_-_Stan_Lee.mp3?nvb=20100504045911&amp;amp&quot;">http://media.libsyn.com/bounce/http://cdn4.libsyn.com/nerdist/Number_14_-_Stan_Lee.mp3?nvb=20100504045911&amp;amp&quot;</A>&gt;here&lt;/A&gt;
&lt;/BODY&gt;&lt;/HTML&gt;

atom:~ fak$ curl
&quot;<A HREF="http://media.libsyn.com/bounce/http://cdn4.libsyn.com/nerdist/Number_14_-_Stan_Lee.mp3?nvb=20100504045911&amp;amp&quot;">http://media.libsyn.com/bounce/http://cdn4.libsyn.com/nerdist/Number_14_-_Stan_Lee.mp3?nvb=20100504045911&amp;amp&quot;</A>
-i

HTTP/1.1 301 Moved Permanently
X-Powered-By: PHP/5.1.4
Location: /media/nerdist/Number_14_-_Stan_Lee.mp3
Content-type: text/html
Content-Length: 0
Date: Sat, 15 May 2010 02:49:13 GMT
Server: lighttpd/1.4.15

atom:~ fak$ curl
&quot;<A HREF="http://media.libsyn.com/media/nerdist/Number_14_-_Stan_Lee.mp3&quot;">http://media.libsyn.com/media/nerdist/Number_14_-_Stan_Lee.mp3&quot;</A> -i

HTTP/1.1 302 Found
X-Powered-By: PHP/5.1.4
Location:
<A HREF="http://cdn4.libsyn.com/nerdist/Number_14_-_Stan_Lee.mp3?nvb=20100515023937&amp;nva=20100516024937&amp;t=0e16d84c4fb7cc40a29c1">http://cdn4.libsyn.com/nerdist/Number_14_-_Stan_Lee.mp3?nvb=20100515023937&amp;nva=20100516024937&amp;t=0e16d84c4fb7cc40a29c1</A>
Content-type: text/html
Content-Length: 0
Date: Sat, 15 May 2010 02:49:37 GMT
Server: lighttpd/1.4.15

atom:~ fak$ curl
&quot;<A HREF="http://cdn4.libsyn.com/nerdist/Number_14_-_Stan_Lee.mp3?nvb=20100515023937&amp;nva=20100516024937&amp;t=0e16d84c4fb7cc40a29c1&quot;">http://cdn4.libsyn.com/nerdist/Number_14_-_Stan_Lee.mp3?nvb=20100515023937&amp;nva=20100516024937&amp;t=0e16d84c4fb7cc40a29c1&quot;</A>
&gt;<i> /dev/null 
</I>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
 16 47.8M   16 8111k    0     0  2277k      0  0:00:21  0:00:03  0:00:18
2287k^C
atom:~ fak$

I have attached a project to repro this.

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>












































































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="100953.html">[Mono-bugs] [Bug 606131] Opening Tools &gt; Extension manager crashes	VS2k10
</A></li>
	<LI>Next message: <A HREF="100582.html">[Mono-bugs] [Bug 606142] HTTP Does not follow redirects correctly
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#100551">[ date ]</a>
              <a href="thread.html#100551">[ thread ]</a>
              <a href="subject.html#100551">[ subject ]</a>
              <a href="author.html#100551">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
