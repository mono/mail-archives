<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 668089] New: Runtime exceptions trying to use WCF callbacks with MONO
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20668089%5D%20New%3A%20Runtime%20exceptions%20trying%20to%20use%20WCF%0A%20callbacks%20with%20MONO&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="108526.html">
   <LINK REL="Next"  HREF="108530.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 668089] New: Runtime exceptions trying to use WCF callbacks with MONO</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20668089%5D%20New%3A%20Runtime%20exceptions%20trying%20to%20use%20WCF%0A%20callbacks%20with%20MONO&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 668089] New: Runtime exceptions trying to use WCF callbacks with MONO">bugzilla_noreply at novell.com
       </A><BR>
    <I>Fri Jan 28 16:52:37 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="108526.html">[Mono-bugs] [Bug 648862] HttpWebRequest fails spectacularly in	MonoDroid
</A></li>
        <LI>Next message: <A HREF="108530.html">[Mono-bugs] [Bug 668089] Runtime exceptions trying to use WCF callbacks with MONO
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#108529">[ date ]</a>
              <a href="thread.html#108529">[ thread ]</a>
              <a href="subject.html#108529">[ subject ]</a>
              <a href="author.html#108529">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=668089">https://bugzilla.novell.com/show_bug.cgi?id=668089</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=668089#c0">https://bugzilla.novell.com/show_bug.cgi?id=668089#c0</A>


           Summary: Runtime exceptions trying to use WCF callbacks with
                    MONO
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.8.x
          Platform: All
        OS/Version: All
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: WCF
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">atsushi at ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">fabien.gigante at free.fr</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Created an attachment (id=411089)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=411089">http://bugzilla.novell.com/attachment.cgi?id=411089</A>)
Source code (various attempts)

User-Agent:       Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1;
Trident/4.0; GTB6.6; .NET CLR 1.1.4322; .NET CLR 2.0.50727; .NET CLR
3.0.04506.30; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; InfoPath.2; .NET4.0C;
NET4.0E)

I'm using WCF callbacks with netTcpBinding. My program is working fine with
native .NET but Mono always gives runtime exceptions. I made several attempts.
Workaround are also welcomed (before a fix is found).

I used Mono 2.8.2 on Windows. (But I believe the issue exists on all OS).

Three programs (source code) attached A/ Initial problem (Program.Original.cs)
B/ Simplified problem, as an attempt to work around issue A
(Program.Simplified.cs) and C/ Removing callbacks entirely
(Program.NoCallback.cs) just to make sure the issue was with callbacks.

Reproducible: Always

Steps to Reproduce:
A/ Initial problem
1. Compile Program.Original.cs (+ app.config)
2. Run

B/ Simplified problem (as an attempt to work around issue A)
1. Compile Program.Simplified.cs (+ app.config)
2. Run
Actual Results:  
A/ Initial problem
Following exception can be seen

Unhandled Exception: System.InvalidOperationException: A contract cannot have
tw
o operations that have the identical names and different set of parameters.
  at
System.ServiceModel.Description.ContractDescriptionGenerator.GetOrCreateOpe
ration (System.ServiceModel.Description.ContractDescription cd,
System.Reflectio
n.MethodInfo mi, System.Reflection.MethodInfo serviceMethod,
System.ServiceModel
OperationContractAttribute oca, System.Type asyncReturnType, Boolean
isCallback
) [0x00000] in &lt;filename unknown&gt;:0


B/ Simplified problem
Following exception can be seen

System.ServiceModel.EndpointNotFoundException: The request message has the
targe
t '' with action '<A HREF="http://tempuri.org/IService/JoinResponse'">http://tempuri.org/IService/JoinResponse'</A> which is not
reachab
le in this service contract
  at System.ServiceModel.MonoInternal.DuplexClientRuntimeChannel.ProcessInput
(I
InputChannel input, System.ServiceModel.Channels.Message message) [0x00000] in
&lt;
filename unknown&gt;:0

Expected Results:  
Expected console output :

Server hears Hello
Client callback hears Hello
Client callback hears Hello

When removing callbacks entirely (Program.NoCallback.cs), it working. (Showing
that the problem is very likely due to the usage of callbacks)

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>

































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="108526.html">[Mono-bugs] [Bug 648862] HttpWebRequest fails spectacularly in	MonoDroid
</A></li>
	<LI>Next message: <A HREF="108530.html">[Mono-bugs] [Bug 668089] Runtime exceptions trying to use WCF callbacks with MONO
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#108529">[ date ]</a>
              <a href="thread.html#108529">[ thread ]</a>
              <a href="subject.html#108529">[ subject ]</a>
              <a href="author.html#108529">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
