<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 662694] New: [SGEN] crash on extremely basic	application
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20662694%5D%20New%3A%20%5BSGEN%5D%20crash%20on%20extremely%20basic%0A%09application&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="107768.html">
   <LINK REL="Next"  HREF="107771.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 662694] New: [SGEN] crash on extremely basic	application</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20662694%5D%20New%3A%20%5BSGEN%5D%20crash%20on%20extremely%20basic%0A%09application&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 662694] New: [SGEN] crash on extremely basic	application">bugzilla_noreply at novell.com
       </A><BR>
    <I>Thu Jan  6 05:27:46 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="107768.html">[Mono-bugs] [Bug 662661] monodoc crashes at start
</A></li>
        <LI>Next message: <A HREF="107771.html">[Mono-bugs] [Bug 662694] [SGEN] crash on extremely basic application
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#107770">[ date ]</a>
              <a href="thread.html#107770">[ thread ]</a>
              <a href="subject.html#107770">[ subject ]</a>
              <a href="author.html#107770">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=662694">https://bugzilla.novell.com/show_bug.cgi?id=662694</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=662694#c0">https://bugzilla.novell.com/show_bug.cgi?id=662694#c0</A>


           Summary: [SGEN] crash on extremely basic application
    Classification: Mono
           Product: Mono: Runtime
           Version: SVN
          Platform: x86-64
        OS/Version: openSUSE 11.3
            Status: NEW
          Severity: Major
          Priority: P5 - None
         Component: GC
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">lupus at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">amcgovern at novell.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Created an attachment (id=407184)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=407184">http://bugzilla.novell.com/attachment.cgi?id=407184</A>)
testcase

The attached application crashes on amd64 approximately 30% of the time with
the following stacktrace. Given the simplistic nature of the app, I'm going to
assume it's pretty important we get this fixed for the next release if we want
sgen to be usable so I'm marking it as major:

[mono] ~/Projects @ mono-sgen a.exe 
Stacktrace:

  at (wrapper managed-to-native) System.GC.InternalCollect (int) &lt;IL 0x0000d,
0xffffffff&gt;
  at System.GC.Collect () [0x00000] in
/home/alan/Projects/mono/mcs/class/corlib/System/GC.cs:51
  at Test.MainClass.Main (string[]) &lt;IL 0x0002a, 0x0006f&gt;
  at (wrapper runtime-invoke) &lt;Module&gt;.runtime_invoke_void_object
(object,intptr,intptr,intptr) &lt;IL 0x00050, 0xffffffff&gt;

Native stacktrace:

    mono-sgen() [0x4917e6]
    mono-sgen() [0x4e670f]
    mono-sgen() [0x41a4b9]
    /lib64/libpthread.so.0(+0xf2e0) [0x7f8659c8b2e0]
    mono-sgen() [0x571fe0]
    mono-sgen() [0x572186]
    mono-sgen() [0x572212]
    mono-sgen() [0x5796ad]
    mono-sgen(mono_gc_collect+0x37) [0x57ca67]
    [0x41a48bea]

Debug info from gdb:

Missing separate debuginfo for /lib64/libm.so.6
Try: zypper install -C
&quot;debuginfo(build-id)=f05646449077dfbf15d5f78251a3b25e0f955dd9&quot;
Missing separate debuginfo for /lib64/librt.so.1
Try: zypper install -C
&quot;debuginfo(build-id)=d56892aae99874e3a6f41a277011ce0d114acf96&quot;
Missing separate debuginfo for /lib64/libdl.so.2
Try: zypper install -C
&quot;debuginfo(build-id)=b32241719a8a0234bb425377e47155231deadf26&quot;
Missing separate debuginfo for /lib64/libpthread.so.0
Try: zypper install -C
&quot;debuginfo(build-id)=0bfcf306c464b3ab89bd3e485c4f813196fecca5&quot;
Missing separate debuginfo for /lib64/libc.so.6
Try: zypper install -C
&quot;debuginfo(build-id)=8626ba66937eea83fbe594766f27ecd27bc0ab0d&quot;
Missing separate debuginfo for /lib64/ld-linux-x86-64.so.2
Try: zypper install -C
&quot;debuginfo(build-id)=cb584e8640c40d7b4adb4c44eb44e2f30bb274dc&quot;
Missing separate debuginfo for /lib64/libgcc_s.so.1
Try: zypper install -C
&quot;debuginfo(build-id)=92c1bf9d71eaca088ccc44ec457d0642096b13b4&quot;
[Thread debugging using libthread_db enabled]
[New Thread 0x7f8658065710 (LWP 29920)]
0x00007f8659c8a38d in read () from /lib64/libpthread.so.0
  2 Thread 0x7f8658065710 (LWP 29920)  0x00007f865994ed84 in sigsuspend () from
/lib64/libc.so.6
* 1 Thread 0x7f865a6f2780 (LWP 29919)  0x00007f8659c8a38d in read () from
/lib64/libpthread.so.0

Thread 2 (Thread 0x7f8658065710 (LWP 29920)):
#0  0x00007f865994ed84 in sigsuspend () from /lib64/libc.so.6
#1  0x00000000005714ab in suspend_handler (sig=&lt;value optimized out&gt;,
siginfo=&lt;value optimized out&gt;, context=0x7f8658064900)
    at sgen-gc.c:5064
#2  &lt;signal handler called&gt;
#3  0x00007f8659c895fe in sem_wait () from /lib64/libpthread.so.0
#4  0x00000000005e0f08 in mono_sem_wait (sem=0x904e00, alertable=0) at
mono-semaphore.c:113
#5  0x00000000005a33ed in finalizer_thread (unused=&lt;value optimized out&gt;) at
gc.c:1050
#6  0x00000000005408e1 in start_wrapper_internal (data=0x9bf9c0) at
threads.c:774
#7  start_wrapper (data=0x9bf9c0) at threads.c:822
#8  0x00000000005c6a14 in thread_start_routine (args=0x98be50) at
wthreads.c:285
#9  0x000000000057402d in gc_start_thread (arg=0x9bfd30) at sgen-gc.c:5846
#10 0x00007f8659c82a4f in start_thread () from /lib64/libpthread.so.0
#11 0x00007f86599ec82d in clone () from /lib64/libc.so.6
#12 0x0000000000000000 in ?? ()

Thread 1 (Thread 0x7f865a6f2780 (LWP 29919)):
#0  0x00007f8659c8a38d in read () from /lib64/libpthread.so.0
#1  0x000000000049196e in mono_handle_native_sigsegv (signal=&lt;value optimized
out&gt;, ctx=&lt;value optimized out&gt;)
    at mini-exceptions.c:2119
#2  0x00000000004e670f in mono_arch_handle_altstack_exception
(sigctx=0x7fff7c5fefc0, fault_addr=&lt;value optimized out&gt;, 
    stack_ovf=0) at exceptions-amd64.c:925
#3  0x000000000041a4b9 in mono_sigsegv_signal_handler (_dummy=7,
info=0x7fff7c5ff0f0, context=0x7fff7c5fefc0) at mini.c:5649
#4  &lt;signal handler called&gt;
#5  conservatively_pin_objects_from (start=0x7fff7c600000, end=0x7fff7c602000,
start_nursery=0x7f8657d01018, 
    end_nursery=0x7f8659918000, pin_type=&lt;value optimized out&gt;) at
sgen-gc.c:1986
#6  0x0000000000572186 in scan_thread_data (start_nursery=0x7f8657d01018,
end_nursery=0x7f8659918000, precise=0) at sgen-gc.c:5220
#7  0x0000000000572212 in pin_from_roots (start_nursery=0x7f8657d01018,
end_nursery=0x7f8659918000) at sgen-gc.c:2069
#8  0x00000000005796ad in major_do_collection (reason=0x68f617 &quot;user request&quot;)
at sgen-gc.c:3161
#9  major_collection (reason=0x68f617 &quot;user request&quot;) at sgen-gc.c:3352
#10 0x000000000057ca67 in mono_gc_collect (generation=&lt;value optimized out&gt;) at
sgen-gc.c:6686
#11 0x0000000041a48bea in ?? ()
#12 0x00000000009331e0 in ?? ()
#13 0x00000000009337a0 in ?? ()
#14 0x0000000000000000 in ?? ()

=================================================================
Got a SIGSEGV while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
=================================================================

Aborted

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>

























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="107768.html">[Mono-bugs] [Bug 662661] monodoc crashes at start
</A></li>
	<LI>Next message: <A HREF="107771.html">[Mono-bugs] [Bug 662694] [SGEN] crash on extremely basic application
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#107770">[ date ]</a>
              <a href="thread.html#107770">[ thread ]</a>
              <a href="subject.html#107770">[ subject ]</a>
              <a href="author.html#107770">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
