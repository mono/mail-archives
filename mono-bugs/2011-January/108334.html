<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 666413] Subclassing Attributes, not being generated in Manifest...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20666413%5D%20Subclassing%20Attributes%2C%0A%20not%20being%20generated%20in%20Manifest...&In-Reply-To=bug-666413-28286%40http.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="108333.html">
   <LINK REL="Next"  HREF="108335.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 666413] Subclassing Attributes, not being generated in Manifest...</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20666413%5D%20Subclassing%20Attributes%2C%0A%20not%20being%20generated%20in%20Manifest...&In-Reply-To=bug-666413-28286%40http.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 666413] Subclassing Attributes, not being generated in Manifest...">bugzilla_noreply at novell.com
       </A><BR>
    <I>Sat Jan 22 17:58:05 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="108333.html">[Mono-bugs] [Bug 666413] New: Subclassing Attributes, not being generated in Manifest...
</A></li>
        <LI>Next message: <A HREF="108335.html">[Mono-bugs] [Bug 666413] Subclassing Attributes, not being generated in Manifest...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#108334">[ date ]</a>
              <a href="thread.html#108334">[ thread ]</a>
              <a href="subject.html#108334">[ subject ]</a>
              <a href="author.html#108334">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=666413">https://bugzilla.novell.com/show_bug.cgi?id=666413</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=666413#c1">https://bugzilla.novell.com/show_bug.cgi?id=666413#c1</A>


Jonathan Pryor &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jpryor at novell.com</A>&gt; changed:

           What    |Removed                     |Added
----------------------------------------------------------------------------
                 CC|                            |<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jpryor at novell.com</A>

--- Comment #1 from Jonathan Pryor &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jpryor at novell.com</A>&gt; 2011-01-22 22:58:04 UTC ---
The problem here, fundamentally, is with profiles.

The user's assembly is built against the MonoDroid profile.

monodroid.exe is built against the .NET 3.5 profile.

Due to previous issues with using Reflection to load user assemblies +
Mono.Android.dll + etc. into monodroid.exe, we switched to using Cecil for the
IL analysis.  (Plus, we needed Cecil for linking.)

The problem is that Cecil doesn't load assemblies and execute code as
Reflection does; it loads the assemblies so that IL can be analyzed, but the IL
isn't ever executed, whereas with Reflection when you get an instance of a
custom attribute, you're getting an actual instance of a custom attribute
(which means that user code IS being executed in the reflector's AppDomain).

Because we're not using Reflection, no instances of e.g. C2dmReceiverAttribute
are actually constructed, the C2dmReceiverAttribute constructor is thus never
run, and thus the Permission property is never changed.

I will need to explore whether Reflection can be re-introduced to allow this to
work.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>



































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="108333.html">[Mono-bugs] [Bug 666413] New: Subclassing Attributes, not being generated in Manifest...
</A></li>
	<LI>Next message: <A HREF="108335.html">[Mono-bugs] [Bug 666413] Subclassing Attributes, not being generated in Manifest...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#108334">[ date ]</a>
              <a href="thread.html#108334">[ thread ]</a>
              <a href="subject.html#108334">[ subject ]</a>
              <a href="author.html#108334">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
