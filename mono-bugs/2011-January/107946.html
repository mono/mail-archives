<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 662315] Accessing System.Text.Encoding.Default results in a SIGILL
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20662315%5D%20Accessing%20System.Text.Encoding.Default%0A%20results%20in%20a%20SIGILL&In-Reply-To=bug-662315-28286%40http.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="107840.html">
   <LINK REL="Next"  HREF="107719.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 662315] Accessing System.Text.Encoding.Default results in a SIGILL</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20662315%5D%20Accessing%20System.Text.Encoding.Default%0A%20results%20in%20a%20SIGILL&In-Reply-To=bug-662315-28286%40http.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 662315] Accessing System.Text.Encoding.Default results in a SIGILL">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Jan 12 15:09:51 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="107840.html">[Mono-bugs] [Bug 662315] Accessing System.Text.Encoding.Default results in a SIGILL
</A></li>
        <LI>Next message: <A HREF="107719.html">[Mono-bugs] [Bug 662324] New: spurious warning when file doesn't	end with EOL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#107946">[ date ]</a>
              <a href="thread.html#107946">[ thread ]</a>
              <a href="subject.html#107946">[ subject ]</a>
              <a href="author.html#107946">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=662315">https://bugzilla.novell.com/show_bug.cgi?id=662315</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=662315#c2">https://bugzilla.novell.com/show_bug.cgi?id=662315#c2</A>


Jonathan Pryor &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jpryor at novell.com</A>&gt; changed:

           What    |Removed                     |Added
----------------------------------------------------------------------------
             Status|NEW                         |RESOLVED
                 CC|                            |<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jpryor at novell.com</A>
         Resolution|                            |FIXED

--- Comment #2 from Jonathan Pryor &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jpryor at novell.com</A>&gt; 2011-01-12 20:09:50 UTC ---
I can't reproduce this in svn, so presumably it's been fixed.

My guess, based on your statement that it fails in 2.2 but works in 2.3, is
that the the problem isn't WebClient/Encoding/etc., but rather an ABI change
between Android v8 and Android v9.

As an example that bit me, one of our test apps is basically:

    [Activity(MainLauncher=true)]
    class TestActivity : Activity {
        protected override void OnCreate(Bundle b)
        {
            var tv = new TextView (this);
            var sv = new ScrollView (this);
            sv.AddView (tv);
            SetContentView(sv);
            tv.Touch += (o, e) =&gt; Log.Info (&quot;TestApp&quot;, &quot;touched!&quot;);
        }
    }

It starts normally on a 2.2 device.  Touch the screen to scroll, and BOOM, it
crashes because it can't find the type android/view/InputEvent.  This comes up
because the Touch event passes a View.TouchEventArgs instance, which has a
View.TouchEventArgs.Event property, of type MotionEvent.  So MonoDroid
dutifully attempts to create a proxy for the MotionEvent instance.

Here's why it breaks in the above sample: in Android v8, MotionEvent inherits
Object.  In Android v9, MotionEvent inherits InputEvent, which is new to v9. 
Since the Mono.Android.dll you built your app against was based on Android v9,
it references v9-specific types, and things go boom.

Oops.

The next release will be fixing the above problem (and presumably the
Encoding.Default &amp; WebClient problems, as I can't reproduce them on trunk) by
moving to a &quot;one Mono.Android.dll per Android api level&quot; model; documentation
forthcoming.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="107840.html">[Mono-bugs] [Bug 662315] Accessing System.Text.Encoding.Default results in a SIGILL
</A></li>
	<LI>Next message: <A HREF="107719.html">[Mono-bugs] [Bug 662324] New: spurious warning when file doesn't	end with EOL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#107946">[ date ]</a>
              <a href="thread.html#107946">[ thread ]</a>
              <a href="subject.html#107946">[ subject ]</a>
              <a href="author.html#107946">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
