<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 664205] New: Delegates created from nested lambda expressions sometimes have no target
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20664205%5D%20New%3A%20Delegates%20created%20from%20nested%20lambda%0A%20expressions%20sometimes%20have%20no%20target&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="107951.html">
   <LINK REL="Next"  HREF="107953.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 664205] New: Delegates created from nested lambda expressions sometimes have no target</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20664205%5D%20New%3A%20Delegates%20created%20from%20nested%20lambda%0A%20expressions%20sometimes%20have%20no%20target&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 664205] New: Delegates created from nested lambda expressions sometimes have no target">bugzilla_noreply at novell.com
       </A><BR>
    <I>Thu Jan 13 05:01:47 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="107951.html">[Mono-bugs] [Bug 660928] Creating a GZipStream causes a crash
</A></li>
        <LI>Next message: <A HREF="107953.html">[Mono-bugs] [Bug 664205] Delegates created from nested lambda expressions sometimes have no target
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#107952">[ date ]</a>
              <a href="thread.html#107952">[ thread ]</a>
              <a href="subject.html#107952">[ subject ]</a>
              <a href="author.html#107952">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=664205">https://bugzilla.novell.com/show_bug.cgi?id=664205</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=664205#c0">https://bugzilla.novell.com/show_bug.cgi?id=664205#c0</A>


           Summary: Delegates created from nested lambda expressions
                    sometimes have no target
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.8.x
          Platform: x86
        OS/Version: openSUSE 11.1
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Sys.Core
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">timeslip at users.sourceforge.net</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: No


Created an attachment (id=408165)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=408165">http://bugzilla.novell.com/attachment.cgi?id=408165</A>)
test case

Description of Problem:
When using a nested LambdaExpression that doesn't use its implicit Closure
argument as an argument to a call that expects a Delegate type, the passed
delegate has no target but the generated method still has a first argument of
CompilerServices.Closure. This results in a mismatch in the expected and
supplied number of arguments when invoking the delegate. Either the delegate
should have its closure target, or the generated method shouldn't expect one.

Steps to reproduce the problem:
1. Compile and run the attached test case

Actual Results:
A TargetParameterCountException is thrown at the func.DynamicInvoke()
statement.

Expected Results:
Output '5'.

How often does this happen? 
Always

Additional Information:
Running on .net outputs 5 as expected.

If the test case is modified such that the Closure is referenced in the nested
lambda. (e.g. defining a local variable in the outer lambda, and returning it
from the nested lambda,) then it will work correctly.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>

























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="107951.html">[Mono-bugs] [Bug 660928] Creating a GZipStream causes a crash
</A></li>
	<LI>Next message: <A HREF="107953.html">[Mono-bugs] [Bug 664205] Delegates created from nested lambda expressions sometimes have no target
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#107952">[ date ]</a>
              <a href="thread.html#107952">[ thread ]</a>
              <a href="subject.html#107952">[ subject ]</a>
              <a href="author.html#107952">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
