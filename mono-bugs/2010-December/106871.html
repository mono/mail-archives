<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 654883] mono loops in sem_wait() unless a signal	is sent
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20654883%5D%20mono%20loops%20in%20sem_wait%28%29%20unless%20a%20signal%0A%09is%20sent&In-Reply-To=bug-654883-28286%40http.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="106870.html">
   <LINK REL="Next"  HREF="106872.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 654883] mono loops in sem_wait() unless a signal	is sent</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20654883%5D%20mono%20loops%20in%20sem_wait%28%29%20unless%20a%20signal%0A%09is%20sent&In-Reply-To=bug-654883-28286%40http.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 654883] mono loops in sem_wait() unless a signal	is sent">bugzilla_noreply at novell.com
       </A><BR>
    <I>Thu Dec  2 17:19:21 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="106870.html">[Mono-bugs] [Bug 656128] [sgen] crash when starting application
</A></li>
        <LI>Next message: <A HREF="106872.html">[Mono-bugs] [Bug 654883] mono loops in sem_wait() unless a signal	is sent
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#106871">[ date ]</a>
              <a href="thread.html#106871">[ thread ]</a>
              <a href="subject.html#106871">[ subject ]</a>
              <a href="author.html#106871">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=654883">https://bugzilla.novell.com/show_bug.cgi?id=654883</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=654883#c10">https://bugzilla.novell.com/show_bug.cgi?id=654883#c10</A>


--- Comment #10 from Robert Nagy &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">robert at humppa.hu</A>&gt; 2010-12-02 22:19:20 UTC ---
Hi

Gonzalo, I've implemented what you suggested but the same issue happens.
The diff I used is attached.

mono-semaphore.c:133: while ((res = read(sem[0], &amp;one, 1 &gt; 0) &amp;&amp; errno ==
EINTR))

(gdb) run /home/robert/nant-0.90/bootstrap/NAnt.exe -h
Starting program: /home/robert/mono/mono/mini/mono
/home/robert/nant-0.90/bootstrap/NAnt.exe -h
MONO_SEM_INIT: 0xacc2a0
MONO_SEM_INIT: 0xacc2c8
MONO_SEM_INIT: 0xacc340
MONO_SEM_INIT: 0xacc368
MONO_SEM_INIT: 0x20dd32188
MONO_SEM_INIT: 0xacbba0
MONO_SEM_INIT: 0x20dd32328
MONO_SEM_INIT: 0x20dd323f8
[New process 16687, thread 0x210171000]
MONO_SEM_INIT: 0x20dd32668
^C
Program received signal SIGINT, Interrupt.
[Switching to process 16687, thread 0x210171000]
0x00000002041a575a in kevent () from /usr/lib/libc.so.58.0
(gdb) thread apply all bt

Thread 5 (process 16687, thread 0x207b9b000):
#0  _thread_kern_sched (scp=0x0) at
/usr/src/lib/libpthread/uthread/uthread_kern.c:482
#1  0x00000002016340db in read (fd=18, buf=0x20f84eebf, nbytes=1) at
/usr/src/lib/libpthread/uthread/uthread_read.c:83
#2  0x00000000005c4dd0 in mono_sem_wait (sem=0xacbba0, alertable=0) at
mono-semaphore.c:133
#3  0x0000000000512158 in finalizer_thread (unused=Variable &quot;unused&quot; is not
available.
) at gc.c:1050
#4  0x000000000058a9db in start_wrapper (data=Variable &quot;data&quot; is not available.
) at threads.c:770
#5  0x00000000005ba383 in thread_start_routine (args=0x20dd322f8) at
wthreads.c:285
#6  0x0000000201a697a8 in GC_inner_start_routine () from
/usr/local/lib/libgc.so.3.0
#7  0x0000000201a69824 in GC_start_routine () from /usr/local/lib/libgc.so.3.0
#8  0x0000000201637cfd in _thread_start () at
/usr/src/lib/libpthread/uthread/uthread_create.c:242
#9  0x000000000000002b in ?? ()
#10 0x0000000000000000 in ?? ()

Thread 4 (process 16687, thread 0x20e563800):
#0  _thread_kern_sched (scp=0x0) at
/usr/src/lib/libpthread/uthread/uthread_kern.c:482
#1  0x000000020163cba6 in pthread_cond_timedwait (cond=0x2018461d8,
mutex=0x2018461d0, abstime=0x20cfb3f90) at
/usr/src/lib/libpthread/uthread/uthread_cond.c:431
#2  0x00000002016382eb in _thread_gc (arg=Variable &quot;arg&quot; is not available.
) at /usr/src/lib/libpthread/uthread/uthread_gc.c:181
#3  0x0000000201637cfd in _thread_start () at
/usr/src/lib/libpthread/uthread/uthread_create.c:242
#4  0x000000000000002b in ?? ()
#5  0x0000000000000000 in ?? ()

Thread 3 (process 16687, thread 0x209e6d800):
#0  _thread_start () at /usr/src/lib/libpthread/uthread/uthread_create.c:235
#1  0x000000000000002b in ?? ()
Cannot access memory at address 0x20d784000
#0  0x00000002041a575a in kevent () from /usr/lib/libc.so.58.0

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="106870.html">[Mono-bugs] [Bug 656128] [sgen] crash when starting application
</A></li>
	<LI>Next message: <A HREF="106872.html">[Mono-bugs] [Bug 654883] mono loops in sem_wait() unless a signal	is sent
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#106871">[ date ]</a>
              <a href="thread.html#106871">[ thread ]</a>
              <a href="subject.html#106871">[ subject ]</a>
              <a href="author.html#106871">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
