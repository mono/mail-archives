<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 656833] New: OdbcParameter.Bind() can pass a NULL pointer to SQLBindParameter
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20656833%5D%20New%3A%20OdbcParameter.Bind%28%29%20can%20pass%20a%20NULL%0A%20pointer%20to%20SQLBindParameter&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="106813.html">
   <LINK REL="Next"  HREF="106815.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 656833] New: OdbcParameter.Bind() can pass a NULL pointer to SQLBindParameter</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20656833%5D%20New%3A%20OdbcParameter.Bind%28%29%20can%20pass%20a%20NULL%0A%20pointer%20to%20SQLBindParameter&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 656833] New: OdbcParameter.Bind() can pass a NULL pointer to SQLBindParameter">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Dec  1 12:13:31 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="106813.html">[Mono-bugs] [Bug 456234] ODBC utf8: incorrect OdbcDataReader.GetValue() result for VARCHAR if byte size &gt;=255
</A></li>
        <LI>Next message: <A HREF="106815.html">[Mono-bugs] [Bug 372529] ODBC: (n)varchar parameters are not	supported
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#106814">[ date ]</a>
              <a href="thread.html#106814">[ thread ]</a>
              <a href="subject.html#106814">[ subject ]</a>
              <a href="author.html#106814">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=656833">https://bugzilla.novell.com/show_bug.cgi?id=656833</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=656833#c0">https://bugzilla.novell.com/show_bug.cgi?id=656833#c0</A>


           Summary: OdbcParameter.Bind() can pass a NULL pointer to
                    SQLBindParameter
    Classification: Mono
           Product: Mono: Class Libraries
           Version: SVN
          Platform: All
        OS/Version: All
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Sys.Data
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">Richard.Kettlewell at thales-esecurity.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


User-Agent:       Mozilla/5.0 (X11; U; Linux x86_64; en-US) AppleWebKit/534.7
(KHTML, like Gecko) Chrome/7.0.517.44 Safari/534.7

I found that when I supplied a zero-length value to OdbcParameter, the
zero-length internal copy of it would be allocated as a null pointer which was
subsequently passed to SQLBindParameter.

The driver we are using rejects this.  (I guess some drivers are more
forgiving, although the MSDN documentation for SQLBindParameter does explicitly
mention a NULL parameter value pointer as a reason for returning an error.)

As a quick fix, I made OdbcParameter.AllocateBuffer check for a size of 0 and
use 1 instead.


Reproducible: Always

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="106813.html">[Mono-bugs] [Bug 456234] ODBC utf8: incorrect OdbcDataReader.GetValue() result for VARCHAR if byte size &gt;=255
</A></li>
	<LI>Next message: <A HREF="106815.html">[Mono-bugs] [Bug 372529] ODBC: (n)varchar parameters are not	supported
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#106814">[ date ]</a>
              <a href="thread.html#106814">[ thread ]</a>
              <a href="subject.html#106814">[ subject ]</a>
              <a href="author.html#106814">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
