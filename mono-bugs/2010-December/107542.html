<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 661893] New: TabControl draws previously focused ComboBox on wrong TabPage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20661893%5D%20New%3A%20TabControl%20draws%20previously%20focused%0A%20ComboBox%20on%20wrong%20TabPage&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="107540.html">
   <LINK REL="Next"  HREF="107547.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 661893] New: TabControl draws previously focused ComboBox on wrong TabPage</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20661893%5D%20New%3A%20TabControl%20draws%20previously%20focused%0A%20ComboBox%20on%20wrong%20TabPage&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 661893] New: TabControl draws previously focused ComboBox on wrong TabPage">bugzilla_noreply at novell.com
       </A><BR>
    <I>Thu Dec 30 13:26:00 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="107540.html">[Mono-bugs] [Bug 661877] Utilities fail to find Mono when built with a prefix or suffix
</A></li>
        <LI>Next message: <A HREF="107547.html">[Mono-bugs] [Bug 661893] TabControl draws previously focused ComboBox on wrong TabPage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#107542">[ date ]</a>
              <a href="thread.html#107542">[ thread ]</a>
              <a href="subject.html#107542">[ subject ]</a>
              <a href="author.html#107542">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=661893">https://bugzilla.novell.com/show_bug.cgi?id=661893</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=661893#c0">https://bugzilla.novell.com/show_bug.cgi?id=661893#c0</A>


           Summary: TabControl draws previously focused ComboBox on wrong
                    TabPage
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.8.x
          Platform: Macintosh
        OS/Version: Mac OS X 10.5
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Windows.Forms
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">c8 at vokabeln.de</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Created an attachment (id=406612)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=406612">http://bugzilla.novell.com/attachment.cgi?id=406612</A>)
full VB.NET Project (use bin\Release\Test002TabControl.exe to test on Mac)

User-Agent:       Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64;
Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729;
Media Center PC 6.0; MDDC; .NET4.0C)

On a Windows Form, I created a TabControl with two TabPages. On TabPage1, I put
a ComboBox with .DrowDownStyle = DropDownList and a few Items (&quot;a&quot;, &quot;b&quot;, &quot;c&quot;).
TabPage2 remains empty. 

Now I started the programme on Mac, and perform the following mouse clicks: 
- Select any Item from the ComboBox on TabPage1
- Now immediately click on TabPage2
The ControlBox is now visible on TabPage2 (but cannot be used there). 


Reproducible: Always

Steps to Reproduce:
1. In VB.NET, created a Form with the following designer code: 

&lt;Global.Microsoft.VisualBasic.CompilerServices.DesignerGenerated()&gt; _
Partial Class Form1
  Inherits System.Windows.Forms.Form

  &lt;System.Diagnostics.DebuggerNonUserCode()&gt; _
  Protected Overrides Sub Dispose(ByVal disposing As Boolean)
    Try
      If disposing AndAlso components IsNot Nothing Then
        components.Dispose()
      End If
    Finally
      MyBase.Dispose(disposing)
    End Try
  End Sub

  Private components As System.ComponentModel.IContainer

  &lt;System.Diagnostics.DebuggerStepThrough()&gt; _
  Private Sub InitializeComponent()
    Me.TabControl1 = New System.Windows.Forms.TabControl
    Me.TabPage1 = New System.Windows.Forms.TabPage
    Me.ComboBox1 = New System.Windows.Forms.ComboBox
    Me.TabPage2 = New System.Windows.Forms.TabPage
    Me.TabControl1.SuspendLayout()
    Me.TabPage1.SuspendLayout()
    Me.SuspendLayout()
    '
    'TabControl1
    '
    Me.TabControl1.Controls.Add(Me.TabPage1)
    Me.TabControl1.Controls.Add(Me.TabPage2)
    Me.TabControl1.Location = New System.Drawing.Point(23, 21)
    Me.TabControl1.Name = &quot;TabControl1&quot;
    Me.TabControl1.SelectedIndex = 0
    Me.TabControl1.Size = New System.Drawing.Size(243, 222)
    Me.TabControl1.TabIndex = 0
    '
    'TabPage1
    '
    Me.TabPage1.Controls.Add(Me.ComboBox1)
    Me.TabPage1.Location = New System.Drawing.Point(4, 22)
    Me.TabPage1.Name = &quot;TabPage1&quot;
    Me.TabPage1.Padding = New System.Windows.Forms.Padding(3)
    Me.TabPage1.Size = New System.Drawing.Size(235, 196)
    Me.TabPage1.TabIndex = 0
    Me.TabPage1.Text = &quot;TabPage1&quot;
    Me.TabPage1.UseVisualStyleBackColor = True
    '
    'ComboBox1
    '
    Me.ComboBox1.DropDownStyle =
System.Windows.Forms.ComboBoxStyle.DropDownList
    Me.ComboBox1.FormattingEnabled = True
    Me.ComboBox1.Items.AddRange(New Object() {&quot;a&quot;, &quot;b&quot;, &quot;c&quot;})
    Me.ComboBox1.Location = New System.Drawing.Point(17, 33)
    Me.ComboBox1.Name = &quot;ComboBox1&quot;
    Me.ComboBox1.Size = New System.Drawing.Size(195, 21)
    Me.ComboBox1.TabIndex = 0
    '
    'TabPage2
    '
    Me.TabPage2.Location = New System.Drawing.Point(4, 22)
    Me.TabPage2.Name = &quot;TabPage2&quot;
    Me.TabPage2.Padding = New System.Windows.Forms.Padding(3)
    Me.TabPage2.Size = New System.Drawing.Size(235, 196)
    Me.TabPage2.TabIndex = 1
    Me.TabPage2.Text = &quot;TabPage2&quot;
    Me.TabPage2.UseVisualStyleBackColor = True
    '
    'Form1
    '
    Me.AutoScaleDimensions = New System.Drawing.SizeF(6.0!, 13.0!)
    Me.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font
    Me.ClientSize = New System.Drawing.Size(284, 262)
    Me.Controls.Add(Me.TabControl1)
    Me.Name = &quot;Form1&quot;
    Me.Text = &quot;Form1&quot;
    Me.TabControl1.ResumeLayout(False)
    Me.TabPage1.ResumeLayout(False)
    Me.ResumeLayout(False)

  End Sub
  Friend WithEvents TabControl1 As System.Windows.Forms.TabControl
  Friend WithEvents TabPage1 As System.Windows.Forms.TabPage
  Friend WithEvents TabPage2 As System.Windows.Forms.TabPage
  Friend WithEvents ComboBox1 As System.Windows.Forms.ComboBox
End Class


2. Compile the program and run it on Mac OS X using Mono. 

3. Use the mouse to select an Item from the ComboBox on TabPage1, then
immediately click on TabPage2
Actual Results:  
The ComboBox from TabPage1 is visible on TabPage2. 

Expected Results:  
TabPage2 should, of course, be empty.

I made the following additional observations: 

* This problem happens on Mac, but not on Windows (sorry, I could not test it
on Linux). 

* It does NOT happen if I click on TabPage1 -&gt; ComboBox -&gt; TabPage1 -&gt;
TabPage2. So, TabPage2 must be clicked immediately after selecting an Item from
ComboBox, for the problem to arise. 

* Similar effects can be observed if, instead of a ComboBox, you focus a
CheckBox on TabPage1, or if you *select* text in TextBox on TabPage1 (but not
if you put the cursor in the TextBox without selecting text)

* I checked the order of events fired, and that was fine (i.e. Windows and Mac
showed the same order (but Mac had three events more than Windows): 

- TabPage1.Leave [only on Mac]
- TabPage1.Validating
- TabPage1.Validated
- TabControl.Deselecting
- TabControl.Deselected
- TabPage1.Leave
- TabControl.Selecting
- TabPage2.Enter
- TabControl.SelectedIndexChanged
- TabControl.MouseDown
- TabControl.LostFocus [only on Mac]
- TabControl.LostFocus [only on Mac]
- TabControl.Click 
- TabControl.MouseClick
- TabControl.MouseUp.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="107540.html">[Mono-bugs] [Bug 661877] Utilities fail to find Mono when built with a prefix or suffix
</A></li>
	<LI>Next message: <A HREF="107547.html">[Mono-bugs] [Bug 661893] TabControl draws previously focused ComboBox on wrong TabPage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#107542">[ date ]</a>
              <a href="thread.html#107542">[ thread ]</a>
              <a href="subject.html#107542">[ subject ]</a>
              <a href="author.html#107542">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
