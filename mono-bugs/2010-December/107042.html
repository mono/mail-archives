<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 658278] New: Ajaxified control nested in another ajaxified control does not update
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20658278%5D%20New%3A%20Ajaxified%20control%20nested%20in%20another%0A%20ajaxified%20control%20does%20not%20update&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="107403.html">
   <LINK REL="Next"  HREF="107049.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 658278] New: Ajaxified control nested in another ajaxified control does not update</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20658278%5D%20New%3A%20Ajaxified%20control%20nested%20in%20another%0A%20ajaxified%20control%20does%20not%20update&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 658278] New: Ajaxified control nested in another ajaxified control does not update">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Dec  8 11:35:49 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="107403.html">[Mono-bugs] [Bug 658249] DataTable GetChanges() or AcceptChanges() causes a timeout
</A></li>
        <LI>Next message: <A HREF="107049.html">[Mono-bugs] [Bug 658278] Ajaxified control nested in another ajaxified control does not update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#107042">[ date ]</a>
              <a href="thread.html#107042">[ thread ]</a>
              <a href="subject.html#107042">[ subject ]</a>
              <a href="author.html#107042">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=658278">https://bugzilla.novell.com/show_bug.cgi?id=658278</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=658278#c0">https://bugzilla.novell.com/show_bug.cgi?id=658278#c0</A>


           Summary: Ajaxified control nested in another ajaxified control
                    does not update
    Classification: Mono
           Product: Mono: Class Libraries
           Version: SVN
          Platform: All
        OS/Version: All
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Sys.Web
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mhabersack at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jmilillo at aviorcomputing.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Created an attachment (id=403961)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=403961">http://bugzilla.novell.com/attachment.cgi?id=403961</A>)
Nested Ajax VS Project

User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.3)
Gecko/20100401 Firefox/3.6.3 ( .NET CLR 3.5.30729; .NET4.0E)

Given a page with a RadTabStrip and a RadMultiPage, the tabstrip is set to
update the multipage via RadAjaxManager in Default.  The multipage contains a
user control, which itself contains a button and a label.  The button is set to
change the text of the label and update it via RadAjaxProxy.

Clicking on the button causes the whole multipage to refresh, which is not the
desired behavior, because RadAjaxManager creates updatepanels with
ChildrenAsTriggers=true by default.  Setting ChildrenAsTriggers=false for the
multipage *should* allow the label only to be updated.  However, nothing is
updated in this case, though the label text does get changed (noticed while
stepping through code).  The inner updatepanel is not showing in the response
viewed in Firebug, like it does for .Net.

Should a child updatepanel be considered a &quot;child&quot; if it's parent is set to
ChildrenAsTrigger=false?

I was able to get the desired behavior by changing UpdatePanel's RenderChildren
method to not only check for ParentPanel != null but to also check
ParentPanel.ChildrenAsTriggers when trying to determine whether or not to call
ScriptManager.WriteCallbackPanel.  I don't know if this is a complete solution,
but seemed to fix my problem.

if (sb.Length &gt; 0) {
  if (ParentPanel != null &amp;&amp; ParentPanel.ChildrenAsTriggers)
    writer.Write (sb.ToString ());
  else
    ScriptManager.WriteCallbackPanel (responseOutput, this, sb);
}

I also noticed that the updatepanels in the response where listed in the exact
opposite order form .Net.  Don't know if that is relevant. 

Reproducible: Always

Steps to Reproduce:
1. Click on button &quot;Update multipage label only&quot; at bottom of page
Actual Results:  
No update happens.

Expected Results:  
Label at bottom of page with starting text &quot;Multipage label before update&quot;
should have changed to &quot;Changed by multipage button (solo)&quot;

Other buttons and one other label are supplied to test other scenarios.  

The label/button combo at the top of the page will show ajax working correctly
outside of the multipage.  

The first button at the bottom called &quot;Updates outer label only&quot; will show a
nested control correctly updating a control outside of the multipage.

The last button at the bottom called &quot;Updates both labels&quot; will show the outer
label being updated correctly, while the nested label does not.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>











































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="107403.html">[Mono-bugs] [Bug 658249] DataTable GetChanges() or AcceptChanges() causes a timeout
</A></li>
	<LI>Next message: <A HREF="107049.html">[Mono-bugs] [Bug 658278] Ajaxified control nested in another ajaxified control does not update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#107042">[ date ]</a>
              <a href="thread.html#107042">[ thread ]</a>
              <a href="subject.html#107042">[ subject ]</a>
              <a href="author.html#107042">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
