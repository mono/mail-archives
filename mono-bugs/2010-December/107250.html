<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 474217] Creating a remoting connection takes very long when a large number of clients connect simultaneously
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20474217%5D%20Creating%20a%20remoting%20connection%20takes%20very%0A%20long%20when%20a%20large%20number%20of%20clients%20connect%20simultaneously&In-Reply-To=bug-474217-28286%40http.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="107244.html">
   <LINK REL="Next"  HREF="107251.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 474217] Creating a remoting connection takes very long when a large number of clients connect simultaneously</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20474217%5D%20Creating%20a%20remoting%20connection%20takes%20very%0A%20long%20when%20a%20large%20number%20of%20clients%20connect%20simultaneously&In-Reply-To=bug-474217-28286%40http.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 474217] Creating a remoting connection takes very long when a large number of clients connect simultaneously">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Dec 14 07:22:51 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="107244.html">[Mono-bugs] [Bug 655770] [regression] Unused members in nested classes do not result in CS0169
</A></li>
        <LI>Next message: <A HREF="107251.html">[Mono-bugs] [Bug 655284] Automatic assembly version generation is	broken
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#107250">[ date ]</a>
              <a href="thread.html#107250">[ thread ]</a>
              <a href="subject.html#107250">[ subject ]</a>
              <a href="author.html#107250">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=474217">https://bugzilla.novell.com/show_bug.cgi?id=474217</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=474217#c9">https://bugzilla.novell.com/show_bug.cgi?id=474217#c9</A>


--- Comment #9 from Lluis Sanchez &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">lluis at novell.com</A>&gt; 2010-12-14 12:22:49 UTC ---
When I implemented the Tcp channel I did not use the system thread pool because
I had bad experiences with it. For example, let's say you have a remote method
which directly or indirectly uses the thread pool. Let's also say you have a
limit of 50 thread pool threads, and then you make 50 concurrent calls to that
remote method, which are dispatched using the thread pool. This will result in
a deadlock of the whole application, since the 50 threads are waiting for one
more thread to be available, which will never happen. Maybe this is an extreme
case, but I remember hitting this issue in the old days when doing some stress
tests. I just built a test case that reproduces the deadlock by constraining
the number of available pool threads, so the issue is still there (I could
reproduce it with the http channel, which uses the threadpool, not with tcp).

I don't know how likely is to hit this issue nowadays in real world
applications. The thread pool limit is not higher, so maybe it is not so
likely. However I still feel uncomfortable about using the system thread pool
as a request processing pool, but if you guys think that there is no real
problem with it, I'm ok with doing the change. In any case, the PoolGrowDelay
issue is a bug that can be fixed.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="107244.html">[Mono-bugs] [Bug 655770] [regression] Unused members in nested classes do not result in CS0169
</A></li>
	<LI>Next message: <A HREF="107251.html">[Mono-bugs] [Bug 655284] Automatic assembly version generation is	broken
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#107250">[ date ]</a>
              <a href="thread.html#107250">[ thread ]</a>
              <a href="subject.html#107250">[ subject ]</a>
              <a href="author.html#107250">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
