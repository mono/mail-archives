<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 75969][Nor] New - Bad encoding of security
	attributes on partial classes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2075969%5D%5BNor%5D%20New%20-%20Bad%20encoding%20of%20security%0A%09attributes%20on%20partial%20classes&In-Reply-To=bug-75969%40chernobyl.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033125.html">
   <LINK REL="Next"  HREF="033127.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 75969][Nor] New - Bad encoding of security
	attributes on partial classes</H1>
    <B>bugzilla-daemon at bugzilla.ximian.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2075969%5D%5BNor%5D%20New%20-%20Bad%20encoding%20of%20security%0A%09attributes%20on%20partial%20classes&In-Reply-To=bug-75969%40chernobyl.ximian.com"
       TITLE="[Mono-bugs] [Bug 75969][Nor] New - Bad encoding of security
	attributes on partial classes">bugzilla-daemon at bugzilla.ximian.com
       </A><BR>
    <I>Fri Sep  2 12:15:35 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="033125.html">[Mono-bugs] [Bug 57747][Wis] Changed - We no do track definite
	assignment of expressions (12.3.3.23-26)
</A></li>
        <LI>Next message: <A HREF="033127.html">[Mono-bugs] [Bug 75968][Nor] Changed - [PATCH] allow string array
	for attribute parameter type
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33126">[ date ]</a>
              <a href="thread.html#33126">[ thread ]</a>
              <a href="subject.html#33126">[ subject ]</a>
              <a href="author.html#33126">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">sebastien at ximian.com.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=75969">http://bugzilla.ximian.com/show_bug.cgi?id=75969</A>

--- shadow/75969	2005-09-02 12:15:35.000000000 -0400
+++ shadow/75969.tmp.13099	2005-09-02 12:15:35.000000000 -0400
@@ -0,0 +1,69 @@
+Bug#: 75969
+Product: Mono: Compilers
+Version: 1.1
+OS: All
+OS Details: 
+Status: NEW   
+Resolution: 
+Severity: 
+Priority: Normal
+Component: C#
+AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at ximian.com</A>                            
+ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">sebastien at ximian.com</A>               
+QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at ximian.com</A>
+TargetMilestone: ---
+URL: 
+Cc: 
+Summary: Bad encoding of security attributes on partial classes
+
+Description of Problem:
+Security attributes are encoded as custom attributes (and not as
+declarative security attributes) on partial classes.
+
+Steps to reproduce the problem:
+1. Compile System.Web.dll
+2. Monodis System.Web.dll
+3. Look at System.Web.Configuration.HttpCapabilitiesBase and compare it
+with System.Web.UI.HtmlControls.HtmlAnchor
+
+Actual Results:
+    .custom instance void class
+[System]System.Web.AspNetHostingPermissionAttribute::.ctor(valuetype
+[mscorlib]System.Security.Permissions.SecurityAction) =  (
+		01 00 06 00 00 00 01 00 54 55 75 53 79 73 74 65   // ........TUuSyste
+		6D 2E 57 65 62 2E 41 73 70 4E 65 74 48 6F 73 74   // m.Web.AspNetHost
+		69 6E 67 50 65 72 6D 69 73 73 69 6F 6E 4C 65 76   // ingPermissionLev
+		65 6C 2C 20 53 79 73 74 65 6D 2C 20 56 65 72 73   // el, System, Vers
+		69 6F 6E 3D 31 2E 30 2E 35 30 30 30 2E 30 2C 20   // ion=1.0.5000.0, 
+		43 75 6C 74 75 72 65 3D 6E 65 75 74 72 61 6C 2C   // Culture=neutral,
+		20 50 75 62 6C 69 63 4B 65 79 54 6F 6B 65 6E 3D   //  PublicKeyToken=
+		62 37 37 61 35 63 35 36 31 39 33 34 65 30 38 39   // b77a5c561934e089
+		05 4C 65 76 65 6C C8 00 00 00                   ) // .Level....
+
+
+Expected Results:
+    .permissionset linkcheck =  (
+    3C 00 50 00 65 00 72 00 6D 00 69 00 73 00 73 00   // &lt;.P.e.r.m.i.s.s.
+    69 00 6F 00 6E 00 53 00 65 00 74 00 20 00 63 00   // i.o.n.S.e.t. .c.
+    6C 00 61 00 73 00 73 00 3D 00 22 00 53 00 79 00   // l.a.s.s.=.&quot;.S.y.
+    73 00 74 00 65 00 6D 00 2E 00 53 00 65 00 63 00   // s.t.e.m...S.e.c.
+    75 00 72 00 69 00 74 00 79 00 2E 00 50 00 65 00   // u.r.i.t.y...P.e.
+    72 00 6D 00 69 00 73 00 73 00 69 00 6F 00 6E 00   // r.m.i.s.s.i.o.n.
+    53 00 65 00 74 00 22 00 0A 00 20 00 20 00 20 00   // S.e.t.&quot;... . . .
+...
+
+How often does this happen? 
+Only seen in partial classes.
+
+Additional Information:
+* See System.Web.Configuration.HttpCapabilitiesBase in System.Web.dll
+* Running the unit tests with the security manager active (mono --security)
+and without excluding the CAS category should not give any error on
+MonoCasTests.System.Web.Configuration.HttpCapabilitiesBaseCas
+
+e.g.
+MONO_PATH=&quot;../../class/lib/default::$MONO_PATH&quot;
+/home/poupou/svn/mono/runtime/mono-wrapper --security --debug
+../../class/lib/default/nunit-console.exe
+/exclude:NotWorking,ValueAdd,InetAccess System.Web_test_default.dll
+/fixture=MonoCasTests.System.Web.Configuration
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033125.html">[Mono-bugs] [Bug 57747][Wis] Changed - We no do track definite
	assignment of expressions (12.3.3.23-26)
</A></li>
	<LI>Next message: <A HREF="033127.html">[Mono-bugs] [Bug 75968][Nor] Changed - [PATCH] allow string array
	for attribute parameter type
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33126">[ date ]</a>
              <a href="thread.html#33126">[ thread ]</a>
              <a href="subject.html#33126">[ subject ]</a>
              <a href="author.html#33126">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
