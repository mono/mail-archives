<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 76100][Nor] Changed - mcs: yield in a lock block
	generates exception
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2076100%5D%5BNor%5D%20Changed%20-%20mcs%3A%20yield%20in%20a%20lock%20block%0A%09generates%20exception&In-Reply-To=bug-76100%40chernobyl.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033687.html">
   <LINK REL="Next"  HREF="033696.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 76100][Nor] Changed - mcs: yield in a lock block
	generates exception</H1>
    <B>bugzilla-daemon at bugzilla.ximian.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2076100%5D%5BNor%5D%20Changed%20-%20mcs%3A%20yield%20in%20a%20lock%20block%0A%09generates%20exception&In-Reply-To=bug-76100%40chernobyl.ximian.com"
       TITLE="[Mono-bugs] [Bug 76100][Nor] Changed - mcs: yield in a lock block
	generates exception">bugzilla-daemon at bugzilla.ximian.com
       </A><BR>
    <I>Fri Sep 16 03:04:46 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="033687.html">[Mono-bugs] [Bug 76075][Nor] Changed - Cannot write to named pipe
	using FileStream
</A></li>
        <LI>Next message: <A HREF="033696.html">[Mono-bugs] [Bug 75758][Wis] Changed - TypeConvertor returns
	non-browsable properties
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33689">[ date ]</a>
              <a href="thread.html#33689">[ thread ]</a>
              <a href="subject.html#33689">[ subject ]</a>
              <a href="author.html#33689">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">schwimmlehrer at hotmail.com.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=76100">http://bugzilla.ximian.com/show_bug.cgi?id=76100</A>

--- shadow/76100	2005-09-14 06:35:00.000000000 -0400
+++ shadow/76100.tmp.19315	2005-09-16 03:04:46.000000000 -0400
@@ -62,6 +62,47 @@
 Should compile and run (lock the object as long as the loop is executed).
 MCS should not expose its stack trace especially on code that seems to be
 valid (at least to me and to Microsoft csc).
 
 How often does this happen? 
 Always
+
+------- Additional Comments From <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">schwimmlehrer at hotmail.com</A>  2005-09-16 03:04 -------
+According to the Microsoft documentation it is ok to have yield in a
+try block if there is no catch clause:
+<A HREF="http://winfx.msdn.microsoft.com/library/en-us/dv_csref/html/1089194f-9e53-46a2-8642-53ccbe9d414d.asp">http://winfx.msdn.microsoft.com/library/en-us/dv_csref/html/1089194f-9e53-46a2-8642-53ccbe9d414d.asp</A>
+
+I did a quick test. This is valid with csc. It is similar to having
+lock () 
+{}
+
+  try
+  {
+   for (int i = 0; i &lt; 10; i++)
+    yield return true;
+  }
+  finally
+  {
+  }
+
+
+  lock (lockit)
+  {
+   for (int i = 0; i &lt; 10; i++)
+    yield return true;
+  }
+
+This is invalid:
+
+  try
+  {
+   for (int i = 0; i &lt; 10; i++)
+    yield return true;
+  }
+  catch (Exception e)
+  {
+  }
+
+
+Test.cs(38,5): error CS1626: Cannot yield a value in the body of a try
+block with a catch clause
+
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033687.html">[Mono-bugs] [Bug 76075][Nor] Changed - Cannot write to named pipe
	using FileStream
</A></li>
	<LI>Next message: <A HREF="033696.html">[Mono-bugs] [Bug 75758][Wis] Changed - TypeConvertor returns
	non-browsable properties
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33689">[ date ]</a>
              <a href="thread.html#33689">[ thread ]</a>
              <a href="subject.html#33689">[ subject ]</a>
              <a href="author.html#33689">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
