<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 76218][Nor] Changed - Tokenizer/Seekable stream
	bugs.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2076218%5D%5BNor%5D%20Changed%20-%20Tokenizer/Seekable%20stream%0A%09bugs.&In-Reply-To=bug-76218%40chernobyl.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034162.html">
   <LINK REL="Next"  HREF="034164.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 76218][Nor] Changed - Tokenizer/Seekable stream
	bugs.</H1>
    <B>bugzilla-daemon at bugzilla.ximian.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2076218%5D%5BNor%5D%20Changed%20-%20Tokenizer/Seekable%20stream%0A%09bugs.&In-Reply-To=bug-76218%40chernobyl.ximian.com"
       TITLE="[Mono-bugs] [Bug 76218][Nor] Changed - Tokenizer/Seekable stream
	bugs.">bugzilla-daemon at bugzilla.ximian.com
       </A><BR>
    <I>Tue Sep 27 12:23:54 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="034162.html">[Mono-bugs] [Bug 75584][Blo] Changed - [GMCS] line 1810
	(mono_metadata_parse_generic_param): assertion failed:
	(generic_context)
</A></li>
        <LI>Next message: <A HREF="034164.html">[Mono-bugs] [Bug 76218][Nor] Changed - Tokenizer/Seekable stream
	bugs.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34163">[ date ]</a>
              <a href="thread.html#34163">[ thread ]</a>
              <a href="subject.html#34163">[ subject ]</a>
              <a href="author.html#34163">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">rharinath at novell.com.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=76218">http://bugzilla.ximian.com/show_bug.cgi?id=76218</A>

--- shadow/76218	2005-09-27 12:14:26.000000000 -0400
+++ shadow/76218.tmp.14964	2005-09-27 12:23:54.000000000 -0400
@@ -10,12 +10,13 @@
 Component: C#
 AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">rharinath at novell.com</A>                            
 ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">miguel at ximian.com</A>               
 QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at ximian.com</A>
 TargetMilestone: ---
 URL: 
+Cc: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">atsushi at ximian.com</A><A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">,martin at ximian.com</A>
 Summary: Tokenizer/Seekable stream bugs.
 
 &gt; 
 &gt;     Please download this:
 &gt; 
 &gt;       <A HREF="http://primates.ximian.com/~miguel/tmp/fileCopier.tar.bz2">http://primates.ximian.com/~miguel/tmp/fileCopier.tar.bz2</A>
@@ -120,6 +121,19 @@
 When I saw this patch for the first time on the list, I remember
 asking  Atsushi about the performance implications of adding more
 tests to the pipeline. 
 
 But it turned out that his path consumed less memory and was faster
 than our extra layer (SeekableStream) which impacts every read.
+
+------- Additional Comments From <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">rharinath at novell.com</A>  2005-09-27 12:23 -------
+I have a rewrite that gives up any hope of trying to match up with the
+underlying Stream -- so no more bugs due to us guessing the number of
+bytes a given number of chars occupied originally.
+
+For the gain in simplicity, we lose the ability to seek arbitrarily in
+the file.  We can only seek within 1024 chars, effective limiting our
+lookahead to that.  It's much cheaper than the old code, and supports
+almost arbitrary (upto 1024 chars) seeks.  If a parser cannot decide
+in 1024 bytes, it might as well give up ;-)
+
+Patch attached.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034162.html">[Mono-bugs] [Bug 75584][Blo] Changed - [GMCS] line 1810
	(mono_metadata_parse_generic_param): assertion failed:
	(generic_context)
</A></li>
	<LI>Next message: <A HREF="034164.html">[Mono-bugs] [Bug 76218][Nor] Changed - Tokenizer/Seekable stream
	bugs.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34163">[ date ]</a>
              <a href="thread.html#34163">[ thread ]</a>
              <a href="subject.html#34163">[ subject ]</a>
              <a href="author.html#34163">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
