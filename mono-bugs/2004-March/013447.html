<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 54068][Wis] Changed - The xsp server crash with bus error.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:bugzilla-daemon%40bugzilla.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="013446.html">
   <LINK REL="Next"  HREF="013448.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 54068][Wis] Changed - The xsp server crash with bus error.
   </H1>
    <B>bugzilla-daemon@bugzilla.ximian.com
    </B> 
    <A HREF="mailto:bugzilla-daemon%40bugzilla.ximian.com"
       TITLE="[Mono-bugs] [Bug 54068][Wis] Changed - The xsp server crash with bus error.">bugzilla-daemon@bugzilla.ximian.com
       </A><BR>
    <I>Mon, 22 Mar 2004 04:50:06 -0500 (EST)</I>
    <P><UL>
        <LI> Previous message: <A HREF="013446.html">[Mono-bugs] [Bug 55875][Nor] Changed - Cause of compile error in msxsl:script lost
</A></li>
        <LI> Next message: <A HREF="013448.html">[Mono-bugs] [Bug 55893][Nor] New - Mono Monitor fails on code which runs in MS.NET
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13447">[ date ]</a>
              <a href="thread.html#13447">[ thread ]</a>
              <a href="subject.html#13447">[ subject ]</a>
              <a href="author.html#13447">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="mailto:ztashev@openlinksw.co.uk.">ztashev@openlinksw.co.uk.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=54068">http://bugzilla.ximian.com/show_bug.cgi?id=54068</A>

--- shadow/54068	2004-02-17 03:49:49.000000000 -0500
+++ shadow/54068.tmp.980	2004-03-22 04:50:06.000000000 -0500
@@ -1,8 +1,8 @@
 Bug#: 54068
-Product: Mono/Runtime
+Product: Mono: Runtime
 Version: unspecified
 OS: unknown
 OS Details: 
 Status: NEW   
 Resolution: 
 Severity: Unknown
@@ -453,6 +453,280 @@
 object.c:1212
 #8  0x0049e008 in mono_main (argc=2, argv=0xbffffca8) at interp.c:5163
 #9  0x00001dc8 in main (argc=2, argv=0xbffffca8) at main.c:7
 0x0048d544      1607            frame-&gt;ex = NULL;
 (gdb)
 
+
+------- Additional Comments From <A HREF="mailto:ztashev@openlinksw.co.uk">ztashev@openlinksw.co.uk</A>  2004-03-22 04:50 -------
+The problem is persists with MONO 0.31
+Call stack:
+
+MONO:
+
+GNU gdb 5.3-20030128 (Apple version gdb-309) (Thu Dec  4 15:41:30 GMT 
+2003)
+Copyright 2003 Free Software Foundation, Inc.
+GDB is free software, covered by the GNU General Public License, and 
+you are
+welcome to change it and/or distribute copies of it under certain 
+conditions.
+Type &quot;show copying&quot; to see the conditions.
+There is absolutely no warranty for GDB.  Type &quot;show warranty&quot; for 
+details.
+This GDB was configured as &quot;powerpc-apple-darwin&quot;.
+Reading symbols for shared libraries ......... done
+(gdb) r xsp.exe
+Starting 
+program: /Users/virtdev/portspace/virt_bin/mono_inst/bin/mono xsp.exe
+Reading symbols for shared libraries ++++++. done
+
+** ERROR **: file mini-ppc.c: line 2274 
+(mono_arch_output_basic_block): assertion failed: (ppc_is_imm16 (ins-
+&gt;inst_offset))
+aborting...
+
+Program received signal SIGABRT, Aborted.
+0x90018ce8 in semaphore_timedwait_signal_trap ()
+(gdb)  t a a bt
+
+Thread 3 (process 11201 thread 0x2203):
+#0  0x90034f4c in _exit ()
+#1  0x9002c8ec in exit ()
+#2  0x9009ecb0 in abort ()
+#3  0x002d315c in g_logv ()
+#4  0x002d3234 in g_log ()
+#5  0x0106cffc in mono_arch_output_basic_block (cfg=0x4acf20, 
+bb=0x18451d0) at mini-ppc.c:2274
+#6  0x0102a76c in mono_codegen (cfg=0x4acf20) at mini.c:7351
+#7  0x0102b964 in mini_method_compile (method=0x4773d0, opts=67595, 
+domain=0xb8f18, run_cctors=1, parts=0) at mini.c:7790
+#8  0x0102c298 in mono_jit_compile_method_inner (method=0x4773d0, 
+code_domain=0xf03ffe44) at mini.c:7948
+#9  0x0102c4c4 in mono_jit_compile_method_with_opt (method=0x4773d0, 
+opt=67595) at mini.c:8000
+#10 0x0102c558 in mono_jit_compile_method (method=0x4773d0) at 
+mini.c:8020
+#11 0x01092680 in mono_compile_method (method=0x4773d0) at 
+object.c:187
+#12 0x01076254 in ppc_magic_trampoline (method=0x4773d0, 
+code=0x213cbbc, sp=0xf03fff90 &quot;รฐ at tramp-ppc.c:98
+#13 0x0180b0d4 in ?? ()
+#14 0x0213cbbc in ?? ()
+#15 0x0213c9c8 in ?? ()
+#16 0x0213c510 in ?? ()
+#17 0x0213c0e0 in ?? ()
+#18 0x0215b2b4 in ?? ()
+#19 0x0213b9c0 in ?? ()
+#20 0x0102c760 in mono_jit_runtime_invoke (method=0x4b4800, obj=0x0, 
+params=0x0, exc=0xf04009d4) at mini.c:8070
+#21 0x01094684 in mono_runtime_invoke (method=0x4b4800, obj=0x0, 
+params=0x0, exc=0xf04009d4) at object.c:859
+#22 0x0109231c in mono_runtime_class_init (vtable=0x184b810) at 
+object.c:115
+#23 0x0102c504 in mono_jit_compile_method_with_opt (method=0x4b4b60, 
+opt=67595) at mini.c:8011
+#24 0x0102c558 in mono_jit_compile_method (method=0x4b4b60) at 
+mini.c:8020
+#25 0x01092680 in mono_compile_method (method=0x4b4b60) at 
+object.c:187
+#26 0x01076254 in ppc_magic_trampoline (method=0x4b4b60, 
+code=0x213b448, sp=0xf0400b90 &quot;รฐ`&quot;) at tramp-ppc.c:98
+#27 0x0180b0d4 in ?? ()
+#28 0x0213b448 in ?? ()
+#29 0x0213b3a8 in ?? ()
+#30 0x0213a378 in ?? ()
+#31 0x02139be0 in ?? ()
+#32 0x02139b18 in ?? ()
+#33 0x02135c78 in ?? ()
+#34 0x02135684 in ?? ()
+#35 0x0213497c in ?? ()
+#36 0x021348dc in ?? ()
+#37 0x02132d54 in ?? ()
+#38 0x02132b30 in ?? ()
+#39 0x0213278c in ?? ()
+#40 0x021325cc in ?? ()
+#41 0x020e0c78 in ?? ()
+#42 0x020d9844 in ?? ()
+#43 0x020d8ce8 in ?? ()
+#44 0x020d8670 in ?? ()
+#45 0x017fe818 in ?? ()
+#46 0x017f6a70 in ?? ()
+#47 0x017f5f70 in ?? ()
+#48 0x0102c760 in mono_jit_runtime_invoke (method=0x466520, obj=0x0, 
+params=0x0, exc=0xf04016b4) at mini.c:8070
+#49 0x01094684 in mono_runtime_invoke (method=0x466520, obj=0x0, 
+params=0x0, exc=0xf04016b4) at object.c:859
+#50 0x0109231c in mono_runtime_class_init (vtable=0x182cfa0) at 
+object.c:115
+#51 0x0102c504 in mono_jit_compile_method_with_opt (method=0x44f6d0, 
+opt=67595) at mini.c:8011
+#52 0x0102c558 in mono_jit_compile_method (method=0x44f6d0) at 
+mini.c:8020
+#53 0x01092680 in mono_compile_method (method=0x44f6d0) at 
+object.c:187
+#54 0x01076254 in ppc_magic_trampoline (method=0x44f6d0, 
+code=0x17f4ba0, sp=0xf0401870 &quot;รฐ31@&quot;) at tramp-ppc.c:98
+#55 0x0180b0d4 in ?? ()
+#56 0x017f4ba0 in ?? ()
+#57 0x017f3f8c in ?? ()
+#58 0x017f2030 in ?? ()
+#59 0x0102c760 in mono_jit_runtime_invoke (method=0x444790, obj=0x0, 
+params=0xf0401c74, exc=0x0) at mini.c:8070
+#60 0x01094684 in mono_runtime_invoke (method=0x444790, obj=0x0, 
+params=0xf0401c74, exc=0x0) at object.c:859
+#61 0x01095b18 in mono_runtime_exec_main (method=0x444790, 
+args=0xebf78, exc=0x0) at object.c:1341
+#62 0x0109564c in mono_runtime_run_main (method=0x444790, argc=0, 
+argv=0xbffffcbc, exc=0x0) at object.c:1215
+#63 0x0105d30c in mono_jit_exec (domain=0xb8f18, assembly=0x434620, 
+argc=1, argv=0xbffffcb8) at driver.c:465
+#64 0x0105d41c in main_thread_handler (user_data=0xbffffb10) at 
+driver.c:499
+#65 0x010bef60 in start_wrapper (data=0x444660) at threads.c:239
+#66 0x011188e0 in timed_thread_start_routine (args=0x444430) at timed-
+thread.c:115
+#67 0x900247e8 in _pthread_body ()
+
+Thread 2 (process 11201 thread 0xf03):
+#0  0x90018ce8 in semaphore_timedwait_signal_trap ()
+#1  0x9000e888 in _pthread_cond_wait ()
+#2  0x0110be0c in _wapi_handle_wait_signal_handle (handle=0x3) at 
+handles.c:1446
+#3  0x01118f00 in WaitForSingleObject (handle=0x3, 
+timeout=4294967295) at wait.c:95
+#4  0x010aeb5c in finalizer_thread (unused=0x0) at gc.c:528
+#5  0x010bef60 in start_wrapper (data=0x433b10) at threads.c:239
+#6  0x011188e0 in timed_thread_start_routine (args=0x433b20) at timed-
+thread.c:115
+#7  0x900247e8 in _pthread_body ()
+
+Thread 1 (process 11201 local thread 0xd03):
+#0  0x90018ce8 in semaphore_timedwait_signal_trap ()
+#1  0x9000e888 in _pthread_cond_wait ()
+#2  0x0110be0c in _wapi_handle_wait_signal_handle (handle=0x8) at 
+handles.c:1446
+#3  0x01118f00 in WaitForSingleObject (handle=0x8, 
+timeout=4294967295) at wait.c:95
+#4  0x011191a8 in WaitForMultipleObjects (numobjects=1, 
+handles=0x1829a00, waitall=1, timeout=4294967295) at wait.c:325
+#5  0x010c0894 in wait_for_tids (wait=0x1829a00, timeout=4294967295) 
+at threads.c:1097
+#6  0x010c0b84 in mono_thread_manage () at threads.c:1201
+#7  0x01095a1c in mono_runtime_exec_managed_code (domain=0xb8f18, 
+main_func=0x105d32c &lt;main_thread_handler&gt;, main_args=0xbffffb10) at 
+object.c:1314
+#8  0x0105e380 in mono_main (argc=2, argv=0xbffffcb4) at driver.c:793
+#9  0x00001dc8 in main (argc=2, argv=0xbffffcb4) at main.c:6
+(gdb)
+
+MINT:
+
+GNU gdb 5.3-20030128 (Apple version gdb-309) (Thu Dec  4 15:41:30 GMT 
+2003)
+Copyright 2003 Free Software Foundation, Inc.
+GDB is free software, covered by the GNU General Public License, and 
+you are
+welcome to change it and/or distribute copies of it under certain 
+conditions.
+Type &quot;show copying&quot; to see the conditions.
+There is absolutely no warranty for GDB.  Type &quot;show warranty&quot; for 
+details.
+This GDB was configured as &quot;powerpc-apple-darwin&quot;.
+Reading symbols for shared libraries ......... done
+(gdb) r xsp.exe
+Starting 
+program: /Users/virtdev/portspace/virt_bin/mono_inst/bin/mint xsp.exe
+Reading symbols for shared libraries ++++++. done
+
+** (xsp.exe:11216): WARNING **: The handle daemon didnt start up 
+properly
+
+** (xsp.exe:11216): WARNING **: Failed to attach shared memory! 
+Falling back to non-shared handles
+Listening on port: 8080
+Listening on address: 0.0.0.0
+Root directory: /Users/virtdev/portspace/virt_bin/mono_cvs/xsp/test
+
+Program received signal EXC_BAD_ACCESS, Could not access memory.
+[Switching to process 11216 thread 0x2803]
+0x004ba4c0 in ves_exec_method_with_context (frame=0x0, 
+context=0xf0602990) at interp.c:1607
+1607            frame-&gt;ex = NULL;
+(gdb) t a a bt
+
+Thread 4 (process 11216 thread 0x2803):
+#0  0x004ba4c0 in ves_exec_method_with_context (frame=0x0, 
+context=0xf0602990) at interp.c:1607
+#1  0x004ca344 in ves_exec_method (frame=0x0) at interp.c:4855
+#2  0x01863658 in ?? ()
+#3  0x005150fc in start_wrapper (data=0x2142600) at threads.c:239
+#4  0x0056ea7c in timed_thread_start_routine (args=0x2142660) at 
+timed-thread.c:115
+#5  0x900247e8 in _pthread_body ()
+
+Thread 3 (process 11216 thread 0x2303):
+#0  0x004bca38 in ves_exec_method_with_context (frame=0xf0400120, 
+context=0xf0401b90) at interp.c:1894
+#1  0x004bd740 in ves_exec_method_with_context (frame=0xf0400520, 
+context=0xf0401b90) at interp.c:2048
+#2  0x004bd740 in ves_exec_method_with_context (frame=0xf0400920, 
+context=0xf0401b90) at interp.c:2048
+#3  0x004bd740 in ves_exec_method_with_context (frame=0xf0400ce0, 
+context=0xf0401b90) at interp.c:2048
+#4  0x004bd740 in ves_exec_method_with_context (frame=0xf04010e0, 
+context=0xf0401b90) at interp.c:2048
+#5  0x004bd740 in ves_exec_method_with_context (frame=0xf04017d0, 
+context=0xf0401b90) at interp.c:2048
+#6  0x004bd740 in ves_exec_method_with_context (frame=0xf0401b10, 
+context=0xf0401b90) at interp.c:2048
+#7  0x004ba158 in interp_mono_runtime_invoke (method=0x1134290, 
+obj=0x0, params=0xf0401c64, exc=0xf0401d3c) at interp.c:1504
+#8  0x004ea820 in mono_runtime_invoke (method=0x1134290, obj=0x0, 
+params=0xf0401c64, exc=0xf0401d3c) at object.c:859
+#9  0x004ebcb4 in mono_runtime_exec_main (method=0x1134290, 
+args=0xebf78, exc=0xf0401d3c) at object.c:1341
+#10 0x004eb7e8 in mono_runtime_run_main (method=0x1134290, argc=0, 
+argv=0xbffffcbc, exc=0xf0401d3c) at object.c:1215
+#11 0x004ca48c in ves_exec (domain=0xb8f18, assembly=0x1134380, 
+argc=1, argv=0xbffffcb8) at interp.c:4884
+#12 0x004ca85c in main_thread_handler (user_data=0xbffffb70) at 
+interp.c:5020
+#13 0x005150fc in start_wrapper (data=0x1133990) at threads.c:239
+#14 0x0056ea7c in timed_thread_start_routine (args=0x1133840) at 
+timed-thread.c:115
+#15 0x900247e8 in _pthread_body ()
+
+Thread 2 (process 11216 thread 0xf03):
+#0  0x90018ce8 in semaphore_timedwait_signal_trap ()
+#1  0x9000e888 in _pthread_cond_wait ()
+#2  0x00561fa8 in _wapi_handle_wait_signal_handle (handle=0x3) at 
+handles.c:1446
+#3  0x0056f09c in WaitForSingleObject (handle=0x3, 
+timeout=4294967295) at wait.c:95
+#4  0x00504cf8 in finalizer_thread (unused=0x0) at gc.c:528
+#5  0x005150fc in start_wrapper (data=0x11302e0) at threads.c:239
+#6  0x0056ea7c in timed_thread_start_routine (args=0x11302f0) at 
+timed-thread.c:115
+#7  0x900247e8 in _pthread_body ()
+
+Thread 1 (process 11216 local thread 0xd03):
+#0  0x90018ce8 in semaphore_timedwait_signal_trap ()
+#1  0x9000e888 in _pthread_cond_wait ()
+#2  0x00561fa8 in _wapi_handle_wait_signal_handle (handle=0x8) at 
+handles.c:1446
+#3  0x0056f09c in WaitForSingleObject (handle=0x8, 
+timeout=4294967295) at wait.c:95
+#4  0x0056f344 in WaitForMultipleObjects (numobjects=1, 
+handles=0x1812800, waitall=1, timeout=4294967295) at wait.c:325
+#5  0x00516a30 in wait_for_tids (wait=0x1812800, timeout=4294967295) 
+at threads.c:1097
+#6  0x00516d20 in mono_thread_manage () at threads.c:1201
+#7  0x004ebbb8 in mono_runtime_exec_managed_code (domain=0xb8f18, 
+main_func=0x4ca6fc &lt;main_thread_handler&gt;, main_args=0xbffffb70) at 
+object.c:1314
+#8  0x004caf8c in mono_main (argc=2, argv=0xbffffcb4) at interp.c:5166
+#9  0x00001dc8 in main (argc=2, argv=0xbffffcb4) at main.c:7
+0x004ba4c0      1607            frame-&gt;ex = NULL;
+(gdb)
+
+

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="013446.html">[Mono-bugs] [Bug 55875][Nor] Changed - Cause of compile error in msxsl:script lost
</A></li>
	<LI> Next message: <A HREF="013448.html">[Mono-bugs] [Bug 55893][Nor] New - Mono Monitor fails on code which runs in MS.NET
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13447">[ date ]</a>
              <a href="thread.html#13447">[ thread ]</a>
              <a href="subject.html#13447">[ subject ]</a>
              <a href="author.html#13447">[ author ]</a>
         </LI>
       </UL>
</body></html>
