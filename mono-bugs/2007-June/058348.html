<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 81974][Cri] Changed - GC crashes if there are more	than about 160 threads.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2081974%5D%5BCri%5D%20Changed%20-%20GC%20crashes%20if%20there%20are%20more%0A%09than%20about%20160%20threads.&In-Reply-To=bug-81974%40chernobyl.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="058353.html">
   <LINK REL="Next"  HREF="058362.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 81974][Cri] Changed - GC crashes if there are more	than about 160 threads.</H1>
    <B>bugzilla-daemon at bugzilla.ximian.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2081974%5D%5BCri%5D%20Changed%20-%20GC%20crashes%20if%20there%20are%20more%0A%09than%20about%20160%20threads.&In-Reply-To=bug-81974%40chernobyl.ximian.com"
       TITLE="[Mono-bugs] [Bug 81974][Cri] Changed - GC crashes if there are more	than about 160 threads.">bugzilla-daemon at bugzilla.ximian.com
       </A><BR>
    <I>Thu Jun 28 21:28:38 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="058353.html">[Mono-bugs] [Bug 81974][Cri] Changed - GC crashes if there are more	than about 160 threads.
</A></li>
        <LI>Next message: <A HREF="058362.html">[Mono-bugs] [Bug 81956][Wis] Changed - ArrayOutOfBounds in	BigInteger class
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58348">[ date ]</a>
              <a href="thread.html#58348">[ thread ]</a>
              <a href="subject.html#58348">[ subject ]</a>
              <a href="author.html#58348">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">patperry at stanford.edu.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=81974">http://bugzilla.ximian.com/show_bug.cgi?id=81974</A>

--- shadow/81974	2007-06-28 21:17:21.000000000 -0400
+++ shadow/81974.tmp.7270	2007-06-28 21:28:38.000000000 -0400
@@ -1,10 +1,10 @@
 Bug#: 81974
 Product: Mono: Runtime
 Version: 1.2
-OS: Mac OS X 10.3
+OS: All
 OS Details: 
 Status: NEW   
 Resolution: 
 Severity: Unknown
 Priority: Critical
 Component: GC
@@ -80,6 +80,27 @@
 I am reporting the bug again to demonstrate that the problem has nothing to
 do with embedding the runtime.
 
 I'm pretty sure the comment from Brian Berg explains what the problem is. 
 The GC has an array of threads which is hardcoded to be of length 128. 
 Really, the array should grow dynamically if more than 128 threads are active.
+
+------- Additional Comments From <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">patperry at stanford.edu</A>  2007-06-28 21:28 -------
+On Linux, I don't get a deadlock, but if I change ThreadCount to 2000,
+ after about 7 or 8 &quot;Success!&quot; messages I get the exception:
+
+** (ThreadBug.exe:23353): WARNING **: CreateThread: error creating
+thread handle
+
+** (ThreadBug.exe:23353): WARNING **:
+ves_icall_System_Threading_Thread_Thread_internal: CreateThread error 0x1f
+
+Unhandled Exception: System.SystemException: Thread creation failed.
+  at System.Threading.Thread.Start () [0x00000] 
+  at ThreadBug.Main () [0x00000] 
+
+** (ThreadBug.exe:23353): WARNING **: _wapi_thread_abandon_mutexes:
+error looking up thread handle 0x998
+
+** (ThreadBug.exe:23353): WARNING **:
+_wapi_thread_set_termination_details: error looking up thread handle 0x998
+
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="058353.html">[Mono-bugs] [Bug 81974][Cri] Changed - GC crashes if there are more	than about 160 threads.
</A></li>
	<LI>Next message: <A HREF="058362.html">[Mono-bugs] [Bug 81956][Wis] Changed - ArrayOutOfBounds in	BigInteger class
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58348">[ date ]</a>
              <a href="thread.html#58348">[ thread ]</a>
              <a href="subject.html#58348">[ subject ]</a>
              <a href="author.html#58348">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
