<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 485435] New: JSON proxy class generator errors out when any webmethod signature takes a GUID parameter
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20485435%5D%20New%3A%20JSON%20proxy%20class%20generator%20errors%20out%0A%20when%20any%20webmethod%20signature%20takes%20a%20GUID%20parameter&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="087018.html">
   <LINK REL="Next"  HREF="087033.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 485435] New: JSON proxy class generator errors out when any webmethod signature takes a GUID parameter</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20485435%5D%20New%3A%20JSON%20proxy%20class%20generator%20errors%20out%0A%20when%20any%20webmethod%20signature%20takes%20a%20GUID%20parameter&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 485435] New: JSON proxy class generator errors out when any webmethod signature takes a GUID parameter">bugzilla_noreply at novell.com
       </A><BR>
    <I>Sun Mar 15 01:20:40 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="087018.html">[Mono-bugs] [Bug 326011] Creating two connections to the same SQL database throws an exception
</A></li>
        <LI>Next message: <A HREF="087033.html">[Mono-bugs] [Bug 485435] JSON proxy class generator errors out when any webmethod signature takes a GUID parameter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#87019">[ date ]</a>
              <a href="thread.html#87019">[ thread ]</a>
              <a href="subject.html#87019">[ subject ]</a>
              <a href="author.html#87019">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=485435">https://bugzilla.novell.com/show_bug.cgi?id=485435</A>


           Summary: JSON proxy class generator errors out when any
                    webmethod signature takes a GUID parameter
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.2.x
          Platform: All
        OS/Version: All
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Sys.Web.Services
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">atsushi at ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">imaudi at comcast.net</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


User-Agent:       Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_5_6; en-us)
AppleWebKit/525.27.1 (KHTML, like Gecko) Version/3.2.1 Safari/525.27.1

In a class marked with the [ScriptService] attribute, viewing asmx file with
/js to generate JS proxy code will result in error if any method within this
class takes a Guid as a parameter, example:

       [WebMethod]
       public string Echo(Guid input)
       {
          return input.ToString();
       }

If parameter is changed to a string, the code works.  Also, code works and
scenario is supported in .NET 3.5.  NOTE: This ONLY repros when generating
Javascript proxy classes with the .asmx/js parameter, normal SOAP works fine.

Reproducible: Always

Steps to Reproduce:
1. Build new ASP.NET web site with single web service called Test.asmx
2. Use Test.asmx.cs code behind in attached file
3. Alter web.config using attached version
4. Run in browser and navigate to /Test.asmx/js (be sure to include the /js at
the end)
Actual Results:  
Code will crash:

System.NullReferenceException: Object reference not set to an instance of an
object
  at System.Web.Script.Services.LogicalTypeInfo.ShouldGenerateScript
(System.Type type, Boolean throwIfNot) [0x00089] in
/usr/src/packages/BUILD/mono-2.2/mcs/class/System.Web.Extensions/System.Web.Script.Services/LogicalTypeInfo.cs:368 
  at
System.Web.Script.Services.LogicalTypeInfo+&lt;GetGenerateScriptTypeAttributes&gt;c__Iterator2.MoveNext
() [0x0023c] in
/usr/src/packages/BUILD/mono-2.2/mcs/class/System.Web.Extensions/System.Web.Script.Services/LogicalTypeInfo.cs:321 
  at System.Web.Script.Services.LogicalTypeInfo..ctor (System.Type t,
System.String filePath) [0x002aa] in
/usr/src/packages/BUILD/mono-2.2/mcs/class/System.Web.Extensions/System.Web.Script.Services/LogicalTypeInfo.cs:278 
  at System.Web.Script.Services.LogicalTypeInfo.GetLogicalTypeInfo (System.Type
t, System.String filePath) [0x0001b] in
/usr/src/packages/BUILD/mono-2.2/mcs/class/System.Web.Extensions/System.Web.Script.Services/LogicalTypeInfo.cs:486 
  at System.Web.Script.Services.ClientProxyHandler..ctor (System.Type type,
System.String filePath) [0x00006] in
/usr/src/packages/BUILD/mono-2.2/mcs/class/System.Web.Extensions/System.Web.Script.Services/ClientProxyHandler.cs:40 
  at System.Web.Script.Services.ScriptHandlerFactory.GetHandler
(System.Web.HttpContext context, System.String requestType, System.String url,
System.String pathTranslated) [0x00093] in
/usr/src/packages/BUILD/mono-2.2/mcs/class/System.Web.Extensions/System.Web.Script.Services/ScriptHandlerFactory.cs:61 
  at System.Web.HttpApplication.GetHandler (System.Web.HttpContext context,
System.String url, Boolean ignoreContextHandler) [0x00054] in
/usr/src/packages/BUILD/mono-2.2/mcs/class/System.Web/System.Web/HttpApplication.cs:1534 
  at System.Web.HttpApplication.GetHandler (System.Web.HttpContext context,
System.String url) [0x00000] in
/usr/src/packages/BUILD/mono-2.2/mcs/class/System.Web/System.Web/HttpApplication.cs:1514 
  at System.Web.HttpApplication+&lt;Pipeline&gt;c__Iterator2.MoveNext () [0x0071f] in
/usr/src/packages/BUILD/mono-2.2/mcs/class/System.Web/System.Web/HttpApplication.cs:1181 


Expected Results:  
JS code should be generated with matching results as running on .NET 3.5.

Notes:

Changing webmethod parameter from Guid to String will fix problem and provides
a decent workaround as Javascript doesn't support GUIDs anyway and these types
will be marshaled as strings.  However, for portability I expect Mono and .NET
to behave in the same way.  Object reference not set to instance of an object
is a bad exception for this error (it took me quite a while to figure out the
problem was Guids in the first place).

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="087018.html">[Mono-bugs] [Bug 326011] Creating two connections to the same SQL database throws an exception
</A></li>
	<LI>Next message: <A HREF="087033.html">[Mono-bugs] [Bug 485435] JSON proxy class generator errors out when any webmethod signature takes a GUID parameter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#87019">[ date ]</a>
              <a href="thread.html#87019">[ thread ]</a>
              <a href="subject.html#87019">[ subject ]</a>
              <a href="author.html#87019">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
