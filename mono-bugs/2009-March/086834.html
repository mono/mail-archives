<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 483247] New: IsDefined on methods does not work for interface-type queries
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20483247%5D%20New%3A%20IsDefined%20on%20methods%20does%20not%20work%0A%20for%20interface-type%20queries&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="086833.html">
   <LINK REL="Next"  HREF="086847.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 483247] New: IsDefined on methods does not work for interface-type queries</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20483247%5D%20New%3A%20IsDefined%20on%20methods%20does%20not%20work%0A%20for%20interface-type%20queries&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 483247] New: IsDefined on methods does not work for interface-type queries">bugzilla_noreply at novell.com
       </A><BR>
    <I>Sun Mar  8 19:03:27 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="086833.html">[Mono-bugs] [Bug 443490] Duplicate results evaluating XPath	expressions
</A></li>
        <LI>Next message: <A HREF="086847.html">[Mono-bugs] [Bug 483247] IsDefined on methods does not work for interface-type queries
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#86834">[ date ]</a>
              <a href="thread.html#86834">[ thread ]</a>
              <a href="subject.html#86834">[ subject ]</a>
              <a href="author.html#86834">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=483247">https://bugzilla.novell.com/show_bug.cgi?id=483247</A>


           Summary: IsDefined on methods does not work for interface-type
                    queries
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.2.x
          Platform: All
        OS/Version: All
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: CORLIB
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">azizatif at gmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


Created an attachment (id=277887)
 --&gt; (<A HREF="https://bugzilla.novell.com/attachment.cgi?id=277887">https://bugzilla.novell.com/attachment.cgi?id=277887</A>)
Sample program to reproduce the bug

User-Agent:       Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0; GTB5;
SLCC1; .NET CLR 2.0.50727; .NET CLR 1.1.4322; .NET CLR 3.5.21022; WWTClient2;
NET CLR 3.5.30729; .NET CLR 3.0.30618; MS-RTC LM 8)

Suppose an attribute implements an interface. When IsDefined is called on a
MethodInfo object to check whether the attribute is defined on the method or
not and the first argument is the interface type then IsDefined returns false.
The Microsoft .NET Framework implementation, on the other hand, returns true
for the same scenario.

Reproducible: Always

Steps to Reproduce:
Following is the source code of a simple C# console program to demonstrate the
bug:

using System;

interface IFoo {}

[AttributeUsage(AttributeTargets.Method)]
class FooAttribute : Attribute, IFoo {}

class Bar
{
    [Foo]
    public void Baz() {}
}

static class Program
{
    static void Main()
    {
        var method = typeof(Bar).GetMethod(&quot;Baz&quot;);
        Console.WriteLine(&quot;FooAttribute? &quot; +
method.IsDefined(typeof(FooAttribute), true));
        Console.WriteLine(&quot;IFoo? &quot; + method.IsDefined(typeof(IFoo), true));
    }
}

Actual Results:  
The output of the program demonstrating the bug is:

FooAttribute? True
IFoo? False


Expected Results:  
The expected output was:

FooAttribute? True
IFoo? True

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>











































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="086833.html">[Mono-bugs] [Bug 443490] Duplicate results evaluating XPath	expressions
</A></li>
	<LI>Next message: <A HREF="086847.html">[Mono-bugs] [Bug 483247] IsDefined on methods does not work for interface-type queries
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#86834">[ date ]</a>
              <a href="thread.html#86834">[ thread ]</a>
              <a href="subject.html#86834">[ subject ]</a>
              <a href="author.html#86834">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
