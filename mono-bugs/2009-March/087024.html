<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 467214] Setting $LD_LIBRARY_PATH using SetEnvironmentVariable does not affect search path used by PInvoke
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20467214%5D%20Setting%20%24LD_LIBRARY_PATH%20using%0A%20SetEnvironmentVariable%20does%20not%20affect%20search%20path%20used%20by%20PInvoke&In-Reply-To=bug-467214-28286%40https.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="087023.html">
   <LINK REL="Next"  HREF="087025.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 467214] Setting $LD_LIBRARY_PATH using SetEnvironmentVariable does not affect search path used by PInvoke</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20467214%5D%20Setting%20%24LD_LIBRARY_PATH%20using%0A%20SetEnvironmentVariable%20does%20not%20affect%20search%20path%20used%20by%20PInvoke&In-Reply-To=bug-467214-28286%40https.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 467214] Setting $LD_LIBRARY_PATH using SetEnvironmentVariable does not affect search path used by PInvoke">bugzilla_noreply at novell.com
       </A><BR>
    <I>Sun Mar 15 10:35:10 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="087023.html">[Mono-bugs] [Bug 463011] [Regression] Pooled connection is no	longer reset
</A></li>
        <LI>Next message: <A HREF="087025.html">[Mono-bugs] [Bug 467214] Setting $LD_LIBRARY_PATH using SetEnvironmentVariable does not affect search path used by PInvoke
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#87024">[ date ]</a>
              <a href="thread.html#87024">[ thread ]</a>
              <a href="subject.html#87024">[ subject ]</a>
              <a href="author.html#87024">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=467214">https://bugzilla.novell.com/show_bug.cgi?id=467214</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">robertj at gmx.net</A> added comment
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=467214#c3">https://bugzilla.novell.com/show_bug.cgi?id=467214#c3</A>


Robert Jordan &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">robertj at gmx.net</A>&gt; changed:

           What    |Removed                     |Added
----------------------------------------------------------------------------
                 CC|                            |<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">robertj at gmx.net</A>




--- Comment #3 from Robert Jordan &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">robertj at gmx.net</A>&gt;  2009-03-15 08:35:07 MST ---
They are both using LoadLibrary on Windows.

I believe that the problem is related to the point in time when mono is trying
to load the library. If you put these statements in the same method, mono will
not notice the path change, because &quot;SomePinvokeFunc&quot; is resolved at JIT
compile time while SetEnvironmentVariable is called later at runtime:

void Foo ()
{
    Environment.SetEnvironmentVariable (&quot;PATH&quot;, &quot;blah&quot;);
    SomePinvokeFunc ();
}

You may want to try to set the path as early as possible outside the method
that performs the pinvoke call.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="087023.html">[Mono-bugs] [Bug 463011] [Regression] Pooled connection is no	longer reset
</A></li>
	<LI>Next message: <A HREF="087025.html">[Mono-bugs] [Bug 467214] Setting $LD_LIBRARY_PATH using SetEnvironmentVariable does not affect search path used by PInvoke
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#87024">[ date ]</a>
              <a href="thread.html#87024">[ thread ]</a>
              <a href="subject.html#87024">[ subject ]</a>
              <a href="author.html#87024">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
