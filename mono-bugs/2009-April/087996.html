<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 489019] mono throwing exception while closing file	descriptor 0
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20489019%5D%20mono%20throwing%20exception%20while%20closing%20file%0A%09descriptor%200&In-Reply-To=bug-489019-28286%40http.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="088027.html">
   <LINK REL="Next"  HREF="088000.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 489019] mono throwing exception while closing file	descriptor 0</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20489019%5D%20mono%20throwing%20exception%20while%20closing%20file%0A%09descriptor%200&In-Reply-To=bug-489019-28286%40http.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 489019] mono throwing exception while closing file	descriptor 0">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon Apr 20 16:12:57 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="088027.html">[Mono-bugs] [Bug 496641] Dependent lanes' status does not get updated on success of the depended lane
</A></li>
        <LI>Next message: <A HREF="088000.html">[Mono-bugs] [Bug 496690] New: SoundPlayer playback is very choppy on Linux systems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#87996">[ date ]</a>
              <a href="thread.html#87996">[ thread ]</a>
              <a href="subject.html#87996">[ subject ]</a>
              <a href="author.html#87996">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=489019">http://bugzilla.novell.com/show_bug.cgi?id=489019</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">miguel at novell.com</A> added comment
<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=489019#c26">http://bugzilla.novell.com/show_bug.cgi?id=489019#c26</A>





--- Comment #26 from Miguel de Icaza &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">miguel at novell.com</A>&gt;  2009-04-20 14:12:56 MDT ---
I am saying that the patch above is *wrong* and should not be done in the Mono
side of things, it should be done by whoever is calling Mono.

Every Unix library hardcodes the following POSIX file descriptors for standard
output and error:

STDIN_FILENO, STDOUT_FILENO and STDERR_FILENO

These should never be closed because they interact badly with system libraries.

Consider a root C program whose 0, 1 and 2 file descriptors were closed and
then proceeds to open, say /etc/resolv.conf and happens to get 2.   During this
process a library notices something and logs an error to stderr, what we end up
with is a corrupt file.

Descriptors 0, 1 and 2 should *always* be assigned unless you control entirely
the software stack.

The fix that was provided by the Mono team is a band-aid, the *correct* fix is
for the caller to *NOT* do this in the first place.   And I would like the CASA
team to actualy fix this problem at the *real* spot instead of asking us to put
a workaround for this broken behavior that is breaking *every* Unix practice.

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>





























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="088027.html">[Mono-bugs] [Bug 496641] Dependent lanes' status does not get updated on success of the depended lane
</A></li>
	<LI>Next message: <A HREF="088000.html">[Mono-bugs] [Bug 496690] New: SoundPlayer playback is very choppy on Linux systems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#87996">[ date ]</a>
              <a href="thread.html#87996">[ thread ]</a>
              <a href="subject.html#87996">[ subject ]</a>
              <a href="author.html#87996">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
