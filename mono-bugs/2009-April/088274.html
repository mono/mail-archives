<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 498507] mono _sometimes_ doesn't throw ObjectDisposedException when calling socket.Close()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20498507%5D%20mono%20_sometimes_%20doesn%27t%20throw%0A%20ObjectDisposedException%20when%20calling%20socket.Close%28%29&In-Reply-To=bug-498507-28286%40http.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="088252.html">
   <LINK REL="Next"  HREF="088275.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 498507] mono _sometimes_ doesn't throw ObjectDisposedException when calling socket.Close()</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20498507%5D%20mono%20_sometimes_%20doesn%27t%20throw%0A%20ObjectDisposedException%20when%20calling%20socket.Close%28%29&In-Reply-To=bug-498507-28286%40http.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 498507] mono _sometimes_ doesn't throw ObjectDisposedException when calling socket.Close()">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Apr 29 05:57:58 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="088252.html">[Mono-bugs] [Bug 498507] mono _sometimes_ doesn't throw ObjectDisposedException when calling socket.Close()
</A></li>
        <LI>Next message: <A HREF="088275.html">[Mono-bugs] [Bug 498507] mono _sometimes_ doesn't throw ObjectDisposedException when calling socket.Close()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#88274">[ date ]</a>
              <a href="thread.html#88274">[ thread ]</a>
              <a href="subject.html#88274">[ subject ]</a>
              <a href="author.html#88274">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=498507">http://bugzilla.novell.com/show_bug.cgi?id=498507</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">silver83 at gmail.com</A> added comment
<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=498507#c5">http://bugzilla.novell.com/show_bug.cgi?id=498507#c5</A>





--- Comment #5 from Yoni Shalom &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">silver83 at gmail.com</A>&gt;  2009-04-29 03:57:58 MDT ---
Gonzalo, this is not the case. Argh, I should've invested some more in the code
sample.

Look - Connection refused means that you got an RST right away from the target
you tried to connect to. This is NOT what I'm talking about.

Please, read the following carefully before submitting the bug as resolved
again. 

1. Add a Console.Readkey() at the and of Main(), so that you can't say the
program exits before having a chance to perform the callback.

2. Change the target IP to an ip that, if you would telnet to, you would get a
connection timeout (TCP SYN TIMEOUT).

3. Change the WaitOne to 10000, for example.

What SHOULD happen in this case -
1. BeginConnect starts executing and exists immediately
2. Because the target does not reply to the TCP SYN, the timeout will only
occur after 1 minute on a Mac.
3. The WaitOne() exists BEFORE the SYN timed out (10 seconds being less then
60)
4. The call to socket.close() should invoke the callback with an
ObjectDisposedException.   THIS IS WHAT DOESNT ALWAYS HAPPEN. THIS IS THE BUG.

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="088252.html">[Mono-bugs] [Bug 498507] mono _sometimes_ doesn't throw ObjectDisposedException when calling socket.Close()
</A></li>
	<LI>Next message: <A HREF="088275.html">[Mono-bugs] [Bug 498507] mono _sometimes_ doesn't throw ObjectDisposedException when calling socket.Close()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#88274">[ date ]</a>
              <a href="thread.html#88274">[ thread ]</a>
              <a href="subject.html#88274">[ subject ]</a>
              <a href="author.html#88274">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
