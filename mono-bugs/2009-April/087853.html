<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 495380] New: Assembly.LoadFrom crashes mono when trying to load a C++/CLI assembly (SlimDX.dll)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20495380%5D%20New%3A%20Assembly.LoadFrom%20crashes%20mono%20when%0A%20trying%20to%20load%20a%20C%2B%2B/CLI%20assembly%20%28SlimDX.dll%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="087852.html">
   <LINK REL="Next"  HREF="087854.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 495380] New: Assembly.LoadFrom crashes mono when trying to load a C++/CLI assembly (SlimDX.dll)</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20495380%5D%20New%3A%20Assembly.LoadFrom%20crashes%20mono%20when%0A%20trying%20to%20load%20a%20C%2B%2B/CLI%20assembly%20%28SlimDX.dll%29&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 495380] New: Assembly.LoadFrom crashes mono when trying to load a C++/CLI assembly (SlimDX.dll)">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Apr 15 18:51:37 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="087852.html">[Mono-bugs] [Bug 490705] System.NullReferenceException when starting to drag a node in a treeview
</A></li>
        <LI>Next message: <A HREF="087854.html">[Mono-bugs] [Bug 495386] New: Webservice method without 'out List&lt;class&gt;' as a parameter returns 'method not defined in service'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#87853">[ date ]</a>
              <a href="thread.html#87853">[ thread ]</a>
              <a href="subject.html#87853">[ subject ]</a>
              <a href="author.html#87853">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=495380">http://bugzilla.novell.com/show_bug.cgi?id=495380</A>


           Summary: Assembly.LoadFrom crashes mono when trying to load a
                    C++/CLI assembly (SlimDX.dll)
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.4.x
          Platform: x86-64
        OS/Version: Windows Vista
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: System
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">m.moeller at gmx.ch</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: Development


Created an attachment (id=285997)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=285997">http://bugzilla.novell.com/attachment.cgi?id=285997</A>)
testcase sourcecode (Program.cs) and test assembly (SlimDX.dll)

Description of Problem:

Loading a C++/CLI assembly like SlimDX.dll (can be downloaded from
<A HREF="http://slimdx.org/">http://slimdx.org/</A>) with the Assembly.LoadFrom method causes the mono runtime
to become unstable or crash. In Microsoft.NET loading an invalid (native win32
dll, x86 assembly on x64) or not supported Assembly file causes a
BadImageFormatException to be thrown. In mono the loading of C++/CLI assemblies
like SlimDX.dll should throw a BadImageFormatException and not crash mono
itself.

Steps to reproduce the problem:
1. Create a folder and compile Program.cs
2. Copy the file SlimDX.dll into the folder
3. Run Program.exe in that folder (on a x64 Windows Vista PC)

Actual Results:

..

** (Program.exe:1960): WARNING **: Can't find custom attr constructor image:
C:\
Windows\WinSxS\x86_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.3053_none_d08d7
bba442a9b36\msvcm80.dll mtoken: 0x0a00000a

** (Program.exe:1960): WARNING **: Missing method
System.Runtime.CompilerService
s.RuntimeHelpers::PrepareConstrainedRegions() in assembly C:\Program Files
(x86)
\Mono-2.4\lib\mono\1.0\mscorlib.dll, referenced in assembly
C:\Windows\WinSxS\x8
6_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.3053_none_d08d7bba442a9b36\msvcm
80.dll

(crash of mono)


Expected Results (Microsoft.NET on x64):

BadImageFormatException: SlimDX.dll
done.

How often does this happen? 

Always

Additional Information:

On Microsoft.NET on x64 a BadImageFormatException is thrown for the file
SlimDX.dll because the dll is for x86.

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>









































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="087852.html">[Mono-bugs] [Bug 490705] System.NullReferenceException when starting to drag a node in a treeview
</A></li>
	<LI>Next message: <A HREF="087854.html">[Mono-bugs] [Bug 495386] New: Webservice method without 'out List&lt;class&gt;' as a parameter returns 'method not defined in service'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#87853">[ date ]</a>
              <a href="thread.html#87853">[ thread ]</a>
              <a href="subject.html#87853">[ subject ]</a>
              <a href="author.html#87853">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
