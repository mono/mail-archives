<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 498545] New: Error in decoding custom attributes on synthetic methods
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20498545%5D%20New%3A%20Error%20in%20decoding%20custom%20attributes%0A%20on%20synthetic%20methods&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="088228.html">
   <LINK REL="Next"  HREF="088229.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 498545] New: Error in decoding custom attributes on synthetic methods</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20498545%5D%20New%3A%20Error%20in%20decoding%20custom%20attributes%0A%20on%20synthetic%20methods&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 498545] New: Error in decoding custom attributes on synthetic methods">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon Apr 27 13:54:58 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="088228.html">[Mono-bugs] [Bug 498544] Native bindings fail after upgrading to	Mono 2.x
</A></li>
        <LI>Next message: <A HREF="088229.html">[Mono-bugs] [Bug 498545] Error in decoding custom attributes on synthetic methods
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#88226">[ date ]</a>
              <a href="thread.html#88226">[ thread ]</a>
              <a href="subject.html#88226">[ subject ]</a>
              <a href="author.html#88226">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=498545">http://bugzilla.novell.com/show_bug.cgi?id=498545</A>


           Summary: Error in decoding custom attributes on synthetic
                    methods
    Classification: Mono
           Product: Mono: Runtime
           Version: SVN
          Platform: Other
        OS/Version: Other
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: JIT
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">lupus at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">spouliot at novell.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
                CC: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">rkumpera at novell.com</A>
          Found By: ---


Short story:

Mono returns one custom attribute [SecurityCritical] for method
&quot;System.Windows.FrameworkElement[,]::.ctor&quot;
since this type is not a &quot;real&quot; method (or type) it should not have any
attribute (at least not a [SecurityCritical] one ;-).

This leads &quot;mono_security_core_clr_level_from_cinfo&quot; (security-core-clr.c) to
return MONO_SECURITY_CORE_CLR_CRITICAL and throw a MethodAccessException on
valid code (e.g. <A HREF="http://robozzle.com/">http://robozzle.com/</A>)


Long story (IRC log):

&lt;spouliot&gt; kumpera: hey, any clue how a [SecurityCritical] attributes can
exists on a runtime generated type, like FrameworkElement[,] ?
&lt;kumpera&gt; spouliot: AFAIK, they can't
&lt;kumpera&gt; but
&lt;kumpera&gt; FrameworkElement[,] extends System.Array
&lt;kumpera&gt; and have some synthetic methods like .ctor, Set() and Get()
&lt;kumpera&gt; and implement a bunch of interfaces
&lt;kumpera&gt; err, multidym arrays don't have synthetic interfaces, only unidym
&lt;spouliot&gt; I get this on the .ctor
&lt;kumpera&gt; on mono or on SL?
&lt;spouliot&gt; but there's no [SC] on System.Array
&lt;spouliot&gt; mono
&lt;kumpera&gt; .ctor is synthetic
&lt;kumpera&gt; IOW, there is no C# source for it
&lt;kumpera&gt; neither source of IL
&lt;spouliot&gt; yep, but are we adding any [SC] anywher ?
&lt;spouliot&gt; because it's added or copied/cloned
&lt;kumpera&gt; no idea, really
&lt;kumpera&gt; how do you know you're getting [SC]?
&lt;kumpera&gt; err, from where?
&lt;spouliot&gt; gdb
&lt;kumpera&gt; and how do you check it?
&lt;spouliot&gt; p *cinfo-&gt;attrs-&gt;ctor-&gt;klass
&lt;kumpera&gt; and this cinfo comes from the method of an array
&lt;spouliot&gt; from System.Windows.FrameworkElement[,]::.ctor
&lt;kumpera&gt; spouliot, does this method comes from a dynamic image?
&lt;kumpera&gt; hmm, I guess not
&lt;kumpera&gt; spouliot: what *cinfo-&gt;num_attrs print?
&lt;kumpera&gt; spouliot: lol, it's a bug on the reflection code
&lt;kumpera&gt; spouliot: mono screws up when decoding cattr of synthetic array
methods
&lt;spouliot&gt; kumpera: back - glad it's a bug, even if it's weird that it turned
out to be a [SC] :)
&lt;kumpera&gt; I believe it will decode to some random token
&lt;spouliot&gt; heh, really weird to hit that particular spot

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>

























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="088228.html">[Mono-bugs] [Bug 498544] Native bindings fail after upgrading to	Mono 2.x
</A></li>
	<LI>Next message: <A HREF="088229.html">[Mono-bugs] [Bug 498545] Error in decoding custom attributes on synthetic methods
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#88226">[ date ]</a>
              <a href="thread.html#88226">[ thread ]</a>
              <a href="subject.html#88226">[ subject ]</a>
              <a href="author.html#88226">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
