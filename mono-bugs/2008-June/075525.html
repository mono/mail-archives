<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 400445] New: Compiling under MSVC 2005 (v 8.+)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20400445%5D%20New%3A%20Compiling%20under%20MSVC%202005%20%28v%208.%2B%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="075960.html">
   <LINK REL="Next"  HREF="075528.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 400445] New: Compiling under MSVC 2005 (v 8.+)</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20400445%5D%20New%3A%20Compiling%20under%20MSVC%202005%20%28v%208.%2B%29&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 400445] New: Compiling under MSVC 2005 (v 8.+)">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon Jun 16 02:21:30 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="075960.html">[Mono-bugs] [Bug 400438] CS0840 error message does not make sense	for indexers
</A></li>
        <LI>Next message: <A HREF="075528.html">[Mono-bugs] [Bug 400445] Compiling under MSVC 2005 (v 8.+)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#75525">[ date ]</a>
              <a href="thread.html#75525">[ thread ]</a>
              <a href="subject.html#75525">[ subject ]</a>
              <a href="author.html#75525">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=400445">https://bugzilla.novell.com/show_bug.cgi?id=400445</A>


           Summary: Compiling under MSVC 2005 (v 8.+)
           Product: Mono: Runtime
           Version: SVN
          Platform: i686
        OS/Version: Windows Vista
            Status: NEW
          Severity: Major
          Priority: P5 - None
         Component: misc
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">migelU at gmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: Development


Since MS change behavior of the vsnprintf function eglib routines raises
segfault exception when mono runtime outputs traces, logs, and warnings. (DAMN
on it!)
here is simple patch vasprintf.c
int vasprintf(char **ret, const char *fmt, va_list ap)
{
char *buf;
int len;
size_t buflen;
va_list ap2;

#ifdef _MSC_VER
ap2 = ap;
len = _vscprintf(fmt, ap2); // NOTE MS specific extension ( :-( )
#else
va_copy(ap2, ap);
len = vsnprintf(NULL, 0, fmt, ap2);
#endif


if (len &gt; 0 &amp;&amp; (buf = malloc((buflen = (size_t) (len + 1)))) != NULL) {
len = vsnprintf(buf, buflen, fmt, ap);
*ret = buf;
} else {
*ret = NULL;
len = -1;
}

va_end(ap2);
return len;
}


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>
























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="075960.html">[Mono-bugs] [Bug 400438] CS0840 error message does not make sense	for indexers
</A></li>
	<LI>Next message: <A HREF="075528.html">[Mono-bugs] [Bug 400445] Compiling under MSVC 2005 (v 8.+)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#75525">[ date ]</a>
              <a href="thread.html#75525">[ thread ]</a>
              <a href="subject.html#75525">[ subject ]</a>
              <a href="author.html#75525">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
