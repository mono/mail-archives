<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 398318] New: Assigning value to sqlDataSource. ConnectionString causes FormView values to be reloaded
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20398318%5D%20New%3A%20Assigning%20value%20to%20sqlDataSource.%0A%20ConnectionString%20causes%20FormView%20values%20to%20be%20reloaded&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="074805.html">
   <LINK REL="Next"  HREF="074856.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 398318] New: Assigning value to sqlDataSource. ConnectionString causes FormView values to be reloaded</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20398318%5D%20New%3A%20Assigning%20value%20to%20sqlDataSource.%0A%20ConnectionString%20causes%20FormView%20values%20to%20be%20reloaded&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 398318] New: Assigning value to sqlDataSource. ConnectionString causes FormView values to be reloaded">bugzilla_noreply at novell.com
       </A><BR>
    <I>Sat Jun  7 18:46:16 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="074805.html">[Mono-bugs] [Bug 398316] FileSystemWatcher.Created += FsWatcher_Created; not enought power for whole drives
</A></li>
        <LI>Next message: <A HREF="074856.html">[Mono-bugs] [Bug 398318] Assigning value to sqlDataSource. ConnectionString causes FormView values to be reloaded
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#74806">[ date ]</a>
              <a href="thread.html#74806">[ thread ]</a>
              <a href="subject.html#74806">[ subject ]</a>
              <a href="author.html#74806">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=398318">https://bugzilla.novell.com/show_bug.cgi?id=398318</A>


           Summary: Assigning value to sqlDataSource.ConnectionString causes
                    FormView values to be reloaded
           Product: Mono: Class Libraries
           Version: 1.9.0
          Platform: x86-64
        OS/Version: openSUSE 10.3
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Sys.Web
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mhabersack at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">psoldack at wp.pl</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: DeveloperNet


Created an attachment (id=220885)
 --&gt; (<A HREF="https://bugzilla.novell.com/attachment.cgi?id=220885">https://bugzilla.novell.com/attachment.cgi?id=220885</A>)
FormViewCrash.zip - test application

Description of Problem:
The scenario is that there are many database servers to be used and proper one
is selected during run time. So ConnectionString value of sqlDataSource is
calculated and assigned at run time.
In MS.NET it can be simply done in PageLoad function. It has to be assigned in
every PageLoad call (even though it get the same value every time) as it is not
remembered by sqlDataSource. In MS.NET it works fine. But in Mono there is one
problem. If during postback sqlDataSource.ConnectionString is assigned a value
(in PageLoad) then FormView reloads all controls with values from
sqlDataSource, so all data entered by user are lost.
Solution would be not to assign ConnectionString's value when IsPostBack==true,
but it will work only in Mono, not in MS.NET, because MS.NET sqlDataSource
doest remember connection string :(

To be able to have same code running in Mono and MS.NET this problem has to be
solved.


Steps to reproduce the problem:
1. Download and unzip attached FormViewCrash.zip to selected folder
2. Go to that folder and change ConnectionString value in Default.aspx and
Default.aspx.cs to any valid MySQL database (needed to start data provider).
3. Run xsp2
4. Open browser and browse to Default.aspx
5. Select any record. Type in some text in textbox.
6. Click &quot;Do postback&quot;
7. Notice that textbox was reloaded and your text was lost (only in Mono, in
MS.NET textbox doesn't reload)
8. Unckeck &quot;Reset ConnectionString&quot;
9. Repeat steps 5 and 6. Notice that value was not reloaded.

Small explanation: In attached file there is ConnectionString hardcoded in
Default.aspx not to let application crash under MS.NET.

How often does this happen? 
Always


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="074805.html">[Mono-bugs] [Bug 398316] FileSystemWatcher.Created += FsWatcher_Created; not enought power for whole drives
</A></li>
	<LI>Next message: <A HREF="074856.html">[Mono-bugs] [Bug 398318] Assigning value to sqlDataSource. ConnectionString causes FormView values to be reloaded
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#74806">[ date ]</a>
              <a href="thread.html#74806">[ thread ]</a>
              <a href="subject.html#74806">[ subject ]</a>
              <a href="author.html#74806">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
