<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 401498] New: App Hangs on Exit
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20401498%5D%20New%3A%20App%20Hangs%20on%20Exit&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="075663.html">
   <LINK REL="Next"  HREF="075674.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 401498] New: App Hangs on Exit</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20401498%5D%20New%3A%20App%20Hangs%20on%20Exit&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 401498] New: App Hangs on Exit">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Jun 18 16:23:30 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="075663.html">[Mono-bugs] [Bug 349194] Type.IsAssignableFrom fails for some dynamically emitted types
</A></li>
        <LI>Next message: <A HREF="075674.html">[Mono-bugs] [Bug 401498] App Hangs on Exit
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#75664">[ date ]</a>
              <a href="thread.html#75664">[ thread ]</a>
              <a href="subject.html#75664">[ subject ]</a>
              <a href="author.html#75664">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=401498">https://bugzilla.novell.com/show_bug.cgi?id=401498</A>


           Summary: App Hangs on Exit
           Product: Mono: Class Libraries
           Version: unspecified
          Platform: i686
        OS/Version: Linux
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Windows.Forms
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">walker_643 at yahoo.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


Ubuntu 8.04
P4   1GB RAM
Mono 1.9.1

Myapp.exe generally runs fine under mono. On occasion, it will hang when it
should exit. When this happened last, I fired up gdb. I didn't see any
user-serviceable parts inside, so I thought I might pass it on. I'm posting
both the normal gdb bt and the mono-native bt:

gdb ./myapp.exe 10994
GNU gdb 6.8-debian
Copyright (C) 2008 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;<A HREF="http://gnu.org/licenses/gpl.html">http://gnu.org/licenses/gpl.html</A>&gt;
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type &quot;show copying&quot;
and &quot;show warranty&quot; for details.
This GDB was configured as &quot;i486-linux-gnu&quot;...
&quot;/usr/local/src/myco/proj/Myapp/bin/Debug/Myapp.exe&quot;: not in executable format:
File format is ambiguous
Attaching to process 10994
Reading symbols from /usr/local/bin/mono...done.
Reading symbols from /usr/lib/libgthread-2.0.so.0...done.
Loaded symbols for /usr/lib/libgthread-2.0.so.0
Reading symbols from /lib/tls/i686/cmov/librt.so.1...done.
Loaded symbols for /lib/tls/i686/cmov/librt.so.1
Reading symbols from /usr/lib/libglib-2.0.so.0...done.
Loaded symbols for /usr/lib/libglib-2.0.so.0
Reading symbols from /lib/tls/i686/cmov/libdl.so.2...done.
Loaded symbols for /lib/tls/i686/cmov/libdl.so.2
Reading symbols from /lib/tls/i686/cmov/libpthread.so.0...done.
[Thread debugging using libthread_db enabled]
[New Thread 0x402c0940 (LWP 10994)]
[New Thread 0x40fa9b90 (LWP 10999)]
[New Thread 0x40e88b90 (LWP 10995)]
Loaded symbols for /lib/tls/i686/cmov/libpthread.so.0
Reading symbols from /lib/tls/i686/cmov/libm.so.6...done.
Loaded symbols for /lib/tls/i686/cmov/libm.so.6
Reading symbols from /lib/tls/i686/cmov/libc.so.6...done.
Loaded symbols for /lib/tls/i686/cmov/libc.so.6
Reading symbols from /lib/libselinux.so.1...done.
Loaded symbols for /lib/libselinux.so.1
Reading symbols from /lib/ld-linux.so.2...done.
Loaded symbols for /lib/ld-linux.so.2
Reading symbols from /usr/lib/libpcre.so.3...done.
Loaded symbols for /usr/lib/libpcre.so.3
Reading symbols from /lib/tls/i686/cmov/libnss_compat.so.2...done.
Loaded symbols for /lib/tls/i686/cmov/libnss_compat.so.2
Reading symbols from /lib/tls/i686/cmov/libnsl.so.1...done.
Loaded symbols for /lib/tls/i686/cmov/libnsl.so.1
Reading symbols from /lib/tls/i686/cmov/libnss_nis.so.2...done.
Loaded symbols for /lib/tls/i686/cmov/libnss_nis.so.2
Reading symbols from /lib/tls/i686/cmov/libnss_files.so.2...done.
Loaded symbols for /lib/tls/i686/cmov/libnss_files.so.2
Reading symbols from /usr/lib/libX11.so.6...done.
Loaded symbols for /usr/lib/libX11.so.6
Reading symbols from /usr/lib/libxcb-xlib.so.0...done.
Loaded symbols for /usr/lib/libxcb-xlib.so.0
Reading symbols from /usr/lib/libxcb.so.1...done.
Loaded symbols for /usr/lib/libxcb.so.1
Reading symbols from /usr/lib/libXau.so.6...done.
Loaded symbols for /usr/lib/libXau.so.6
Reading symbols from /usr/lib/libXdmcp.so.6...done.
Loaded symbols for /usr/lib/libXdmcp.so.6
Reading symbols from /usr/local/lib/libgdiplus.so...done.
Loaded symbols for /usr/local/lib/libgdiplus.so
Reading symbols from /usr/lib/libfreetype.so.6...done.
Loaded symbols for /usr/lib/libfreetype.so.6
Reading symbols from /usr/lib/libz.so.1...done.
Loaded symbols for /usr/lib/libz.so.1
Reading symbols from /usr/lib/libXrender.so.1...done.
Loaded symbols for /usr/lib/libXrender.so.1
Reading symbols from /usr/lib/libtiff.so.4...done.
Loaded symbols for /usr/lib/libtiff.so.4
Reading symbols from /usr/lib/libjpeg.so.62...done.
Loaded symbols for /usr/lib/libjpeg.so.62
Reading symbols from /usr/lib/libungif.so.4...done.
Loaded symbols for /usr/lib/libungif.so.4
Reading symbols from /usr/lib/libpng12.so.0...done.
Loaded symbols for /usr/lib/libpng12.so.0
Reading symbols from /usr/lib/libexif.so.12...done.
Loaded symbols for /usr/lib/libexif.so.12
Reading symbols from /usr/lib/libfontconfig.so.1...done.
Loaded symbols for /usr/lib/libfontconfig.so.1
Reading symbols from /usr/lib/libexpat.so.1...done.
Loaded symbols for /usr/lib/libexpat.so.1
Reading symbols from /usr/lib/libgtk-x11-2.0.so.0...done.
Loaded symbols for /usr/lib/libgtk-x11-2.0.so.0
Reading symbols from /usr/lib/libgdk_pixbuf-2.0.so.0...done.
Loaded symbols for /usr/lib/libgdk_pixbuf-2.0.so.0
Reading symbols from /usr/lib/libgdk-x11-2.0.so.0...done.
Loaded symbols for /usr/lib/libgdk-x11-2.0.so.0
Reading symbols from /usr/lib/libpangocairo-1.0.so.0...done.
Loaded symbols for /usr/lib/libpangocairo-1.0.so.0
Reading symbols from /usr/lib/libpango-1.0.so.0...done.
Loaded symbols for /usr/lib/libpango-1.0.so.0
Reading symbols from /usr/lib/libXcomposite.so.1...done.
Loaded symbols for /usr/lib/libXcomposite.so.1
Reading symbols from /usr/lib/libXdamage.so.1...done.
Loaded symbols for /usr/lib/libXdamage.so.1
Reading symbols from /usr/lib/libXfixes.so.3...done.
Loaded symbols for /usr/lib/libXfixes.so.3
Reading symbols from /usr/lib/libatk-1.0.so.0...done.
Loaded symbols for /usr/lib/libatk-1.0.so.0
Reading symbols from /usr/lib/libgobject-2.0.so.0...done.
Loaded symbols for /usr/lib/libgobject-2.0.so.0
Reading symbols from /usr/lib/libgmodule-2.0.so.0...done.
Loaded symbols for /usr/lib/libgmodule-2.0.so.0
Reading symbols from /usr/lib/libcairo.so.2...done.
Loaded symbols for /usr/lib/libcairo.so.2
Reading symbols from /usr/lib/libXext.so.6...done.
Loaded symbols for /usr/lib/libXext.so.6
Reading symbols from /usr/lib/libXinerama.so.1...done.
Loaded symbols for /usr/lib/libXinerama.so.1
Reading symbols from /usr/lib/libXi.so.6...done.
Loaded symbols for /usr/lib/libXi.so.6
Reading symbols from /usr/lib/libXrandr.so.2...done.
Loaded symbols for /usr/lib/libXrandr.so.2
Reading symbols from /usr/lib/libXcursor.so.1...done.
Loaded symbols for /usr/lib/libXcursor.so.1
Reading symbols from /usr/lib/libpangoft2-1.0.so.0...done.
Loaded symbols for /usr/lib/libpangoft2-1.0.so.0
Reading symbols from /usr/lib/libpixman-1.so.0...done.
Loaded symbols for /usr/lib/libpixman-1.so.0
Reading symbols from /usr/lib/libstdc++.so.6...done.
Loaded symbols for /usr/lib/libstdc++.so.6
Reading symbols from /lib/libgcc_s.so.1...done.
Loaded symbols for /lib/libgcc_s.so.1
Reading symbols from /usr/lib/gtk-2.0/2.10.0/engines/libclearlooks.so...done.
Loaded symbols for /usr/lib/gtk-2.0/2.10.0/engines/libclearlooks.so
Reading symbols from /usr/local/lib/libMonoPosixHelper.so...done.
Loaded symbols for /usr/local/lib/libMonoPosixHelper.so
Reading symbols from /usr/local/lib/libMonoSupportW.so...done.
Loaded symbols for /usr/local/lib/libMonoSupportW.so
0x400ff4c2 in __pthread_disable_asynccancel ()
   from /lib/tls/i686/cmov/libpthread.so.0
(gdb) break
Breakpoint 1 at 0x400ff4c2
(gdb) bt full
#0  0x400ff4c2 in __pthread_disable_asynccancel ()
   from /lib/tls/i686/cmov/libpthread.so.0
No symbol table info available.
#1  0x400ff9a4 in read () from /lib/tls/i686/cmov/libpthread.so.0
No symbol table info available.
#2  0x41a5c1d3 in ?? () from /usr/lib/libxcb.so.1
No symbol table info available.
#3  0x41a5c83b in xcb_poll_for_event () from /usr/lib/libxcb.so.1
No symbol table info available.
#4  0x419a9cc9 in ?? () from /usr/lib/libX11.so.6
No symbol table info available.
#5  0x419a9fcf in ?? () from /usr/lib/libX11.so.6
No symbol table info available.
#6  0x419aa71f in _XEventsQueued () from /usr/lib/libX11.so.6
No symbol table info available.
#7  0x419939d2 in XPending () from /usr/lib/libX11.so.6
No symbol table info available.
#8  0x428ba093 in ?? ()
No symbol table info available.
#9  0x428b9e11 in ?? ()
No symbol table info available.
#10 0x428b9d0e in ?? ()
No symbol table info available.
#11 0x4240f484 in ?? ()
No symbol table info available.
#12 0x42409788 in ?? ()
No symbol table info available.
#13 0x4240800e in ?? ()
No symbol table info available.
#14 0x42407ee8 in ?? ()
No symbol table info available.
#15 0x42407c8f in ?? ()
No symbol table info available.
#16 0x428b00ba in ?? ()
No symbol table info available.
#17 0x424079fe in ?? ()
No symbol table info available.
#18 0x42416bfc in ?? ()
No symbol table info available.
#19 0x428afe21 in ?? ()
No symbol table info available.
#20 0x42416b64 in ?? ()
No symbol table info available.
#21 0x42416b0c in ?? ()
No symbol table info available.
#22 0x428aee9d in ?? ()
No symbol table info available.
#23 0x428aec8d in ?? ()
No symbol table info available.
#24 0x428ae993 in ?? ()
No symbol table info available.
#25 0x409142e7 in ?? ()
No symbol table info available.
#26 0x409141be in ?? ()
No symbol table info available.
#27 0x080f1feb in mono_runtime_exec_main (method=0x834b108, args=0x3be70, 
    exc=0x0) at object.c:3093
        domain = (MonoDomain *) 0x0
        pa = {0x3be70}
        rval = &lt;value optimized out&gt;
        cinfo = (MonoCustomAttrInfo *) 0x41a6a8bc
        has_stathread_attribute = 0
        thread = (MonoThread *) 0x34e10
        __PRETTY_FUNCTION__ = &quot;mono_runtime_exec_main&quot;
        stathread_attribute = (MonoClass *) 0x8294e4c
#28 0x080f33fa in mono_runtime_run_main (method=0x82443b4, argc=1, 
    argv=0xbf8d14dc, exc=0x0) at object.c:2881
        i = -1081273124
        args = (MonoArray *) 0x3be70
        domain = (MonoDomain *) 0x34f00
        utf8_fullpath = (
    gchar *) 0x8288920 &quot;/source/myco/proj/Myapp/bin/Debug/Myapp.exe&quot;
        result = &lt;value optimized out&gt;
        __PRETTY_FUNCTION__ = &quot;mono_runtime_run_main&quot;
#29 0x0805b7d2 in mono_main (argc=1, argv=0xbf8d14d4) at driver.c:888
        error = &lt;value optimized out&gt;
        assembly = (MonoAssembly *) 0x82883f8
        desc = &lt;value optimized out&gt;
        method = &lt;value optimized out&gt;
        cfg = &lt;value optimized out&gt;
        domain = (MonoDomain *) 0x34f00
        aname = &lt;value optimized out&gt;
        mname = 0x0
        config_file = 0x0
        i = &lt;value optimized out&gt;
        count = 1
        enable_debugging = 1
        opt = &lt;value optimized out&gt;
        action = 3
        mono_graph_options = 0
        mini_verbose = 0
        enable_profile = 0
        trace_options = 0x0
        profile_options = 0x0
        aot_options = 0x0
        forced_version = 0x0
#30 0x0805a2f2 in main (argc=Cannot access memory at address 0x0
) at main.c:6
No locals.

(gdb) mono_backtrace 26
#0  0x400fbaf8 in __pthread_mutex_unlock_usercnt () from
/lib/tls/i686/cmov/libpthread.so.0
#1  0x419904f5 in ?? () from /usr/lib/libX11.so.6
#2  0x419a9406 in ?? () from /usr/lib/libX11.so.6
#3  0x419939b3 in XPending () from /usr/lib/libX11.so.6
#4 0x428ba093 in  (wrapper managed-to-native)
System.Windows.Forms.XplatUIX11:XPending (intptr) + 0x2b (0x428ba068
0x428ba0b7) [0x34f00 - MyApp.exe]
#5 0x428b9e11 in  System.Windows.Forms.XplatUIX11:PeekMessage
(object,System.Windows.Forms.MSG&amp;,intptr,int,int,uint) + 0x61 (0x428b9db0
0x428b9fbd) [0x34f00 - MyApp.exe]
#6 0x428b9d0e in  System.Windows.Forms.XplatUIX11:WaitForHwndMessage
(System.Windows.Forms.Hwnd,System.Windows.Forms.Msg) + 0x66 (0x428b9ca8
0x428b9daa) [0x34f00 - MyApp.exe]
#7 0x4240f484 in  System.Windows.Forms.XplatUIX11:MapWindow
(System.Windows.Forms.Hwnd,System.Windows.Forms.WindowType) + 0x31c (0x4240f168
0x4240f48e) [0x34f00 - MyApp.exe]
#8 0x42409788 in  System.Windows.Forms.XplatUIX11:CreateWindow
(System.Windows.Forms.CreateParams) + 0x1770 (0x42408018 0x4240997d) [0x34f00 -
MyApp.exe]
#9 0x4240800e in  System.Windows.Forms.XplatUI:CreateWindow
(System.Windows.Forms.CreateParams) + 0x16 (0x42407ff8 0x42408013) [0x34f00 -
MyApp.exe]
#10 0x42407ee8 in  System.Windows.Forms.NativeWindow:CreateHandle
(System.Windows.Forms.CreateParams) + 0x38 (0x42407eb0 0x42407f9a) [0x34f00 -
MyApp.exe]
#11 0x42407c8f in  System.Windows.Forms.Control:CreateHandle () + 0x77
(0x42407c18 0x42407e2e) [0x34f00 - MyApp.exe]
#12 0x428b00ba in  System.Windows.Forms.Form:CreateHandle () + 0x12 (0x428b00a8
0x428b0722) [0x34f00 - MyApp.exe]
#13 0x424079fe in  System.Windows.Forms.Control:CreateControl () + 0x5e
(0x424079a0 0x42407af0) [0x34f00 - MyApp.exe]
#14 0x42416bfc in  System.Windows.Forms.Control:SetVisibleCore (bool) + 0x64
(0x42416b98 0x42416ff6) [0x34f00 - MyApp.exe]
#15 0x428afe21 in  System.Windows.Forms.Form:SetVisibleCore (bool) + 0x149
(0x428afcd8 0x428b005d) [0x34f00 - MyApp.exe]
---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---
#16 0x42416b64 in  System.Windows.Forms.Control:set_Visible (bool) + 0x24
(0x42416b40 0x42416b87) [0x34f00 - MyApp.exe]
#17 0x42416b0c in  (wrapper remoting-invoke-with-check)
System.Windows.Forms.Control:set_Visible (bool) + 0x4c (0x42416ac0 0x42416b16)
[0x34f00 - MyApp.exe]
#18 0x428aee9d in  System.Windows.Forms.Application:RunLoop
(bool,System.Windows.Forms.ApplicationContext) + 0x1bd (0x428aece0 0x428af9d2)
[0x34f00 - MyApp.exe]
#19 0x428aec8d in  System.Windows.Forms.Application:Run
(System.Windows.Forms.ApplicationContext) + 0x4d (0x428aec40 0x428aecc6)
[0x34f00 - MyApp.exe]
#20 0x428ae993 in  System.Windows.Forms.Application:Run
(System.Windows.Forms.Form) + 0x23 (0x428ae970 0x428ae99a) [0x34f00 -
MyApp.exe]
#21 0x409142e7 in  myco.proj.Program:Main () + 0x87 (0x40914260 0x40914362)
[0x34f00 - MyApp.exe]
#22 0x409141be in  (wrapper runtime-invoke)
myco.proj.Program:runtime_invoke_void (object,intptr,intptr,intptr) + 0x26
(0x40914198 0x40914222) [0x34f00 - MyApp.exe]
#23 0x080f1feb in mono_runtime_exec_main (method=0x8333358, args=0x3be70,
exc=0x0) at object.c:3093
3093                    mono_runtime_invoke (method, NULL, pa, exc);
#24 0x080f33fa in mono_runtime_run_main (method=0x82443b4, argc=1,
argv=0xbf8d14dc, exc=0x0) at object.c:2881
2881            result = mono_runtime_exec_main (method, args, exc);
#25 0x0805b7d2 in mono_main (argc=1, argv=0xbf8d14d4) at driver.c:888
888                     mono_jit_exec (main_args-&gt;domain, assembly,
main_args-&gt;argc, main_args-&gt;argv);


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>
























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="075663.html">[Mono-bugs] [Bug 349194] Type.IsAssignableFrom fails for some dynamically emitted types
</A></li>
	<LI>Next message: <A HREF="075674.html">[Mono-bugs] [Bug 401498] App Hangs on Exit
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#75664">[ date ]</a>
              <a href="thread.html#75664">[ thread ]</a>
              <a href="subject.html#75664">[ subject ]</a>
              <a href="author.html#75664">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
