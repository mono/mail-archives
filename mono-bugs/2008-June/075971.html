<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 403371] New: Uncatched exception in CheckNewExceptionWithoutThrowingRule
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20403371%5D%20New%3A%20Uncatched%20exception%20in%0A%20CheckNewExceptionWithoutThrowingRule&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="075967.html">
   <LINK REL="Next"  HREF="075982.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 403371] New: Uncatched exception in CheckNewExceptionWithoutThrowingRule</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20403371%5D%20New%3A%20Uncatched%20exception%20in%0A%20CheckNewExceptionWithoutThrowingRule&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 403371] New: Uncatched exception in CheckNewExceptionWithoutThrowingRule">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Jun 24 14:28:30 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="075967.html">[Mono-bugs] [Bug 403282] New: DataSet Binding causing NotImplementedException in System.Data. DataViewManager
</A></li>
        <LI>Next message: <A HREF="075982.html">[Mono-bugs] [Bug 403371] Uncatched exception in CheckNewExceptionWithoutThrowingRule
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#75971">[ date ]</a>
              <a href="thread.html#75971">[ thread ]</a>
              <a href="subject.html#75971">[ subject ]</a>
              <a href="author.html#75971">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=403371">https://bugzilla.novell.com/show_bug.cgi?id=403371</A>


           Summary: Uncatched exception in
                    CheckNewExceptionWithoutThrowingRule
           Product: Mono: Tools
           Version: SVN
          Platform: i386
        OS/Version: Linux
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Gendarme
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">nestor.salceda at gmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


Here is the stack trace for this rule:

An uncatched exception occured. Please fill a bug report @
<A HREF="https://bugzilla.novell.com/">https://bugzilla.novell.com/</A>
Rule:   Gendarme.Rules.BadPractice.CheckNewExceptionWithoutThrowingRule
Target: System.Boolean
System.Xml.Linq.XObject/&lt;Annotations&gt;c__Iterator16`1::MoveNext()
Stack trace: System.ArgumentOutOfRangeException: Index is less than 0 or more
than or equal to the list count.
Parameter name: index
0
  at System.Collections.ArrayList.get_Item (Int32 index) [0x00032] in
/home/nestor/devel/mono-project/mcs/class/corlib/System.Collections/ArrayList.cs:2652 
  at System.Collections.CollectionBase.System.Collections.IList.get_Item (Int32
index) [0x00000] in
/home/nestor/devel/mono-project/mcs/class/corlib/System.Collections/CollectionBase.cs:200 
  at Mono.Cecil.GenericParameterCollection.get_Item (Int32 index) [0x00000] in
/home/nestor/devel/mono-project/mcs/class/Mono.Cecil/Mono.Cecil/GenericParameterCollection.cs:44 
  at Mono.Cecil.ReflectionReader.GetTypeRefFromSig
(Mono.Cecil.Signatures.SigType t, Mono.Cecil.GenericContext context) [0x00359]
in
/home/nestor/devel/mono-project/mcs/class/Mono.Cecil/Mono.Cecil/ReflectionReader.cs:1099 
  at Mono.Cecil.ReflectionReader.GetTypeSpecAt (UInt32 rid,
Mono.Cecil.GenericContext context) [0x0004e] in
/home/nestor/devel/mono-project/mcs/class/Mono.Cecil/Mono.Cecil/ReflectionReader.cs:153 
  at Mono.Cecil.Cil.CodeReader.ReadCilBody (Mono.Cecil.Cil.MethodBody body,
System.IO.BinaryReader br) [0x003c7] in
/home/nestor/devel/mono-project/mcs/class/Mono.Cecil/Mono.Cecil.Cil/CodeReader.cs:191 
  at Mono.Cecil.Cil.CodeReader.VisitMethodBody (Mono.Cecil.Cil.MethodBody body)
[0x000c5] in
/home/nestor/devel/mono-project/mcs/class/Mono.Cecil/Mono.Cecil.Cil/CodeReader.cs:75 
  at Mono.Cecil.MethodDefinition.LoadBody () [0x00042] in
/home/nestor/devel/mono-project/mcs/class/Mono.Cecil/Mono.Cecil/MethodDefinition.cs:554 
  at Mono.Cecil.MethodDefinition.get_Body () [0x00000] in
/home/nestor/devel/mono-project/mcs/class/Mono.Cecil/Mono.Cecil/MethodDefinition.cs:104 
  at
Gendarme.Rules.BadPractice.CheckNewExceptionWithoutThrowingRule.CheckMethod
(Mono.Cecil.MethodDefinition method) [0x0000f] in
/home/nestor/devel/mono-project/mono-tools/gendarme/rules/Gendarme.Rules.BadPractice/CheckNewExceptionWithoutThrowingRule.cs:53 
  at Gendarme.Framework.Runner.OnMethod (Gendarme.Framework.RunnerEventArgs e)
[0x000b7] in
/home/nestor/devel/mono-project/mono-tools/gendarme/framework/Gendarme.Framework/Runner.cs:251 
  at Gendarme.Framework.Runner.Run () [0x000cb] in
/home/nestor/devel/mono-project/mono-tools/gendarme/framework/Gendarme.Framework/Runner.cs:296 
  at Gendarme.ConsoleRunner.Run () [0x00006] in
/home/nestor/devel/mono-project/mono-tools/gendarme/console/ConsoleRunner.cs:197 
  at Gendarme.ConsoleRunner.Execute (System.String[] args) [0x00142] in
/home/nestor/devel/mono-project/mono-tools/gendarme/console/ConsoleRunner.cs:176 

I have been researching a little, and I'm not sure if is our bug or is a cecil
bug, because the exception is thrown at line 53:


if (!method.HasBody)
        return RuleResult.DoesNotApply;

StackEntryAnalysis sea = null;

---&gt;    foreach (Instruction ins in method.Body.Instructions) {

The code checks if the method has body, but when access to the Instructions it
breaks.

In order to reproduce it, you have to run gendarme (with the BadPractice set)
against System.Xml.Linq.  (Or you can use the script in my mono-soc-2008
directory)


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>











































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="075967.html">[Mono-bugs] [Bug 403282] New: DataSet Binding causing NotImplementedException in System.Data. DataViewManager
</A></li>
	<LI>Next message: <A HREF="075982.html">[Mono-bugs] [Bug 403371] Uncatched exception in CheckNewExceptionWithoutThrowingRule
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#75971">[ date ]</a>
              <a href="thread.html#75971">[ thread ]</a>
              <a href="subject.html#75971">[ subject ]</a>
              <a href="author.html#75971">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
