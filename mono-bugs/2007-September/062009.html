<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 328036] [PATCH]Casting bug with generic collections
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20328036%5D%20%5BPATCH%5DCasting%20bug%20with%20generic%20collections&In-Reply-To=bug-328036-28286%40https.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="061998.html">
   <LINK REL="Next"  HREF="062037.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 328036] [PATCH]Casting bug with generic collections</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20328036%5D%20%5BPATCH%5DCasting%20bug%20with%20generic%20collections&In-Reply-To=bug-328036-28286%40https.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 328036] [PATCH]Casting bug with generic collections">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Sep 25 10:25:14 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="061998.html">[Mono-bugs] [Bug 328036] [PATCH]Casting bug with generic collections
</A></li>
        <LI>Next message: <A HREF="062037.html">[Mono-bugs] [Bug 328036] [PATCH]Casting bug with generic collections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62009">[ date ]</a>
              <a href="thread.html#62009">[ thread ]</a>
              <a href="subject.html#62009">[ subject ]</a>
              <a href="author.html#62009">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=328036#c6">https://bugzilla.novell.com/show_bug.cgi?id=328036#c6</A>





--- Comment #6 from Paolo Molaro &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">lupus at novell.com</A>&gt;  2007-09-25 08:25:14 MST ---
I guess you could commit, since it fixes the bug, but the code is really slow:
for reference types we could try a cast to object[] and do the stores to that.
For value types the code will box all the keys and values which would be bad.
To handle them you might want to try a cast to Tkey[] or TValue[] depending on
the collection (do this after the check for object[]) and do the stores using
that. It's likely good to separate the two implementations in two different
helper functions. If the casts fail I guess going for the slow code is the
lesser evil. There are a couple of places in the same files where the similarly
slow code is used, it would be great if you could fix those, too.
We also likely need test cases to see how the MS runtime behaves when the
target array is an int[] and we have a byte dictionary or things like that.


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>




























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="061998.html">[Mono-bugs] [Bug 328036] [PATCH]Casting bug with generic collections
</A></li>
	<LI>Next message: <A HREF="062037.html">[Mono-bugs] [Bug 328036] [PATCH]Casting bug with generic collections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62009">[ date ]</a>
              <a href="thread.html#62009">[ thread ]</a>
              <a href="subject.html#62009">[ subject ]</a>
              <a href="author.html#62009">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
