<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 328398] New: SqlDbType.Image is not supported
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20328398%5D%20New%3A%20SqlDbType.Image%20is%20not%20supported&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="062087.html">
   <LINK REL="Next"  HREF="062089.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 328398] New: SqlDbType.Image is not supported</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20328398%5D%20New%3A%20SqlDbType.Image%20is%20not%20supported&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 328398] New: SqlDbType.Image is not supported">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Sep 25 21:54:28 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="062087.html">[Mono-bugs] [Bug 319163] Remoting of explicit interface	implementation fails
</A></li>
        <LI>Next message: <A HREF="062089.html">[Mono-bugs] [Bug 319973] TLS support in Novell.Directory. Ldap fails with unhandled exception
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62088">[ date ]</a>
              <a href="thread.html#62088">[ thread ]</a>
              <a href="subject.html#62088">[ subject ]</a>
              <a href="author.html#62088">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=328398">https://bugzilla.novell.com/show_bug.cgi?id=328398</A>

           Summary: SqlDbType.Image is not supported
           Product: Mono: Class Libraries
           Version: 1.2
          Platform: i586
        OS/Version: All
            Status: NEW
          Severity: Major
          Priority: P5 - None
         Component: Sys.Data.SqlClient
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">gcomeau at hotmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at ximian.com</A>
          Found By: Community of Practice


This feature worked under mono 1.2.3 and now breaks in 1.2.5
See the source, the makefile and the output. It also passes using the MS
compiler. The mono runtime throws a 
Unhandled Exception: System.NotImplementedException: Type Not Supported : Image





********************************
The test case:
********************************

using System;
using System.Data;
using System.Data.SqlClient;


public class ImageArgTests {

  public static void Main(String[] args){

    SqlParameter param = new SqlParameter(&quot;pname&quot;, SqlDbType.Image);
    param.Direction = ParameterDirection.Input;
    param.Value = new byte[10];

  }

}



********************************
The makefile
********************************
all:
        @uname -a
        @echo &quot; #######################################################&quot;
        @echo &quot; *               CSC Compiler, MS Runtime              *&quot;
        @echo &quot; #######################################################&quot;
        csc /out:a.exe ImageArgTests.cs
        ./a.exe
        @echo &quot; #######################################################&quot;
        @echo &quot; *               Mono Compiler, Mono Runtime           *&quot;
        @echo &quot; #######################################################&quot;
        gmcs --version
        gmcs /out:b.exe -r:System.Data.dll ImageArgTests.cs
        -mono ./b.exe
        @echo &quot; #######################################################&quot;
        @echo &quot; *               CSC Compiler, Mono Runtime            *&quot;
        @echo &quot; #######################################################&quot;
        -mono ./a.exe
        @echo &quot; #######################################################&quot;
        @echo &quot; *               Mono Compiler, MS Runtime             *&quot;
        @echo &quot; #######################################################&quot;
        ./b.exe




********************************
The output
********************************
$ cat out.txt
CYGWIN_NT-5.1 paprika 1.5.11(0.116/4/2) 2004-09-04 23:17 i686 unknown unknown
Cygwin
 #######################################################
 *               CSC Compiler, MS Runtime              *
 #######################################################
csc /out:a.exe ImageArgTests.cs
Microsoft (R) Visual C# 2005 Compiler version 8.00.50727.42
for Microsoft (R) Windows (R) 2005 Framework version 2.0.50727
Copyright (C) Microsoft Corporation 2001-2005. All rights reserved.

/a.exe
 #######################################################
 *               Mono Compiler, Mono Runtime           *
 #######################################################
gmcs --version
Mono C# compiler version 1.2.5.0
gmcs /out:b.exe -r:System.Data.dll ImageArgTests.cs
mono ./b.exe

Unhandled Exception: System.NotImplementedException: Type Not Supported : Image
  at System.Data.SqlClient.SqlParameter.ConvertToFrameworkType (System.Object
value) [0x00000]
  at System.Data.SqlClient.SqlParameter.SqlTypeToFrameworkType (System.Object
value) [0x00000]
  at System.Data.SqlClient.SqlParameter.set_Value (System.Object value)
[0x00000]
  at ImageArgTests.Main (System.String[] args) [0x00000]
make: [all] Error 1 (ignored)
 #######################################################
 *               CSC Compiler, Mono Runtime            *
 #######################################################
mono ./a.exe

Unhandled Exception: System.NotImplementedException: Type Not Supported : Image
  at System.Data.SqlClient.SqlParameter.ConvertToFrameworkType (System.Object
value) [0x00000]
  at System.Data.SqlClient.SqlParameter.SqlTypeToFrameworkType (System.Object
value) [0x00000]
  at System.Data.SqlClient.SqlParameter.set_Value (System.Object value)
[0x00000]
  at ImageArgTests.Main (System.String[] args) [0x00000]
make: [all] Error 1 (ignored)
 #######################################################
 *               Mono Compiler, MS Runtime             *
 #######################################################
/b.exe


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="062087.html">[Mono-bugs] [Bug 319163] Remoting of explicit interface	implementation fails
</A></li>
	<LI>Next message: <A HREF="062089.html">[Mono-bugs] [Bug 319973] TLS support in Novell.Directory. Ldap fails with unhandled exception
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62088">[ date ]</a>
              <a href="thread.html#62088">[ thread ]</a>
              <a href="subject.html#62088">[ subject ]</a>
              <a href="author.html#62088">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
