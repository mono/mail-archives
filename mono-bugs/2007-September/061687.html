<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 326011] New: Creating two connections to the same SQL database throws an exception
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20326011%5D%20New%3A%20Creating%20two%20connections%20to%20the%20same%0A%20SQL%20database%20throws%20an%20exception&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="061657.html">
   <LINK REL="Next"  HREF="061756.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 326011] New: Creating two connections to the same SQL database throws an exception</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20326011%5D%20New%3A%20Creating%20two%20connections%20to%20the%20same%0A%20SQL%20database%20throws%20an%20exception&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 326011] New: Creating two connections to the same SQL database throws an exception">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Sep 18 10:14:50 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="061657.html">[Mono-bugs] [Bug 321598] [PATCH] Remoting/generics support missing.
</A></li>
        <LI>Next message: <A HREF="061756.html">[Mono-bugs] [Bug 326011] Creating two connections to the same SQL database throws an exception
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61687">[ date ]</a>
              <a href="thread.html#61687">[ thread ]</a>
              <a href="subject.html#61687">[ subject ]</a>
              <a href="author.html#61687">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=326011">https://bugzilla.novell.com/show_bug.cgi?id=326011</A>

           Summary: Creating two connections to the same SQL database throws
                    an exception
           Product: Mono: Class Libraries
           Version: 1.2
          Platform: x86
        OS/Version: Windows XP
            Status: NEW
          Severity: Critical
          Priority: P5 - None
         Component: Sys.Data.SqlClient
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">paul at digitaltinder.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at ximian.com</A>
          Found By: Third Party Developer/Partner


Created an attachment (id=173086)
 --&gt; (<A HREF="https://bugzilla.novell.com/attachment.cgi?id=173086">https://bugzilla.novell.com/attachment.cgi?id=173086</A>)
A sample of the problem

I have a similar (but not identical) issue to Bug 320311.

Overview:
=========
I have a sample application which has a form and two drop down lists.  I have
code that calls a method (passing it a SQL string) which will connect to a SQL
server execute the SQL string and return a data table.  The first time I get
data using the method everything works fine.  But the second time I call it, I
get an exception saying &quot;SQL Server does not exist or access denied&quot;  This
application runs perfectly using MS .Net 2.0.

Steps to Reproduce: 
===================
1. Create code to create a SQLConnection, SQLCommand, and use a SQLDataAdapter
to fill a dataset.
2. Copy and past that code so that it executes twice in a row. (You may need to
modify it so that you don't declare the same variable names twice)
3. Run the code.

Actual Results:
===============
The application crashes... but if you put in some error handling you can catch
an SQL Exception which says &quot;SQL Server does not exist or access denied&quot;

Expected Results:
=================
The application should be able to open two consecutive connections to the same
database.

Build Date &amp; Platform: 
======================
2007-09-18 - Intel x86 (Windows XP)

Additional Information:
=======================
Using the sample application, you can run either the &quot;CodeThatWorks&quot; method or
the &quot;CodeThatBreaks&quot; method.  Both do almost identical work.  You must only run
ONE of the two at any given time, since after you have created one connection
to the database all others seem to fail. e.g. if you run CodeThatBreaks() and
then CodeThatWorks() then CodeThatWorks will fail too.  So only ever have one
of the two lines in Form1_Load uncommented at any one time.


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>








































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="061657.html">[Mono-bugs] [Bug 321598] [PATCH] Remoting/generics support missing.
</A></li>
	<LI>Next message: <A HREF="061756.html">[Mono-bugs] [Bug 326011] Creating two connections to the same SQL database throws an exception
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61687">[ date ]</a>
              <a href="thread.html#61687">[ thread ]</a>
              <a href="subject.html#61687">[ subject ]</a>
              <a href="author.html#61687">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
