<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 82704][Nor] New - Stack overflow in unmanaged code,	with xsp2
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2082704%5D%5BNor%5D%20New%20-%20Stack%20overflow%20in%20unmanaged%20code%2C%0A%09with%20xsp2&In-Reply-To=bug-82704%40chernobyl.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="061193.html">
   <LINK REL="Next"  HREF="061195.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 82704][Nor] New - Stack overflow in unmanaged code,	with xsp2</H1>
    <B>bugzilla-daemon at bugzilla.ximian.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%2082704%5D%5BNor%5D%20New%20-%20Stack%20overflow%20in%20unmanaged%20code%2C%0A%09with%20xsp2&In-Reply-To=bug-82704%40chernobyl.ximian.com"
       TITLE="[Mono-bugs] [Bug 82704][Nor] New - Stack overflow in unmanaged code,	with xsp2">bugzilla-daemon at bugzilla.ximian.com
       </A><BR>
    <I>Wed Sep  5 10:08:39 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="061193.html">[Mono-bugs] [Bug 82572][Maj] Changed - DataGridView: not visible in	form
</A></li>
        <LI>Next message: <A HREF="061195.html">[Mono-bugs] [Bug 82705][Nor] New - [GMCS] gmcs fails to find	implementations of generic methods defined in interfaces
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61194">[ date ]</a>
              <a href="thread.html#61194">[ thread ]</a>
              <a href="subject.html#61194">[ subject ]</a>
              <a href="author.html#61194">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mhabersack at novell.com.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=82704">http://bugzilla.ximian.com/show_bug.cgi?id=82704</A>

--- shadow/82704	2007-09-05 10:08:39.000000000 -0400
+++ shadow/82704.tmp.18946	2007-09-05 10:08:39.000000000 -0400
@@ -0,0 +1,157 @@
+Bug#: 82704
+Product: Mono: Runtime
+Version: 1.2
+OS: 
+OS Details: 
+Status: NEW   
+Resolution: 
+Severity: 
+Priority: Normal
+Component: JIT
+AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">lupus at ximian.com</A>                            
+ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mhabersack at novell.com</A>               
+QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at ximian.com</A>
+TargetMilestone: ---
+URL: 
+Cc: 
+Summary: Stack overflow in unmanaged code, with xsp2
+
+The Sys.Web static file handler causes a stack overflow when it is called
+twice and the default index file doesn't exist. To reproduce:
+
+1. create an empty directory and cd to it
+2. run xsp2
+3. visit <A HREF="http://localhost:8080/">http://localhost:8080/</A> twice - the first time you will get an
+error message, the second time stack overflow will happen and mono will quit.
+
+A sample stack trace:
+
+Adding applications '/:.'...
+Registering application:
+    Host:          any
+    Port:          any
+    Virtual path:  /
+    Physical path: /tmp/t
+Listening on port: 8080 (non-secure)
+Listening on address: 0.0.0.0
+Root directory: /tmp/t
+Hit Return to stop the server.
+Stack overflow in unmanaged: IP: 0x81417b6, fault addr: 0xb5707fd8
+Stack overflow: IP: 0x81417b6, fault addr: 0xb56ffe7c
+At Unmanaged
+Stacktrace:
+
+
+Native stacktrace:
+
+	/home/devel/bin/mono [0x818bfac]
+	[0xb7f94440]
+	/lib/libc.so.6(abort+0x101) [0xb7d84801]
+	/home/devel/bin/mono [0x81485e5]
+	[0xb7f94440]
+
+Debug info from gdb:
+
+Using host libthread_db library &quot;/lib/libthread_db.so.1&quot;.
+[Thread debugging using libthread_db enabled]
+[New Thread -1210737952 (LWP 23524)]
+[New Thread -1249903728 (LWP 23543)]
+[New Thread -1247663216 (LWP 23539)]
+[New Thread -1246393456 (LWP 23538)]
+[New Thread -1239422064 (LWP 23536)]
+[New Thread -1238369392 (LWP 23529)]
+[New Thread -1222579312 (LWP 23527)]
+[New Thread -1222366320 (LWP 23526)]
+0xb7f94410 in ?? ()
+  8 Thread -1222366320 (LWP 23526)  0xb7f94410 in ?? ()
+  7 Thread -1222579312 (LWP 23527)  0xb7f94410 in ?? ()
+  6 Thread -1238369392 (LWP 23529)  0xb7f94410 in ?? ()
+  5 Thread -1239422064 (LWP 23536)  0xb7f94410 in ?? ()
+  4 Thread -1246393456 (LWP 23538)  0xb7f94410 in ?? ()
+  3 Thread -1247663216 (LWP 23539)  0xb7f94410 in ?? ()
+  2 Thread -1249903728 (LWP 23543)  0xb7f94410 in ?? ()
+  1 Thread -1210737952 (LWP 23524)  0xb7f94410 in ?? ()
+
+Thread 8 (Thread -1222366320 (LWP 23526)):
+#0  0xb7f94410 in ?? ()
+#1  0xb72423a8 in ?? ()
+#2  0x0823bff4 in ?? ()
+#3  0x00000000 in ?? ()
+
+Thread 7 (Thread -1222579312 (LWP 23527)):
+#0  0xb7f94410 in ?? ()
+#1  0xb720e1a8 in ?? ()
+#2  0x00000005 in ?? ()
+#3  0x00000000 in ?? ()
+
+Thread 6 (Thread -1238369392 (LWP 23529)):
+#0  0xb7f94410 in ?? ()
+#1  0xb62ff2b8 in ?? ()
+#2  0x00000200 in ?? ()
+#3  0x084fdb50 in ?? ()
+#4  0xb7e199f6 in __epoll_wait_nocancel () from /lib/libc.so.6
+#5  0x080ba7e2 in socket_io_epoll_main (p=0x823d160) at threadpool.c:554
+#6  0x0809ab50 in start_wrapper (data=0xb6301ce0) at threads.c:550
+#7  0x0811a07e in thread_start_routine (args=0xb75c9e90) at threads.c:264
+#8  0x08143974 in GC_start_routine ()
+#9  0xb7eb3112 in start_thread () from /lib/libpthread.so.0
+#10 0xb7e192ee in clone () from /lib/libc.so.6
+
+Thread 5 (Thread -1239422064 (LWP 23536)):
+#0  0xb7f94410 in ?? ()
+#1  0xb61fe1a4 in ?? ()
+#2  0x00000195 in ?? ()
+#3  0x00000000 in ?? ()
+
+Thread 4 (Thread -1246393456 (LWP 23538)):
+#0  0xb7f94410 in ?? ()
+#1  0xb5b580cc in ?? ()
+#2  0x000000cb in ?? ()
+#3  0x00000000 in ?? ()
+
+Thread 3 (Thread -1247663216 (LWP 23539)):
+#0  0xb7f94410 in ?? ()
+#1  0xb5a2220c in ?? ()
+#2  0x00001000 in ?? ()
+#3  0x001b2010 in ?? ()
+#4  0xb7e0a8ab in __read_nocancel () from /lib/libc.so.6
+#5  0xb5b636cd in ?? ()
+#6  0x00000013 in ?? ()
+#7  0x001b2010 in ?? ()
+#8  0x00001000 in ?? ()
+#9  0xb5a22260 in ?? ()
+#10 0x001b2010 in ?? ()
+#11 0x0883ec50 in ?? ()
+#12 0x00001000 in ?? ()
+#13 0x00001000 in ?? ()
+#14 0x00000000 in ?? ()
+
+Thread 2 (Thread -1249903728 (LWP 23543)):
+#0  0xb7f94410 in ?? ()
+#1  0xb6446e58 in ?? ()
+#2  0x00000000 in ?? ()
+
+Thread 1 (Thread -1210737952 (LWP 23524)):
+#0  0xb7f94410 in ?? ()
+#1  0xbfba6dbc in ?? ()
+#2  0x00000400 in ?? ()
+#3  0x00095560 in ?? ()
+#4  0xb7eba02b in __read_nocancel () from /lib/libpthread.so.0
+#5  0x0811fbd3 in console_read (handle=0x0, buffer=0x95560, numbytes=1024, 
+    bytesread=0xbfba6e20, overlapped=0x0) at io.c:1069
+#6  0x0811c36d in ReadFile (handle=0x0, buffer=0x95560, numbytes=1024, 
+    bytesread=0xbfba6e20, overlapped=0x0) at io.c:2271
+#7  0x081a9a80 in ves_icall_System_IO_MonoIO_Read (handle=0x0, dest=0x95550, 
+    dest_offset=611680, count=1024, error=0xbfba6e8c) at file-io.c:634
+#8  0xb65a100b in ?? ()
+#9  0x00000000 in ?? ()
+#0  0xb7f94410 in ?? ()
+
+
+=================================================================
+Got a SIGABRT while executing native code. This usually indicates
+a fatal error in the mono runtime or one of the native libraries 
+used by your application.
+=================================================================
+
+Aborted
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="061193.html">[Mono-bugs] [Bug 82572][Maj] Changed - DataGridView: not visible in	form
</A></li>
	<LI>Next message: <A HREF="061195.html">[Mono-bugs] [Bug 82705][Nor] New - [GMCS] gmcs fails to find	implementations of generic methods defined in interfaces
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61194">[ date ]</a>
              <a href="thread.html#61194">[ thread ]</a>
              <a href="subject.html#61194">[ subject ]</a>
              <a href="author.html#61194">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
