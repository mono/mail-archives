<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 356314] New: net_2_1_tuned fails to 'make install'	on Win32
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20356314%5D%20New%3A%20net_2_1_tuned%20fails%20to%20%27make%20install%27%0A%09on%20Win32&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="068382.html">
   <LINK REL="Next"  HREF="068384.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 356314] New: net_2_1_tuned fails to 'make install'	on Win32</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20356314%5D%20New%3A%20net_2_1_tuned%20fails%20to%20%27make%20install%27%0A%09on%20Win32&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 356314] New: net_2_1_tuned fails to 'make install'	on Win32">bugzilla_noreply at novell.com
       </A><BR>
    <I>Fri Jan 25 11:35:36 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="068382.html">[Mono-bugs] [Bug 332616] intermittent SIGSEGV between Sprawl levels
</A></li>
        <LI>Next message: <A HREF="068384.html">[Mono-bugs] [Bug 356316] New: System.Reflection.Emit doesn' t provide stack trace information for nested types
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#68383">[ date ]</a>
              <a href="thread.html#68383">[ thread ]</a>
              <a href="subject.html#68383">[ subject ]</a>
              <a href="author.html#68383">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=356314">https://bugzilla.novell.com/show_bug.cgi?id=356314</A>


           Summary: net_2_1_tuned fails to 'make install' on Win32
           Product: Mono: Tools
           Version: unspecified
          Platform: Other
        OS/Version: Windows XP
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: linker
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">andyhume32 at yahoo.co.uk</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


Created an attachment (id=191854)
 --&gt; (<A HREF="https://bugzilla.novell.com/attachment.cgi?id=191854">https://bugzilla.novell.com/attachment.cgi?id=191854</A>)
*hack* patch

[Is mcs/tools/tuner == component &quot;linker&quot;?]

I've been unable to build on Win32 for a long time and finally tracked down the
problem.  The Makefile for mcs/tools/tuner does not allow for running under
Win32 where the path(s) need to be DOS-ified for gacutil and thus attempts to
write to the root of the disk rather than to folders within the cygwin tree.

The failure logging in 'make install' was the following:
[[
MONO_PATH=&quot;../../class/lib/net_1_1_bootstrap;$MONO_PATH&quot;
/usr/src/mono/mono/runtime/mono-wrapper 
./../class/lib/net_1_1_bootstrap/gacutil.exe /i
./../class/lib/net_2_1_tuned/System.dll /f /root /usr/local/lib /package 2.1
[... ...]
Failure adding assembly to the cache: gac directories could not be created,
possibly permission issues.
]]

I run the build as under standard user account, and gacutil was trying to
create &quot;C:\usr&quot; (well D:\usr in my case by that's immaterial).  When I manually
created such a folder and gave myself write permissions, after build it
contained:

/usr/local/lib/mono/
  2.1/ { System.dll, System.Core.dll, System.Xml.Core.dll }
  gac/ { same assemblies, in the expected structure }


So the Makefile apparently needs to use cygpath on Win32.  (On machines where
no error occurs I presume '/usr/local...' is being created?!)  It should of
course have been writing to &quot;C:\cygwin\usr\local\...&quot; or similar.

With the attached *hack* diff (imitating mono-services' Makefile) it seems to
work for me now.


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>



























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="068382.html">[Mono-bugs] [Bug 332616] intermittent SIGSEGV between Sprawl levels
</A></li>
	<LI>Next message: <A HREF="068384.html">[Mono-bugs] [Bug 356316] New: System.Reflection.Emit doesn' t provide stack trace information for nested types
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#68383">[ date ]</a>
              <a href="thread.html#68383">[ thread ]</a>
              <a href="subject.html#68383">[ subject ]</a>
              <a href="author.html#68383">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
