<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 355717] New: FileVersionInfo: Runtime should set fields to zero-length string if filversioninfo is available
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20355717%5D%20New%3A%20FileVersionInfo%3A%20Runtime%20should%20set%0A%20fields%20to%20zero-length%20string%20if%20filversioninfo%20is%20available&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="068288.html">
   <LINK REL="Next"  HREF="068274.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 355717] New: FileVersionInfo: Runtime should set fields to zero-length string if filversioninfo is available</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20355717%5D%20New%3A%20FileVersionInfo%3A%20Runtime%20should%20set%0A%20fields%20to%20zero-length%20string%20if%20filversioninfo%20is%20available&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 355717] New: FileVersionInfo: Runtime should set fields to zero-length string if filversioninfo is available">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Jan 23 13:53:30 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="068288.html">[Mono-bugs] [Bug 355703] Setting AutoScale = true doesn't stick
</A></li>
        <LI>Next message: <A HREF="068274.html">[Mono-bugs] [Bug 355717] FileVersionInfo: Runtime should set fields to zero-length string if filversioninfo is available
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#68273">[ date ]</a>
              <a href="thread.html#68273">[ thread ]</a>
              <a href="subject.html#68273">[ subject ]</a>
              <a href="author.html#68273">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=355717">https://bugzilla.novell.com/show_bug.cgi?id=355717</A>


           Summary: FileVersionInfo: Runtime should set fields to zero-
                    length string if filversioninfo is available
           Product: Mono: Runtime
           Version: SVN
          Platform: All
        OS/Version: All
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: io-layer
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">dick at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">gert.driesen at pandora.be</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


If there's no StringFileInfo table, or if there's no entry for a given key or
if the value is zero-length then the runtime should set the corresponding field
on the FileVersionInfo instance to a zero-length string.

This change is necessary because in .NET 2.0, the string properties of
FileVersionInfo return null if the specified file does not contain an unmanaged
fileversioninfo.

For this to work, we can no longer initialize the fields in FileVersionInfo to
a zero-length string (on the 2.0 profile) and hence this must be done in the
runtime.

This affects both Windows and Linux (so the fix must go in process.c).

To reproduce:
1. apply the patch for FileVersionInfo.
2. extract the gzipped tar containing the repro.
3. run 'make'.

Note:

I sugggest not to commit the patch for FileVersionInfo. I'll commit this
together with other related changes (to mcs, corlib and System) after all
runtime issues have sorted out.

Expected result:

Successful execution (exit code 0).

Actual result:

Unhandled Exception: System.Exception: Expected: , but was: &lt;null&gt;. #A20
  at Assert.AreEqual (System.String x, System.String y, System.String msg)
[0x00
000]
  at Program.Verify1 () [0x00000]
  at Program.Main (System.String[] args) [0x00000]


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>












































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="068288.html">[Mono-bugs] [Bug 355703] Setting AutoScale = true doesn't stick
</A></li>
	<LI>Next message: <A HREF="068274.html">[Mono-bugs] [Bug 355717] FileVersionInfo: Runtime should set fields to zero-length string if filversioninfo is available
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#68273">[ date ]</a>
              <a href="thread.html#68273">[ thread ]</a>
              <a href="subject.html#68273">[ subject ]</a>
              <a href="author.html#68273">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
