<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 357152] ListBox' s Size does not reflect actual size after being adjusted due to anchoring
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20357152%5D%20ListBox%27%20s%20Size%20does%20not%20reflect%20actual%0A%20size%20after%20being%20adjusted%20due%20to%20anchoring&In-Reply-To=bug-357152-28286%40https.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="068526.html">
   <LINK REL="Next"  HREF="068580.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 357152] ListBox' s Size does not reflect actual size after being adjusted due to anchoring</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20357152%5D%20ListBox%27%20s%20Size%20does%20not%20reflect%20actual%0A%20size%20after%20being%20adjusted%20due%20to%20anchoring&In-Reply-To=bug-357152-28286%40https.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 357152] ListBox' s Size does not reflect actual size after being adjusted due to anchoring">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Jan 30 23:48:58 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="068526.html">[Mono-bugs] [Bug 357152] New: ListBox' s Size does not reflect actual size after being adjusted due to anchoring
</A></li>
        <LI>Next message: <A HREF="068580.html">[Mono-bugs] [Bug 357152] ListBox' s Size does not reflect actual size after being adjusted due to anchoring
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#68560">[ date ]</a>
              <a href="thread.html#68560">[ thread ]</a>
              <a href="subject.html#68560">[ subject ]</a>
              <a href="author.html#68560">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=357152">https://bugzilla.novell.com/show_bug.cgi?id=357152</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jdpurcell2 at yahoo.com</A> added comment
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=357152#c1">https://bugzilla.novell.com/show_bug.cgi?id=357152#c1</A>





--- Comment #1 from James Purcell &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jdpurcell2 at yahoo.com</A>&gt;  2008-01-30 21:48:58 MST ---
Created an attachment (id=192473)
 --&gt; (<A HREF="https://bugzilla.novell.com/attachment.cgi?id=192473">https://bugzilla.novell.com/attachment.cgi?id=192473</A>)
patch

This also fixes several other issues:

1) After a listbox is created (i.e. CreateControl) it should adjust its height
if necessary for IntegralHeight.  This bug isn't usually obvious unless the
listbox has enough items to require a scrollbar, in which case the scrollbar is
the correct height but the list is visibly taller.  The current code actually
always adjusts the height for IntegralHeight in SetBoundsCore, but since
CreateParams uses Height (and therefore HeightInternal) it doesn't get created
with the correct size.  Note that in MS.NET CreateParams.Height is also not
adjusted for IntegralHeight, so the correct fix is not to modify how we make
CreateParams, rather the height should be adjusted after the control is
created.  Also, this should happen even if the listbox is using its default
size.  This breaks the ListBoxTest.ClientRectangle_Borders test, but I believe
that test is invalid (does it work in MS.NET?).

2) When a listbox's IntegralHeight property is set false, it should resize its
height to requested_size.  When set true again, it should resize to avoid
showing partial items.  The idea in the current code is to always call
SetBounds with requested_height and SetBoundsCore will adjust for
IntegralHeight, but this doesn't work because SetBounds only calls
SetBoundsCore when its height parameter is different than the control's height.


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="068526.html">[Mono-bugs] [Bug 357152] New: ListBox' s Size does not reflect actual size after being adjusted due to anchoring
</A></li>
	<LI>Next message: <A HREF="068580.html">[Mono-bugs] [Bug 357152] ListBox' s Size does not reflect actual size after being adjusted due to anchoring
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#68560">[ date ]</a>
              <a href="thread.html#68560">[ thread ]</a>
              <a href="subject.html#68560">[ subject ]</a>
              <a href="author.html#68560">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
