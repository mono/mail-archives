<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 349195] Embedding Mono broken on OS X: problematic	references
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20349195%5D%20Embedding%20Mono%20broken%20on%20OS%20X%3A%20problematic%0A%09references&In-Reply-To=bug-349195-28286%40https.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="068258.html">
   <LINK REL="Next"  HREF="068266.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 349195] Embedding Mono broken on OS X: problematic	references</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20349195%5D%20Embedding%20Mono%20broken%20on%20OS%20X%3A%20problematic%0A%09references&In-Reply-To=bug-349195-28286%40https.bugzilla.novell.com/"
       TITLE="[Mono-bugs] [Bug 349195] Embedding Mono broken on OS X: problematic	references">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Jan 23 09:27:08 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="068258.html">[Mono-bugs] [Bug 355622] New: Compilation fails on unsafe array	constructor.
</A></li>
        <LI>Next message: <A HREF="068266.html">[Mono-bugs] [Bug 349195] Embedding Mono broken on OS X: problematic	references
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#68260">[ date ]</a>
              <a href="thread.html#68260">[ thread ]</a>
              <a href="subject.html#68260">[ subject ]</a>
              <a href="author.html#68260">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=349195">https://bugzilla.novell.com/show_bug.cgi?id=349195</A>

User <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">andreas.faerber at web.de</A> added comment
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=349195#c7">https://bugzilla.novell.com/show_bug.cgi?id=349195#c7</A>





--- Comment #7 from Andreas F&#228;rber &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">andreas.faerber at web.de</A>&gt;  2008-01-23 07:27:08 MST ---
In my opinion, you should be using full (absolute) paths (the default when
compiling):

Mono until 1.2.5 always installed to /Library/Frameworks/Mono.framework and
used absolute paths. That way you were able to link your native executable to
the /Library/Frameworks/Mono.framework, and direct your users to download and
install the official Mono package (as you would on Windows for the .NET
framework or Mono).

What the reporter of bug #323882 said is that using absolute pathnames does not
allow taking the installed Mono.framework as-is and copying it into an
application bundle as My.app/Contents/Frameworks/Mono.framework. That is true.
For this to work correctly, someone - either them on their copy or you on the
original - has to change the path as you describe above in comment #6.

It's an exclusive decision, I see no way to satisfy both demands unless you
were able to supply two alternative downloads.

With you installing the complete framework to the system location I would
welcome if this stays usable by applications as before:
* this keeps application bundles small and saves bandwidth
* it spares developers the need to redistribute GPL source code
* it lets users apply Mono updates themselves
If a developer cares to strip unused parts of the Mono.framework (such as mcs)
to reduce size and these issues, they can just as well run the command to
change the absolute path into a relative path:
install_name_tool -change /Library/... @executable_path/... .../libmono.dylib
Otherwise, when using relative paths as right now, you are forcing people to
ship Mono inside their application bundle or, as a workaround, to emulate this
via symlink to the system-installed framework, with the latter being a little
fragile for distribution.

The golden solution would be to have the standard downloadable Mono.framework
use full absolute paths and to supply a separate stripped-down Mono.framework
with relative path specifically for embedding.
(But then again, we're not doing this for any other platform, and neither is
Mono a real framework nor do its headers follow the conventions for a
framework*, so a better long-term solution would be to integrate a real Mach-O
framework (possibly derived from Dumbarton) into Mono.framework, providing the
semantics expected by Mac developers.)

* For a framework named Mono.framework, the include path &lt;Mono/foo.h&gt; would
refer to Mono.framework/Headers/foo.h while Mono uses &lt;mono/bar.h&gt; to refer to
Mono.framework/Headers/mono-1.0/mono/bar.h, requiring include/mono-1.0,
include/glib-2.0 and lib/glib-2.0/include to be added to the search path in
addition to adding the framework dependency, and in place of #include
&lt;Mono/Mono.h&gt; one needs to use &lt;mono/jit/jit.h&gt; or others. On the Mac, Mono is
currently simply a dynamic library, not a framework and can't be fully used as
such.


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>

















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="068258.html">[Mono-bugs] [Bug 355622] New: Compilation fails on unsafe array	constructor.
</A></li>
	<LI>Next message: <A HREF="068266.html">[Mono-bugs] [Bug 349195] Embedding Mono broken on OS X: problematic	references
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#68260">[ date ]</a>
              <a href="thread.html#68260">[ thread ]</a>
              <a href="subject.html#68260">[ subject ]</a>
              <a href="author.html#68260">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
