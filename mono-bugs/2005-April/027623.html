<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 74649][Min] Changed - NUnit test in corlib fails
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:bugzilla-daemon%40bugzilla.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="027622.html">
   <LINK REL="Next"  HREF="027624.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 74649][Min] Changed - NUnit test in corlib fails
   </H1>
    <B>bugzilla-daemon@bugzilla.ximian.com
    </B> 
    <A HREF="mailto:bugzilla-daemon%40bugzilla.ximian.com"
       TITLE="[Mono-bugs] [Bug 74649][Min] Changed - NUnit test in corlib fails">bugzilla-daemon@bugzilla.ximian.com
       </A><BR>
    <I>Tue, 19 Apr 2005 19:53:18 -0400 (EDT)</I>
    <P><UL>
        <LI> Previous message: <A HREF="027622.html">[Mono-bugs] [Bug 74664][Nor] Changed - Request.ServerVariables don't read some variables
</A></li>
        <LI> Next message: <A HREF="027624.html">[Mono-bugs] [Bug 73181][Maj] Changed - Multithreaded Drawstring causes NullReference exception
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27623">[ date ]</a>
              <a href="thread.html#27623">[ thread ]</a>
              <a href="subject.html#27623">[ subject ]</a>
              <a href="author.html#27623">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="mailto:flashdict@gmail.com.">flashdict@gmail.com.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=74649">http://bugzilla.ximian.com/show_bug.cgi?id=74649</A>

--- shadow/74649	2005-04-19 18:49:35.000000000 -0400
+++ shadow/74649.tmp.2026	2005-04-19 19:53:18.000000000 -0400
@@ -3,13 +3,13 @@
 Version: 1.1
 OS: other
 OS Details: FreeBSD 6.0
 Status: REOPENED   
 Resolution: 
 Severity: Unknown
-Priority: Normal
+Priority: Minor
 Component: io-layer
 AssignedTo: <A HREF="mailto:mono-bugs@ximian.com">mono-bugs@ximian.com</A>                            
 ReportedBy: <A HREF="mailto:flashdict@gmail.com">flashdict@gmail.com</A>               
 QAContact: <A HREF="mailto:mono-bugs@ximian.com">mono-bugs@ximian.com</A>
 TargetMilestone: ---
 URL: 
@@ -135,6 +135,30 @@
 exception, this can be closed or downgraded.  I have re-verified the
 behavior under r43267 with FreeBSD, though - with the same io-layer
 error on every other run.  
 
 Thanks.
 
+
+------- Additional Comments From <A HREF="mailto:flashdict@gmail.com">flashdict@gmail.com</A>  2005-04-19 19:53 -------
+As a final note, I've finally figured out why this behaves so oddly -
+with an IO exception followed by an io-layer error on successive runs.
+ The difference is that the IO exception I get is:
+
+Unhandled Exception: System.IO.IOException: Could not create file
+&quot;ThisIsMyTestPathFor.Test&quot;. File already exists.
+
+When it core dumps, the finally block never executes, and the file
+doesn't get deleted, then on the next run the open with CreateNew
+throws the exception.  Otherwise, I'd get 
+
+** ERROR **: file ../../mono/io-layer/handles-private.h: line 392
+(_wapi_handle_share_release): assertion failed: (info-&gt;handle_refs &gt; 0)
+aborting...
+Abort (core dumped)
+
+every time.
+
+FWIW.  Setting to minor anyhow, since it seems FreeBSD-specific, and
+anyone who opens the same file twice in the same routine needs to get
+dumped on.  Heh.  If you leave it open though, I'll take a look at why
+it errors on FreeBSD in 4-7 years, after I grok mono a little better. :)

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="027622.html">[Mono-bugs] [Bug 74664][Nor] Changed - Request.ServerVariables don't read some variables
</A></li>
	<LI> Next message: <A HREF="027624.html">[Mono-bugs] [Bug 73181][Maj] Changed - Multithreaded Drawstring causes NullReference exception
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27623">[ date ]</a>
              <a href="thread.html#27623">[ thread ]</a>
              <a href="subject.html#27623">[ subject ]</a>
              <a href="author.html#27623">[ author ]</a>
         </LI>
       </UL>
</body></html>
