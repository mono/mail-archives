<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 74637][Nor] Changed - HttpWebRequest fails with AllowWriteStreamBuffering = false
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:bugzilla-daemon%40bugzilla.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="027427.html">
   <LINK REL="Next"  HREF="027429.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 74637][Nor] Changed - HttpWebRequest fails with AllowWriteStreamBuffering = false
   </H1>
    <B>bugzilla-daemon@bugzilla.ximian.com
    </B> 
    <A HREF="mailto:bugzilla-daemon%40bugzilla.ximian.com"
       TITLE="[Mono-bugs] [Bug 74637][Nor] Changed - HttpWebRequest fails with AllowWriteStreamBuffering = false">bugzilla-daemon@bugzilla.ximian.com
       </A><BR>
    <I>Sat, 16 Apr 2005 15:01:14 -0400 (EDT)</I>
    <P><UL>
        <LI> Previous message: <A HREF="027427.html">[Mono-bugs] [Bug 74611][Maj] Changed - ** ERROR **: file class.c: line 1972
</A></li>
        <LI> Next message: <A HREF="027429.html">[Mono-bugs] [Bug 74612][Nor] Changed - Unref messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27428">[ date ]</a>
              <a href="thread.html#27428">[ thread ]</a>
              <a href="subject.html#27428">[ subject ]</a>
              <a href="author.html#27428">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please do not reply to this email- if you want to comment on the bug, go to the
URL shown below and enter your comments there.

Changed by <A HREF="mailto:lewing@ximian.com.">lewing@ximian.com.</A>

<A HREF="http://bugzilla.ximian.com/show_bug.cgi?id=74637">http://bugzilla.ximian.com/show_bug.cgi?id=74637</A>

--- shadow/74637	2005-04-16 13:37:11.000000000 -0400
+++ shadow/74637.tmp.24440	2005-04-16 15:01:14.000000000 -0400
@@ -1,14 +1,14 @@
 Bug#: 74637
 Product: Mono: Class Libraries
 Version: 1.1
-OS: 
+OS: unknown
 OS Details: 
 Status: NEW   
 Resolution: 
-Severity: 
+Severity: Unknown
 Priority: Normal
 Component: System
 AssignedTo: <A HREF="mailto:mono-bugs@ximian.com">mono-bugs@ximian.com</A>                            
 ReportedBy: <A HREF="mailto:lewing@ximian.com">lewing@ximian.com</A>               
 QAContact: <A HREF="mailto:mono-bugs@ximian.com">mono-bugs@ximian.com</A>
 TargetMilestone: ---
@@ -20,6 +20,31 @@
 it can give the user feedback on how much of the potentially very big
 upload has occured.  With the latest code in SVN head this no long works,
 the write never seems to complete.  If I turn write buffering back on the
 progress info is wrong but the submission completes properly.
 
 The code in question lives in f-spot/src/FormClient.cs
+
+------- Additional Comments From <A HREF="mailto:lewing@ximian.com">lewing@ximian.com</A>  2005-04-16 15:01 -------
+the FormClient code is fairly self contained but useless without a
+server.  The simplest method to reproduce this from within f-spot is
+to get www.flickr.com account, select a photo go to
+File-&gt;Export-&gt;Flickr fill in the email address and password then wait
+for the progress dialog to appear.  The dialog will show up but never
+progress at all until the connection times out.
+
+With older mono versions the writes complete and upload progresses.
+
+If you need a simpler test case something like
+
+public void Upload (string upload_url, string file_path) {		
+		FormClient client = new FormClient ();
+		client.Add (&quot;start&quot;, System.Web.HttpUtility.UrlEncode (path));
+		client.Add (&quot;photo&quot;, new FileInfo (path));
+		client.Add (&quot;desc&quot;, &quot;this is the description&quot;);
+
+		Stream response = client.Submit (upload_url).GetResponseStream ();
+		StreamReader reader = new StreamReader (response, Encoding.UTF8);
+		Console.WriteLine (reader.ReadToEnd ());
+}
+
+should be enough to trigger the bug and never complete.

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="027427.html">[Mono-bugs] [Bug 74611][Maj] Changed - ** ERROR **: file class.c: line 1972
</A></li>
	<LI> Next message: <A HREF="027429.html">[Mono-bugs] [Bug 74612][Nor] Changed - Unref messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27428">[ date ]</a>
              <a href="thread.html#27428">[ thread ]</a>
              <a href="subject.html#27428">[ subject ]</a>
              <a href="author.html#27428">[ author ]</a>
         </LI>
       </UL>
</body></html>
