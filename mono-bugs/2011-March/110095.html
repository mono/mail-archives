<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 679702] New: WCF endpoint behaviors not applied
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20679702%5D%20New%3A%20WCF%20endpoint%20behaviors%20not%20applied&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="110094.html">
   <LINK REL="Next"  HREF="110096.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 679702] New: WCF endpoint behaviors not applied</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20679702%5D%20New%3A%20WCF%20endpoint%20behaviors%20not%20applied&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 679702] New: WCF endpoint behaviors not applied">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Mar 15 06:31:11 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="110094.html">[Mono-bugs] [Bug 669469] Mono Addon 2.6 unable to parse argument	with spaces
</A></li>
        <LI>Next message: <A HREF="110096.html">[Mono-bugs] [Bug 679702] WCF endpoint behaviors not applied
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#110095">[ date ]</a>
              <a href="thread.html#110095">[ thread ]</a>
              <a href="subject.html#110095">[ subject ]</a>
              <a href="author.html#110095">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=679702">https://bugzilla.novell.com/show_bug.cgi?id=679702</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=679702#c0">https://bugzilla.novell.com/show_bug.cgi?id=679702#c0</A>


           Summary: WCF endpoint behaviors not applied
    Classification: Mono
           Product: MonoTouch
           Version: unspecified
          Platform: Other
        OS/Version: Other
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Class Libraries
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">anthony at caterxpress.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
                CC: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">anthony at caterxpress.com</A>
          Found By: Community User
           Blocker: ---


We are attempting to access WCT REST services via MonoTouch, which requires us
to use a different binding than the standard WSHttpBinding. Our binding must
use manual addressing due to the nature of REST services, which can only be
achieved by adding a behavior to the binding.

However due to a compiler directive in 
System.ServiceModel.Description.ServiceEndpoint, no behaviors are ever applied
to a binding:

        internal ClientRuntime CreateRuntime ()
        {
            ServiceEndpoint se = this;

            var proxy = se.Contract.CreateClientRuntime ();

#if !NET_2_1
            foreach (IEndpointBehavior b in se.Behaviors)
                b.ApplyClientBehavior (se, proxy);
            foreach (IContractBehavior b in se.Contract.Behaviors)
                b.ApplyClientBehavior (se.Contract, se, proxy);
#endif
            return proxy;
        }

Without these you cannot control manual addressing, such as setting the &quot;To&quot; 
message header (among many other things you can't do). In Silverlight, WCF
behaviors are fully supported.

In the ChannelFactory class, you have allowed another behavior method to be
executed by including monotouch in the directive:

        BindingParameterCollection CreateBindingParameters ()
        {
..
#if !NET_2_1 || MONOTOUCH
            foreach (IEndpointBehavior behavior in Endpoint.Behaviors)
                behavior.AddBindingParameters (Endpoint, pl);
#endif

            return pl;
        }

I'm hoping you can also add MONOTOUCH to the directive in
ServiceEndpoint.CreateRuntime(). Without this it's virtually impossible to use
alternate WCF bindings &amp; behaviors.

For completeness, I also suggest adding the MONOTOUCH directive to the Validate
method in the ServiceEndpoint class.

Thanks,
Anthony.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>





























































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="110094.html">[Mono-bugs] [Bug 669469] Mono Addon 2.6 unable to parse argument	with spaces
</A></li>
	<LI>Next message: <A HREF="110096.html">[Mono-bugs] [Bug 679702] WCF endpoint behaviors not applied
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#110095">[ date ]</a>
              <a href="thread.html#110095">[ thread ]</a>
              <a href="subject.html#110095">[ subject ]</a>
              <a href="author.html#110095">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
