<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 681164] New: OutputCacheAttribute in MVC causes 100% CPU usage and mono to stop responding
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20681164%5D%20New%3A%20OutputCacheAttribute%20in%20MVC%20causes%0A%20100%25%20CPU%20usage%20and%20mono%20to%20stop%20responding&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="110321.html">
   <LINK REL="Next"  HREF="110492.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 681164] New: OutputCacheAttribute in MVC causes 100% CPU usage and mono to stop responding</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20681164%5D%20New%3A%20OutputCacheAttribute%20in%20MVC%20causes%0A%20100%25%20CPU%20usage%20and%20mono%20to%20stop%20responding&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 681164] New: OutputCacheAttribute in MVC causes 100% CPU usage and mono to stop responding">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon Mar 21 03:20:46 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="110321.html">[Mono-bugs] [Bug 681070] MKMapView.SetCenterCoordinate does not set to the correct coordinate
</A></li>
        <LI>Next message: <A HREF="110492.html">[Mono-bugs] [Bug 681164] OutputCacheAttribute in MVC causes 100% CPU usage and mono to stop responding
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#110328">[ date ]</a>
              <a href="thread.html#110328">[ thread ]</a>
              <a href="subject.html#110328">[ subject ]</a>
              <a href="author.html#110328">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=681164">https://bugzilla.novell.com/show_bug.cgi?id=681164</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=681164#c0">https://bugzilla.novell.com/show_bug.cgi?id=681164#c0</A>


           Summary: OutputCacheAttribute in MVC causes 100% CPU usage and
                    mono to stop responding
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.10.x
          Platform: x86-64
        OS/Version: Ubuntu
            Status: NEW
          Severity: Critical
          Priority: P5 - None
         Component: Sys.Web
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mhabersack at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">rupurt at gmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Created an attachment (id=420397)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=420397">http://bugzilla.novell.com/attachment.cgi?id=420397</A>)
MVC project with scripts using wget to request action which triggers crash

User-Agent:       Mozilla/5.0 (X11; U; Linux x86_64; en-US) AppleWebKit/534.16
(KHTML, like Gecko) Chrome/10.0.648.151 Safari/534.16

When using the OutputCacheAttribute in MVC it causes mono to stop responding
after several requests. I have tested the issue on both MVC 2 and 3 as well as
applying the attribute controller wide and only to the action.

I have tried the OutputCache property in webforms and it DOES NOT cause the
same issue.

It is always repeatable however the number of requests which cause the problem
is not constant. These are not simultaneous connections. The problem occurs
after serving 1 request at a time, which is the simplest possible case.



Reproducible: Always

Steps to Reproduce:
1. Running on mono 2.10.1 with apache and mod-mono-server with mono-server4
2. Make several repeated requests to the same controller action
3. After a while mono hangs and uses 100% CPU
Actual Results:  
After a few requests (10-100) mono hangs and stops responding

Expected Results:  
Mono should keep servicing requests

Run the nocrash.sh script to request an MVC action 200 times without any
problems using wget

Run the crash.sh script to request and MVC action 200 times. After a few
requests (10-100) mono will hang and stop responding.

NOTE: You may need to change the hostname you are requesting in the scripts. By
default it is set to 127.0.0.1

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>










































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="110321.html">[Mono-bugs] [Bug 681070] MKMapView.SetCenterCoordinate does not set to the correct coordinate
</A></li>
	<LI>Next message: <A HREF="110492.html">[Mono-bugs] [Bug 681164] OutputCacheAttribute in MVC causes 100% CPU usage and mono to stop responding
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#110328">[ date ]</a>
              <a href="thread.html#110328">[ thread ]</a>
              <a href="subject.html#110328">[ subject ]</a>
              <a href="author.html#110328">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
