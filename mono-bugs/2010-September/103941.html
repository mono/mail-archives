<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 639819] New: Assembly.Load() should throw FileLoadException instead of FileNotFoundException
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20639819%5D%20New%3A%20Assembly.Load%28%29%20should%20throw%0A%20FileLoadException%20instead%20of%20FileNotFoundException&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="103940.html">
   <LINK REL="Next"  HREF="103977.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 639819] New: Assembly.Load() should throw FileLoadException instead of FileNotFoundException</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20639819%5D%20New%3A%20Assembly.Load%28%29%20should%20throw%0A%20FileLoadException%20instead%20of%20FileNotFoundException&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 639819] New: Assembly.Load() should throw FileLoadException instead of FileNotFoundException">bugzilla_noreply at novell.com
       </A><BR>
    <I>Thu Sep 16 10:55:35 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="103940.html">[Mono-bugs] [Bug 401194] gmcs failed to load referencied assembly
</A></li>
        <LI>Next message: <A HREF="103977.html">[Mono-bugs] [Bug 639819] Assembly.Load() should throw FileLoadException instead of FileNotFoundException
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#103941">[ date ]</a>
              <a href="thread.html#103941">[ thread ]</a>
              <a href="subject.html#103941">[ subject ]</a>
              <a href="author.html#103941">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=639819">https://bugzilla.novell.com/show_bug.cgi?id=639819</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=639819#c0">https://bugzilla.novell.com/show_bug.cgi?id=639819#c0</A>


           Summary: Assembly.Load() should throw FileLoadException instead
                    of FileNotFoundException
    Classification: Mono
           Product: Mono: Class Libraries
           Version: 2.6.x
          Platform: All
        OS/Version: All
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: CORLIB
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">knocte at gmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 5.2; en-GB; rv:1.9.2.9)
Gecko/20100824 Firefox/3.6.9 ( .NET CLR 3.5.30729; .NET4.0E)

In case a developer wants to load an assembly from a path, he can be confused
at first and use Assembly.Load() instead of Assembly.LoadFile().

In this case, the developer doesn't get good feedback of what went wrong,
because the file is there and it exists, but a FileNotFoundException with the
path is thrown.

Reproducible: Always

Steps to Reproduce:
1. Place a managed and valid dll in /home/myself/ as the name &quot;hello.dll&quot;.
2. Use Assembly.Load (&quot;/home/myself/hello.dll&quot;)
3. Place your exe in /home/myself/.
4. Run it.
Actual Results:  
Unhandled Exception: System.IO.FileNotFoundException: Could not load file or
assembly '/home/myself/hello.dll' or one of its dependencies. The system cannot
find the file specified.
File name: '/home/myself/hello.dll'

Expected Results:  
MS.NET is a bit better at this, but still not perfect.

MS.NET throws:
System.IO.FileLoadException: Could not load file or assembly
'C:\\VersionToleran
tSerializationTestLib.dll' or one of its dependencies. The given assembly name
o
r codebase was invalid. (Exception from HRESULT: 0x80131047)
File name: 'C:\\VersionTolerantSerializationTestLib.dll'


What we should throw:

System.IO.FileLoadException: Could not load assembly '/home/myself/hello.dll'
or one of its dependencies. The given assembly name or codebase was invalid.
(Exception from HRESULT: 0x80131047)
File name: '/home/myself/home/myself/hello.dll.dll'

NOTE: The last filename is not a typo.

When running the program with strace, even though the FileNotFoundException
reports /home/myself/hello.dll as the path, the actual syscall operation for
opening the file is trying to open '/home/myself/home/myself/hello.dll.dll'

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>


































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="103940.html">[Mono-bugs] [Bug 401194] gmcs failed to load referencied assembly
</A></li>
	<LI>Next message: <A HREF="103977.html">[Mono-bugs] [Bug 639819] Assembly.Load() should throw FileLoadException instead of FileNotFoundException
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#103941">[ date ]</a>
              <a href="thread.html#103941">[ thread ]</a>
              <a href="subject.html#103941">[ subject ]</a>
              <a href="author.html#103941">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
