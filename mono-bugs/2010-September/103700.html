<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 638864] New: Handling an exception can cause the next method call to incorrectly get a null value
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20638864%5D%20New%3A%20Handling%20an%20exception%20can%20cause%20the%0A%20next%20method%20call%20to%20incorrectly%20get%20a%20null%20value&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="103698.html">
   <LINK REL="Next"  HREF="103701.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 638864] New: Handling an exception can cause the next method call to incorrectly get a null value</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20638864%5D%20New%3A%20Handling%20an%20exception%20can%20cause%20the%0A%20next%20method%20call%20to%20incorrectly%20get%20a%20null%20value&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 638864] New: Handling an exception can cause the next method call to incorrectly get a null value">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon Sep 13 06:16:18 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="103698.html">[Mono-bugs] [Bug 638832] Gtk# bugreports are not processed
</A></li>
        <LI>Next message: <A HREF="103701.html">[Mono-bugs] [Bug 638864] Handling an exception can cause the next method call to incorrectly get a null value
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#103700">[ date ]</a>
              <a href="thread.html#103700">[ thread ]</a>
              <a href="subject.html#103700">[ subject ]</a>
              <a href="author.html#103700">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=638864">https://bugzilla.novell.com/show_bug.cgi?id=638864</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=638864#c0">https://bugzilla.novell.com/show_bug.cgi?id=638864#c0</A>


           Summary: Handling an exception can cause the next method call
                    to incorrectly get a null value
    Classification: Mono
           Product: Mono: Runtime
           Version: 1.2.0
          Platform: i686
        OS/Version: openSUSE 11.2
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: misc
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">calberto.cortez at gmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Created an attachment (id=389117)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=389117">http://bugzilla.novell.com/attachment.cgi?id=389117</A>)
test case

User-Agent:       Mozilla/5.0 (X11; U; Linux i686; en-US) AppleWebKit/532.5
(KHTML, like Gecko) Chrome/4.0.249.43 Safari/532.5

It seems that in some very specific scenarios, handling an exception can cause
the next method call to receive a parameter as a null value, even if the user
supplied a non-null value.

I extracted the next small test case from a failing corlib test, and the
attached test case is the *simplest* I could get (commit 2f1c4b3a6c8850cf48e5
in master, as of today). Basically in the third call to DateTime.ParseExact we
are receiving a null value for the 'string [] formats' parameter, even if we
provided a non-null value (thus getting an ArgumentNullException).

Based on my tests, if any of the catch sentences is changed from

catch (FormatException exc)

to

catch (FormatException)

then the code works just fine - which could make us think this is a compiler
issue - but the resulting code in both cases is running just fine in .net.

* Trying to use dummy methods/code didn't work here, so I had to use the direct
calls to DateTime, just as we do in our currently failing corlib test cases.


Reproducible: Always

Actual Results:  
We are getting an ArgumentNullException - even if we are providing a non-value
valid in the method call.

Expected Results:  
The test case should work just fine and the exceptions should be handled
correctly.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="103698.html">[Mono-bugs] [Bug 638832] Gtk# bugreports are not processed
</A></li>
	<LI>Next message: <A HREF="103701.html">[Mono-bugs] [Bug 638864] Handling an exception can cause the next method call to incorrectly get a null value
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#103700">[ date ]</a>
              <a href="thread.html#103700">[ thread ]</a>
              <a href="subject.html#103700">[ subject ]</a>
              <a href="author.html#103700">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
