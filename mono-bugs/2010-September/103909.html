<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 639644] New: Compiler crashes with &quot;ERROR:class.c:1725:mono_class_layout_fields: assertion failed&quot; error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20639644%5D%20New%3A%20Compiler%20crashes%20with%0A%20%22ERROR%3Aclass.c%3A1725%3Amono_class_layout_fields%3A%20assertion%20failed%22%20error&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="103903.html">
   <LINK REL="Next"  HREF="103910.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 639644] New: Compiler crashes with &quot;ERROR:class.c:1725:mono_class_layout_fields: assertion failed&quot; error</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20639644%5D%20New%3A%20Compiler%20crashes%20with%0A%20%22ERROR%3Aclass.c%3A1725%3Amono_class_layout_fields%3A%20assertion%20failed%22%20error&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 639644] New: Compiler crashes with &quot;ERROR:class.c:1725:mono_class_layout_fields: assertion failed&quot; error">bugzilla_noreply at novell.com
       </A><BR>
    <I>Wed Sep 15 17:03:41 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="103903.html">[Mono-bugs] [Bug 579837] System.Configuration.Save() method throws an exception when trying to add an authorization section to an existing Web.config
</A></li>
        <LI>Next message: <A HREF="103910.html">[Mono-bugs] [Bug 639644] Compiler crashes with &quot;ERROR:class.c:1725:mono_class_layout_fields: assertion failed&quot; error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#103909">[ date ]</a>
              <a href="thread.html#103909">[ thread ]</a>
              <a href="subject.html#103909">[ subject ]</a>
              <a href="author.html#103909">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=639644">https://bugzilla.novell.com/show_bug.cgi?id=639644</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=639644#c0">https://bugzilla.novell.com/show_bug.cgi?id=639644#c0</A>


           Summary: Compiler crashes with
                    &quot;ERROR:class.c:1725:mono_class_layout_fields:
                    assertion failed&quot; error
    Classification: Mono
           Product: Mono: Compilers
           Version: 2.6.x
          Platform: Macintosh
        OS/Version: Mac OS X 10.6
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: C#
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">novel at andrewrondeau.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Created an attachment (id=389834)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=389834">http://bugzilla.novell.com/attachment.cgi?id=389834</A>)
Entire stack trace of the mono compiler crashing

User-Agent:       Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_4; en-US)
AppleWebKit/534.3 (KHTML, like Gecko) Chrome/6.0.472.55 Safari/534.3

Whenever I try to build my project on Mono 2.6.7_3, (Mac) the compiler crashes
with a long stack trace.  I'm currently working around this issue by building
on Mono 2.6.4.

Reproducible: Always

Steps to Reproduce:
0. (Note:  This happens on Mac, I haven't tried Mono+Linux or Mono+Windows.)
1. Download
<A HREF="http://andrewrondeau.com/ObjectCloud/Code/2010-09-01%20ObjectCloud%20Source%20Code%201.0%20Alpha%204-2.zip">http://andrewrondeau.com/ObjectCloud/Code/2010-09-01%20ObjectCloud%20Source%20Code%201.0%20Alpha%204-2.zip</A>
2. Open Server\ObjectCloud2005.sln in MonoDevelop
3. Right-click on ObjectCloud.Common and select Build
4. Observe that Mono's compiler crashes in the &quot;Build Output&quot; pane.
Actual Results:  
Building: ObjectCloud.Common (Debug)

Performing main compilation...
/Library/Frameworks/Mono.framework/Versions/2.6.7/bin/gmcs /noconfig
&quot;/out:/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/bin/Debug/ObjectCloud.Common.dll&quot;
&quot;/r:/Library/Frameworks/Mono.framework/Versions/2.6.7/lib/mono/2.0/System.dll&quot;
&quot;/r:/Library/Frameworks/Mono.framework/Versions/2.6.7/lib/mono/2.0/System.Data.dll&quot;
&quot;/r:/Library/Frameworks/Mono.framework/Versions/2.6.7/lib/mono/2.0/System.Xml.dll&quot;
&quot;/r:/Users/andrewrondeau/Downloads/objectcloud/Dependancies/Common.Logging.dll&quot;
&quot;/r:/Library/Frameworks/Mono.framework/Versions/2.6.7/lib/mono/2.0/System.Core.dll&quot;
&quot;/r:/Users/andrewrondeau/Downloads/objectcloud/Server/JsonFx.Json/bin/Debug/JsonFx.Json.dll&quot;
/nologo /warn:4 /debug:+ /debug:full /optimize- /codepage:utf8 -warnaserror
&quot;/define:DEBUG;TRACE&quot;  /t:library
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/Array.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/Enumerable.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/EventArgs.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/EventBus.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/GuidFunctions.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/MimeReader.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/MulticastEventWithTimeout.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/MultiStream.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/Recycler.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/Set.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/StaticRecycler.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/StreamFunctions.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/StringGenerator.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/Properties/AssemblyInfo.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/Cache.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/Enum.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/HttpResponseHandler.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/HTTPStringFunctions.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/HttpWebClient.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/ID.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/IID.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/JavaScriptMinifier.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/ReadOnlyDictionaryWrapper.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/RequestParameters.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/Returns.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/SRandom.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/DictionaryFunctions.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/StringParser.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/Threading/Busy.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/Threading/DelegateQueue.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/Threading/LockFreeQueue.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/Threading/LockFreeStack.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/Threading/NonBlockingConsoleWriter.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/Threading/SingleLinkNode.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/Threading/SyncMethods.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/Threading/ThreadPoolInstance.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/Threading/TimedLock.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/Threading/Timeout.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/Threading/WeakLock.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/TypeFunctions.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/CommonDelegates.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/Shared.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/IRunnable.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/CookiesFromBrowser.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/Wrapped.cs&quot;
&quot;/Users/andrewrondeau/Downloads/objectcloud/Server/ObjectCloud.Common/XmlHelper.cs&quot; 

**
ERROR:class.c:1725:mono_class_layout_fields: assertion failed:
(class-&gt;image-&gt;dynamic || field-&gt;offset &gt; 0)
Stacktrace:

  at (wrapper managed-to-native) System.Type.MakeGenericType
(System.Type,System.Type[]) &lt;0x00004&gt;
  at (wrapper managed-to-native) System.Type.MakeGenericType
(System.Type,System.Type[]) &lt;0x00004&gt;
  at System.Type.MakeGenericType (System.Type[]) &lt;0x00144&gt;
  at Mono.CSharp.GenericTypeExpr.DoResolveAsTypeStep
(Mono.CSharp.IMemberContext) &lt;0x0009c&gt;
  at Mono.CSharp.TypeExpr.ResolveAsTypeStep (Mono.CSharp.IMemberContext,bool)
&lt;0x0001e&gt;
  at Mono.CSharp.Expression.ResolveAsBaseTerminal
(Mono.CSharp.IMemberContext,bool) &lt;0x0004d&gt;
  at Mono.CSharp.Expression.ResolveAsTypeTerminal
(Mono.CSharp.IMemberContext,bool) &lt;0x0001b&gt;
  at Mono.CSharp.Nullable.NullableType.DoResolveAsTypeStep
(Mono.CSharp.IMemberContext) &lt;0x000f6&gt;
  at Mono.CSharp.TypeExpr.ResolveAsTypeStep (Mono.CSharp.IMemberContext,bool)
&lt;0x0001e&gt;
  at Mono.CSharp.Expression.ResolveAsBaseTerminal
(Mono.CSharp.IMemberContext,bool) &lt;0x0004d&gt;

See attachment for the whole error

Expected Results:  
ObjectCloud.Common builds without error when using Mono 2.6.4 and on Visual
Studio 2010.

I'm currently working around this issue by using Mono 2.6.4.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>


































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="103903.html">[Mono-bugs] [Bug 579837] System.Configuration.Save() method throws an exception when trying to add an authorization section to an existing Web.config
</A></li>
	<LI>Next message: <A HREF="103910.html">[Mono-bugs] [Bug 639644] Compiler crashes with &quot;ERROR:class.c:1725:mono_class_layout_fields: assertion failed&quot; error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#103909">[ date ]</a>
              <a href="thread.html#103909">[ thread ]</a>
              <a href="subject.html#103909">[ subject ]</a>
              <a href="author.html#103909">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
