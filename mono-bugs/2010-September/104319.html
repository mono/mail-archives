<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 643006] New: Application Force Close On Webservice	call
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20643006%5D%20New%3A%20Application%20Force%20Close%20On%20Webservice%0A%09call&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="104318.html">
   <LINK REL="Next"  HREF="104321.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 643006] New: Application Force Close On Webservice	call</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20643006%5D%20New%3A%20Application%20Force%20Close%20On%20Webservice%0A%09call&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 643006] New: Application Force Close On Webservice	call">bugzilla_noreply at novell.com
       </A><BR>
    <I>Thu Sep 30 21:12:53 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="104318.html">[Mono-bugs] [Bug 632654] Pressing the Debugger stop button yields a long delay, then an error message...
</A></li>
        <LI>Next message: <A HREF="104321.html">[Mono-bugs] [Bug 634529] Mono runtime always allocates ~3MB of data for shared file info structs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#104319">[ date ]</a>
              <a href="thread.html#104319">[ thread ]</a>
              <a href="subject.html#104319">[ subject ]</a>
              <a href="author.html#104319">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=643006">https://bugzilla.novell.com/show_bug.cgi?id=643006</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=643006#c0">https://bugzilla.novell.com/show_bug.cgi?id=643006#c0</A>


           Summary: Application Force Close On Webservice call
    Classification: Mono
           Product: MonoDroid
           Version: SVN
          Platform: 64bit
        OS/Version: Windows 7
            Status: NEW
          Severity: Major
          Priority: P5 - None
         Component: Runtime
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mkestner at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">byronbla at gmail.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: Beta-Customer
           Blocker: ---


Using a simple WCF SOAP Webservice that returns a LINQ to SQL query as a List. 
When the application calls the web service the application will force close. 
An Endpoint address was specified in the web.config.  



Code:

Activity1 class

  ServiceReference1.Service1Client webClient = new
ServiceReference1.Service1Client();

                var results = webClient.GetProductInventory();

                foreach (var result in results)
                {
                    TextView tv = new TextView(this);
                    tv.Text = result.ToString();
                }


Webservice

 public class Service1 : IService1
    {

        public List&lt;ProductInventory&gt; GetProductInventory()
        {
            AdvDataClassesDataContext db = new AdvDataClassesDataContext();
            var queryProdInventory = from pi in db.ProductInventories
                                     select pi;
            return queryProdInventory.ToList();

        }
    }


adp logcat output:

D/AndroidRuntime(  281): &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; AndroidRuntime START &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;

D/AndroidRuntime(  281): CheckJNI is ON

D/AndroidRuntime(  281): --- registering native functions ---

I/ActivityManager(   61): Starting activity: Intent {
act=android.intent.action.MAIN flg=0x10000000
cmp=WebServiceApp.WebServiceApp/webServiceApp.__Proxy__Activity1 (has extras) }

D/AndroidRuntime(  281): Shutting down VM

D/jdwp    (  281): adbd disconnected

I/AndroidRuntime(  281): NOTE: attach of thread 'Binder Thread #3' failed

I/ActivityManager(   61): Start proc WebServiceApp.WebServiceApp for activity
WebServiceApp.WebServiceApp/webServiceApp.__Proxy__Activity1: pid=288 uid=10033
gids={3003}

I/ARMAssembler(   61): generated scanline__00000077:03545404_00000004_00000000
[ 47 ipp] (67 ins) at [0x306948:0x306a54] in 7275761 ns

I/ActivityManager(   61): Start proc com.novell.monodroid.runtimeservice for
service com.novell.monodroid.runtimeservice/.MonoRuntimeService: pid=294
uid=10032 gids={}

I/ActivityManager(   61): Displayed activity
WebServiceApp.WebServiceApp/webServiceApp.__Proxy__Activity1: 2531 ms (total
2531 ms)

D/ThrottleService(   61): finally have imsi - retreiving data

D/ThrottleService(   61): onPollAlarm - roaming =false, read =0, written =0,
new total =0

I/ActivityManager(   61): Starting activity: Intent {
cmp=WebServiceApp.WebServiceApp/webServiceApp.Activity1 (has extras) }

D/dalvikvm(  288): Trying to load lib
/data/data/WebServiceApp.WebServiceApp/lib/libmonodroid.so 0x44f2b448

D/dalvikvm(  288): Added shared lib
/data/data/WebServiceApp.WebServiceApp/lib/libmonodroid.so 0x44f2b448

W/ActivityManager(   61): Launch timeout has expired, giving up wake lock!

W/ActivityManager(   61): Activity idle timeout for HistoryRecord{4502bab8
WebServiceApp.WebServiceApp/webServiceApp.Activity1}

W/ActivityManager(   61): Activity destroy timeout for HistoryRecord{44f55ab8
WebServiceApp.WebServiceApp/webServiceApp.__Proxy__Activity1}

D/dalvikvm(  121): GC_EXPLICIT freed 1732 objects / 90712 bytes in 1563ms

E/Mono.Android(  288): System.InvalidOperationException: An EndpointAddress
must be configured for this channel factory

E/Mono.Android(  288):   at System.ServiceModel.ChannelFactory.EnsureOpened ()
[0x0002c] in
/home/jon/Development/mono-droid/mono/mcs/class/System.ServiceModel/System.ServiceModel/ChannelFactory.cs:259 

E/Mono.Android(  288):   at
System.ServiceModel.ChannelFactory`1[WebServiceApp.ServiceReference1.IService1].CreateChannel
() [0x00000] in
/home/jon/Development/mono-droid/mono/mcs/class/System.ServiceModel/System.ServiceModel/ChannelFactory_1.cs:106 

E/Mono.Android(  288):   at
System.ServiceModel.ClientBase`1[TChannel].CreateChannel () [0x00000] in
/home/jon/Development/mono-droid/mono/mcs/class/System.ServiceModel/System.ServiceModel/ClientBase.cs:306 

E/Mono.Android(  288):   at
System.ServiceModel.ClientBase`1[TChannel].get_InnerChannel () [0x0000b] in
/home/jon/Development/mono-droid/mono/mcs/class/System.ServiceModel/System.ServiceModel/ClientBase.cs:207 

E/Mono.Android(  288):   at
System.ServiceModel.ClientBase`1[TChannel].get_Channel () [0x00000] in
/home/jon/Development/mono-droid/mono/mcs/class/System.ServiceModel/System.ServiceModel/ClientBase.cs:213 

E/Mono.Android(  288):   at
WebServiceApp.ServiceReference1.Service1Client.GetProductInventory () [0x00001]
in Service References\ServiceReference1\Reference.cs:193 

E/Mono.Android(  288):   at WebServiceApp.Activity1.OnCreate (Android.OS.Bundle
bundle) [0x0001b] in Activity1.cs:37 

E/Mono.Android(  288):   at Android.App.Activity.n_OnCreate_Landroid_os_Bundle_
(IntPtr jnienv, IntPtr native__this, IntPtr native_savedInstanceState)
[0x0000e] in
/home/jpobst/Desktop/mondroid/Mono.Android/src/generated/Android.App.Activity.cs:1457 

D/AndroidRuntime(  288): Shutting down VM

W/dalvikvm(  288): threadid=1: thread exiting with uncaught exception
(group=0x4001d800)

E/AndroidRuntime(  288): FATAL EXCEPTION: main

E/AndroidRuntime(  288): java.lang.RuntimeException: Unable to start activity
ComponentInfo{WebServiceApp.WebServiceApp/webServiceApp.Activity1}:
java.lang.UnsupportedOperationException: System.InvalidOperationException: An
EndpointAddress must be configured for this channel factory

E/AndroidRuntime(  288):   at System.ServiceModel.ChannelFactory.EnsureOpened
() [0x0002c] in
/home/jon/Development/mono-droid/mono/mcs/class/System.ServiceModel/System.ServiceModel/ChannelFactory.cs:259 

E/AndroidRuntime(  288):   at
System.ServiceModel.ChannelFactory`1[WebServiceApp.ServiceReference1.IService1].CreateChannel
() [0x00000] in
/home/jon/Development/mono-droid/mono/mcs/class/System.ServiceModel/System.ServiceModel/ChannelFactory_1.cs:106 

E/AndroidRuntime(  288):   at
System.ServiceModel.ClientBase`1[TChannel].CreateChannel () [0x00000] in
/home/jon/Development/mono-droid/mono/mcs/class/System.ServiceModel/System.ServiceModel/ClientBase.cs:306 

E/AndroidRuntime(  288):   at
System.ServiceModel.ClientBase`1[TChannel].get_InnerChannel () [0x0000b] in
/home/jon/Development/mono-droid/mono/mcs/class/System.ServiceModel/System.ServiceModel/ClientBase.cs:207 

E/AndroidRuntime(  288):   at
System.ServiceModel.ClientBase`1[TChannel].get_Channel () [0x00000] in
/home/jon/Development/mono-droid/mono/mcs/class/System.ServiceModel/System.ServiceModel/ClientBase.cs:213 

E/AndroidRuntime(  288):   at
WebServiceApp.ServiceReference1.Service1Client.GetProductInventory () [0x00001]
in Service References\ServiceReference1\Reference.cs:193 

E/AndroidRuntime(  288):   at WebServiceApp.Activity1.OnCreate
(Android.OS.Bundle bundle) [0x0001b] in Activity1.cs:37 

E/AndroidRuntime(  288):   at
Android.App.Activity.n_OnCreate_Landroid_os_Bundle_ (IntPtr jnienv, IntPtr
native__this, IntPtr native_savedInstanceState) [0x0000e] in
/home/jpobst/Desktop/mondroid/Mono.Android/src/generated/Android.App.Activity.cs:1457 

E/AndroidRuntime(  288):     at
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)

E/AndroidRuntime(  288):     at
android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)

E/AndroidRuntime(  288):     at
android.app.ActivityThread.access$2300(ActivityThread.java:125)

E/AndroidRuntime(  288):     at
android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)

E/AndroidRuntime(  288):     at
android.os.Handler.dispatchMessage(Handler.java:99)

E/AndroidRuntime(  288):     at android.os.Looper.loop(Looper.java:123)

E/AndroidRuntime(  288):     at
android.app.ActivityThread.main(ActivityThread.java:4627)

E/AndroidRuntime(  288):     at java.lang.reflect.Method.invokeNative(Native
Method)

E/AndroidRuntime(  288):     at
java.lang.reflect.Method.invoke(Method.java:521)

E/AndroidRuntime(  288):     at
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)

E/AndroidRuntime(  288):     at
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)

E/AndroidRuntime(  288):     at dalvik.system.NativeStart.main(Native Method)

E/AndroidRuntime(  288): Caused by: java.lang.UnsupportedOperationException:
System.InvalidOperationException: An EndpointAddress must be configured for
this channel factory

E/AndroidRuntime(  288):   at System.ServiceModel.ChannelFactory.EnsureOpened
() [0x0002c] in
/home/jon/Development/mono-droid/mono/mcs/class/System.ServiceModel/System.ServiceModel/ChannelFactory.cs:259 

E/AndroidRuntime(  288):   at
System.ServiceModel.ChannelFactory`1[WebServiceApp.ServiceReference1.IService1].CreateChannel
() [0x00000] in
/home/jon/Development/mono-droid/mono/mcs/class/System.ServiceModel/System.ServiceModel/ChannelFactory_1.cs:106 

E/AndroidRuntime(  288):   at
System.ServiceModel.ClientBase`1[TChannel].CreateChannel () [0x00000] in
/home/jon/Development/mono-droid/mono/mcs/class/System.ServiceModel/System.ServiceModel/ClientBase.cs:306 

E/AndroidRuntime(  288):   at
System.ServiceModel.ClientBase`1[TChannel].get_InnerChannel () [0x0000b] in
/home/jon/Development/mono-droid/mono/mcs/class/System.ServiceModel/System.ServiceModel/ClientBase.cs:207 

E/AndroidRuntime(  288):   at
System.ServiceModel.ClientBase`1[TChannel].get_Channel () [0x00000] in
/home/jon/Development/mono-droid/mono/mcs/class/System.ServiceModel/System.ServiceModel/ClientBase.cs:213 

E/AndroidRuntime(  288):   at
WebServiceApp.ServiceReference1.Service1Client.GetProductInventory () [0x00001]
in Service References\ServiceReference1\Reference.cs:193 

E/AndroidRuntime(  288):   at WebServiceApp.Activity1.OnCreate
(Android.OS.Bundle bundle) [0x0001b] in Activity1.cs:37 

E/AndroidRuntime(  288):   at
Android.App.Activity.n_OnCreate_Landroid_os_Bundle_ (IntPtr jnienv, IntPtr
native__this, IntPtr native_savedInstanceState) [0x0000e] in
/home/jpobst/Desktop/mondroid/Mono.Android/src/generated/Android.App.Activity.cs:1457 

W/ActivityManager(   61):   Force finishing activity
WebServiceApp.WebServiceApp/webServiceApp.Activity1

W/ActivityManager(   61): Activity pause timeout for HistoryRecord{4502bab8
WebServiceApp.WebServiceApp/webServiceApp.Activity1}

I/ARMAssembler(   61): generated scanline__00000077:03515104_00000000_00000000
[ 33 ipp] (47 ins) at [0x339510:0x3395cc] in 6893934 ns

W/WindowManager(   61): Rebuild removed 2 windows but added 1

I/ARMAssembler(   61): generated scanline__00000177:03515104_00001001_00000000
[ 91 ipp] (114 ins) at [0x373330:0x3734f8] in 2522934 ns

W/ActivityManager(   61): Activity destroy timeout for HistoryRecord{4502bab8
WebServiceApp.WebServiceApp/webServiceApp.Activity1}

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="104318.html">[Mono-bugs] [Bug 632654] Pressing the Debugger stop button yields a long delay, then an error message...
</A></li>
	<LI>Next message: <A HREF="104321.html">[Mono-bugs] [Bug 634529] Mono runtime always allocates ~3MB of data for shared file info structs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#104319">[ date ]</a>
              <a href="thread.html#104319">[ thread ]</a>
              <a href="subject.html#104319">[ subject ]</a>
              <a href="author.html#104319">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
