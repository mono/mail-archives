<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 641895] New: Java callable classes in libraries cannot be resolved at runtime
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20641895%5D%20New%3A%20Java%20callable%20classes%20in%20libraries%0A%20cannot%20be%20resolved%20at%20runtime&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="104171.html">
   <LINK REL="Next"  HREF="104174.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 641895] New: Java callable classes in libraries cannot be resolved at runtime</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20641895%5D%20New%3A%20Java%20callable%20classes%20in%20libraries%0A%20cannot%20be%20resolved%20at%20runtime&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 641895] New: Java callable classes in libraries cannot be resolved at runtime">bugzilla_noreply at novell.com
       </A><BR>
    <I>Sat Sep 25 08:37:21 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="104171.html">[Mono-bugs] [Bug 641826] Mono-2.8 p6 on Vista Business x86_64: ChessBoard and SharpChess throw TargetInvocationException
</A></li>
        <LI>Next message: <A HREF="104174.html">[Mono-bugs] [Bug 641895] Java callable classes in libraries cannot be resolved at runtime
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#104173">[ date ]</a>
              <a href="thread.html#104173">[ thread ]</a>
              <a href="subject.html#104173">[ subject ]</a>
              <a href="author.html#104173">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=641895">https://bugzilla.novell.com/show_bug.cgi?id=641895</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=641895#c0">https://bugzilla.novell.com/show_bug.cgi?id=641895#c0</A>


           Summary: Java callable classes in libraries cannot be resolved
                    at runtime
    Classification: Mono
           Product: MonoDroid
           Version: unspecified
          Platform: Other
        OS/Version: Other
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Tools
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mkestner at novell.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">chris at foundation42.org</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US)
AppleWebKit/534.3 (KHTML, like Gecko) Chrome/6.0.472.63 Safari/534.3

I'm trying to build a set of components that I intend to use in a number of
applications.  The cleanest way to do this is to put them in a MonoDroid class
library.

While this works fine for pure .Net types, there seems to be an issue placing
Java callable types in the DLL.

This is just a guess, but perhaps during the build, you need to recurse into
dependent library projects and generate thunks/wrappers for those as well? 
Maybe they are getting generated but somehow need to be merged into the main
app.

I'm not entirely clear on the whole proxy generation process yet, so it is
possible I may just have done something wrong.

Reproducible: Always

Steps to Reproduce:
1. Create a new solution with the MonoDroid application project template
2. Add a new MonoDroid class library to the solution
3. Add a MonoDroid view to the class library
4. Set your Activity to use the view from the class library
Actual Results:  
You get a runtime exception..

Java.Lang.NoClassDefFoundError: Exception of type
'Java.Lang.NoClassDefFoundError' was thrown.
  at Android.Runtime.JNIEnv.FindClass (System.String classname) [0x00000] in
&lt;filename unknown&gt;:0 
  at Android.Runtime.JNIEnv.FindClass (System.Type type) [0x00000] in &lt;filename
unknown&gt;:0 
  at Android.Views.View..ctor (Android.Content.Context context, IAttributeSet
attrs) [0x00000] in &lt;filename unknown&gt;:0 
  at ThunkBugLib.ThunkBugView..ctor (Android.Content.Context context,
IAttributeSet attrs) [0x00000] in &lt;filename unknown&gt;:0 
  at ThunkBug.Activity1.OnCreate (Android.OS.Bundle bundle) [0x00000] in
&lt;filename unknown&gt;:0 
  at Android.App.Activity.n_OnCreate_Landroid_os_Bundle_ (IntPtr jnienv, IntPtr
native__this, IntPtr native_savedInstanceState) [0x00000] in &lt;filename
unknown&gt;:0 
Shutting down VM


Expected Results:  
It should be possible to create Java callable objects in a DLL and have them
consumed from outside the DLL.

This isn't limited to just views.  I tried it with other types that derive from
Java.Lang.Object and have the same issue.

I know it's probably a pain to implement, but it'd be appreciated as I think
this is a fairly common case for any kind of serious project.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
</PRE>



































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="104171.html">[Mono-bugs] [Bug 641826] Mono-2.8 p6 on Vista Business x86_64: ChessBoard and SharpChess throw TargetInvocationException
</A></li>
	<LI>Next message: <A HREF="104174.html">[Mono-bugs] [Bug 641895] Java callable classes in libraries cannot be resolved at runtime
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#104173">[ date ]</a>
              <a href="thread.html#104173">[ thread ]</a>
              <a href="subject.html#104173">[ subject ]</a>
              <a href="author.html#104173">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
