<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 642437] New: Mono 2.8 Preview 6: gmcs regression -- spurious CS0227 error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20642437%5D%20New%3A%20Mono%202.8%20Preview%206%3A%20gmcs%20regression%0A%20--%20spurious%20CS0227%20error&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="104257.html">
   <LINK REL="Next"  HREF="104264.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 642437] New: Mono 2.8 Preview 6: gmcs regression -- spurious CS0227 error</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20642437%5D%20New%3A%20Mono%202.8%20Preview%206%3A%20gmcs%20regression%0A%20--%20spurious%20CS0227%20error&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 642437] New: Mono 2.8 Preview 6: gmcs regression -- spurious CS0227 error">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Sep 28 19:45:01 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="104257.html">[Mono-bugs] [Bug 628328] Parsing Glade UI from assembly ressource	leads to crash
</A></li>
        <LI>Next message: <A HREF="104264.html">[Mono-bugs] [Bug 642437] Mono 2.8 Preview 6: gmcs regression -- spurious CS0227 error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#104259">[ date ]</a>
              <a href="thread.html#104259">[ thread ]</a>
              <a href="subject.html#104259">[ subject ]</a>
              <a href="author.html#104259">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=642437">https://bugzilla.novell.com/show_bug.cgi?id=642437</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=642437#c0">https://bugzilla.novell.com/show_bug.cgi?id=642437#c0</A>


           Summary: Mono 2.8 Preview 6: gmcs regression -- spurious CS0227
                    error
    Classification: Mono
           Product: Mono: Compilers
           Version: 2.8.x
          Platform: Macintosh
        OS/Version: Mac OS X 10.6
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: C#
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">brian at sooloos.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: Community User
           Blocker: ---


Description of Problem:

The following code, which compiles on mono 2.4.2.3, mono 2.6.7, and ms.net 3.5
is not compiling with mono 2.8 preview 6.

If I mark the struct as unsafe directly, the code compiles. It appears that the
nested struct is not picking up the 'unsafe' attribute from the enclosing class
as it should.

Steps to reproduce the problem:

<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">brian at brianmbp</A> ~ $ cat v.cs                                                     

unsafe class Baz {
    struct Foo {
        public Foo *next;
    }
}

class EntryPoint { public static void Main(string[] args) { } }

<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">brian at brianmbp</A> ~ $ gmcs --version
Mono C# compiler version 2.8.0.0

<A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">brian at brianmbp</A> ~ $ gmcs /unsafe v.cs
v.cs(4,21): error CS0208: Cannot take the address of, get the size of, or
declare a pointer to a managed type `Baz.Foo'
v.cs(3,12): (Location of the symbol related to previous error)
Compilation failed: 1 error(s), 0 warnings


Actual Results:

Compilation fails with CS0227


Expected Results:

Compilation Succeeds

How often does this happen? 

Every time I try to compile this code.

Additional Information:

N/A

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="104257.html">[Mono-bugs] [Bug 628328] Parsing Glade UI from assembly ressource	leads to crash
</A></li>
	<LI>Next message: <A HREF="104264.html">[Mono-bugs] [Bug 642437] Mono 2.8 Preview 6: gmcs regression -- spurious CS0227 error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#104259">[ date ]</a>
              <a href="thread.html#104259">[ thread ]</a>
              <a href="subject.html#104259">[ subject ]</a>
              <a href="author.html#104259">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
