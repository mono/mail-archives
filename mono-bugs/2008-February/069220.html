<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 360784] New: [Regression] Delegate. CreateDelegate does not support private methods in base class
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20360784%5D%20New%3A%20%5BRegression%5D%20Delegate.%20CreateDelegate%0A%20does%20not%20support%20private%20methods%20in%20base%20class&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="070100.html">
   <LINK REL="Next"  HREF="069222.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 360784] New: [Regression] Delegate. CreateDelegate does not support private methods in base class</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20360784%5D%20New%3A%20%5BRegression%5D%20Delegate.%20CreateDelegate%0A%20does%20not%20support%20private%20methods%20in%20base%20class&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 360784] New: [Regression] Delegate. CreateDelegate does not support private methods in base class">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon Feb 11 16:26:24 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="070100.html">[Mono-bugs] [Bug 360780] Winforms - Closing 2D plot window crashes	application
</A></li>
        <LI>Next message: <A HREF="069222.html">[Mono-bugs] [Bug 360784] [Regression] Delegate. CreateDelegate does not support private methods in base class
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#69220">[ date ]</a>
              <a href="thread.html#69220">[ thread ]</a>
              <a href="subject.html#69220">[ subject ]</a>
              <a href="author.html#69220">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=360784">https://bugzilla.novell.com/show_bug.cgi?id=360784</A>


           Summary: [Regression] Delegate.CreateDelegate does not support
                    private methods in base class
           Product: Mono: Class Libraries
           Version: SVN
          Platform: All
        OS/Version: All
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: CORLIB
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">gert.driesen at pandora.be</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


The Delegate.CreateDelegate overloads that take a method name no longer support
private methods in base types of the specified target (type or object).

This is probably a result of our (my) fixes to Type.GetMethods, which now
behaves like MS.

The code in Delegate.CreateDelegate apparently relies on our broken
implementation of Type.GetMethods.

I'll add unit tests for this issue first - to discover the exact MS
implementation of the overloads - and then submit a patch for review.

To reproduce, compile and run the following code:

using System;
using System.Reflection;

class Program
{
  static void Main ()
  {
    Bar b = new Bar ();

    EventHandler handler = (EventHandler ) Delegate.CreateDelegate (
      typeof (EventHandler), b, &quot;Page_Load&quot;);
    handler (b, new EventArgs ());
  }
}

class Foo
{
  void Page_Load (object sender, EventArgs e)
  {
  }
}

class Bar : Foo
{
}

Expected result:

Successful execution

Actual result:

Unhandled Exception: System.ArgumentException: Couldn't bind to method
'Page_Loa
d'.
  at System.Delegate.CreateDelegate (System.Type type, System.Object target,
Sys
tem.String method, Boolean ignoreCase, Boolean throwOnBindFailure) [0x00000]
  at System.Delegate.CreateDelegate (System.Type type, System.Object target,
Sys
tem.String method, Boolean ignoreCase) [0x00000]
  at System.Delegate.CreateDelegate (System.Type type, System.Object target,
Sys
tem.String method) [0x00000]
  at Program.Main () [0x00000]


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>

















































































































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="070100.html">[Mono-bugs] [Bug 360780] Winforms - Closing 2D plot window crashes	application
</A></li>
	<LI>Next message: <A HREF="069222.html">[Mono-bugs] [Bug 360784] [Regression] Delegate. CreateDelegate does not support private methods in base class
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#69220">[ date ]</a>
              <a href="thread.html#69220">[ thread ]</a>
              <a href="subject.html#69220">[ subject ]</a>
              <a href="author.html#69220">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
