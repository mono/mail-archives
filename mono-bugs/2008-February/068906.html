<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-bugs] [Bug 359098] New: [PATCH] AutoScale fixes for both 2.0	and 1.0 style
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20359098%5D%20New%3A%20%5BPATCH%5D%20AutoScale%20fixes%20for%20both%202.0%0A%09and%201.0%20style&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="068905.html">
   <LINK REL="Next"  HREF="068945.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-bugs] [Bug 359098] New: [PATCH] AutoScale fixes for both 2.0	and 1.0 style</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:mono-bugs%40lists.ximian.com?Subject=%5BMono-bugs%5D%20%5BBug%20359098%5D%20New%3A%20%5BPATCH%5D%20AutoScale%20fixes%20for%20both%202.0%0A%09and%201.0%20style&In-Reply-To="
       TITLE="[Mono-bugs] [Bug 359098] New: [PATCH] AutoScale fixes for both 2.0	and 1.0 style">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Feb  5 22:58:14 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="068905.html">[Mono-bugs] [Bug 324472] Attribute.GetCustomAttributes doesn' t get inherited attributes for properties
</A></li>
        <LI>Next message: <A HREF="068945.html">[Mono-bugs] [Bug 359098] [PATCH] AutoScale fixes for both 2.0 and	1.0 style
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#68906">[ date ]</a>
              <a href="thread.html#68906">[ thread ]</a>
              <a href="subject.html#68906">[ subject ]</a>
              <a href="author.html#68906">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://bugzilla.novell.com/show_bug.cgi?id=359098">https://bugzilla.novell.com/show_bug.cgi?id=359098</A>


           Summary: [PATCH] AutoScale fixes for both 2.0 and 1.0 style
           Product: Mono: Class Libraries
           Version: SVN
          Platform: Other
        OS/Version: Other
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: Windows.Forms
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">jdpurcell2 at yahoo.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/mono-bugs">mono-bugs at lists.ximian.com</A>
          Found By: ---


Created an attachment (id=193330)
 --&gt; (<A HREF="https://bugzilla.novell.com/attachment.cgi?id=193330">https://bugzilla.novell.com/attachment.cgi?id=193330</A>)
patch

Summary of the changes (note that when I say &quot;should&quot;, I mean that's how it's
done in MS.NET):

* ScaleControl should call GetScaledBounds with the control's total size rather
than client size.  GetScaledBounds should handle ignoring the borders in its
calculations.  Cleaned up ScaleControl/GetScaledBounds overrides in controls
(for the most part they just call the base code now since that is fixed).
* Added ScaleChildrenInternal to allow controls to disable scaling of children
without having to override ScaleChildren (since none of .NET's controls do). 
This is required for most controls in Mono that have scrollbars to prevent the
scrollbars from being moved/resized.
* Nested ContainerControls can have a different scale mode than their parent. 
This is briefly mentioned in MSDN but is buggy in MS.NET (the runtime and
designer produce different results both of which look incorrect).
* Default AutoScaleMode for ContainerControl should be Inherit.
* Simplified workaround for ComboBox scaling issue.
* 1.0 style auto-scaling now uses its own methods instead of sharing 2.0's. 
1.0 style auto scaling should scale the whole control's size instead of
ignoring the borders (except for Form) and the rounding is done differently to
preserve control alignment.
* ApplyAutoScaling (used for 1.0 style) should use the rounded result of
GetAutoScaleSize.
* Cleaned up fix for &quot;Bug 355703 - Setting AutoScale = true doesn't stick&quot;.
* CurrentAutoScaleDimensions should round the estimated character width instead
of truncating.
* ListBox's GetScaledBounds should always use the height it was set to instead
of the height that was passed in.  This prevents rounding errors from
accumulating quickly with IntegralHeight.

Screenshots comparing 1.0 style auto scaling:

MS.NET:  <A HREF="http://www.jdpurcell.net/misc/mono_scaling/scale1-ms.png">http://www.jdpurcell.net/misc/mono_scaling/scale1-ms.png</A>
SVN:     <A HREF="http://www.jdpurcell.net/misc/mono_scaling/scale1-svn.png">http://www.jdpurcell.net/misc/mono_scaling/scale1-svn.png</A>
Patch:   <A HREF="http://www.jdpurcell.net/misc/mono_scaling/scale1-fix.png">http://www.jdpurcell.net/misc/mono_scaling/scale1-fix.png</A>

2.0 style auto scaling:

MS.NET:  <A HREF="http://www.jdpurcell.net/misc/mono_scaling/scale2-ms.png">http://www.jdpurcell.net/misc/mono_scaling/scale2-ms.png</A>
SVN:     <A HREF="http://www.jdpurcell.net/misc/mono_scaling/scale2-svn.png">http://www.jdpurcell.net/misc/mono_scaling/scale2-svn.png</A>
Patch:   <A HREF="http://www.jdpurcell.net/misc/mono_scaling/scale2-fix.png">http://www.jdpurcell.net/misc/mono_scaling/scale2-fix.png</A>

2.0 style after multiple scalings (6 times, ended up roughly its original
size):

MS.NET:  <A HREF="http://www.jdpurcell.net/misc/mono_scaling/scale2mult-ms.png">http://www.jdpurcell.net/misc/mono_scaling/scale2mult-ms.png</A>
SVN:     <A HREF="http://www.jdpurcell.net/misc/mono_scaling/scale2mult-svn.png">http://www.jdpurcell.net/misc/mono_scaling/scale2mult-svn.png</A>
Patch:   <A HREF="http://www.jdpurcell.net/misc/mono_scaling/scale2mult-fix.png">http://www.jdpurcell.net/misc/mono_scaling/scale2mult-fix.png</A>


-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>


























































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="068905.html">[Mono-bugs] [Bug 324472] Attribute.GetCustomAttributes doesn' t get inherited attributes for properties
</A></li>
	<LI>Next message: <A HREF="068945.html">[Mono-bugs] [Bug 359098] [PATCH] AutoScale fixes for both 2.0 and	1.0 style
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#68906">[ date ]</a>
              <a href="thread.html#68906">[ thread ]</a>
              <a href="subject.html#68906">[ subject ]</a>
              <a href="author.html#68906">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-bugs">More information about the mono-bugs
mailing list</a><br>
</body></html>
