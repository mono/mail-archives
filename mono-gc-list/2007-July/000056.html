<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-gc-list] Request for backport of garbage collection patch
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-gc-list%40lists.ximian.com?Subject=%5BMono-gc-list%5D%20Request%20for%20backport%20of%20garbage%20collection%20patch&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="000068.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-gc-list] Request for backport of garbage collection patch</H1>
    <B>Matt Jones</B> 
    <A HREF="mailto:mono-gc-list%40lists.ximian.com?Subject=%5BMono-gc-list%5D%20Request%20for%20backport%20of%20garbage%20collection%20patch&In-Reply-To="
       TITLE="[Mono-gc-list] Request for backport of garbage collection patch">mattj at google.com
       </A><BR>
    <I>Tue Jul 17 19:54:34 EDT 2007</I>
    <P><UL>
        
        <LI>Next message: <A HREF="000068.html">[Mono-gc-list] [Mono-dev] Request for backport of garbage	collection patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56">[ date ]</a>
              <a href="thread.html#56">[ thread ]</a>
              <a href="subject.html#56">[ subject ]</a>
              <a href="author.html#56">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi -

I'm working on improving mono-under-wine (on the wine side), and I've
been hitting a bug in the mono garbage collector fixed by commit
#77073 ([1]). The bug in question is a race condition between
GetExitCodeThread and SuspendThread - if a thread terminates between
the two, SuspendThread will fail. The race condition is pretty
reliably triggered by the regression test suite when running under
wine.

The current patch could actually be reduced further (the
GetExitCodeThread block could be fully deleted, as it is rendered
redundant), but it works as is.

Any chance this patch could be applied to the maintenance branch? The
patch applies cleanly to 1.13.8.2.

Thank you very much,
-Matt Jones

[1] <A HREF="http://anonsvn.mono-project.com/viewcvs/trunk/mono/libgc/win32_threads.c?rev=77073&amp;view=log">http://anonsvn.mono-project.com/viewcvs/trunk/mono/libgc/win32_threads.c?rev=77073&amp;view=log</A>
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="000068.html">[Mono-gc-list] [Mono-dev] Request for backport of garbage	collection patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56">[ date ]</a>
              <a href="thread.html#56">[ thread ]</a>
              <a href="subject.html#56">[ subject ]</a>
              <a href="author.html#56">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-gc-list">More information about the Mono-gc-list
mailing list</a><br>
</body></html>
