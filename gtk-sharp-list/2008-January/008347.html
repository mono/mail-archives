<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Data-Bound TreeView
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Data-Bound%20TreeView&In-Reply-To=200801061721.24984.ruzyczka%40versanet.de">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008346.html">
   <LINK REL="Next"  HREF="008348.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Data-Bound TreeView</H1>
    <B>Christian Hergert</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Data-Bound%20TreeView&In-Reply-To=200801061721.24984.ruzyczka%40versanet.de"
       TITLE="[Gtk-sharp-list] Data-Bound TreeView">christian.hergert at gmail.com
       </A><BR>
    <I>Sun Jan  6 13:49:04 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="008346.html">[Gtk-sharp-list] Data-Bound TreeView
</A></li>
        <LI>Next message: <A HREF="008348.html">[Gtk-sharp-list] Data-Bound TreeView
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8347">[ date ]</a>
              <a href="thread.html#8347">[ thread ]</a>
              <a href="subject.html#8347">[ subject ]</a>
              <a href="author.html#8347">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Just a heads up for whoever is thinking about doing this. I've written
stuff like this in both python and C and noticed some interesting
results.

First of all, I went the route of writing a custom GtkTreeModel.  This
way I had full control of tree iteration.  You will probably want to
do the same.  Especially since this allows lazy loading.

For example: For the iter data, you could store the rows offset.  In
PostgreSQL and SQLite, using the row OID works great as it is the
fastest way to access any record.  However, using a system that allows
you to determine the next rows Iter data without a new query is
probably a good idea. If I remember correctly, I got my best
performance by mixing the two ideas; Batching queries to get the next
10 rows OIDs.

I also noticed that for some reason, when setting the model, a
GtkTreeView will try to scan the entire result set.  I think this is
actually a GtkCellRendererText trying to figure out sizing but I
haven't looked at it too closely.

You also may want a tunable cache to lower the number of queries.  I
used a LRU which worked pretty decently . Just remember to expire
values on updates.

Food for thought.

-- Christian

On Jan 6, 2008 8:21 AM, Jacek Ruzyczka &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">ruzyczka at versanet.de</A>&gt; wrote:
&gt;<i> Am Sonntag, 6. Januar 2008 00:49 schrieb Adam Tauno Williams:
</I>&gt;<i> &gt; When using a TreeView to display data from an RDBMC I think it is much
</I>&gt;<i> &gt; more common that the subordinate entries are the result of a foreign key
</I>&gt;<i> &gt; relation (join or secondary select).
</I>&gt;<i> &gt;
</I>&gt;<i> This is what I have in fact sketched here. Typically, when you have a
</I>&gt;<i> hierarchy of categories, you would add an FK column pointing to the PK column
</I>&gt;<i> in the same table.
</I>&gt;<i>
</I>&gt;<i> Regards
</I>&gt;<i> Jacek Ru&#380;yczka
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Gtk-sharp-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">Gtk-sharp-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">http://lists.ximian.com/mailman/listinfo/gtk-sharp-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008346.html">[Gtk-sharp-list] Data-Bound TreeView
</A></li>
	<LI>Next message: <A HREF="008348.html">[Gtk-sharp-list] Data-Bound TreeView
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8347">[ date ]</a>
              <a href="thread.html#8347">[ thread ]</a>
              <a href="subject.html#8347">[ subject ]</a>
              <a href="author.html#8347">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
