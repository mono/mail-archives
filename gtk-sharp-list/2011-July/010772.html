<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Mono.Cairo DllImport calling convention
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Mono.Cairo%20DllImport%20calling%20convention&In-Reply-To=CAFm2zD5%2BiR4F77bxa1EHR2zt776%2BN22N_KhrxOu1bGNLjNXVXw%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010771.html">
   <LINK REL="Next"  HREF="010773.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Mono.Cairo DllImport calling convention</H1>
    <B>diekleinekuh</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Mono.Cairo%20DllImport%20calling%20convention&In-Reply-To=CAFm2zD5%2BiR4F77bxa1EHR2zt776%2BN22N_KhrxOu1bGNLjNXVXw%40mail.gmail.com"
       TITLE="[Gtk-sharp-list] Mono.Cairo DllImport calling convention">markus-henschel at gmx.de
       </A><BR>
    <I>Sun Jul 24 20:30:13 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="010771.html">[Gtk-sharp-list] Mono.Cairo DllImport calling convention
</A></li>
        <LI>Next message: <A HREF="010773.html">[Gtk-sharp-list] Mono.Cairo DllImport calling convention
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10772">[ date ]</a>
              <a href="thread.html#10772">[ thread ]</a>
              <a href="subject.html#10772">[ subject ]</a>
              <a href="author.html#10772">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Mike Kestner-2 wrote:
&gt;<i> 
</I>&gt;<i> On Sun, Jul 24, 2011 at 3:53 PM, diekleinekuh
</I>&gt;<i> &amp;lt;<A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">markus-henschel at gmx.de</A>&amp;gt;wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> Hi there,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> while tracking bug <A HREF="https://bugzilla.novell.com/show_bug.cgi?id=583901">https://bugzilla.novell.com/show_bug.cgi?id=583901</A> I
</I>&gt;&gt;<i> tried to understand how gtksharp handles calling conventions of all the
</I>&gt;&gt;<i> native GTK functions on windows. It seems like a perl script called
</I>&gt;&gt;<i> gapi-cdecl-insert is used for that purpose. What makes me wonder is that
</I>&gt;&gt;<i> this script is not used in the makefile of cairo. What's the reason for
</I>&gt;&gt;<i> this? Is it a bug?
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> gapi-cdecl-insert replaces GLib.CDeclCallbackAttributes with the
</I>&gt;<i> appropriate
</I>&gt;<i> IL.  It only applies to native callback delegates and only ones decorated
</I>&gt;<i> with that attribute.
</I>&gt;<i> 
</I>
Oh, Ok. So gapi-cdecl-insert is not used for cairo in 2.12 because there are
no callback delegates there?

And how are native function calls handled in 2.12 then? I didn't see any
CallingConvention set for the native PInvoke calls. Doesn't this mean stack
memory leaks on every such call on Windows where the default is stdcall? Or
does the .NET/Mono runtime take care of this by automatically balancing the
stack if it detects a leak?



&gt;<i> 
</I>&gt;&gt;<i> I did all my research on gtksharp 2.12 because that's the current stable
</I>&gt;&gt;<i> release version.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i> CDeclCallbackAttribute doesn't exist in master, since we've switched to
</I>&gt;<i> the
</I>&gt;<i> UnmanagedFunctionPointerAttribute which is handled automatically by
</I>&gt;<i> mcs/csc.
</I>&gt;<i> 
</I>
Great. I really hated this script because it magically deleted pdb files for
the libraries it was used on. 

But what will be the next gtksharp version to be released? Will it be a
bugfixing release for 2.12 or something new? 


--
View this message in context: <A HREF="http://mono.1490590.n4.nabble.com/Mono-Cairo-DllImport-calling-convention-tp3690939p3691327.html">http://mono.1490590.n4.nabble.com/Mono-Cairo-DllImport-calling-convention-tp3690939p3691327.html</A>
Sent from the Mono - Gtk# mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/gtk-sharp-list/attachments/20110724/bc7d2a25/attachment.html">http://lists.ximian.com/pipermail/gtk-sharp-list/attachments/20110724/bc7d2a25/attachment.html</A> 
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010771.html">[Gtk-sharp-list] Mono.Cairo DllImport calling convention
</A></li>
	<LI>Next message: <A HREF="010773.html">[Gtk-sharp-list] Mono.Cairo DllImport calling convention
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10772">[ date ]</a>
              <a href="thread.html#10772">[ thread ]</a>
              <a href="subject.html#10772">[ subject ]</a>
              <a href="author.html#10772">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
