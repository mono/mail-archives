<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list]  Gtk.DotNet &amp;&amp; System.Drawing &amp;&amp; Images, strange behavior
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20%20Gtk.DotNet%20%26%26%20System.Drawing%20%26%26%20Images%2C%0A%20strange%20behavior&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008753.html">
   <LINK REL="Next"  HREF="008755.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list]  Gtk.DotNet &amp;&amp; System.Drawing &amp;&amp; Images, strange behavior</H1>
    <B>plushpuffin</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20%20Gtk.DotNet%20%26%26%20System.Drawing%20%26%26%20Images%2C%0A%20strange%20behavior&In-Reply-To="
       TITLE="[Gtk-sharp-list]  Gtk.DotNet &amp;&amp; System.Drawing &amp;&amp; Images, strange behavior">plushpuffin at gmail.com
       </A><BR>
    <I>Wed Jun 25 13:49:25 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="008753.html">[Gtk-sharp-list] Calling TreeStore.AppendValues with array of values
</A></li>
        <LI>Next message: <A HREF="008755.html">[Gtk-sharp-list] Gtk.DotNet &amp;&amp; System.Drawing &amp;&amp; Images, strange behavior
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8754">[ date ]</a>
              <a href="thread.html#8754">[ thread ]</a>
              <a href="subject.html#8754">[ subject ]</a>
              <a href="author.html#8754">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hello,

I just ditched WinXP a few weeks ago and switched to Ubuntu 8.04, and I'm
trying to port my C# Windows.Forms applications over to Gtk#. I have a
newly-created sample Gtk# project that simply isn't working, and I'm not
sure what it is that I'm doing wrong. I am using Gtk# with the Gtk-dotnet
library so that my library files' graphics handling functions don't have to
be rewritten. I noticed that many of my images, rectangles, and ellipses are
being drawn at the wrong positions on the DrawingArea. Below is my code and
a screenshot of the strange behavior I'm seeing.

I'm running monodevelop 1.0 and mono 1.9.1 (from the badgerports Ubuntu
repository). I was originally using the official Ubuntu mono 1.2.6 release,
but I decided to upgrade mono before coming here for help. It didn't fix
anything.

I finally figured out what the problem is. For some reason, after drawing an
image on the Graphics object, the next thing drawn, NO MATTER WHAT IT IS OR
WHERE IT IS PLACED, is offset vertically by about the height of the image
drawn. The next thing drawn after that is drawn in its proper position. Have
I found a bug in the Gtk.DotNet class library, or I am just not
understanding something?

I know that certain graphics libraries have a &quot;pen cursor&quot; which moves from
place to place, so you can draw a square by saying 'place pen at 50:50, draw
100 right, draw 100 up, draw 100 left, draw 100 down,&quot; but that doesn't seem
to be the case here because this strange behavior only takes effect after
drawing an image. If I draw ellipse-&gt;rectangle-&gt;image, everything is in the
right place. If I draw ellipse-&gt;image-&gt;rectangle, the rectangle will be
shifted down by about the height of the image. Notice that I say &quot;about the
height,&quot; because as you can see in the attached screenshot, my attempted 4x4
square of images is NOT aligned along 32x32 boundaries. The top-left image
is in the proper location, but the other three are shifted down 29 pixels
(they shouldn't be shifted down at all), which makes no sense.

    protected virtual void OnDrawingarea1ExposeEvent (object o,
Gtk.ExposeEventArgs args)
    {
        System.Drawing.Image pic = new Bitmap(&quot;./bots/grad.png&quot;);
       
        using( Graphics g =
Gtk.DotNet.Graphics.FromDrawable(args.Event.Window) )
        {
            g.Clear(Color.Aqua);
            g.DrawImage(pic, 50.0F, 50.0F, 32, 32);
            g.DrawImage(pic, 50.0F, 82.0F, 32, 32);
            g.DrawImage(pic, 82.0F, 50.0F, 32, 32);
            g.DrawImage(pic, 82.0F, 82.0F, 32, 32);
        }
    }

<A HREF="http://www.nabble.com/file/p18116118/monodeveloptest1.png">http://www.nabble.com/file/p18116118/monodeveloptest1.png</A> 
-- 
View this message in context: <A HREF="http://www.nabble.com/Gtk.DotNet----System.Drawing----Images%2C-strange-behavior-tp18116118p18116118.html">http://www.nabble.com/Gtk.DotNet----System.Drawing----Images%2C-strange-behavior-tp18116118p18116118.html</A>
Sent from the Mono - Gtk# mailing list archive at Nabble.com.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008753.html">[Gtk-sharp-list] Calling TreeStore.AppendValues with array of values
</A></li>
	<LI>Next message: <A HREF="008755.html">[Gtk-sharp-list] Gtk.DotNet &amp;&amp; System.Drawing &amp;&amp; Images, strange behavior
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8754">[ date ]</a>
              <a href="thread.html#8754">[ thread ]</a>
              <a href="subject.html#8754">[ subject ]</a>
              <a href="author.html#8754">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
