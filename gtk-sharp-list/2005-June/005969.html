<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Tomboy build problem: &quot;Gtk.TargetList has no
	constructors&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Tomboy%20build%20problem%3A%20%22Gtk.TargetList%20has%20no%0A%09constructors%22&In-Reply-To=20050609164938.GB27586%40localhost">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005968.html">
   <LINK REL="Next"  HREF="005970.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Tomboy build problem: &quot;Gtk.TargetList has no
	constructors&quot;</H1>
    <B>Alex Graveley</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Tomboy%20build%20problem%3A%20%22Gtk.TargetList%20has%20no%0A%09constructors%22&In-Reply-To=20050609164938.GB27586%40localhost"
       TITLE="[Gtk-sharp-list] Tomboy build problem: &quot;Gtk.TargetList has no
	constructors&quot;">alex at beatniksoftware.com
       </A><BR>
    <I>Thu Jun  9 13:38:27 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="005968.html">[Gtk-sharp-list] Increasing Ref count manually
</A></li>
        <LI>Next message: <A HREF="005970.html">[Gtk-sharp-list] Tomboy build problem: &quot;Gtk.TargetList has no
	constructors&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5969">[ date ]</a>
              <a href="thread.html#5969">[ thread ]</a>
              <a href="subject.html#5969">[ subject ]</a>
              <a href="author.html#5969">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I have no idea about Ted's problem, so forwarding to gtk-sharp-list to 
get some thoughts.  Both Gtk# trunk and 1.0.x seem to have the needed 
IntPtr constructor for Gtk.TargetList... does anyone know what is up?

I've already got workarounds for TargetList's binary incompatibilities 
between Gtk# versions in place... the code in question is below.

Tomboy/NoteWindow.cs:

public NoteEditor (Gtk.TextBuffer buffer)
	: base (buffer)
{
	...

	// Set extra editor drag targets supported (in addition
	// to the default TextView's various text formats)...
	//// Gtk.TargetList list = Gtk.Drag.DestGetTargetList (this);

	IntPtr list_ptr = gtk_drag_dest_get_target_list (this.Handle);
	Gtk.TargetList list = new Gtk.TargetList (list_ptr);

	list.Add (Gdk.Atom.Intern (&quot;text/uri-list&quot;, false), 0, 1);
	list.Add (Gdk.Atom.Intern (&quot;_NETSCAPE_URL&quot;, false), 0, 1);
}

// FIXME: Gtk# broke compatibility at some point with the
// methodref for DestGetTargetList.  We invoke it manually so
// our binary will work for everyone.
[DllImport(&quot;libgtk-win32-2.0-0.dll&quot;)]
static extern IntPtr gtk_drag_dest_get_target_list (IntPtr raw);


Ted, can you try updating from mono 1.1.4 to a more recent version? 
It's a longshot but it might help.

Thanks,
-Alex

ted leslie wrote:
&gt;<i> gtk-sharp is 1.0-4.1    so i guess that might be it
</I>&gt;<i> 
</I>&gt;<i> my versions of gtk? and mono are below
</I>&gt;<i> 
</I>&gt;<i> linux:/usr/tomboy/tomboy-0.3.2 # rpm -a -q |grep gtk
</I>&gt;<i> gtkspell-2.0.5-58.1
</I>&gt;<i> gtk-qt-engine-0.5-9.1
</I>&gt;<i> libgtkhtml-2.6.1-3.1
</I>&gt;<i> python-gtk-2.2.0-3.1
</I>&gt;<i> gtk-devel-1.2.10-882.1
</I>&gt;<i> gtk-sharp-1.0-4.1
</I>&gt;<i> gtkspell-devel-2.0.5-58.1
</I>&gt;<i> gtk-1.2.10-882.1
</I>&gt;<i> gtk2-2.4.9-10.1
</I>&gt;<i> gtk2-devel-2.4.9-10.1
</I>&gt;<i> linux:/usr/tomboy/tomboy-0.3.2 # rpm -a -q |grep mono
</I>&gt;<i> mono-devel-1.1.4-1.ximian.10.1
</I>&gt;<i> mono-core-1.1.4-1.ximian.10.1
</I>&gt;<i> linux:/usr/tomboy/tomboy-0.3.2 #
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Thu, Jun 09, 2005 at 12:55:28AM -0700, Alex Graveley wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i>Hmm,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>This is very strange.  What version of Gtk# (and mono) do you have 
</I>&gt;&gt;<i>installed?  It looks like the constructor being used is still available 
</I>&gt;&gt;<i>in both Gtk# 1.0.x and 1.1.x, unless it has changed very recently.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Thanks,
</I>&gt;&gt;<i>-Alex
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>ted leslie wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>i installed the latest gtk2, and pango, atk ... etc all the latest and the 
</I>&gt;&gt;&gt;<i>deps,
</I>&gt;&gt;&gt;<i>did configure ok and installed everything it wanted there, (like 
</I>&gt;&gt;&gt;<i>panelapplet, etc)
</I>&gt;&gt;&gt;<i>but in Tomboy dir where is makes the CS files  i get
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Gtk.TargetList  .... it can't find ?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>i have compiled and run other mono apps without problem, so i am a bit 
</I>&gt;&gt;&gt;<i>wondering why the issue here.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>any help/ideas as to what i can check would be appretiated.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>-tl
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>make[1]: Entering directory `/usr/tomboy/tomboy-0.3.2/Tomboy'
</I>&gt;&gt;&gt;<i>mcs -g -o Tomboy.exe -target:exe -define:DEBUG -unsafe   
</I>&gt;&gt;&gt;<i>-define:OLD_GTKSPELL Tomboy.cs Applet.cs Note.cs NoteManager.cs 
</I>&gt;&gt;&gt;<i>NoteWindow.cs NoteBuffer.cs PluginManager.cs Preferences.cs 
</I>&gt;&gt;&gt;<i>RecentChanges.cs Search.cs Tray.cs Trie.cs Undo.cs Utils.cs Watchers.cs 
</I>&gt;&gt;&gt;<i>XKeybinder.cs panelapplet/AppletFactory.cs panelapplet/BonoboUIVerb.cs 
</I>&gt;&gt;&gt;<i>panelapplet/PanelApplet.cs panelapplet/generated/BackgroundType.cs 
</I>&gt;&gt;&gt;<i>panelapplet/generated/ChangeBackgroundHandler.cs 
</I>&gt;&gt;&gt;<i>panelapplet/generated/ChangeSizeHandler.cs 
</I>&gt;&gt;&gt;<i>panelapplet/generated/FactoryCallback.cs panelapplet/generated/Flags.cs 
</I>&gt;&gt;&gt;<i>panelapplet/generated/MoveFocusOutOfAppletHandler.cs 
</I>&gt;&gt;&gt;<i>panelapplet/generated/ObjectManager.cs 
</I>&gt;&gt;&gt;<i>panelapplet/generated/PanelApplet.cs 
</I>&gt;&gt;&gt;<i>panelapplet/generated/PanelAppletSharp.FactoryCallbackNative.cs 
</I>&gt;&gt;&gt;<i>panelapplet/generated/PanelAppletSharp.voidObjectBackgroundTypeColorObjectSignal.cs panelapplet/generated/PanelAppletSharp.voidObjectDirectionTypeSignal.cs panelapplet/generated/PanelAppletSharp.voidObjectuintSignal.cs Defines.cs -r:/usr/li
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>b/mono/gtk-sharp/glib-sharp.dll -r:/usr/lib/mono/gtk-sharp/pango-sharp.dll 
</I>&gt;&gt;<i>-r:/usr/lib/mono/gtk-sharp/atk-sharp.dll 
</I>&gt;&gt;<i>-r:/usr/lib/mono/gtk-sharp/gdk-sharp.dll 
</I>&gt;&gt;<i>-r:/usr/lib/mono/gtk-sharp/gtk-sharp.dll 
</I>&gt;&gt;<i>-r:/usr/lib/mono/gtk-sharp/gnome-sharp.dll 
</I>&gt;&gt;<i>-r:/usr/lib/mono/gtk-sharp/art-sharp.dll 
</I>&gt;&gt;<i>-r:/usr/lib/mono/gtk-sharp/gconf-sharp.dll 
</I>&gt;&gt;<i>-r:/usr/lib/mono/gtk-sharp/gconf-sharp-peditors.dll   -r:Mono.Posix  
</I>&gt;&gt;<i>-resource:../data/GNOME_TomboyApplet.xml,GNOME_TomboyApplet.xml 
</I>&gt;&gt;<i>-resource:../data/Start_Here.note,Start_Here.note 
</I>&gt;&gt;<i>-resource:../data/images/tintin.png,tintin.png 
</I>&gt;&gt;<i>-resource:../data/images/stock_notes.png,stock_notes.png 
</I>&gt;&gt;<i>-resource:../data/images/gnome-stock-searchtool.png,gnome-stock-searchtool.png
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Tomboy.cs(86) warning CS0618: 'Mono.Posix.Syscall' is obsolete: 'Syscall 
</I>&gt;&gt;&gt;<i>is unmaintained.  Please use Mono.Unix.Syscall.'
</I>&gt;&gt;&gt;<i>Tomboy.cs(87) warning CS0618: 'Mono.Posix.Syscall' is obsolete: 'Syscall 
</I>&gt;&gt;&gt;<i>is unmaintained.  Please use Mono.Unix.Syscall.'
</I>&gt;&gt;&gt;<i>NoteWindow.cs(34) error CS0143: The type 'Gtk.TargetList' has no 
</I>&gt;&gt;&gt;<i>constructors defined
</I>&gt;&gt;&gt;<i>NoteWindow.cs(36) error CS0165: Use of unassigned local variable `list'
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005968.html">[Gtk-sharp-list] Increasing Ref count manually
</A></li>
	<LI>Next message: <A HREF="005970.html">[Gtk-sharp-list] Tomboy build problem: &quot;Gtk.TargetList has no
	constructors&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5969">[ date ]</a>
              <a href="thread.html#5969">[ thread ]</a>
              <a href="subject.html#5969">[ subject ]</a>
              <a href="author.html#5969">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
