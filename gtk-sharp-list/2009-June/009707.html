<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] textbuffer urls
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20textbuffer%20urls&In-Reply-To=3d2f29dc0906220728n734bc31fja8883d3cd372392f%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009703.html">
   <LINK REL="Next"  HREF="009702.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] textbuffer urls</H1>
    <B>Evan Arnold</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20textbuffer%20urls&In-Reply-To=3d2f29dc0906220728n734bc31fja8883d3cd372392f%40mail.gmail.com"
       TITLE="[Gtk-sharp-list] textbuffer urls">evan.arnold at gmail.com
       </A><BR>
    <I>Tue Jun 23 10:21:52 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="009703.html">[Gtk-sharp-list] textbuffer urls
</A></li>
        <LI>Next message: <A HREF="009702.html">[Gtk-sharp-list] textbuffer text as string with markup.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9707">[ date ]</a>
              <a href="thread.html#9707">[ thread ]</a>
              <a href="subject.html#9707">[ subject ]</a>
              <a href="author.html#9707">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks - that was striaghtforward to implement. Also, I'm able to save the
content of the textbuffer as more/less html by replacing the texttags as
anchor tags. (or any other format)

Now, and perhaps this might be hard, is is possible to display the text WITH
the URL functionality? From what I understand the pango mark-up doesn't
recognize anchor tags, likewise the cellrenderertext doesn't appear to user
iters.

Any ideas on how to put URL functionality into a Treeview Cell?

Thanks,

Evan

On Mon, Jun 22, 2009 at 9:28 AM, Chris Howie &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">cdhowie at gmail.com</A>&gt; wrote:

&gt;<i>
</I>&gt;<i> To create a link:
</I>&gt;<i>
</I>&gt;<i> * Create a TextTag with no name (&quot;new TextTag(null)&quot;).
</I>&gt;<i> * Set the visual appearance you want (blue, underlined, etc.).
</I>&gt;<i> * Store the hyperlink target somewhere, probably a Dictionary&lt;TextTag,
</I>&gt;<i> string&gt; would be the most useful.
</I>&gt;<i> * Don't forget to add the tag to the TextBuffer.TagTable.
</I>&gt;<i> * Apply the tag to the text where you want the link.
</I>&gt;<i>
</I>&gt;<i> Then during construction of the buffer you need to attach a handler to
</I>&gt;<i> the mouse movement signal (I forget what it's called) as well as the
</I>&gt;<i> clicked signal.  When either are fired you will have to:
</I>&gt;<i>
</I>&gt;<i> * Obtain the X,Y coordinates of the movement/click.
</I>&gt;<i> * Map these somehow to a TextIter.
</I>&gt;<i>
</I>&gt;<i> Then, in the movement handler you will then want to conditionally set
</I>&gt;<i> the mouse pointer to the &quot;hand&quot; pointer or the normal one, based on
</I>&gt;<i> whether or not a hyperlink tag is present.  You could use a LINQ query
</I>&gt;<i> to determine this, something like &quot;bool hyperlink = (from i in
</I>&gt;<i> iter.Tags where dictionary.ContainsKey(i) select i).FirstOrDefault()
</I>&gt;<i> != null;&quot; (this is from memory, you may have to tweak it).
</I>&gt;<i>
</I>&gt;<i> In the click handler you can do something like &quot;TextTag linktag =
</I>&gt;<i> (from i in iter.Tags where dictionary.ContainsKey(i) select
</I>&gt;<i> i).FirstOrDefault();&quot; and then if linktag != null you can do &quot;string
</I>&gt;<i> url = dictionary[linktag];&quot; to obtain the URL you stored and use it
</I>&gt;<i> however you wish.
</I>&gt;<i>
</I>&gt;<i> Don't forget that when you remove text containing a link you should
</I>&gt;<i> remove the TextTag from the TextBuffer.TagTable and also
</I>&gt;<i> dictionary.Remove(tag).
</I>&gt;<i>
</I>&gt;<i> Hope this helps!
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Chris Howie
</I>&gt;<i> <A HREF="http://www.chrishowie.com">http://www.chrishowie.com</A>
</I>&gt;<i> <A HREF="http://en.wikipedia.org/wiki/User:Crazycomputers">http://en.wikipedia.org/wiki/User:Crazycomputers</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/gtk-sharp-list/attachments/20090623/aae97a6a/attachment.html">http://lists.ximian.com/pipermail/gtk-sharp-list/attachments/20090623/aae97a6a/attachment.html</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009703.html">[Gtk-sharp-list] textbuffer urls
</A></li>
	<LI>Next message: <A HREF="009702.html">[Gtk-sharp-list] textbuffer text as string with markup.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9707">[ date ]</a>
              <a href="thread.html#9707">[ thread ]</a>
              <a href="subject.html#9707">[ subject ]</a>
              <a href="author.html#9707">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
