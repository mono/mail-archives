<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] NodeStore and lazy loading
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20NodeStore%20and%20lazy%20loading&In-Reply-To=2b11ca90050818004341cc155c%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006345.html">
   <LINK REL="Next"  HREF="006359.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] NodeStore and lazy loading</H1>
    <B>Ben Maurer</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20NodeStore%20and%20lazy%20loading&In-Reply-To=2b11ca90050818004341cc155c%40mail.gmail.com"
       TITLE="[Gtk-sharp-list] NodeStore and lazy loading">bmaurer at ximian.com
       </A><BR>
    <I>Thu Aug 18 10:54:30 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="006345.html">[Gtk-sharp-list] NodeStore and lazy loading
</A></li>
        <LI>Next message: <A HREF="006359.html">[Gtk-sharp-list] [PATCH] small change in the glib DateTime to
	time_t marshaller
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6346">[ date ]</a>
              <a href="thread.html#6346">[ thread ]</a>
              <a href="subject.html#6346">[ subject ]</a>
              <a href="author.html#6346">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> The FileSystemModel example is a bad one. I'm very rusty wrt JTree, but
</I>&gt;<i> afaics this model *only* works with a custom JTree. The example model
</I>&gt;<i> doesn't return instances of TreeNode, so a standard JTree
</I>&gt;<i> doesn't work with this model.
</I>
Apparently, TreeNode is a helper class that works with DefaultTreeModel. A
model like the file system one will work just fine.

I haven't tried the sample yet (seeing as a don't have eclipse on this
box. though, I really should fix that in the near-future seeing as my
classes at CMU will be in java ;-), but I'd assume it works; there is no
custom jtree.

&gt;<i> Using an hourglass and a &quot;Loading...&quot; node are really implementation
</I>&gt;<i> specific. In the GnomeVfs TreeView i coded, performance was pretty good,
</I>&gt;<i> negating the need for an hourglass or &quot;Loading...&quot; node.
</I>
Do we really make this so hard though. I asked on #gtk+ about how one
would make an async, lazy-load tree. Owen responded that all the examples
that he knew of were horrific.

Have you looked at my msdnn browser code:

<A HREF="http://primates.ximian.com/~bmaurer/msdnb.cs">http://primates.ximian.com/~bmaurer/msdnb.cs</A>

The EnsureNoFakeLeafs is a bit confusing. It is very easy to make it buggy
(for example, I had issues where i'd get tons of blank nodes in many
cases), and honestly, it isn't something I should have to deal with as a
consumer of the tree.

&gt;<i> The example only works as long as JTree initially only queries for the
</I>&gt;<i> root nodes and if those are leafs or not. I don't recall offhand how Gtk
</I>&gt;<i> does this.
</I>
I assume that's what it does, otherwise the example would be broken.

&gt;<i> Anyway, is this really something worth taking the time to
</I>&gt;<i> discuss/possibly implement?
</I>
I think so. It took me 1 hr to figure out how to read the msdn tree from
xml (and debug this portion of the code). I spent 2 hrs trying to figure
out how to get a lazy load treeview in the NodeStore api, and getting it
working correctly. (most of this time was spent going on a deadend
path...)

&gt;<i> Just lookup which
</I>&gt;<i> events tells you when a row is expanded and go from there. I can try and
</I>&gt;<i> see if i still have this example lying around somewhere.
</I>
I did, and it works. However, IMHO there are two issues:

1) the method I used to get this working was not obvious (Why would I hook
something up in TreeView to implement my TreeModel correctly?). It'd be
great to put this in the docs

2) The use of TreeView to implement my TreeModel is not exactly MVC style.
Also, I have to do hackery with dummmy nodes to make things work. The code
is more complex than it should be and has a fairly large risk of being
buggy. Doing a lazy load treeview is something that seems like a common
task. Why should we make it hard to do?

-- Ben


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006345.html">[Gtk-sharp-list] NodeStore and lazy loading
</A></li>
	<LI>Next message: <A HREF="006359.html">[Gtk-sharp-list] [PATCH] small change in the glib DateTime to
	time_t marshaller
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6346">[ date ]</a>
              <a href="thread.html#6346">[ thread ]</a>
              <a href="subject.html#6346">[ subject ]</a>
              <a href="author.html#6346">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
