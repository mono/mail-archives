<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] gtktv binding
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20gtktv%20binding&In-Reply-To=1123615820.4756.9.camel%40dana.coffeebreak.internal">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006309.html">
   <LINK REL="Next"  HREF="006313.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] gtktv binding</H1>
    <B>Joachim Jaeckel</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20gtktv%20binding&In-Reply-To=1123615820.4756.9.camel%40dana.coffeebreak.internal"
       TITLE="[Gtk-sharp-list] gtktv binding">mono at coffeebreak.de
       </A><BR>
    <I>Tue Aug  9 16:52:29 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="006309.html">[Gtk-sharp-list] gtktv binding
</A></li>
        <LI>Next message: <A HREF="006313.html">[Gtk-sharp-list] gtktv binding
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6312">[ date ]</a>
              <a href="thread.html#6312">[ thread ]</a>
              <a href="subject.html#6312">[ subject ]</a>
              <a href="author.html#6312">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello, it's me again...

First problems occur...

I tried the following:
created a Gtk.DrawingArea in a Window, (set the background to black)
added a button to this window
do a ShowAll...

Everything comes up to the Screen and looks fine.

My clicked-Handler for the Button looks like this:

private void InitClicked (object obj, EventArgs args) {
	XVideo xv = new XVideo();
	xv.Put(tv); // tv is my DrawingArea
}

And the starting XVideo Class like this:

using System;
using System.Runtime.InteropServices;

namespace VEdit.Model {
	public class XVideo {
		const string Library = &quot;Xv&quot;;
	
		[DllImport(Library)]
		private extern static void
			XvPutVideo(IntPtr dpy, int port, IntPtr d,
				IntPtr gc,
				int vx, int vy, int dx,	int dy,
				uint vw, uint vh, uint dw, uint dh);
		
		public XVideo() {
		}
		
		~XVideo() {
		}
		
		public int Put(Gtk.DrawingArea widget) {
			Gdk.Rectangle rc = widget.Allocation;
			Gdk.GC gc = new Gdk.GC(widget.GdkWindow);
			IntPtr a = widget.Display.Handle;
Console.WriteLine (a.ToString ());
			IntPtr b = widget.GdkWindow.Handle;
Console.WriteLine (b.ToString ());
			IntPtr c = gc.Handle;
Console.WriteLine (c.ToString ());
			XvPutVideo(widget.Display.Handle, 1,
				widget.GdkWindow.Handle, gc.Handle,
				0, 0, rc.Width, rc.Height,
				(uint) 0, (uint) 0,
				(uint) rc.Width, (uint) rc.Height);
			return 0;
		}
	
	}
}

But if I try to execute the method Put, of the XVideo-Class, the system
complains with the following error-message:

Unhandled Exception: System.NullReferenceException: Object reference not
set to an instance of an object
in &lt;0x00000&gt; &lt;unknown method&gt;
in (wrapper managed-to-native) VEdit.Model.XVideo:XvPutVideo
(intptr,int,intptr,intptr,int,int,int,int,uint,uint,uint,uint)
in [0x00094] (at /home/joe/Mono/event/VEdit/Model/XVideo.cs:33)
VEdit.Model.XVideo:Put (Gtk.DrawingArea widget)
in [0x0000d] (at /home/joe/Mono/event/VEdit/UI/GtkUi/MainView.cs:328)
VEdit.UI.GtkUi.MainView:PutVideo ()
in [0x00001] (at /home/joe/Mono/event/VEdit/UI/GtkUi/MainView.cs:322)
VEdit.UI.GtkUi.MainView:InitClicked (System.Object obj, System.EventArgs
args)
in (wrapper delegate-invoke)
System.MulticastDelegate:invoke_void_object_EventArgs
(object,System.EventArgs)
in &lt;0x00096&gt; GLib.Signal:voidObjectCallback (IntPtr handle, IntPtr gch)
in (wrapper native-to-managed) GLib.Signal:voidObjectCallback
(intptr,intptr)
in &lt;0x00000&gt; &lt;unknown method&gt;
in (wrapper managed-to-native) Gtk.Application:gtk_main ()
in &lt;0x00007&gt; Gtk.Application:Run ()
in &lt;0x00007&gt; Gnome.Program:Run ()
in [0x000b3] (at /home/joe/Mono/event/VEdit/UI/GtkUi/MainView.cs:52)
VEdit.UI.GtkUi.MainView:.ctor (System.String[] args)
in [0x00001] (at /home/joe/Mono/event/Main.cs:10) MainClass:Main
(System.String[] args)

But, which Object has a null reference? Through the WriteLine's in the
Put Methods, it seems to me, that the DrawingArea widget is correct and
also the different Handles from it.

Maybe, you have an idea?

Thanks in advance,
Joachim.

</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006309.html">[Gtk-sharp-list] gtktv binding
</A></li>
	<LI>Next message: <A HREF="006313.html">[Gtk-sharp-list] gtktv binding
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6312">[ date ]</a>
              <a href="thread.html#6312">[ thread ]</a>
              <a href="subject.html#6312">[ subject ]</a>
              <a href="author.html#6312">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
