<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] gtksourceview-sharp: GetLanguageFromMimeType
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:tberman%40sevenl.net">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="003334.html">
   <LINK REL="Next"  HREF="003338.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] gtksourceview-sharp: GetLanguageFromMimeType
   </H1>
    <B>Todd Berman
    </B> 
    <A HREF="mailto:tberman%40sevenl.net"
       TITLE="[Gtk-sharp-list] gtksourceview-sharp: GetLanguageFromMimeType">tberman@sevenl.net
       </A><BR>
    <I>Sun, 08 Feb 2004 02:52:27 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="003334.html">[Gtk-sharp-list] gtksourceview-sharp: GetLanguageFromMimeType
</A></li>
        <LI> Next message: <A HREF="003338.html">[Gtk-sharp-list] gtksourceview-sharp: GetLanguageFromMimeType
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3335">[ date ]</a>
              <a href="thread.html#3335">[ thread ]</a>
              <a href="subject.html#3335">[ subject ]</a>
              <a href="author.html#3335">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Im only responding to this just to say that this seems to be a known
issue, and im really confused as to why this .custom hack was removed
before a suitable fix was in place.

I'd rather see an occasional null pointer reference than a constant
breaking every time.

This has caused some issues for MD users, as they are unable to update
their gtksourceview-sharp because of this, and we need to have this
fixed soon, beacause when we release a 0.1 of MD it will require a
sourceview-sharp release.

I am willing to roll gtksourceview-sharp into our tree and build it into
our build dirs, but I think that kinda was against the point of an
established gtksourceview module (one place, one location for
fixes/optimizations).

This really should be fixed one way or another soon.

please ;)

--Todd

On Sun, 2004-02-08 at 01:04, Daniel Borgmann wrote:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> The GetLanguageFromMimeType() function of the SourceLanguagesManager
</I>&gt;<i> class in gtksourceview-sharp has always been broken for me, recently a
</I>&gt;<i> &quot;fix&quot; for it was removed from CVS because it led to null pointer
</I>&gt;<i> exceptions. But this seems to actually work:
</I>&gt;<i> 
</I>&gt;<i> public Gtk.SourceLanguage GetLanguageFromMimeType(string mime_type) {
</I>&gt;<i> 	IntPtr raw_ret =
</I>&gt;<i> gtk_source_languages_manager_get_language_from_mime_type(Handle,
</I>&gt;<i> mime_type);
</I>&gt;<i> 	Gtk.SourceLanguage ret;
</I>&gt;<i> 	if (raw_ret == IntPtr.Zero)
</I>&gt;<i> 		ret = null;
</I>&gt;<i> 	else
</I>&gt;<i> 		ret = new Gtk.SourceLanguage(raw_ret);
</I>&gt;<i> 	return ret;
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> Gtk# 0.16 already does the check for null, but the cast is created as
</I>&gt;<i> &quot;(Gtk.SourceLanguage) GLib.Object.GetObject(raw_ret)&quot;, which leads to an
</I>&gt;<i> error. 
</I>&gt;<i> It would be nice if this could be fixed in CVS again or maybe in the
</I>&gt;<i> code generator. I'm very new to all of this, so I have no idea what
</I>&gt;<i> would be the right thing to do. :) Thanks.
</I>&gt;<i> 
</I>&gt;<i> Daniel
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Gtk-sharp-list maillist  -  <A HREF="mailto:Gtk-sharp-list@lists.ximian.com">Gtk-sharp-list@lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">http://lists.ximian.com/mailman/listinfo/gtk-sharp-list</A>
</I>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="003334.html">[Gtk-sharp-list] gtksourceview-sharp: GetLanguageFromMimeType
</A></li>
	<LI> Next message: <A HREF="003338.html">[Gtk-sharp-list] gtksourceview-sharp: GetLanguageFromMimeType
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3335">[ date ]</a>
              <a href="thread.html#3335">[ thread ]</a>
              <a href="subject.html#3335">[ subject ]</a>
              <a href="author.html#3335">[ author ]</a>
         </LI>
       </UL>
</body></html>
