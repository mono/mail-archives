<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] opening libgtk-x11-2.0.so, not by SONAME / library management
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:blade%40debian.org">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="003293.html">
   <LINK REL="Next"  HREF="003295.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] opening libgtk-x11-2.0.so, not by SONAME / library management
   </H1>
    <B>Eduard Bloch
    </B> 
    <A HREF="mailto:blade%40debian.org"
       TITLE="[Gtk-sharp-list] opening libgtk-x11-2.0.so, not by SONAME / library management">blade@debian.org
       </A><BR>
    <I>Sun, 1 Feb 2004 10:57:52 +0100</I>
    <P><UL>
        <LI> Previous message: <A HREF="003293.html">[Gtk-sharp-list] Closing an About window
</A></li>
        <LI> Next message: <A HREF="003295.html">[Gtk-sharp-list] opening libgtk-x11-2.0.so, not by SONAME /
 library management
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3294">[ date ]</a>
              <a href="thread.html#3294">[ thread ]</a>
              <a href="subject.html#3294">[ subject ]</a>
              <a href="author.html#3294">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I am working on proper Debian packages of Gtk-Sharp and a user recently
run over a problem that is pretty reproducible and should be fixed.

Symptoms: a program fails to open &quot;libgtk-x11-2.0.so&quot;

15298 access(&quot;libgtk-x11-2.0.so&quot;, F_OK) = -1 ENOENT (No such file or directory)
15298 stat64(&quot;libgtk-x11-2.0.so&quot;, 0xbf5ff14c) = -1 ENOENT (No such file or directory)
15298 access(&quot;libgtk-x11-2.0.so.so&quot;, F_OK) = -1 ENOENT (No such file or directory)
15298 stat64(&quot;libgtk-x11-2.0.so.so&quot;, 0xbf5ff14c) = -1 ENOENT (No such file or directory)

Questions: why is this file used at all? It is only a virtual symlink to
the library which corresponds to the headers/pkgconfig data. The library
must be opened at runtime by using its SONAME:

lrwxr-xr-x    1 root     root           25 2003-12-29 23:49 /usr/lib/libgtk-x11-2.0.so.0 -&gt; libgtk-x11-2.0.so.0.200.4

You see, it is .so.0 and not .so. Since the .so file is part of the Gtk
development packages (because of the reasons described above, the well
known Debian policy and shared-lib conventions), it does not exist if
the -dev package is deinstalled and programs must NOT depend on it.

Further, I was shocked (almost literaly) when I saw on the output of
ldd...

ldd /usr/lib/libgtksharpglue.so | wc -l
64

That is one of the most chaotic lib namespace management I have ever seen!
I am not a Gtk-Sharp developer but I strongly recommend to cleanup
there, very, very, soon. libgtksharpglue.so should be linked with only most
important libs, and use dlopen to open others, but using their SONAMEs,
not .so, and not using anything listed in .la files since they often
cause the whole system to wreak random havoc.

Regards,
Eduard.
-- 
Hallo Nachts-an-der-roten-Ampel-Halter!

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="003293.html">[Gtk-sharp-list] Closing an About window
</A></li>
	<LI> Next message: <A HREF="003295.html">[Gtk-sharp-list] opening libgtk-x11-2.0.so, not by SONAME /
 library management
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3294">[ date ]</a>
              <a href="thread.html#3294">[ thread ]</a>
              <a href="subject.html#3294">[ subject ]</a>
              <a href="author.html#3294">[ author ]</a>
         </LI>
       </UL>
</body></html>
