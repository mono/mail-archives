<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] GTK# Installing Beginners Guide For Windows
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:danielmorgan%40verizon.net">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="003409.html">
   <LINK REL="Next"  HREF="003406.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] GTK# Installing Beginners Guide For Windows
   </H1>
    <B>Daniel Morgan
    </B> 
    <A HREF="mailto:danielmorgan%40verizon.net"
       TITLE="[Gtk-sharp-list] GTK# Installing Beginners Guide For Windows">danielmorgan@verizon.net
       </A><BR>
    <I>Tue, 17 Feb 2004 21:03:27 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="003409.html">[Gtk-sharp-list] ok you got me, I'm lost!
</A></li>
        <LI> Next message: <A HREF="003406.html">[Gtk-sharp-list] Problems finding gtkhtml-sharp
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3411">[ date ]</a>
              <a href="thread.html#3411">[ thread ]</a>
              <a href="subject.html#3411">[ subject ]</a>
              <a href="author.html#3411">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Mathias created a gtk# 0.10 windows installer that worked on .NET and had
the assemblies put in the GAC.

This will not work with the latest Mono though; however, it can give you an
idea how he got it to work.

<A HREF="http://taschenorakel.de/mathias/archive.en.html#gtk-sharp">http://taschenorakel.de/mathias/archive.en.html#gtk-sharp</A>

Below: i stole a page from a google cached version of gtk# wiki:

Installing Beginners Guide For Windows
Note: You are viewing an old revision of this page. View the current
version.

Prerequisites


----------------------------------------------------------------------------
----

2004-01-10

GTK# Windows Binaries 0.14. They can be copied on top of the binaries
installed by the GTK# Windows Installer 0.12. Works with Mono 0.28
<A HREF="http://prdownloads.sourceforge.net/gtk-sharp/gtk-sharp-0.14.zip?download">http://prdownloads.sourceforge.net/gtk-sharp/gtk-sharp-0.14.zip?download</A>

Binaries for 0.15 is in the works... It will work with Mono 0.29. I may even
create an installer too...

I do WISH I knew how to build a libglade 2.0.1 .dll. When I try to build it,
all I get is a libglade .a file. How do I force libglade to build a .dll?

Please respond on the gtk-sharp-list if you know the answer.

2003-10-29

GTK# Windows Installer 0.12 can be found here:
<A HREF="http://prdownloads.sourceforge.net/gtk-sharp/gtk-sharp-0.12-stable-win32-set">http://prdownloads.sourceforge.net/gtk-sharp/gtk-sharp-0.12-stable-win32-set</A>
up.exe?download

2003-10-23

GTK# Windows Installer 0.11+ is at
<A HREF="http://java.thn.htu.se/~toor/gtk-sharp/gtk-sharp-0.11-cvs.exe">http://java.thn.htu.se/~toor/gtk-sharp/gtk-sharp-0.11-cvs.exe</A> Created by
Johannes. Works with Mono 0.28 for Windows NT/2000/XP.


The installer includes everything you need except Mono.

Get Mono 0.28 from:
<A HREF="http://www.go-mono.com/download.html">http://www.go-mono.com/download.html</A>


The binares used in creating the GTK# Windows Installer 0.11+ are at


<A HREF="http://primates.ximian.com/~jackson/gtk-sharp-cvs-2003-10-17-win32-bin.zip">http://primates.ximian.com/~jackson/gtk-sharp-cvs-2003-10-17-win32-bin.zip</A>


These Win32 binaries for gtk# are based on gtk-sharp cvs as of 2003-10-17.
Created by danmorg. Thanks to Jackson for hosting them.


Note: the binaries for gtk# 0.11 were not stable enough to run on Windows,
so I created them from cvs.


Other things which will be posted:


The gtksharp.nsi script to create the Windows Installer will be posted soon.

The NSIS software used from <A HREF="http://nsis.sourceforge.net/">http://nsis.sourceforge.net/</A> will be posted too.
This is because NSIS scripts break with newer version of NSIS and the nsis
web site does not keep old releases around to download.

And the source used to create the gtk# binaries.

The gtk+ 2.2.4 runtime is from: <A HREF="http://www.dropline.net/gtk/download.php">http://www.dropline.net/gtk/download.php</A>


----------------------------------------------------------------------------
----

Gtk# 0.10 is out now and an unoffical installation program is available from
<A HREF="http://taschenorakel.de/mathias/archive.en.html#gtk-sharp.">http://taschenorakel.de/mathias/archive.en.html#gtk-sharp.</A>

Works great Mathias! I Love NSIS!


----------------------------------------------------------------------------
----

Installing on windows does work almost automatically.

1. Get Gtk# 0.8 from
<A HREF="http://www.sport-huettn.de/mono/gtk-sharp-0.8-win32-4.exe">http://www.sport-huettn.de/mono/gtk-sharp-0.8-win32-4.exe</A>
2. There is a bug in this release, so you need to copy
<A HREF="http://www.sport-huettn.de/mono/atk-sharp.dll">http://www.sport-huettn.de/mono/atk-sharp.dll</A> to c:\mono-0.23\lib where
&quot;c:\mono-0.23\&quot; is your Gtk# directory.
3. That's it.

Can anyone create a 'hello, world!' style project for Visual Studio .NET and
place it here? I will if I get that far...


----------------------------------------------------------------------------
----

Here are a few example apps written with Visual Studio .NET, and
screenshots.

<A HREF="http://gtk.lynq.us/examples/">http://gtk.lynq.us/examples/</A>

There is a forum at <A HREF="http://gtk.lynq.us">http://gtk.lynq.us</A> which is open to the public but is
mostly being used by myself and a few others as a 'wiki' type of forum for
concentrating ideas and information.

I'm willing to host any example projects, screen shots, etc that fit within
the realms of GTK# and Visual Studio.NET on the server. Post to the
appropriate forum if you have something you'd like to contribute. Ron


----------------------------------------------------------------------------
----

OK, I have made such a 'hello, world!' style project for Visual Studio .NET
that works for me on Win2K Pro with Visual Studio .NET 2002 (Ent. Arch.),
Mono 0.24 (mono-0.24-win32-1.exe) and GTK# 0.8 (gtk-sharp-0.8-win32-4.exe)
(plus the suggested atk-sharp.dll, as above, but I have not tried to do
without it)

You can find it here:
<A HREF="http://onyx.rubyhost.net/projects/src/mono/gtkhellocon.zip">http://onyx.rubyhost.net/projects/src/mono/gtkhellocon.zip</A>

Please let me know here if you have any problems with this project, I will
check back - Pieter


----------------------------------------------------------------------------
----

I have no problems running this example on Linux. On the other hand, on my
WinXP machine I get an exception.

////////////////////////////////////////////////////////////////////////////
////////////

An unhandled exception of type 'System.DllNotFoundException' occurred in
gtk-sharp.dll

Additional information: Unable to load DLL (libgtk-win32-2.0-0.dll).

////////////////////////////////////////////////////////////////////////////
////////////

Any idea? Thanks.

Answer:

This error occurs because Windows cannot find the win32-GTK+2.0 DLLs.
Normally the path to them is not in Windows' global search path. Hence you
have to tell Windows where to look for additional DLLs if it loads your
application:

gaim -- the instant messenger -- uses the following technique, too:

Open the registry editor, navigate to:
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths

Create a new key that's named after your application executable: e. g.
gaim.exe

There, create a string that's named Path.

The value of Path should be the path to your GTK+2.0 installation.

On my machine this is: C:\Programme\Common Files\GTK\2.0\bin (Note: some GTK
installers install the DLLs into the ./lib subdirectory; others into ./bin)

Using the registry editor is the quick-and-dirty method. If you want to
distribute your application use an installer like NSIS
(<A HREF="http://nsis.sourceforge.net/">http://nsis.sourceforge.net/</A>) to setup this path. -- GregorMitsch


----------------------------------------------------------------------------
----

No problem. There are several solutions to this and I will document them
more fully later. However, I have to go grocery shopping so herewith a short
question; do you have MONO installed and on your path ? If not, see
<A HREF="http://www.go-mono.org/download.html">http://www.go-mono.org/download.html</A> and look for &quot;Windows Setup Wizard (XP,
2000, NT)&quot;. Once installed, all dependency DLL's should live under
&lt;YOURDRIVE&gt;:\mono\lib - Pieter


----------------------------------------------------------------------------
----

Herewith more - As with all things software, the above solution might not
work. One &quot;paranoid&quot; method I use is to install GIMP itself -
<A HREF="http://www.gimp.org/">http://www.gimp.org/</A> - for Windows - <A HREF="http://www.gimp.org/win32/">http://www.gimp.org/win32/</A> Doing this
will ensure that you have the &quot;real thing&quot; supporting GTK on your Windows
system. You might not like this solution but there is a great benefit, THE
GIMP is a truly useful &quot;accessory&quot; to any computer. - Pieter


----------------------------------------------------------------------------
----

Both solutions doesn't appear to work for me. I have all this packages
installed on my computer. Had I not installed mono, I would not even had
gtk-sharp.dll in the first place. I searched for libgtk-win32-2.0-0.dll and
the library is present in 2 places. Both mono and the gtk# packages install
those libs but still I get the error. I have GIMP installed and use it for
some time as well. Furthermore, the two abovementioned libs are located in
the same dir. This must be, as you mentioned a PATH problem. I guess I'll
have to browse some sources to find out how one lib is referenced from the
other one.


----------------------------------------------------------------------------
----

I have exactly the same problem. Please help me. Thanks!


----------------------------------------------------------------------------
----

Install Mono to the Directory C:\Mono\Mb\Install. Then, all libraries and
everything will be found! It seems as if this path is some kind of hard
coded in release 0.24.

By the way, if you want to compile the example without VS.NET, just type:
msc @make.txt after having created the text file make.txt:

GtkHelloButton.cs
/lib:c:\windows\microsoft.net\Framework\v1.1.4322
/reference:System.Drawing
/lib:c:\mono\lib
/reference:gtk-sharp
/reference:glib-sharp
/reference:atk-sharp
/reference:gdk-sharp
You will receive warnings when executing, but the program will work just
fine.


----------------------------------------------------------------------------
----

Sorry, it still does not work. I have the same problem. Please tell me
exactly where to install Mono and where to install GTK#. I still get the
error:
An unhandled exception of type 'System.DllNotFoundException' occurred in
gtk-sharp.dll
Additional information: Unable to load DLL (libgtk-win32-2.0-0.dll).
I found a link with DllImportAttribute to libgtk-win32-2.0-0.dll within
gtk-sharp.dll. I just can not understand why this dll is not found. I have
tried to place it in the WinNT/System/ directory, in the .NET Framework
Assemblies directory, in the Mono directory etc etc. But nothing worked...
:<i>-(
</I>

----------------------------------------------------------------------------
----

Just to recap, it works for me with:

Visual Studio .NET 2002 (with MS.NET Framework 1.0)
Windows 2000 Professional SP3
Mono 0.24 from <A HREF="http://www.go-mono.org/archive/mono-0.24-win32-1.exe">http://www.go-mono.org/archive/mono-0.24-win32-1.exe</A>
GTK# 0.8 from <A HREF="http://www.sport-huettn.de/mono/gtk-sharp-0.8-win32-4.exe">http://www.sport-huettn.de/mono/gtk-sharp-0.8-win32-4.exe</A>
(installed into Mono dir location)
<A HREF="http://www.sport-huettn.de/mono/atk-sharp.dll">http://www.sport-huettn.de/mono/atk-sharp.dll</A> (installed into c:\mono\lib,
as suggested top of page)
GTK+ Runtime Environment - 2.2.1.2 for Windows can also be installed from
<A HREF="http://www.dropline.net/jade/download.php">http://www.dropline.net/jade/download.php</A>
My EXE+DLL's load as follows when running gtkhellocon.exe (at least the GTK+
supporting ones): Process: gtkhellocon.exe Pid: 2180

Description                   Version           Path

C:\WINNT\system32\lib\pango\1.0.0\modules\pango-basic-win32.dll

C:\WINNT\system32\libatk-1.0-0.dll
GIMP Toolkit                  2.00.0006.0010
C:\WINNT\system32\libgdk_pixbuf-2.0-0.dll
GIMP Drawing Kit              2.00.0006.0024
C:\WINNT\system32\libgdk-win32-2.0-0.dll
GLib                          2.00.0003.0018
C:\WINNT\system32\libglib-2.0-0.dll
GModule                       2.00.0003.0014
C:\WINNT\system32\libgmodule-2.0-0.dll
GObject                       2.00.0003.0015
C:\WINNT\system32\libgobject-2.0-0.dll
GIMP Toolkit                  2.00.0006.0014
C:\WINNT\system32\libgtk-win32-2.0-0.dll
Pango                         1.00.0004.0006
C:\WINNT\system32\libpango-1.0-0.dll
PangoWin32                    1.00.0004.0007
C:\WINNT\system32\libpangowin32-1.0-0.dll
Cygwin® POSIX Emulation DLL   1003.22.0000.0000
C:\gnu\cygwin\bin\cygwin1.dll

Project + GTK# DLL's load as follows from the project directory since
MSVS.NET copies them here when a reference is set:
0.00.0000.0000    ...\gtkhellocon\bin\Debug\atk-sharp.dll
0.00.0000.0000    ...\gtkhellocon\bin\Debug\gdk-sharp.dll
0.00.0000.0000    ...\gtkhellocon\bin\Debug\glib-sharp.dll
1.00.1228.3792    ...\gtkhellocon\bin\Debug\gtkhellocon.exe
0.00.0000.0000    ...\gtkhellocon\bin\Debug\gtk-sharp.dll
                  ...\gtkhellocon\bin\Debug\gtksharpglue.dll
You will notice from the above that I also have CYGWIN installed
(<A HREF="http://www.cygwin.com/">http://www.cygwin.com/</A>). Whether this is neccesary just for runtime GTK#
support, I do not know since the Mono distribution itself comes with CYGWIN
support. However, to build Mono yourself this is certainly needed for
Windows platforms. Pieter


----------------------------------------------------------------------------
----

Thanks for your help! It runs! I have located (a part of?) the problem.
First I thought it is a version conflict or so... I had
gtk-sharp-0.8-win32-2.exe, not gtk-sharp-0.8-win32-4.exe!! Where did you
find version 4? It is about 1 MB larger than my version! Version 2 is linked
at <A HREF="http://gtk-sharp.sourceforge.net/">http://gtk-sharp.sourceforge.net/</A> , this was my source. But the exchange
of the GTK# files did not work. The problem was solved when I copied the EXE
file of the sample into the GTK# directory. It also worked when I copied all
the (directly and indirectly) needed DLLs into the directory of the EXE
file. It is &quot;just&quot; a Windows error. GTK#, Mono etc seem to work correctly.
Has somebody an idea how to solve this problem without copying the files? I
will also ask this question in a .NET forum. Thank you for your help &amp;
ideas! - Andi


----------------------------------------------------------------------------
----

Problem already solved: <A HREF="http://www.codeguru.com/dll/AppPath.shtml">http://www.codeguru.com/dll/AppPath.shtml</A> Works
great. Problem: If you move the EXE or rename it, it does not search for
this DLL Path any more. I#M looking for another solution. BTW: Is it normal
that the Command Button gets brighter when I mouse with my mouse over it? If
I place the EXE directly in my mono/lib directory, I can't see that
effect. - Andi


----------------------------------------------------------------------------
----

Again me! Seems I have found a good solution now. If we often use Mono/GTK#,
we should tell Windows that it always should also look in our Mono-directory
if it searches DLL files. Win NT, 2k, etc: Start -&gt; Settings -&gt; Control
Panel -&gt; System -&gt; Advanced -&gt; Environment Variables: Frame &quot;System
Variables&quot;, search for &quot;Path&quot;, click &quot;Edit&quot; and add &quot;;c:\mono\lib\&quot;, if
&quot;c:\mono\lib\&quot; is your mono\lib-path. The semicolon &quot;;&quot; is used to seperate
the entries. Win 98: look at
<A HREF="http://www.cosmosm.com/support/license/appendix/envt_variables.htm">http://www.cosmosm.com/support/license/appendix/envt_variables.htm</A> Now, if
you start an EXE file or open a .NET project, all necessary DLL files will
be found automatically! YEAH! Try it out!! - Andi


----------------------------------------------------------------------------
----

Yes, one can also do the equivalent temporarily during testing from the
command line, like so: &quot;set PATH=C:\gnu\gtk\2.0\lib;%PATH%&quot;. I did this
whilst duplicating the original error by physicaly repointing to a newer set
of GTK+ libs than my originals. First I removed all GTK+ support libs from
&quot;C:\WINNT\system32\&quot;, then of course got this familiar exception:

Unhandled Exception: System.DllNotFoundException: Unable to load DLL
(libgtk-win32-2.0-0.dll).
   at Gtk.Application.gtk_init(Int32 argc, IntPtr argv)
   at Gtk.Application.Init()
   at gtkhellocon.GtkHelloButton.Main(String[] args)...
Then installed the latest GTK+ Runtime Environment - 2.2.1.2 from
<A HREF="http://www.dropline.net/jade/download.php">http://www.dropline.net/jade/download.php</A> into &quot;C:\gnu\gtk\2.0\&quot; (of course,
it does not matter where you put them on your system). I then issued &quot;set
PATH=C:\gnu\gtk\2.0\lib;%PATH%&quot; on the command console, rerun gtkhellocon
FROM THE SAME COMMAND CONSOLE SESSION, and the GTK libs were loaded from the
new location as below:

Description          Version          Time                Path
                                      2003.01.07 17:57
C:\gnu\gtk\2.0\lib\gtk-2.0\2.2.0\engines\libbluecurve.dll
                                      2002.08.21 22:14
C:\gnu\gtk\2.0\lib\libatk-1.0-0.dll
GIMP Toolkit         2.02.0001.0000   2003.02.07 00:21
C:\gnu\gtk\2.0\lib\libgdk_pixbuf-2.0-0.dll
GIMP Drawing Kit     2.02.0001.0000   2003.02.07 00:38
C:\gnu\gtk\2.0\lib\libgdk-win32-2.0-0.dll
GLib                 2.02.0001.0000   2003.02.05 08:00
C:\gnu\gtk\2.0\lib\libglib-2.0-0.dll
GModule              2.02.0001.0000   2003.02.05 08:07
C:\gnu\gtk\2.0\lib\libgmodule-2.0-0.dll
GObject              2.02.0001.0000   2003.02.05 08:05
C:\gnu\gtk\2.0\lib\libgobject-2.0-0.dll
GIMP Toolkit         2.02.0001.0000   2003.02.07 01:29
C:\gnu\gtk\2.0\lib\libgtk-win32-2.0-0.dll
                                      2002.09.04 02:37
C:\gnu\gtk\2.0\lib\libintl-1.dll
Pango                1.02.0001.0000   2003.02.06 00:16
C:\gnu\gtk\2.0\lib\libpango-1.0-0.dll
PangoWin32           1.02.0001.0000   2003.02.06 00:17
C:\gnu\gtk\2.0\lib\libpangowin32-1.0-0.dll
                                      2003.02.06 00:17
C:\gnu\gtk\2.0\lib\pango\1.2.0\modules\pango-basic-win32.dll
Regarding &gt;&gt; BTW: Is it normal that the Command Button gets brighter when I
mouse with my mouse over it? I am not sure but I have had the same effect
running PHP-GTK (<A HREF="http://gtk.php.net/download.php">http://gtk.php.net/download.php</A>) on Windows - Pieter


----------------------------------------------------------------------------
----

&quot;set PATH=C:\gnu\gtk\2.0\lib;%PATH%&quot; seems to be the best solution, because
it works on all windows versions, doesn't it? If I understand you right,
this command is the same as - programmers would say - NewPath =
&quot;C:\gnu\gtk\2.0\lib;&quot; + OldPath; Am I also right there? Another question
referring to this: How long is this command valid? I mean: If I start my
programm 1000x in one windows session, is my PATH-variable now more than
1000 paths long? Even after rebooting? (no, this makes no sense...?) Or how
long is it really valid? Thank you! - Andi


----------------------------------------------------------------------------
----

OK, question already answered. Another question: Is it possible to call this
command within C#.NET?
System.Diagnostics.Process.Start(@&quot;set PATH=C:\mono\lib\;%PATH%&quot;);
of course does not work. Any ideas? - Andi


----------------------------------------------------------------------------
----

At this stage, I would suggest the overall best strategy is to &quot;permanently&quot;
place the location of the GTK+ support DLL's on the system path. This is
done as you described on WinNT/2K/XP, via the &quot;System Properties&quot; dialog
(incidentaly, one can also get to it by right-clicking on &quot;My
Computer--&gt;Properties&quot; in Windows Explorer), or by editing the AUTOEXEC.BAT
file on Win9x/ME. Of course, the GTK+ installer application should already
be doing this, but there are several of them around. Since the GTK+ support
DLL's, i.e. NOT the GTK# assemblies per se, are native, &quot;unmanaged&quot;
executable files, they cannot be distributed as proper .NET &quot;shared
assemblies&quot;. Unless, of course, GTK+ itself was re-developed/ported to
Managed C++ using MSVC++.NET. Should the whole of GTK# plus GTK+ plus CYGWIN
(the Win32 POSIX layer) plus plus (;-) be recreated as .NET Shared
Assemblies and signed as Strong Named Assemblies with a public/private key
pair, then the .NET Framework itself would be able to find these assemblies
regardless from where applications used them on a system. - Pieter


----------------------------------------------------------------------------
----

The Gtk# 0.10 installer provides a method called
GtkSharpRuntimeEnvironment.Init() doing all the PATH munging described above
automagically. To use the method you have to link
GtkSharpRuntimeEnvironment.dll into your assembly. - Mathias


----------------------------------------------------------------------------
----

Iam having a problem with gtk# and Visual studio 2003. No matter what I do
it always says: »Metadata file 'c:\Program Files\Common
Files\Gtk#\1.0\atk-sharp.dll' could not be opened -- 'Error importing module
'StrongName.netmodule' of assembly 'c:\Program Files\Common
Files\Gtk#\1.0\atk-sharp.dll' -- The system cannot find the file specified.
'«. It works well with mono 0.25 though. - RoK



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="003409.html">[Gtk-sharp-list] ok you got me, I'm lost!
</A></li>
	<LI> Next message: <A HREF="003406.html">[Gtk-sharp-list] Problems finding gtkhtml-sharp
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3411">[ date ]</a>
              <a href="thread.html#3411">[ thread ]</a>
              <a href="subject.html#3411">[ subject ]</a>
              <a href="author.html#3411">[ author ]</a>
         </LI>
       </UL>
</body></html>
