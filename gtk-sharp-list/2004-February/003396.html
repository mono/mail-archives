<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] PATCH: speed up treeview and managed values
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:bmaurer%40users.sourceforge.net">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="003395.html">
   <LINK REL="Next"  HREF="003375.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] PATCH: speed up treeview and managed values
   </H1>
    <B>Ben Maurer
    </B> 
    <A HREF="mailto:bmaurer%40users.sourceforge.net"
       TITLE="[Gtk-sharp-list] PATCH: speed up treeview and managed values">bmaurer@users.sourceforge.net
       </A><BR>
    <I>Mon, 16 Feb 2004 11:49:09 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="003395.html">[Gtk-sharp-list] PATCH: speed up treeview and managed values
</A></li>
        <LI> Next message: <A HREF="003375.html">[Gtk-sharp-list] Problems with GTk# on win2k
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3396">[ date ]</a>
              <a href="thread.html#3396">[ thread ]</a>
              <a href="subject.html#3396">[ subject ]</a>
              <a href="author.html#3396">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Paolo,

Thank you, as always, for your feedback.

On Mon, 2004-02-16 at 07:03, Paolo Molaro wrote:
&gt;<i> On 02/15/04 Ben Maurer wrote:
</I>&gt;<i> &gt; 	HASH_INSERT_INT (ref_table, handle, HASH_LOOKUP_INT (ref_table, handle) + 1);
</I>&gt;<i> This is completely thread-unsafe (the original code is, too, but the
</I>&gt;<i> race window is much smaller). Refcounts should be handled from C# code
</I>&gt;<i> (using Interlocked.Increment() etc).
</I>Yep, it is absolutely thread unsafe. However, because an unref on a
GValue could cause an unref on a GUI object, it must be done from the
GUI thread. Thus, this operation may *only* be done from one thread.

&gt;<i> As for the boxing overhead: it's probably possible to avoid it or we
</I>&gt;<i> might want to wait and fix it when generics is implemented.
</I>
Am wondering how you suggest we avoid it. I mean, we could do our own
hashtable impl, but ick, I would rather write a few lines of C. And
given that we not only have to wait for Mono's generics but also for MS
to release theirs and for it to become widely used enough that people
upgrade, that may be quite a long wait.

-- Ben


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="003395.html">[Gtk-sharp-list] PATCH: speed up treeview and managed values
</A></li>
	<LI> Next message: <A HREF="003375.html">[Gtk-sharp-list] Problems with GTk# on win2k
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3396">[ date ]</a>
              <a href="thread.html#3396">[ thread ]</a>
              <a href="subject.html#3396">[ subject ]</a>
              <a href="author.html#3396">[ author ]</a>
         </LI>
       </UL>
</body></html>
