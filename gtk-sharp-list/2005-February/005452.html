<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] GTK# app &quot;hanging&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jonpryor%40vt.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="005451.html">
   <LINK REL="Next"  HREF="005455.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] GTK# app &quot;hanging&quot;
   </H1>
    <B>Jonathan Pryor
    </B> 
    <A HREF="mailto:jonpryor%40vt.edu"
       TITLE="[Gtk-sharp-list] GTK# app &quot;hanging&quot;">jonpryor@vt.edu
       </A><BR>
    <I>Tue, 22 Feb 2005 06:54:42 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="005451.html">[Gtk-sharp-list] GTK# app &quot;hanging&quot;
</A></li>
        <LI> Next message: <A HREF="005455.html">[Gtk-sharp-list] GTK# app &quot;hanging&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5452">[ date ]</a>
              <a href="thread.html#5452">[ thread ]</a>
              <a href="subject.html#5452">[ subject ]</a>
              <a href="author.html#5452">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 2005-02-22 at 10:46 +0000, Manuel Capinha wrote:
&gt;<i> The watcher object is threaded and is responsible for updating the
</I>&gt;<i> images. This is done by creating a WebRequest object that points to
</I>&gt;<i> the image in a webserver. The Gdk.Image object is updated with:
</I>&gt;<i> 
</I>&gt;<i>     image.Pixbuf = new Gdk.Pixbuf(request.GetResponse().GetResponseStream());
</I>
Assuming that the thread that executes the above is NOT your GUI thread,
that is your problem. :-)

In GTK+/Gtk#, you can only update the GUI from the GUI thread.  All
other threads MUST NOT modify the GUI, as this will cause random hangs
(like you're seeing).

The solution is to add a callback to the GUI thread which will update
the GUI.  Callbacks can be added via GLiub.Timeout.Add.

In C# 2.0, you could do:

	Stream stream = request.GetResponse().GetResponseStream();
	GLib.Timeout.Add (0, delegate {
		image.Pixbuf = new Gdk.Pixbuf (stream);
	});

C# 1.1 implementations are left as a problem for the reader. :-)

 - Jon



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="005451.html">[Gtk-sharp-list] GTK# app &quot;hanging&quot;
</A></li>
	<LI> Next message: <A HREF="005455.html">[Gtk-sharp-list] GTK# app &quot;hanging&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5452">[ date ]</a>
              <a href="thread.html#5452">[ thread ]</a>
              <a href="subject.html#5452">[ subject ]</a>
              <a href="author.html#5452">[ author ]</a>
         </LI>
       </UL>
</body></html>
