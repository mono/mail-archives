<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Mono compile problem with &quot; Use	of	unassigned	local variable&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Mono%20compile%20problem%20with%20%22%20Use%0A%09of%09unassigned%09local%20variable%22&In-Reply-To=e97636410612100120m32ce06bcv3b9b8e4528251b6a%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007619.html">
   <LINK REL="Next"  HREF="007621.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Mono compile problem with &quot; Use	of	unassigned	local variable&quot;</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Mono%20compile%20problem%20with%20%22%20Use%0A%09of%09unassigned%09local%20variable%22&In-Reply-To=e97636410612100120m32ce06bcv3b9b8e4528251b6a%40mail.gmail.com"
       TITLE="[Gtk-sharp-list] Mono compile problem with &quot; Use	of	unassigned	local variable&quot;">jonpryor at vt.edu
       </A><BR>
    <I>Sun Dec 10 10:08:22 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="007619.html">[Gtk-sharp-list] Mono compile problem with &quot; Use of unassigned	local variable&quot;
</A></li>
        <LI>Next message: <A HREF="007621.html">[Gtk-sharp-list] MDI Solution?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7623">[ date ]</a>
              <a href="thread.html#7623">[ thread ]</a>
              <a href="subject.html#7623">[ subject ]</a>
              <a href="author.html#7623">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, 2006-12-10 at 09:20 +0000, Peter Morgan wrote:
&gt;<i> The probem is with the selected row.. I'm trying to get the current
</I>&gt;<i> iter, however the compiler dails to compile with the error
</I>&gt;<i> glade.cs (289,38): error CS0165: Use of unassigned local variable
</I>&gt;<i> `currIter'
</I>&gt;<i> Compilation failed: 2 error(s), 3 warnings
</I>
The compiler's flow analysis isn't as good as ours.  (Alternatively,
it's better than ours...)

For example, the compiler doesn't know that currIter is valid when
iterFound is true; it only follows assignment for variables
individually.

So what the compiler sees is this:

	TreeIter currIter;
	// ...
	foreach(TreePath tPath in treePaths){
	    if(this.usersListStore.GetIter(out currIter, tPath)) {
		// currIter is valud here
	        Console.WriteLine(&quot;YES&quot;);
	        iterFound = true; 
	    }
	}
	// ...
	// state of currIter here?
	this.treeView.Selection.SelectIter(currIter); 
	

But if `treePaths' is empty, no loop iterations will occur, so currIter
will remain uninitialized.  The compiler knows this, assumes the worst,
and believes that currIter won't be initialized by the end of the
`foreach' block.  So the compiler is correct, in a worst-case scenario.
You've protected against this by using iterFound, but the compiler
doesn't know that.

The solution is to initialize currIter:

	TreeIter currIter = new TreeIter ();

This will let the compiler know that it was actually initialized.
You'll still need `iterFound' to know if it is set to an interesting
value (the default constructor won't be an &quot;interesting value&quot;), but
this will please the compiler.

 - Jon


</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007619.html">[Gtk-sharp-list] Mono compile problem with &quot; Use of unassigned	local variable&quot;
</A></li>
	<LI>Next message: <A HREF="007621.html">[Gtk-sharp-list] MDI Solution?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7623">[ date ]</a>
              <a href="thread.html#7623">[ thread ]</a>
              <a href="subject.html#7623">[ subject ]</a>
              <a href="author.html#7623">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
