<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Frame in Frame assertion errors
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rick%40vanosten.net">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000793.html">
   <LINK REL="Next"  HREF="000802.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Frame in Frame assertion errors
   </H1>
    <B>vanosten
    </B> 
    <A HREF="mailto:rick%40vanosten.net"
       TITLE="[Gtk-sharp-list] Frame in Frame assertion errors">rick@vanosten.net
       </A><BR>
    <I>07 Jan 2003 18:00:14 +0100</I>
    <P><UL>
        <LI> Previous message: <A HREF="000793.html">[Gtk-sharp-list] glade# binary
</A></li>
        <LI> Next message: <A HREF="000802.html">[Gtk-sharp-list] Frame in Frame assertion errors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#795">[ date ]</a>
              <a href="thread.html#795">[ thread ]</a>
              <a href="subject.html#795">[ subject ]</a>
              <a href="author.html#795">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

I am observing a strange behaviour in my application: I get assertion
errors in some situations when a Frame is inside a Frame
To better describe the problem (it took me hours to get to the point) I
made a sample application, which is a very stripped down version of mye
original app.

# When the program is compiled as is then everything works fine (i.e. a
click on MenuItem &quot;Replace&quot; replaces the central widget with a new one.
# When line 96 is no more commented then I get the following error in
the command window, but everything else works as expected:
(&lt;unknown&gt;:26766): Gtk-CRITICAL **: file gtkcontainer.c: line 845
(gtk_container_add): assertion `GTK_IS_CONTAINER (container)' failed
# When additionally line 83 instead of line 84 is commented out then I
both get the following assertion errors and the label &quot;Smile&quot; is not
shown (instead of label &quot;Look&quot;):
(&lt;unknown&gt;:26770): Gtk-CRITICAL **: file gtkcontainer.c: line 845
(gtk_container_add): assertion `GTK_IS_CONTAINER (container)' failed

(&lt;unknown&gt;:26770): Gtk-CRITICAL **: file gtkbox.c: line 359
(gtk_box_pack_start): assertion `GTK_IS_WIDGET (child)' failed

=&gt; Does this mean that the use of Frame inside of Frame is a bad idea?
What should I use instead? (Ultimately the method
&quot;EditView::InitializeMainF&quot; should be abstract and WelcomeView would
implement it - but this is another story ;-)


I am using gtk# 0.6, mono 0.17 in debian unstable (i386).

using System;
using System.Collections;
using System.Text;

using Gtk;
using GtkSharp;

public class MyApp : Window {

    private Widget mainWidget;
    private VBox mainBox;
    private int count = 1;

    public MyApp(string title) : base(title) {
        this.SetDefaultSize(800, 600); //width, height
        this.DeleteEvent += new DeleteEventHandler(OnWindowDelete);
        mainBox = new VBox(false, 2);
        
        //menu bar with one menu
        MenuBar mb = new MenuBar();
        Menu fileMenu = new Menu();
        MenuItem fileMenuMI = new MenuItem(&quot;_File&quot;);
        MenuItem replaceMI = new MenuItem(&quot;_Replace&quot;);
        replaceMI.Activated += new EventHandler(OnReplace);
        mb.Append(fileMenuMI);
        fileMenuMI.Submenu = fileMenu;
        fileMenu.Append(replaceMI);
        mainBox.PackStart(mb, false, false, 0);
        
        //rest of gui
        this.SetMainView(new WelcomeView(count));
        this.Add(mainBox);
        this.ShowAll();
    } //END public DMyApp(string)

    public static int Main(string[] args) {
        Application.Init();
        MyApp app = new MyApp(&quot;Hello&quot;);
        Application.Run();
        return 0;
    } //END public static int Main(string[])

    private void SetMainView(Frame aFrame) {
        //remove existing
        if (null != mainWidget) {
            mainBox.Remove(mainWidget);
            Console.WriteLine(&quot;Removed widget&quot;);
        }
        mainWidget = aFrame;
        //add new
        mainBox.PackStart(aFrame, true, true, 0);
        Console.WriteLine(&quot;Added frame&quot;);
        aFrame.ShowAll();
    } //private void SetMainView(Frame)

    //---- EventHandlers -------------------------------------/
    
    private void OnWindowDelete(object obj, DeleteEventArgs args) {
        Application.Quit();
        args.RetVal = true;
    }   //END private void OnWindowDelete(object, DeleteEventArgs)
    
    private void OnReplace(object o, EventArgs args) {
        count++;
        this.SetMainView(new WelcomeView(count));;
    } //private void OnReplace(object, EventArgs)
} //END public class MyApp : Window

public class WelcomeView : EditView {
    
    public WelcomeView(int aCount) : base(&quot;Replace me: &quot; + aCount) {
    } //END public WelcomeView()
} //END public class WelcomeView : EditView

public class EditView : Frame {
    
    private Frame mainF;
        
    public EditView(string aTitle) : base(aTitle) {
        VBox vbox = new VBox(false, 5);
        mainF = new Frame();
        InitializeMainF();
        vbox.PackStart (new Label(&quot;Look&quot;), true, true, 5);
        //vbox.PackStart (mainF, true, true, 5);
        
        //ButtonBox
        HButtonBox buttonBox = new HButtonBox();
        Button addB = new Button(&quot;_Add&quot;);
        buttonBox.Add(addB);
        vbox.PackStart(buttonBox, true, false, 5);

        this.Add(vbox);
    } //END public WelcomeView()
    
    private void InitializeMainF() {
        //mainF.Add(new Label(&quot;Smile&quot;));
    } //END private void InitializeMainF()
} //END public EditView : Frame




</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000793.html">[Gtk-sharp-list] glade# binary
</A></li>
	<LI> Next message: <A HREF="000802.html">[Gtk-sharp-list] Frame in Frame assertion errors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#795">[ date ]</a>
              <a href="thread.html#795">[ thread ]</a>
              <a href="subject.html#795">[ subject ]</a>
              <a href="author.html#795">[ author ]</a>
         </LI>
       </UL>
</body></html>
