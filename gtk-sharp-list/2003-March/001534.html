<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] [Patch, etc] minimal pkgconfig support
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:charles%40reptile.ca">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="001533.html">
   <LINK REL="Next"  HREF="001538.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] [Patch, etc] minimal pkgconfig support
   </H1>
    <B>Charles Iliya Krempeaux
    </B> 
    <A HREF="mailto:charles%40reptile.ca"
       TITLE="[Gtk-sharp-list] [Patch, etc] minimal pkgconfig support">charles@reptile.ca
       </A><BR>
    <I>26 Mar 2003 22:23:39 -0800</I>
    <P><UL>
        <LI> Previous message: <A HREF="001533.html">[Gtk-sharp-list] [Patch, etc] minimal pkgconfig support
</A></li>
        <LI> Next message: <A HREF="001538.html">[Gtk-sharp-list] [Patch, etc] minimal pkgconfig support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1534">[ date ]</a>
              <a href="thread.html#1534">[ thread ]</a>
              <a href="subject.html#1534">[ subject ]</a>
              <a href="author.html#1534">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

On Wed, 2003-03-26 at 21:30, Mike Kestner wrote:
&gt;<i> On Tue, 2003-03-25 at 23:53, Charles Iliya Krempeaux wrote:
</I>&gt;<i> 
</I>&gt;<i> Hi Charles,
</I>&gt;<i> 
</I>&gt;<i> &gt; There was one naming convention I used, because of a bit of
</I>&gt;<i> &gt; naming conflict.  For each of the assemblies, there is a
</I>&gt;<i> &gt; pkgconfig file.  Specifically...
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;     Art#     -&gt;  art-sharp.pc
</I>&gt;<i> &gt;     Atk#     -&gt;  atk-sharp.pc
</I>&gt;<i> 
</I>&gt;<i> Oy, that's a lot of pc's.  I'm not sure we need to provide granularity
</I>&gt;<i> below Gtk, so we can combine glib, pango, atk, gdk, and gtk.  Maybe we
</I>&gt;<i> should base the granularity on the configure checks?
</I>
I disagree.  I explain why later in this message.


&gt;<i> &gt; However, this leave us with a problem.  What do we call the
</I>&gt;<i> &gt; entire package as a whole?  Following what we has been done
</I>&gt;<i> &gt; with the Mono Hand Book (a.k.a. the MonkeyGuide), I've called
</I>&gt;<i> &gt; the entire package gnome.net and made the gapi .pc file:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;     gnome.net-gapi.pc
</I>&gt;<i> 
</I>&gt;<i> gapi.pc should be fine.  We are installing a file in bin called gapi.pl,
</I>&gt;<i> so if there are namespacing issues they will already be hitting us
</I>&gt;<i> elsewhere.
</I>
OK... I'll do that.


&gt;<i> &gt; Now, having said all of that, I want to make it so that doing a:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;     pkg-config --libs gdk-sharp
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Returns the assemblies you need.  But there are some problems
</I>&gt;<i> &gt; with this that need to be worked out first.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; (Most of these are related to the fact that Mono, Portable.NET, and
</I>&gt;<i> &gt; MS's csc all use different switches to do the same thing.  And that
</I>&gt;<i> &gt; Mono likes to put whitespace before the -L switch.  But I'll deal
</I>&gt;<i> &gt; with this in a future Patch.)
</I>&gt;<i> 
</I>&gt;<i> mcs and csc should be able to use identical switches.  I think mcs
</I>&gt;<i> emulates all the csc switches now.
</I>
I don't think Portable.NET's cscc handles those switches though.
(I don't want Portable.NET to be left out.)

(We could always modify pkgconfig to maybe check an environment
variable, and then output the switches in a format that cscc
understands.)


&gt;<i> &gt; So... is it OK to commit this.  (Or should I rename anything?  Etc?)
</I>&gt;<i> 
</I>&gt;<i> We need to rethink the granularity a bit.  Anyone else have any opinions
</I>&gt;<i> on this?
</I>
I do.

The reason I created so many different .pc files, is that so the user
could bind their .exe (or .dll) file to a minimum set of .dll's.

So, for example, if I wanted to only use GnomeVFS#, then I could
do a:

    pkg-config --libs gnomevfs-sharp

And this would any bring in the .dll's that I need to use for
GnomeVFS#.  (It wouldn't bring in gnome-sharp.dll.
It wouldn't bring in pango-sharp.dll.  Etc.)

So... basically having this amount of .pc files is
to make it so only a minimum set of .dll files
are binded to your .exe (of .dll) file.


&gt;<i> Are we breaking ground and setting precedents here that the
</I>&gt;<i> rest of the mono project should be consulted about?
</I>
Yes.  Before I did this, I asked on #mono on what the convention
was for pkgconfig.  Specifically, I was trying to find out if
people were using the --libs option, the --cflags option, or
something else, to bring in assemblies.

&gt;<i>From what I heard (from #mono) there was NO convention yet.  So
</I>I arbitrarily choose to use --libs.  The people who I was talking
to on #mono were OK with this.  (Since it made more sense than
the --cflags option.)


&gt;<i> Since pkg-config is
</I>&gt;<i> primarily targetted at C projects, maybe we need to be considering
</I>&gt;<i> cooking a different solution that works better for the C# realm?
</I>
IMO, I think we need our own pkgconfig flag.  Maybe an --assemblies
flag.  And then we'd do stuff like:

    pkg-config --assemblies gnome-sharp

IMO, I don't think we should ditch pkg-config.  pkg-config already
plays a large role with the auto* tools.

Adding a new flag to it (and a new type of entry in the
.pc files, for assemblies) should probably be sufficient.

What do you think?


See ya

-- 
     Charles Iliya Krempeaux, BSc
     <A HREF="mailto:charles@reptile.ca">charles@reptile.ca</A>

________________________________________________________________________
 Reptile Consulting &amp; Services    604-REPTILE    <A HREF="http://www.reptile.ca/">http://www.reptile.ca/</A>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="001533.html">[Gtk-sharp-list] [Patch, etc] minimal pkgconfig support
</A></li>
	<LI> Next message: <A HREF="001538.html">[Gtk-sharp-list] [Patch, etc] minimal pkgconfig support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1534">[ date ]</a>
              <a href="thread.html#1534">[ thread ]</a>
              <a href="subject.html#1534">[ subject ]</a>
              <a href="author.html#1534">[ author ]</a>
         </LI>
       </UL>
</body></html>
