<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] [Patch] gnome/Program.custom
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:charles%40reptile.ca">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="001424.html">
   <LINK REL="Next"  HREF="001465.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] [Patch] gnome/Program.custom
   </H1>
    <B>Charles Iliya Krempeaux
    </B> 
    <A HREF="mailto:charles%40reptile.ca"
       TITLE="[Gtk-sharp-list] [Patch] gnome/Program.custom">charles@reptile.ca
       </A><BR>
    <I>15 Mar 2003 13:15:27 -0800</I>
    <P><UL>
        <LI> Previous message: <A HREF="001424.html">[Gtk-sharp-list] [Patch] gnome/Program.custom
</A></li>
        <LI> Next message: <A HREF="001465.html">[Gtk-sharp-list] [Patch] gnome/Program.custom
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1435">[ date ]</a>
              <a href="thread.html#1435">[ thread ]</a>
              <a href="subject.html#1435">[ subject ]</a>
              <a href="author.html#1435">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--=-Od4XKKaW4PgFK0wC82ig
Content-Type: multipart/alternative; boundary=&quot;=-s2jnaNsQW8/5KHWbZiTy&quot;


--=-s2jnaNsQW8/5KHWbZiTy
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

Hello,

OK, how's this Patch.

The Patch makes it so, by default, using Gnome.Program.Run(Gnome.App)
will NOT have it so the program will quit when you generate a
DeleteEvent.  (Which is the way you wanted it.)

However, (as the way I wanted it) I still tried to make things easy for
new developers.  So, I made a property (of Gnome.Program) that you can
use to make it so the program will infact Quit, when a DeleteEvent is
generated.)

The code below shows how it would be done.

    class HelloWorld
    {
            static void Main(string[] args)
            {
                    Gnome.Program program =
                    new Gnome.Program(&quot;Hello World&quot;, &quot;1.0&quot;,
Gnome.Modules.UI, args);

                    Gnome.App app = new Gnome.App(&quot;Hello World&quot;, &quot;Hello
World&quot;);
 
                    program.QuitOnDeleteEvent = true;
                    program.Run(app);
            }
    }

By default, the QuitOnDeleteEvent property is set to false... so it will
behave as you wanted it.  But if the user sets QuitOnDeleteEvent to
true, as in the code above, then it

(Setting QuitOnDeleteEvent to false, anywhere in the program, stops the
Quiting behaviour, as is expected.)


On Fri, 2003-03-14 at 18:19, Mike Kestner wrote:

&gt;<i> On Fri, 2003-03-14 at 14:54, Charles Iliya Krempeaux wrote:
</I>&gt;<i>  
</I>&gt;<i> &gt; &gt; Basically, it makes it so, if you want to write a simple Gnome
</I>&gt;<i> &gt; &gt; application, you don't have to do through all the complexities of
</I>&gt;<i> &gt; &gt; connecting Gnome.App's DeleteEvent event to a method or procedure that
</I>&gt;<i> &gt; &gt; quits the program.  And don't have to do a ShowAll().  (This is a
</I>&gt;<i> &gt; &gt; WinForms style thing.)
</I>&gt;<i> 
</I>&gt;<i> I like the idea of a Run(App) overload, but I think you throw away some
</I>&gt;<i> utility by also hooking up to DeleteEvent.  Most real apps are going to
</I>&gt;<i> want to react to DeleteEvent with something other than a simple Quit().
</I>&gt;<i> Any document-based app will want to warn for dirty docs, and any
</I>&gt;<i> multi-window app will not want to quit the app if another window is
</I>&gt;<i> open. 
</I>&gt;<i> 
</I>&gt;<i> I also am not charged about the naming choice for the
</I>&gt;<i> DeleteEventHandler.  Naming it Quit makes it look like an overload for
</I>&gt;<i> the public function, which it is not. It's an event handler.  Besides,
</I>&gt;<i> this helper method is in the wrong place.  It should be on Gnome.App if
</I>&gt;<i> anywhere.  I suppose you could add a DefaultDeleteEventHandler() method 
</I>&gt;<i> to Gnome.App if you really want to provide a shorthand for this, but I
</I>&gt;<i> doubt it is going to be used enough to warrant adding it.
</I>&gt;<i> 
</I>&gt;<i> Feel free to commit the Run(App) overload, without the event handler
</I>&gt;<i> hookup.
</I>&gt;<i> 
</I>&gt;<i> Thanks, 
</I>
-- 
     Charles Iliya Krempeaux, BSc
     <A HREF="mailto:charles@reptile.ca">charles@reptile.ca</A>

________________________________________________________________________
 Reptile Consulting &amp; Services    604-REPTILE    <A HREF="http://www.reptile.ca/">http://www.reptile.ca/</A>

--=-s2jnaNsQW8/5KHWbZiTy
Content-Type: text/html; charset=utf-8

&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 TRANSITIONAL//EN&quot;&gt;
&lt;HTML&gt;
&lt;HEAD&gt;
  &lt;META HTTP-EQUIV=&quot;Content-Type&quot; CONTENT=&quot;text/html; CHARSET=UTF-8&quot;&gt;
  &lt;META NAME=&quot;GENERATOR&quot; CONTENT=&quot;GtkHTML/1.1.8&quot;&gt;
&lt;/HEAD&gt;
&lt;BODY&gt;
Hello,&lt;BR&gt;
&lt;BR&gt;
OK, how's this Patch.&lt;BR&gt;
&lt;BR&gt;
The Patch makes it so, by default, using &lt;TT&gt;Gnome.Program.Run(Gnome.App)&lt;/TT&gt; will NOT have it so the program will quit when you generate a &lt;TT&gt;DeleteEvent&lt;/TT&gt;.&amp;nbsp; (Which is the way you wanted it.)&lt;BR&gt;
&lt;BR&gt;
However, (as the way I wanted it) I still tried to make things easy for new developers.&amp;nbsp; So, I made a property (of &lt;TT&gt;Gnome.Program)&lt;/TT&gt; that you can use to make it so the program will infact Quit, when a &lt;TT&gt;DeleteEvent&lt;/TT&gt; is generated.)&lt;BR&gt;
&lt;BR&gt;
The code below shows how it would be done.&lt;BR&gt;
&lt;BR&gt;
&lt;FONT SIZE=&quot;2&quot;&gt;&lt;TT&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; class HelloWorld&lt;BR&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;BR&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; static void Main(string[] args)&lt;BR&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; {&lt;BR&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Gnome.Program program =&lt;BR&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; new Gnome.Program(&amp;quot;Hello World&amp;quot;, &amp;quot;1.0&amp;quot;, Gnome.Modules.UI, args);&lt;BR&gt;
&lt;BR&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Gnome.App app = new Gnome.App(&amp;quot;Hello World&amp;quot;, &amp;quot;Hello World&amp;quot;);&lt;BR&gt;
 &lt;BR&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; program.QuitOnDeleteEvent = true;&lt;BR&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; program.Run(app);&lt;BR&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;BR&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;/TT&gt;&lt;/FONT&gt;&lt;BR&gt;
&lt;BR&gt;
By default, the &lt;TT&gt;QuitOnDeleteEvent&lt;/TT&gt; property is set to &lt;TT&gt;false&lt;/TT&gt;... so it will behave as you wanted it.&amp;nbsp; But if the user sets &lt;TT&gt;QuitOnDeleteEvent&lt;/TT&gt; to true, as in the code above, then it&lt;BR&gt;
&lt;BR&gt;
(Setting &lt;TT&gt;QuitOnDeleteEvent&lt;/TT&gt; to false, anywhere in the program, stops the Quiting behaviour, as is expected.)&lt;BR&gt;
&lt;BR&gt;
&lt;BR&gt;
On Fri, 2003-03-14 at 18:19, Mike Kestner wrote:
&lt;BLOCKQUOTE TYPE=CITE&gt;
&lt;PRE&gt;&lt;FONT COLOR=&quot;#737373&quot; SIZE=&quot;3&quot;&gt;&lt;I&gt;On Fri, 2003-03-14 at 14:54, Charles Iliya Krempeaux wrote:
 
&amp;gt;<i> &amp;gt; Basically, it makes it so, if you want to write a simple Gnome
</I>&amp;gt;<i> &amp;gt; application, you don't have to do through all the complexities of
</I>&amp;gt;<i> &amp;gt; connecting Gnome.App's DeleteEvent event to a method or procedure that
</I>&amp;gt;<i> &amp;gt; quits the program.  And don't have to do a ShowAll().  (This is a
</I>&amp;gt;<i> &amp;gt; WinForms style thing.)
</I>
I like the idea of a Run(App) overload, but I think you throw away some
utility by also hooking up to DeleteEvent.  Most real apps are going to
want to react to DeleteEvent with something other than a simple Quit().
Any document-based app will want to warn for dirty docs, and any
multi-window app will not want to quit the app if another window is
open. 

I also am not charged about the naming choice for the
DeleteEventHandler.  Naming it Quit makes it look like an overload for
the public function, which it is not. It's an event handler.  Besides,
this helper method is in the wrong place.  It should be on Gnome.App if
anywhere.  I suppose you could add a DefaultDeleteEventHandler() method 
to Gnome.App if you really want to provide a shorthand for this, but I
doubt it is going to be used enough to warrant adding it.

Feel free to commit the Run(App) overload, without the event handler
hookup.

Thanks, &lt;/I&gt;&lt;/FONT&gt;&lt;/PRE&gt;
&lt;/BLOCKQUOTE&gt;
&lt;PRE&gt;&lt;TABLE CELLSPACING=&quot;0&quot; CELLPADDING=&quot;0&quot; WIDTH=&quot;100%&quot;&gt;
&lt;TR&gt;
&lt;TD&gt;
&lt;PRE&gt;-- 
     Charles Iliya Krempeaux, BSc
     <A HREF="mailto:charles@reptile.ca">charles@reptile.ca</A>

________________________________________________________________________
 Reptile Consulting &amp;amp; Services    604-REPTILE    <A HREF="http://www.reptile.ca/</PRE">http://www.reptile.ca/&lt;/PRE</A>&gt;
&lt;/TD&gt;
&lt;/TR&gt;
&lt;/TABLE&gt;
&lt;/PRE&gt;
&lt;/BODY&gt;
&lt;/HTML&gt;

--=-s2jnaNsQW8/5KHWbZiTy--

--=-Od4XKKaW4PgFK0wC82ig
Content-Disposition: attachment; filename=gtk-sharp-New_Gnome.App.Run-Procedure-Version-3.diff
Content-Type: text/x-patch; name=gtk-sharp-New_Gnome.App.Run-Procedure-Version-3.diff; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Index: ChangeLog
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
RCS file: /cvs/public/gtk-sharp/ChangeLog,v
retrieving revision 1.356
diff -u -r1.356 ChangeLog
--- ChangeLog	15 Mar 2003 19:09:52 -0000	1.356
+++ ChangeLog	15 Mar 2003 21:13:37 -0000
@@ -1,3 +1,16 @@
+2003-03-15  Charles Iliya Krempeaux  &lt;<A HREF="mailto:charles@reptile.ca">charles@reptile.ca</A>&gt;
+
+	* gnome/Program.custom : Added a WinForms style
+	  Run() procedure.  (This Run() procedure takes
+	  Gnome.App as a parameter, and takes care of all
+	  the dirty work of calling the ShowAll() method
+	  and [potentially] connecting the event DeleteEvent
+	  to a handler that will close the program.)  Also
+	  added a QuitOnDeleteEvent property to specify if
+	  the Gnome.App passed to Run() will Quit (by
+	  Gnome.Program's hands) when the DeleteEvent is
+	  generated.
+
 2003-03-14  Charles Iliya Krempeaux  &lt;<A HREF="mailto:charles@reptile.ca">charles@reptile.ca</A>&gt;
=20
 	* sources/makefile : Added a &quot;distclean&quot; rule, so
Index: gnome/Program.custom
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
RCS file: /cvs/public/gtk-sharp/gnome/Program.custom,v
retrieving revision 1.5
diff -u -r1.5 Program.custom
--- gnome/Program.custom	15 Oct 2002 21:46:33 -0000	1.5
+++ gnome/Program.custom	15 Mar 2003 21:13:41 -0000
@@ -70,6 +70,34 @@
 	Gtk.Application.Run ();
 }
=20
+public void Run(Gnome.App app)
+{
+        app.DeleteEvent +=3D new GtkSharp.DeleteEventHandler(this.MyDelete=
EventHandler);
+
+        app.ShowAll();
+
+        this.Run();
+}
+
+private bool quit_on_delete_event =3D false;
+
+public bool QuitOnDeleteEvent {
+        get {
+                return this.quit_on_delete_event;
+        }
+
+        set {
+                this.quit_on_delete_event =3D value;
+        }
+}
+
+private void MyDeleteEventHandler(object obj, GtkSharp.DeleteEventArgs arg=
s)
+{
+        if (this.QuitOnDeleteEvent) {
+                this.Quit();
+        }
+}
+
 public void Quit ()
 {
 	Gtk.Application.Quit ();

--=-Od4XKKaW4PgFK0wC82ig--

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="001424.html">[Gtk-sharp-list] [Patch] gnome/Program.custom
</A></li>
	<LI> Next message: <A HREF="001465.html">[Gtk-sharp-list] [Patch] gnome/Program.custom
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1435">[ date ]</a>
              <a href="thread.html#1435">[ thread ]</a>
              <a href="subject.html#1435">[ subject ]</a>
              <a href="author.html#1435">[ author ]</a>
         </LI>
       </UL>
</body></html>
