<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Marshaling question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:lupus%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="001243.html">
   <LINK REL="Next"  HREF="001247.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Marshaling question
   </H1>
    <B>Paolo Molaro
    </B> 
    <A HREF="mailto:lupus%40ximian.com"
       TITLE="[Gtk-sharp-list] Marshaling question">lupus@ximian.com
       </A><BR>
    <I>Tue, 4 Mar 2003 19:30:26 +0100</I>
    <P><UL>
        <LI> Previous message: <A HREF="001243.html">[Gtk-sharp-list] log : make install gtk-sharp
</A></li>
        <LI> Next message: <A HREF="001247.html">[Gtk-sharp-list] mlist: Sample list/grouping widget.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1245">[ date ]</a>
              <a href="thread.html#1245">[ thread ]</a>
              <a href="subject.html#1245">[ subject ]</a>
              <a href="author.html#1245">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 02/27/03 Charles Iliya Krempeaux wrote:
&gt;<i> I am creating C# a method with the following signature:
</I>&gt;<i> 
</I>&gt;<i>    public override int Read(byte[] buffer, int offset, int count);
</I>&gt;<i> 
</I>&gt;<i> Here, &quot;buffer&quot; (will eventually) contain the stuff that got read.  
</I>&gt;<i> &quot;offset&quot; tells you where to start storing stuff in &quot;buffer&quot;.
</I>&gt;<i> (&quot;offset&quot; used a zero based index.)  And &quot;count&quot; is the maximun
</I>&gt;<i> number of bytes to read from the current stream.  Also, it returns
</I>&gt;<i> the total number of bytes read from the stream.
</I>&gt;<i> 
</I>&gt;<i> Now, I'm using this to wrap the GnomeVFS procedure:
</I>&gt;<i> 
</I>&gt;<i>   GnomeVFSResult gnome_vfs_read(GnomeVFSHandle   *handle      ,
</I>&gt;<i>                                 gpointer          buffer      ,
</I>&gt;<i>                                 GnomeVFSFileSize  bytes       ,
</I>&gt;<i>                                 GnomeVFSFileSize *bytes_read );
</I>&gt;<i> 
</I>&gt;<i> The problem I am having is with &quot;buffer&quot; in &quot;gnome_vfs_read&quot;.  I
</I>&gt;<i> need to get a the get at the pointer for &quot;Read&quot;'s buffer.  In
</I>&gt;<i> pseudo code, this is basically what I want to do...
</I>&gt;<i> 
</I>&gt;<i>     public override int Read(byte[] buffer, int offset, int count)
</I>&gt;<i>     {
</I>&gt;<i> 
</I>&gt;<i>         byte * bufferptr = (byte * ) buffer;
</I>&gt;<i> 
</I>&gt;<i>         bufferptr = bufferptr + offset;
</I>&gt;<i> 
</I>&gt;<i>         // ...
</I>&gt;<i> 
</I>&gt;<i> Although, I am not sure how to do this.  Anyone here have any
</I>&gt;<i> ideas?
</I>&gt;<i> 
</I>&gt;<i> (I.e., anyone know how to get a pointer to &quot;buffer&quot;'s memory
</I>&gt;<i> buffer?)
</I>
Use:
	fixed (byte *ss = &amp;buffer [offset]) {
		gnome_vfs_read (handle, ss, ...);
	}

Give or take the proper declaration for gnome_vfs_read.

lupus

-- 
-----------------------------------------------------------------
<A HREF="mailto:lupus@debian.org">lupus@debian.org</A>                                     debian/rules
<A HREF="mailto:lupus@ximian.com">lupus@ximian.com</A>                             Monkeys do it better

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="001243.html">[Gtk-sharp-list] log : make install gtk-sharp
</A></li>
	<LI> Next message: <A HREF="001247.html">[Gtk-sharp-list] mlist: Sample list/grouping widget.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1245">[ date ]</a>
              <a href="thread.html#1245">[ thread ]</a>
              <a href="subject.html#1245">[ subject ]</a>
              <a href="author.html#1245">[ author ]</a>
         </LI>
       </UL>
</body></html>
