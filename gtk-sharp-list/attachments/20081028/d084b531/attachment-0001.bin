using System.Runtime.InteropServices;
using System;
using Gtk;

public class BuilderTest
{
	static void Main ()
	{
		Application.Init ();

		Window w = new MyWindow ();
		w.ShowAll ();
		Application.Run ();
	}

	public class MyWindow : BuilderWindow
	{
		[Builder.Object] Label label1;

		public MyWindow () : base ("builder.ui", "window1")
		{
			label1.Text = "Wow, it works";
		}

		public void HandleButton1Clicked (object o, EventArgs e)
		{
			Console.WriteLine ("Clicked");
		}
	}

	public abstract class BuilderWindow : Gtk.Window
	{
		protected BuilderWindow (string resource_name, string window_name) 
			: this (null, resource_name, window_name)
		{
		}

		protected BuilderWindow (System.Reflection.Assembly assembly, string resource_name, string window_name) 
			: this (new Builder (assembly, resource_name, null), window_name)
		{
		}

		protected BuilderWindow (Builder builder, string window_name) : base (builder.GetRawObject (window_name))
		{
			builder.Autoconnect (this);
		}
	}
}
