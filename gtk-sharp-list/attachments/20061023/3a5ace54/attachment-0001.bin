Index: parser/gapi_pp.pl
===================================================================
--- parser/gapi_pp.pl	(revision 66910)
+++ parser/gapi_pp.pl	(working copy)
@@ -82,7 +82,7 @@
 		} elsif ($line =~ /^extern/) {
 			while ($line !~ /;/) {$line = <INFILE>;}
 		} elsif ($line =~ /^#ifndef\s+\w+_H_*\b/) {
-			while ($line !~ /#define/) {$line = <INFILE>;}
+			while ($line !~ /#define|#endif/) {$line = <INFILE>;}
 		} elsif ($line =~ /$private_regex/) {
 			$nested = 0;
 			while ($line = <INFILE>) {
