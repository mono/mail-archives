using System;
using GLib;

namespace giotest
{
	static class MainClass
	{
		static GLib.MainLoop loop;

		public static void Main (string[] args)
		{
			GLib.GType.Init ();

			VolumeMonitor mon = VolumeMonitor.Default;

			mon.MountAdded += delegate(object o, MountAddedArgs a) {
				Console.WriteLine ("Mount Added: {0}", a.Mount.Name);
				loop.Quit ();
			};
			mon.MountRemoved += delegate(object o, MountRemovedArgs a) {
				Console.WriteLine ("Mount removed: {0}", a.Mount.Name);
				loop.Quit ();
			};

			loop = new GLib.MainLoop ();
			loop.Run ();
		}
	}
}
