<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] monodoc-browser patch
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:spamfrommailing%40freax.org">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="001897.html">
   <LINK REL="Next"  HREF="001899.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] monodoc-browser patch
   </H1>
    <B>Philip Van Hoof
    </B> 
    <A HREF="mailto:spamfrommailing%40freax.org"
       TITLE="[Gtk-sharp-list] monodoc-browser patch">spamfrommailing@freax.org
       </A><BR>
    <I>14 May 2003 14:12:44 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="001897.html">[Gtk-sharp-list] System.Drawing
</A></li>
        <LI> Next message: <A HREF="001899.html">[Gtk-sharp-list] Translations of a project, GetText and the application prefix
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1898">[ date ]</a>
              <a href="thread.html#1898">[ thread ]</a>
              <a href="subject.html#1898">[ subject ]</a>
              <a href="author.html#1898">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--=-ibSdaQKIvap6CU4cYNOD
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

This patch adds some menus and a About-box to the monodoc/browser module
in CVS

cvs diff -u &gt; /home/freax/monodoc_menus.diff


-- 
Philip Van Hoof a.k.a. freax
me at freax dot org
<A HREF="http://www.freax.be">http://www.freax.be</A> -- <A HREF="http://www.freax.eu.org">http://www.freax.eu.org</A> -- <A HREF="http://www.freax.org">http://www.freax.org</A>



--=-ibSdaQKIvap6CU4cYNOD
Content-Disposition: attachment; filename=monodoc_menus.diff
Content-Type: text/plain; name=monodoc_menus.diff; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

? Makefile.in
? autom4te.cache
? file.zip
? mod
? browser/Makefile.in
? browser/browser.gladep
? browser/tree.zip
? class/Makefile.in
? class/tmp
? extras/Makefile.in
? extras/filesource
? extras/filetree
? extras/filezip
Index: AUTHORS
===================================================================
RCS file: /mono/monodoc/AUTHORS,v
retrieving revision 1.1
diff -u -r1.1 AUTHORS
--- AUTHORS	4 Apr 2003 04:33:59 -0000	1.1
+++ AUTHORS	14 May 2003 12:09:53 -0000
@@ -1,2 +1,3 @@
 Miguel de Icaza (<A HREF="mailto:miguel@ximian.com">miguel@ximian.com</A>)
 Duncan Mak (<A HREF="mailto:duncan@ximian.com">duncan@ximian.com</A>)
+Philip Van Hoof (<A HREF="mailto:me@freax.org">me@freax.org</A>)
Index: ChangeLog
===================================================================
RCS file: /mono/monodoc/ChangeLog,v
retrieving revision 1.3
diff -u -r1.3 ChangeLog
--- ChangeLog	14 Apr 2003 22:34:48 -0000	1.3
+++ ChangeLog	14 May 2003 12:09:53 -0000
@@ -1,3 +1,6 @@
+2003-04-14  Philip Van Hoof  &lt;<A HREF="mailto:me@freax.org">me@freax.org</A>&gt;
+	* Added some menus
+
 2003-04-14  Miguel de Icaza  &lt;<A HREF="mailto:miguel@ximian.com">miguel@ximian.com</A>&gt;
 
 	* Makefile.am (bin_SCRIPTS): Install a script `mod' that can be
Index: browser/Makefile.am
===================================================================
RCS file: /mono/monodoc/browser/Makefile.am,v
retrieving revision 1.8
diff -u -r1.8 Makefile.am
--- browser/Makefile.am	19 Apr 2003 22:52:22 -0000	1.8
+++ browser/Makefile.am	14 May 2003 12:09:54 -0000
@@ -6,7 +6,7 @@
 assembler_sources = $(srcdir)/assembler.cs $(shared_sources)
 dump_sources      = $(srcdir)/dump.cs $(shared_sources)
 browser_sources   = $(srcdir)/browser.cs $(srcdir)/history.cs $(shared_sources)
-browser_assemblies = -r:gtk-sharp.dll -r:glade-sharp.dll -r:glib-sharp.dll -r:ICSharpCode.SharpZipLib.dll
+browser_assemblies = -r:gtk-sharp.dll -r:gdk-sharp.dll -r:glade-sharp.dll -r:glib-sharp.dll -r:gnome-sharp.dll -r:ICSharpCode.SharpZipLib.dll
 
 EXTRA_DIST = $(assembler_sources) $(dump_sources) $(browser_sources) browser.glade monodoc.xml mono-ecma.xsl
 
Index: browser/browser.cs
===================================================================
RCS file: /mono/monodoc/browser/browser.cs,v
retrieving revision 1.21
diff -u -r1.21 browser.cs
--- browser/browser.cs	15 Apr 2003 05:23:52 -0000	1.21
+++ browser/browser.cs	14 May 2003 12:09:54 -0000
@@ -14,9 +14,12 @@
 //
 using GLib;
 using Gtk;
+using Gnome;
+using Gdk;
 using GtkSharp;
 using Glade;
 using System;
+using System.IO;
 using System.Collections;
 
 class Browser {
@@ -136,7 +139,7 @@
 		}
 	}
 	
-        void LinkClicked (object o, LinkClickedArgs args)
+	void LinkClicked (object o, LinkClickedArgs args)
 	{
 		LoadUrl (args.Url);
 	}
@@ -207,6 +210,44 @@
 	{
 		Application.Quit ();
 	}
+	
+	public void on_quit_activate (System.Object b, EventArgs e) {
+		Application.Quit ();
+	}
+
+	public void on_copy_activate (System.Object b, EventArgs e) {
+		this.html.Copy ();
+	}
+
+	public void on_about_activate (System.Object b, EventArgs e) {
+		string[] authors = {
+			&quot;Miguel De Icaza &lt;<A HREF="mailto:miguel@ximian.com">miguel@ximian.com</A>&gt;&quot;,
+			&quot;Duncan Mak &lt;<A HREF="mailto:duncan@ximian.com">duncan@ximian.com</A>&gt;&quot;,
+			&quot;Philip Van Hoof &lt;<A HREF="mailto:me@freax.org">me@freax.org</A>&gt;&quot;
+		};
+		string[] documenters = {};
+		Pixbuf logo = new Pixbuf (&quot;/usr/share/pixmaps/gnome-about-logo.png&quot;);
+		// TODO: I have no idea how to do this correctly (how do I know what the --prefix was
+		// and stuff like that?)
+		// Pixbuf logo = new Pixbuf (&quot;pixmaps&quot; + Path.DirectorySeparatorChar + &quot;monodoc-logo.png&quot;);
+		About about = new About(&quot;MonoDoc-browser&quot;, &quot;CVS&quot;, &quot;Copyright (C) 2003&quot;, 
+		&quot;This tool displays documentation in the format used by the ECMA specification&quot;,
+		authors, documenters, &quot;&quot;, logo);
+		about.Show ();
+	}
+
+	public void on_select_all_activate (System.Object b, EventArgs e) {
+		this.html.SelectAll ();
+	}
+
+	public void on_expand_all_activate (System.Object b, EventArgs e) {
+		this.reference_tree.ExpandAll ();
+	}
+
+	public void on_collapse_all_activate (System.Object b, EventArgs e) {
+		this.reference_tree.CollapseAll ();
+	}
+
 }
 
 //
Index: browser/browser.glade
===================================================================
RCS file: /mono/monodoc/browser/browser.glade,v
retrieving revision 1.9
diff -u -r1.9 browser.glade
--- browser/browser.glade	4 Apr 2003 23:49:39 -0000	1.9
+++ browser/browser.glade	14 May 2003 12:09:55 -0000
@@ -2,6 +2,7 @@
 &lt;!DOCTYPE glade-interface SYSTEM &quot;<A HREF="http://glade.gnome.org/glade-2.0.dtd"">http://glade.gnome.org/glade-2.0.dtd&quot;</A>&gt;
 
 &lt;glade-interface&gt;
+&lt;requires lib=&quot;gnome&quot;/&gt;
 
 &lt;widget class=&quot;GtkWindow&quot; id=&quot;window1&quot;&gt;
   &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
@@ -29,6 +30,19 @@
 	      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
 	      &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;_File&lt;/property&gt;
 	      &lt;property name=&quot;use_underline&quot;&gt;True&lt;/property&gt;
+
+	      &lt;child&gt;
+		&lt;widget class=&quot;GtkMenu&quot; id=&quot;menuitem4_menu&quot;&gt;
+
+		  &lt;child&gt;
+		    &lt;widget class=&quot;GtkImageMenuItem&quot; id=&quot;quit&quot;&gt;
+		      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;stock_item&quot;&gt;GNOMEUIINFO_MENU_EXIT_ITEM&lt;/property&gt;
+		      &lt;signal name=&quot;activate&quot; handler=&quot;on_quit_activate&quot; last_modification_time=&quot;Wed, 14 May 2003 11:12:29 GMT&quot;/&gt;
+		    &lt;/widget&gt;
+		  &lt;/child&gt;
+		&lt;/widget&gt;
+	      &lt;/child&gt;
 	    &lt;/widget&gt;
 	  &lt;/child&gt;
 
@@ -37,6 +51,27 @@
 	      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
 	      &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;_Edit&lt;/property&gt;
 	      &lt;property name=&quot;use_underline&quot;&gt;True&lt;/property&gt;
+
+	      &lt;child&gt;
+		&lt;widget class=&quot;GtkMenu&quot; id=&quot;menuitem5_menu&quot;&gt;
+
+		  &lt;child&gt;
+		    &lt;widget class=&quot;GtkImageMenuItem&quot; id=&quot;copy&quot;&gt;
+		      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;stock_item&quot;&gt;GNOMEUIINFO_MENU_COPY_ITEM&lt;/property&gt;
+		      &lt;signal name=&quot;activate&quot; handler=&quot;on_copy_activate&quot; last_modification_time=&quot;Wed, 14 May 2003 11:12:29 GMT&quot;/&gt;
+		    &lt;/widget&gt;
+		  &lt;/child&gt;
+
+		  &lt;child&gt;
+		    &lt;widget class=&quot;GtkMenuItem&quot; id=&quot;select_all&quot;&gt;
+		      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;stock_item&quot;&gt;GNOMEUIINFO_MENU_SELECT_ALL_ITEM&lt;/property&gt;
+		      &lt;signal name=&quot;activate&quot; handler=&quot;on_select_all_activate&quot; last_modification_time=&quot;Wed, 14 May 2003 11:12:29 GMT&quot;/&gt;
+		    &lt;/widget&gt;
+		  &lt;/child&gt;
+		&lt;/widget&gt;
+	      &lt;/child&gt;
 	    &lt;/widget&gt;
 	  &lt;/child&gt;
 
@@ -45,6 +80,29 @@
 	      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
 	      &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;_View&lt;/property&gt;
 	      &lt;property name=&quot;use_underline&quot;&gt;True&lt;/property&gt;
+
+	      &lt;child&gt;
+		&lt;widget class=&quot;GtkMenu&quot; id=&quot;menuitem6_menu&quot;&gt;
+
+		  &lt;child&gt;
+		    &lt;widget class=&quot;GtkMenuItem&quot; id=&quot;collapse_all&quot;&gt;
+		      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;Collapse All&lt;/property&gt;
+		      &lt;property name=&quot;use_underline&quot;&gt;True&lt;/property&gt;
+		      &lt;signal name=&quot;activate&quot; handler=&quot;on_collapse_all_activate&quot; last_modification_time=&quot;Wed, 14 May 2003 12:06:22 GMT&quot;/&gt;
+		    &lt;/widget&gt;
+		  &lt;/child&gt;
+
+		  &lt;child&gt;
+		    &lt;widget class=&quot;GtkMenuItem&quot; id=&quot;expand_all&quot;&gt;
+		      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;Expand All&lt;/property&gt;
+		      &lt;property name=&quot;use_underline&quot;&gt;True&lt;/property&gt;
+		      &lt;signal name=&quot;activate&quot; handler=&quot;on_expand_all_activate&quot; last_modification_time=&quot;Wed, 14 May 2003 12:07:02 GMT&quot;/&gt;
+		    &lt;/widget&gt;
+		  &lt;/child&gt;
+		&lt;/widget&gt;
+	      &lt;/child&gt;
 	    &lt;/widget&gt;
 	  &lt;/child&gt;
 
@@ -53,6 +111,19 @@
 	      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
 	      &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;_Help&lt;/property&gt;
 	      &lt;property name=&quot;use_underline&quot;&gt;True&lt;/property&gt;
+
+	      &lt;child&gt;
+		&lt;widget class=&quot;GtkMenu&quot; id=&quot;menuitem7_menu&quot;&gt;
+
+		  &lt;child&gt;
+		    &lt;widget class=&quot;GtkImageMenuItem&quot; id=&quot;about&quot;&gt;
+		      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;stock_item&quot;&gt;GNOMEUIINFO_MENU_ABOUT_ITEM&lt;/property&gt;
+		      &lt;signal name=&quot;activate&quot; handler=&quot;on_about_activate&quot; last_modification_time=&quot;Wed, 14 May 2003 11:12:29 GMT&quot;/&gt;
+		    &lt;/widget&gt;
+		  &lt;/child&gt;
+		&lt;/widget&gt;
+	      &lt;/child&gt;
 	    &lt;/widget&gt;
 	  &lt;/child&gt;
 	&lt;/widget&gt;

--=-ibSdaQKIvap6CU4cYNOD--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="001897.html">[Gtk-sharp-list] System.Drawing
</A></li>
	<LI> Next message: <A HREF="001899.html">[Gtk-sharp-list] Translations of a project, GetText and the application prefix
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1898">[ date ]</a>
              <a href="thread.html#1898">[ thread ]</a>
              <a href="subject.html#1898">[ subject ]</a>
              <a href="author.html#1898">[ author ]</a>
         </LI>
       </UL>
</body></html>
