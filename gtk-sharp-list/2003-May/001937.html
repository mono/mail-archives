<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Tree/List/GValue improvements
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:rachel%40nullenvoid.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="001936.html">
   <LINK REL="Next"  HREF="001940.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Tree/List/GValue improvements
   </H1>
    <B>Rachel Hestilow
    </B> 
    <A HREF="mailto:rachel%40nullenvoid.com"
       TITLE="[Gtk-sharp-list] Tree/List/GValue improvements">rachel@nullenvoid.com
       </A><BR>
    <I>19 May 2003 21:26:04 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="001936.html">[Gtk-sharp-list] [OT] Glade Tutorial
</A></li>
        <LI> Next message: <A HREF="001940.html">[Gtk-sharp-list] Tree/List/GValue improvements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1937">[ date ]</a>
              <a href="thread.html#1937">[ thread ]</a>
              <a href="subject.html#1937">[ subject ]</a>
              <a href="author.html#1937">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--=-f24xzFWMmCrwpzSFp/rY
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable

So I recently committed some improvements which make it easier to use
the TreeView:

* It is now possible to store managed objects in GValue. This means you
can store your actual data objects inside your Tree Model, rather than
copying their fields to the model manually.
* I added a number of overloads to the TreeStore and ListStore classes
so that you don't have to exlicitly use GLib.Value.
* I added a few convenience methods which make it easier to add columns
and rows.
* TreeStore and ListStore constructors now accept System.Type in
addition to TypeFundamentals.

How to use the new convenience functions
----------------------------------------
I have updated TreeViewDemo.cs in the sample dir to show this.

To add an entire row, call store.AppendValues.
For a list it is:
  iter =3D store.AppendValues (value1, value2, value3, ..);
For a tree it is:
  iter =3D store.AppendValues (parent_iter, value1, value2, value3, ..);

To add a column to a view:
  col =3D view.AppendColumn (title, cell_renderer, attr1_name,
attr1_model_column_number..);
Or:
  col =3D view.AppendColumn (title, cell_renderer, cell_data_func);
The first form is if you want to pass a mapping of cell renderer
attributes to tree model columns. It is modelled after the varargs
convention used by Gtk+ proper.
The second form specifies instead a callback delegate which will be
called whenever the view needs redrawing. In this callback you can set
properties on the cell renderer in the normal .NET fashion. This is
mostly only of use if you are storing managed values in your tree model.

How to use managed value tree models
------------------------------------
This is demonstrated in ManagedTreeViewDemo.cs. The key guidelines are:
* Just as you would normally pass in a type of int, string, etc to your
model constructor, pass in the type of the object you are storing.
* You can store your object in the model like any other value. The model
will hold a reference to your object so that you do not have to worry
about it getting GCed while the model/view are still using it.
* You can retrieve your object by calling store,GetValue (iter,
model_column_number).
* You can copy the object fields to other tree model columns if you
want, but a more convenient way is to use the cell data callback
mechanism. This allows you to set up a virtual column mapping where
multiple view columns all refer back to a single tree model column.

-- Rachel


--=-f24xzFWMmCrwpzSFp/rY
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.7 (GNU/Linux)

iD8DBQA+yZI7apOJdUj74F4RAoA6AJ96sMI2yb5h6ErUdlRaUaBws8f0yACgr5cl
MPqz3psXNHe8VrtnTHe+SqM=
=YTlD
-----END PGP SIGNATURE-----

--=-f24xzFWMmCrwpzSFp/rY--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="001936.html">[Gtk-sharp-list] [OT] Glade Tutorial
</A></li>
	<LI> Next message: <A HREF="001940.html">[Gtk-sharp-list] Tree/List/GValue improvements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1937">[ date ]</a>
              <a href="thread.html#1937">[ thread ]</a>
              <a href="subject.html#1937">[ subject ]</a>
              <a href="author.html#1937">[ author ]</a>
         </LI>
       </UL>
</body></html>
