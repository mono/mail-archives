<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Upcoming problems.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mkestner%40speakeasy.net">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="001972.html">
   <LINK REL="Next"  HREF="001974.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Upcoming problems.
   </H1>
    <B>Mike Kestner
    </B> 
    <A HREF="mailto:mkestner%40speakeasy.net"
       TITLE="[Gtk-sharp-list] Upcoming problems.">mkestner@speakeasy.net
       </A><BR>
    <I>27 May 2003 17:21:53 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="001972.html">[Gtk-sharp-list] Upcoming problems.
</A></li>
        <LI> Next message: <A HREF="001974.html">[Gtk-sharp-list] Upcoming problems.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1973">[ date ]</a>
              <a href="thread.html#1973">[ thread ]</a>
              <a href="subject.html#1973">[ subject ]</a>
              <a href="author.html#1973">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 2003-05-27 at 16:33, Rachel Hestilow wrote:

&gt;<i> 1) I created a new ConstStringGen class which sets MarshalReturnType to
</I>&gt;<i> IntPtr and outputs a call to PtrToStringAuto in FromNativeReturn.
</I>
&gt;<i> Combined with an audit of the glue, glib, and .custom sources, we're
</I>&gt;<i> left with 50 other functions which, on cursory glance, all return new
</I>&gt;<i> strings. So no metadata hacking is required.
</I>
Sounds good. No patch was attached, so I'm wondering if you subclassed
SimpleGen?  Seems like that should be doable, since only the one prop
and one method changed. 

If a more-than-cursory-glance at the remaining funcs indicates a
&quot;should-be-static&quot; string, we can always just add const- to the type
instead of going with some new tag.

It doesn't sound like you addressed Paolo's g_free concern though.  We
probably need to add a SringGen class that also uses MarshalReturnType
of IntPtr and PtrToStringAnsi, but additionally calls g_free on the
IntPtr. Then we can map the non-const strings to that IGeneratable.
Sounds like a subclass overriding just the FromNativeReturn method of
your ConstStringGen class.

&gt;<i> All in all, I'm impressed with the generator refactoring, the actual
</I>&gt;<i> generator modifications only took half an hour. Kudos on the great
</I>&gt;<i> design, Mike.
</I>
Thanks. :)

&gt;<i> Shall I commit?
</I>
Do you have time to incorporate the above too?  Let me know.  If not,
you can commit what you have now and I'll try to get to the rest
tonight.

Thanks for the patch.

Mike


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="001972.html">[Gtk-sharp-list] Upcoming problems.
</A></li>
	<LI> Next message: <A HREF="001974.html">[Gtk-sharp-list] Upcoming problems.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1973">[ date ]</a>
              <a href="thread.html#1973">[ thread ]</a>
              <a href="subject.html#1973">[ subject ]</a>
              <a href="author.html#1973">[ author ]</a>
         </LI>
       </UL>
</body></html>
