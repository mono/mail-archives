<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] patch fixing override issue for
 gtk-sharp/generator/Method.cs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mwh%40sysrq.dk">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="002332.html">
   <LINK REL="Next"  HREF="002358.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] patch fixing override issue for
 gtk-sharp/generator/Method.cs
   </H1>
    <B>Martin Willemoes Hansen
    </B> 
    <A HREF="mailto:mwh%40sysrq.dk"
       TITLE="[Gtk-sharp-list] patch fixing override issue for
 gtk-sharp/generator/Method.cs">mwh@sysrq.dk
       </A><BR>
    <I>Wed, 27 Aug 2003 09:07:21 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="002332.html">[Gtk-sharp-list] patch fixing override issue for
 gtk-sharp/generator/Method.cs
</A></li>
        <LI> Next message: <A HREF="002358.html">[Gtk-sharp-list] patch fixing override issue for
 gtk-sharp/generator/Method.cs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2342">[ date ]</a>
              <a href="thread.html#2342">[ thread ]</a>
              <a href="subject.html#2342">[ subject ]</a>
              <a href="author.html#2342">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--=-fYIMK/7GKV1ZnGYR1PnA
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

On Tue, 2003-08-26 at 23:40, Mike Kestner wrote:
&gt;<i> On Tue, 2003-08-26 at 16:05, Martin Willemoes Hansen wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; Sounds like a good idea!
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I think I can do that tomorrow if its okay with you.
</I>&gt;<i> 
</I>&gt;<i> Great, I look forward to your patch.  :)
</I>
Here it is, okay to commit?

&gt;<i> &gt; Great to hear from you again :o)
</I>&gt;<i> 
</I>&gt;<i> Heh, I wish I weren't so swamped. I never seem to have any hacking time
</I>&gt;<i> during the summer. Thanks for your patience.
</I>&gt;<i>   
</I>-- 
Martin Willemoes Hansen

--------------------------------------------------------
E-Mail	<A HREF="mailto:mwh@sysrq.dk">mwh@sysrq.dk</A>	Website	mwh.sysrq.dk
IRC     MWH, freenode.net
--------------------------------------------------------               


--=-fYIMK/7GKV1ZnGYR1PnA
Content-Disposition: attachment; filename=MangleNameModifications.diff
Content-Type: text/plain; name=MangleNameModifications.diff; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

? MangleNameModifications.diff
Index: Parameters.cs
===================================================================
RCS file: /cvs/public/gtk-sharp/generator/Parameters.cs,v
retrieving revision 1.32
diff -u -r1.32 Parameters.cs
--- Parameters.cs	15 Jul 2003 05:52:08 -0000	1.32
+++ Parameters.cs	27 Aug 2003 07:17:19 -0000
@@ -75,7 +75,7 @@
 
 		public string Name {
 			get {
-				return MangleName (elem.GetAttribute(&quot;name&quot;));
+				return SymbolTable.Table.MangleName (elem.GetAttribute(&quot;name&quot;));
 			}
 		}
 
@@ -91,37 +91,6 @@
 			}
 		}
 
-		private string MangleName(string name)
-		{
-			switch (name) {
-			case &quot;string&quot;:
-				return &quot;str1ng&quot;;
-			case &quot;event&quot;:
-				return &quot;evnt&quot;;
-			case &quot;null&quot;:
-				return &quot;is_null&quot;;
-			case &quot;object&quot;:
-				return &quot;objekt&quot;;
-			case &quot;params&quot;:
-				return &quot;parms&quot;;
-			case &quot;ref&quot;:
-				return &quot;reference&quot;;
-			case &quot;in&quot;:
-				return &quot;in_param&quot;;
-			case &quot;out&quot;:
-				return &quot;out_param&quot;;
-			case &quot;fixed&quot;:
-				return &quot;mfixed&quot;;
-			case &quot;byte&quot;:
-				return &quot;_byte&quot;;
-			case &quot;new&quot;:
-				return &quot;_new&quot;;
-			default:
-				break;
-			}
-
-			return name;
-		}
 		public string StudlyName {
 			get {
 				string name = elem.GetAttribute(&quot;name&quot;);
Index: StructBase.cs
===================================================================
RCS file: /cvs/public/gtk-sharp/generator/StructBase.cs,v
retrieving revision 1.37
diff -u -r1.37 StructBase.cs
--- StructBase.cs	23 Jul 2003 17:19:19 -0000	1.37
+++ StructBase.cs	27 Aug 2003 07:17:19 -0000
@@ -141,7 +141,7 @@
 			if (IsBit (field))
 				name = String.Format (&quot;_bitfield{0}&quot;, bitfields++);
 			else
-				name += MangleName (field.GetAttribute (&quot;cname&quot;));
+				name += SymbolTable.Table.MangleName (field.GetAttribute (&quot;cname&quot;));
 
 			return true;
 		}
@@ -151,14 +151,14 @@
 			string c_type, type, name;
 			if (!GetFieldInfo (field, out c_type, out type, out name))
 				return false;
-			sw.WriteLine (&quot;\t\tpublic {0} {1};&quot;, type, name);
+			sw.WriteLine (&quot;\t\tpublic {0} {1};&quot;, type, SymbolTable.Table.MangleName (name));
 
 			if (field.HasAttribute(&quot;array_len&quot;))
 				Console.WriteLine (&quot;warning: array field {0}.{1} probably incorrectly generated&quot;, QualifiedName, name);
 			SymbolTable table = SymbolTable.Table;
 
 			string wrapped = table.GetCSType (c_type);
-			string wrapped_name = MangleName (field.GetAttribute (&quot;cname&quot;));
+			string wrapped_name = SymbolTable.Table.MangleName (field.GetAttribute (&quot;cname&quot;));
 			if (table.IsObject (c_type)) {
 				sw.WriteLine ();
 				sw.WriteLine (&quot;\t\tpublic &quot; + wrapped + &quot; &quot; + wrapped_name + &quot; {&quot;);
@@ -188,29 +188,6 @@
 			}
 			
 			return true;
-		}
-
-		private String MangleName(String name)
-		{
-			if (name == &quot;string&quot;) {
-				return &quot;str1ng&quot;;
-			} else if (name == &quot;event&quot;) {
-				return &quot;evnt&quot;;
-			} else if (name == &quot;null&quot;) {
-				return &quot;is_null&quot;;
-			} else if (name == &quot;object&quot;) {
-				return &quot;objekt&quot;;
-			} else if (name == &quot;ref&quot;) {
-				return &quot;reference&quot;;
-			} else if (name == &quot;params&quot;) {
-				return &quot;parms&quot;;
-			} else if (name == &quot;fixed&quot;) {
-				return &quot;mfixed&quot;;
-			} else if (name == &quot;in&quot;) {
-				return &quot;inn&quot;;
-			} else {
-				return name;
-			}
 		}
 
 		public virtual void Generate ()
Index: SymbolTable.cs
===================================================================
RCS file: /cvs/public/gtk-sharp/generator/SymbolTable.cs,v
retrieving revision 1.46
diff -u -r1.46 SymbolTable.cs
--- SymbolTable.cs	11 Jul 2003 02:00:11 -0000	1.46
+++ SymbolTable.cs	27 Aug 2003 07:17:19 -0000
@@ -292,6 +292,38 @@
 			return false;
 		}
 
+		public string MangleName(string name)
+		{
+			switch (name) {
+			case &quot;string&quot;:
+				return &quot;str1ng&quot;;
+			case &quot;event&quot;:
+				return &quot;evnt&quot;;
+			case &quot;null&quot;:
+				return &quot;is_null&quot;;
+			case &quot;object&quot;:
+				return &quot;objekt&quot;;
+			case &quot;params&quot;:
+				return &quot;parms&quot;;
+			case &quot;ref&quot;:
+				return &quot;reference&quot;;
+			case &quot;in&quot;:
+				return &quot;in_param&quot;;
+			case &quot;out&quot;:
+				return &quot;out_param&quot;;
+			case &quot;fixed&quot;:
+				return &quot;mfixed&quot;;
+			case &quot;byte&quot;:
+				return &quot;_byte&quot;;
+			case &quot;new&quot;:
+				return &quot;_new&quot;;
+			case &quot;base&quot;:
+				return &quot;_base&quot;;
+			default:
+				break;
+			}
+
+			return name;
+		}
 	}
 }
-

--=-fYIMK/7GKV1ZnGYR1PnA--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="002332.html">[Gtk-sharp-list] patch fixing override issue for
 gtk-sharp/generator/Method.cs
</A></li>
	<LI> Next message: <A HREF="002358.html">[Gtk-sharp-list] patch fixing override issue for
 gtk-sharp/generator/Method.cs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2342">[ date ]</a>
              <a href="thread.html#2342">[ thread ]</a>
              <a href="subject.html#2342">[ subject ]</a>
              <a href="author.html#2342">[ author ]</a>
         </LI>
       </UL>
</body></html>
