<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] MailMessage class does not work in Linux,	but if Windows
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=Re%3A%20%5BGtk-sharp-list%5D%20MailMessage%20class%20does%20not%20work%20in%20Linux%2C%0A%09but%20if%20Windows&In-Reply-To=%3CCAFSJrsk3Yi1XTc1QQZWqE4Q_rs-9uZHM80vOgQ1XHwdT6bBf6A%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011380.html">
   <LINK REL="Next"  HREF="011382.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] MailMessage class does not work in Linux,	but if Windows</H1>
    <B>Bertrand Lorentz</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=Re%3A%20%5BGtk-sharp-list%5D%20MailMessage%20class%20does%20not%20work%20in%20Linux%2C%0A%09but%20if%20Windows&In-Reply-To=%3CCAFSJrsk3Yi1XTc1QQZWqE4Q_rs-9uZHM80vOgQ1XHwdT6bBf6A%40mail.gmail.com%3E"
       TITLE="[Gtk-sharp-list] MailMessage class does not work in Linux,	but if Windows">bertrand.lorentz at gmail.com
       </A><BR>
    <I>Mon Jan 20 15:30:35 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="011380.html">[Gtk-sharp-list] MailMessage class does not work in Linux,	but if Windows
</A></li>
        <LI>Next message: <A HREF="011382.html">[Gtk-sharp-list] Can we achieve MVVM in Mono on Linux?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11381">[ date ]</a>
              <a href="thread.html#11381">[ thread ]</a>
              <a href="subject.html#11381">[ subject ]</a>
              <a href="author.html#11381">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

Unless I'm mistaken, the MailMessage and SmtpClient classes are part
of the System.Net.Mail namespace, which is not part of gtk-sharp, but
part of the Base Class Library implementation provided by Mono itself.

So I think this is not the right mailing list for your question. I'd
suggest to use one of the Mono support channels:
<A HREF="http://www.mono-project.com/Support">http://www.mono-project.com/Support</A>

Cheers,

--
Bertrand

2014/1/17 Adrian Eric &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">adrianeric40 at gmail.com</A>&gt;:
&gt;<i> Can someone please tell me why the code below with doing well in Windows but
</I>&gt;<i> not in Linux?
</I>&gt;<i>
</I>&gt;<i> In linux generate the error &quot;Message could not be sent.&quot;!!!. but not give me
</I>&gt;<i> more details.
</I>&gt;<i>
</I>&gt;<i> First I thought the problem was the attachment, tried to remove these lines
</I>&gt;<i> of code but the problem persists.
</I>&gt;<i>
</I>&gt;<i> from already thank you very much.
</I>&gt;<i>
</I>&gt;<i> Saludos y muchas gracias!!.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> public class enviar_email
</I>&gt;<i>     {
</I>&gt;<i>         Window ventana;
</I>&gt;<i>
</I>&gt;<i>         public enviar_email(string[] para, string[] cc, string[] cco,
</I>&gt;<i>                             string asunto, string mensaje, string
</I>&gt;<i> caminoAdjunto,
</I>&gt;<i>                             string tipoDeDato, out bool enviadoOK)
</I>&gt;<i>         {
</I>&gt;<i>             //determino los datos del usuario
</I>&gt;<i>             DataTableReader reader = new
</I>&gt;<i> DataTableReader(MainWindow.tablaUsuarioActual);
</I>&gt;<i>             reader.Read();
</I>&gt;<i>             uint IdUsuario =  uint.Parse(reader[&quot;IdUsuario&quot;].ToString());
</I>&gt;<i>             string email_rtte = reader[&quot;email&quot;].ToString();
</I>&gt;<i>             string usuario_casilla = reader[&quot;usuarioEmail&quot;].ToString();
</I>&gt;<i>             string contrase&#241;a_casilla =
</I>&gt;<i> reader[&quot;contraseniaEmail&quot;].ToString();
</I>&gt;<i>             string servidorSMTP = reader[&quot;servidor_salida&quot;].ToString();
</I>&gt;<i>             string servidorAutentic =
</I>&gt;<i> reader[&quot;servidor_autenticacion&quot;].ToString();
</I>&gt;<i>
</I>&gt;<i>             //verifico que existan los datos de usuario p/poder enviar
</I>&gt;<i>             if(email_rtte.Length == 0 | usuario_casilla.Length == 0 |
</I>&gt;<i> contrase&#241;a_casilla.Length == 0
</I>&gt;<i>                | servidorSMTP.Length == 0 | servidorAutentic.Length == 0)
</I>&gt;<i>             {
</I>&gt;<i>                 muestraDialogo msjErrorEmail = new muestraDialogo(&quot;Falta
</I>&gt;<i> configuraci&#243;n&quot;, &quot;Los datos de configuraci&#243;n necesarios para enviar&quot; +
</I>&gt;<i>                                                                   &quot;\ncorreo
</I>&gt;<i> electr&#243;nico no estan completos. Dir&#237;jase a 'Configuraci&#243;n-Usuarios'&quot; +
</I>&gt;<i>                                                                   &quot;\npara
</I>&gt;<i> completar los datos faltantes.&quot;, MessageType.Warning);
</I>&gt;<i>                 enviadoOK = false;
</I>&gt;<i>                 return;
</I>&gt;<i>
</I>&gt;<i>             }
</I>&gt;<i>
</I>&gt;<i>             MailMessage mailMensaje = new MailMessage();
</I>&gt;<i>             mailMensaje.From = new MailAddress(email_rtte);
</I>&gt;<i>
</I>&gt;<i>             if(para[0]!= &quot;vacio&quot;)
</I>&gt;<i>             {
</I>&gt;<i>                 foreach(string Para in para )
</I>&gt;<i>                 {
</I>&gt;<i>                     MailAddress mailAddressPara = new MailAddress(Para);
</I>&gt;<i>                     mailMensaje.To.Add(mailAddressPara);
</I>&gt;<i>                 }
</I>&gt;<i>
</I>&gt;<i>             }
</I>&gt;<i>
</I>&gt;<i>             if(cc.Length != 0)
</I>&gt;<i>             {
</I>&gt;<i>                 foreach(string conCopia in cc )
</I>&gt;<i>                 {
</I>&gt;<i>                     if(conCopia == &quot;&quot;)
</I>&gt;<i>                         break;
</I>&gt;<i>                     MailAddress mailAddressCC = new MailAddress(conCopia);
</I>&gt;<i>                     mailMensaje.CC.Add(mailAddressCC);
</I>&gt;<i>                 }
</I>&gt;<i>
</I>&gt;<i>             }
</I>&gt;<i>
</I>&gt;<i>             if(cco.Length != 0)
</I>&gt;<i>             {
</I>&gt;<i>                 foreach(string conCopiaOculta in cco )
</I>&gt;<i>                 {
</I>&gt;<i>                     if(conCopiaOculta == &quot;&quot;)
</I>&gt;<i>                         break;
</I>&gt;<i>                     MailAddress mailAddressCCO = new
</I>&gt;<i> MailAddress(conCopiaOculta);
</I>&gt;<i>                     mailMensaje.Bcc.Add(mailAddressCCO);
</I>&gt;<i>                 }
</I>&gt;<i>
</I>&gt;<i>             }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>             //aislo el nombre del adjunto del camino pasado a la clase
</I>&gt;<i>             char caracterSeparador =
</I>&gt;<i> (MainWindow.separadorDir.ToCharArray())[0];
</I>&gt;<i>             int indiceFinal = caminoAdjunto.LastIndexOf(caracterSeparador);
</I>&gt;<i>             string nombreArchivo = caminoAdjunto.Substring(indiceFinal+1,
</I>&gt;<i> caminoAdjunto.Length-(indiceFinal+1));
</I>&gt;<i>
</I>&gt;<i>             mailMensaje.Subject = asunto;
</I>&gt;<i>             Attachment adjunto = new Attachment(caminoAdjunto);
</I>&gt;<i>             mailMensaje.Attachments.Add(adjunto);
</I>&gt;<i>
</I>&gt;<i>             //con la linea siguiente configuro la opcion de la confirmacion
</I>&gt;<i> de lectura
</I>&gt;<i>             //y a que direccion debera enviar dicha confirmacion
</I>&gt;<i>             mailMensaje.Headers.Add(&quot;Disposition-Notification-To&quot;,
</I>&gt;<i> usuario_casilla);
</I>&gt;<i>             SmtpClient cliente = new SmtpClient(servidorAutentic, 25);
</I>&gt;<i>             cliente.Credentials = new
</I>&gt;<i> System.Net.NetworkCredential(usuario_casilla, contrase&#241;a_casilla);
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>             try
</I>&gt;<i>             {
</I>&gt;<i>                 cliente.Send(mailMensaje);
</I>&gt;<i>
</I>&gt;<i>             }
</I>&gt;<i>             catch (SmtpException ex)
</I>&gt;<i>             {
</I>&gt;<i>                 muestraDialogo dialogoError = new muestraDialogo(&quot;Error en
</I>&gt;<i> env&#237;o de e-mail&quot;,
</I>&gt;<i>                                                                  &quot;Hubo un
</I>&gt;<i> error en el intento de env&#237;o &quot; +
</I>&gt;<i>                                                                  &quot;del correo
</I>&gt;<i> electronico.&quot; +
</I>&gt;<i>                                                                  &quot;\nPor
</I>&gt;<i> favor pongase en contacto con el administrador&quot; +
</I>&gt;<i>                                                                  &quot;\ndel
</I>&gt;<i> sistema y comentele del error recibido.&quot; +
</I>&gt;<i>                                                                  &quot;\nMensaje
</I>&gt;<i> del error: &quot; + ex.Message,
</I>&gt;<i>
</I>&gt;<i> MessageType.Error);
</I>&gt;<i>                 enviadoOK = false;
</I>&gt;<i>                 mailMensaje.Dispose();
</I>&gt;<i>                 bool eliminado;
</I>&gt;<i>                 EliminarArchivo eliminarFile = new
</I>&gt;<i> EliminarArchivo(caminoAdjunto, out eliminado);
</I>&gt;<i>
</I>&gt;<i>                 return;
</I>&gt;<i>             }
</I>&gt;<i>
</I>&gt;<i>             MessageDialog dialogo = new
</I>&gt;<i> MessageDialog(ventana,DialogFlags.Modal, MessageType.Info,
</I>&gt;<i>                                                           ButtonsType.Ok,
</I>&gt;<i> &quot;El correo se envi&#243; satisfactoriamente.&quot;);
</I>&gt;<i>                 dialogo.UseMarkup = true;
</I>&gt;<i>                 dialogo.Title = &quot;&lt;b&gt;Informe de env&#237;o&lt;/b&gt;&quot;;
</I>&gt;<i>                 dialogo.WindowPosition = WindowPosition.Center;
</I>&gt;<i>                 dialogo.Run();
</I>&gt;<i>                 dialogo.Hide();
</I>&gt;<i>
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Gtk-sharp-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">Gtk-sharp-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">http://lists.ximian.com/mailman/listinfo/gtk-sharp-list</A>
</I>&gt;<i>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011380.html">[Gtk-sharp-list] MailMessage class does not work in Linux,	but if Windows
</A></li>
	<LI>Next message: <A HREF="011382.html">[Gtk-sharp-list] Can we achieve MVVM in Mono on Linux?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11381">[ date ]</a>
              <a href="thread.html#11381">[ thread ]</a>
              <a href="subject.html#11381">[ subject ]</a>
              <a href="author.html#11381">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
