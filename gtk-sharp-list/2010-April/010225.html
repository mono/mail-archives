<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] How to remove menuitems from a menu
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20How%20to%20remove%20menuitems%20from%20a%20menu&In-Reply-To=l2tb26d2191004141227s474a90a3n5f783e5b637e82d5%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010207.html">
   <LINK REL="Next"  HREF="010210.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] How to remove menuitems from a menu</H1>
    <B>Christopher David Howie</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20How%20to%20remove%20menuitems%20from%20a%20menu&In-Reply-To=l2tb26d2191004141227s474a90a3n5f783e5b637e82d5%40mail.gmail.com"
       TITLE="[Gtk-sharp-list] How to remove menuitems from a menu">me at chrishowie.com
       </A><BR>
    <I>Tue Apr 27 10:48:36 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="010207.html">[Gtk-sharp-list] How to remove menuitems from a menu
</A></li>
        <LI>Next message: <A HREF="010210.html">[Gtk-sharp-list] KeyPressEvent with F-keys and Hotkeys
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10225">[ date ]</a>
              <a href="thread.html#10225">[ thread ]</a>
              <a href="subject.html#10225">[ subject ]</a>
              <a href="author.html#10225">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 04/14/2010 03:27 PM, Davide Lasagna wrote:
&gt;<i> I'm quite new to gtksharp. I have a menu which i want to update in
</I>&gt;<i> response of some event.
</I>&gt;<i> The first 6 items must always remain there, then i have to append some
</I>&gt;<i> menuitems which 
</I>&gt;<i> change at each call to this method.
</I>&gt;<i> 
</I>&gt;<i> Here is the code that i have at the moment.
</I>&gt;<i> 
</I>&gt;<i> The variable gomenu is the menu to be modified.
</I>&gt;<i> 
</I>&gt;<i> void UpdateGoToHistoryMenu()
</I>&gt;<i> {
</I>&gt;<i> 
</I>&gt;<i> // first i need to uderstand how to remove the previously added menuitems
</I>&gt;<i>                         // because otherwise i will continue to add
</I>&gt;<i> elements.
</I>&gt;<i>                         // Here i want to remove the menuitems from 7 to
</I>&gt;<i> end. How do i do this?
</I>&gt;<i> // then i can add elements
</I>&gt;<i> System.Collections.Generic.List&lt;string&gt; hist = history.GetElements();
</I>&gt;<i> for ( int i=0; i &lt; hist.Count - 1; i++ )
</I>&gt;<i> {
</I>&gt;<i> ImageMenuItem item = new ImageMenuItem( hist[i] ){
</I>&gt;<i> Image = new Image(Stock.Directory, IconSize.Menu )};
</I>&gt;<i> gomenu.Insert(item, 6);
</I>&gt;<i> item.Show();
</I>&gt;<i> }
</I>&gt;<i> }
</I>&gt;<i> Basically i want to remove the menuitems from index 6 to the end of the
</I>&gt;<i> menu.
</I>
Manipulating menu items by index is never a good idea.  What happens if
you want to add some more permanent items to the menu, or remove some?
Avoid magic numbers wherever possible.

A better solution would be to keep a List&lt;MenuItem&gt; around for your
history items.  In that loop, add &quot;item&quot; to this list.  Clearing the
menu is then as easy as:

--------8&lt;--------
for (var i in historyItems)
    i.Destroy();

historyItems.Clear();
--------8&lt;--------

I would also replace gomenu.Insert() with gomenu.Append(), though this
will probably require reversing your loop direction.  It will, however,
ultimately be a cleaner approach.

-- 
Chris Howie
<A HREF="http://www.chrishowie.com">http://www.chrishowie.com</A>
<A HREF="http://en.wikipedia.org/wiki/User:Crazycomputers">http://en.wikipedia.org/wiki/User:Crazycomputers</A>

PGP key:

pub   2048R/CF8338F5 2010-04-14
      Fingerprint: 2B7A B280 8B12 21CC 260A  DF65 6FCE 505A CF83 38F5
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010207.html">[Gtk-sharp-list] How to remove menuitems from a menu
</A></li>
	<LI>Next message: <A HREF="010210.html">[Gtk-sharp-list] KeyPressEvent with F-keys and Hotkeys
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10225">[ date ]</a>
              <a href="thread.html#10225">[ thread ]</a>
              <a href="subject.html#10225">[ subject ]</a>
              <a href="author.html#10225">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
