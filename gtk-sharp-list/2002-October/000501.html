<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] ThreadNotify: The saga continues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:pbaena%40uol.com.ar">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000497.html">
   <LINK REL="Next"  HREF="000510.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] ThreadNotify: The saga continues
   </H1>
    <B>Pablo Baena
    </B> 
    <A HREF="mailto:pbaena%40uol.com.ar"
       TITLE="[Gtk-sharp-list] ThreadNotify: The saga continues">pbaena@uol.com.ar
       </A><BR>
    <I>25 Oct 2002 22:56:15 +0000</I>
    <P><UL>
        <LI> Previous message: <A HREF="000497.html">[Gtk-sharp-list] ThreadNotify: The saga continues
</A></li>
        <LI> Next message: <A HREF="000510.html">[Gtk-sharp-list] ThreadNotify: The saga continues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#501">[ date ]</a>
              <a href="thread.html#501">[ thread ]</a>
              <a href="subject.html#501">[ subject ]</a>
              <a href="author.html#501">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--=-W09IdzrCJCtqdz613Mbo
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

Hello,
Yes, maybe I should avoid using threads, I know it is difficult to debug
them.

My main use for threads is for launching processes and monitoring its
status with the progress bar, while keeping my window attending the
normal events. I guess that I could get around this using a function
with gtk_timeout_add in the main loop that checks some pipe (or queue)
that informs the status (borrowed the idea from gcombust ;).

Do you suggest anything better for this.

On Fri, 2002-10-25 at 16:22, Miguel de Icaza wrote:

    Hello!
    
    &gt; I've been using Gtk# for a while now, got the usual stumbling blocks
    &gt; but ultimately everything fits together. However, I have come to
    &gt; realize something that I think is annoying from the point of view of a
    &gt; user. That is, ThreadNotify. I've used it for a while and it served
    &gt; its purpose very well for some time. When my small project got a
    &gt; little bigger and I made a little heavier use of threads for the
    &gt; different tasks, my code just started to became uglier and uglier, and
    &gt; just because I had to use ThreadNotify everytime I needed to make the
    &gt; smallest change to the widgets. 
    &gt; 
    &gt; I was wondering if there is a plan to make the libraries thread safe,
    &gt; not in the sense of insert mutexes for everything in Gtk (something I
    &gt; think is the responsability of the user), but to allow getting the job
    &gt; done without ThreadNotify. 
    
    The problem as you well point out is that Gtk is not thread safe, and
    making it thread safe will be very complex.  In fact, Gtk is thread
    aware already and has some limited support for thread, but it is very
    complicated code.  It would also slow down Gtk a lot for the average
    user.
    
    Most Gtk programs are event-driven programs.  Even driven programs are a
    lot simpler to debug than multi-threaded applications.  In general, my
    suggestion is to only use threads when you absolutely have to because
    they bring a level of complexity that most of the time you can avoid. 
    You might for instance want to read John Ousterhout's notes for his
    Usenix keynote on `Why threads are a bad idea (most of the time)' or
    something like that. 
    
    Maybe you could explain what your program does, and why you need to use
    so many threads?
    
    Miguel
    

--=-W09IdzrCJCtqdz613Mbo
Content-Type: text/html; charset=utf-8

&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 TRANSITIONAL//EN&quot;&gt;
&lt;HTML&gt;
&lt;HEAD&gt;
  &lt;META HTTP-EQUIV=&quot;Content-Type&quot; CONTENT=&quot;text/html; CHARSET=UTF-8&quot;&gt;
  &lt;META NAME=&quot;GENERATOR&quot; CONTENT=&quot;GtkHTML/1.0.4&quot;&gt;
&lt;/HEAD&gt;
&lt;BODY&gt;
Hello,
&lt;BR&gt;
Yes, maybe I should avoid using threads, I know it is difficult to debug them.
&lt;BR&gt;

&lt;BR&gt;
My main use for threads is for launching processes and monitoring its status with the progress bar, while keeping my window attending the normal events. I guess that I could get around this using a function with gtk_timeout_add in the main loop that checks some pipe (or queue) that informs the status (borrowed the idea from gcombust ;).
&lt;BR&gt;

&lt;BR&gt;
Do you suggest anything better for this.
&lt;BR&gt;

&lt;BR&gt;
On Fri, 2002-10-25 at 16:22, Miguel de Icaza wrote:
    &lt;BLOCKQUOTE&gt;
&lt;PRE&gt;&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;Hello!&lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;&amp;gt; I've been using Gtk# for a while now, got the usual stumbling blocks&lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;&amp;gt; but ultimately everything fits together. However, I have come to&lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;&amp;gt; realize something that I think is annoying from the point of view of a&lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;&amp;gt; user. That is, ThreadNotify. I've used it for a while and it served&lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;&amp;gt; its purpose very well for some time. When my small project got a&lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;&amp;gt; little bigger and I made a little heavier use of threads for the&lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;&amp;gt; different tasks, my code just started to became uglier and uglier, and&lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;&amp;gt; just because I had to use ThreadNotify everytime I needed to make the&lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;&amp;gt; smallest change to the widgets. &lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;&amp;gt; &lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;&amp;gt; I was wondering if there is a plan to make the libraries thread safe,&lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;&amp;gt; not in the sense of insert mutexes for everything in Gtk (something I&lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;&amp;gt; think is the responsability of the user), but to allow getting the job&lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;&amp;gt; done without ThreadNotify. &lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;The problem as you well point out is that Gtk is not thread safe, and&lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;making it thread safe will be very complex.  In fact, Gtk is thread&lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;aware already and has some limited support for thread, but it is very&lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;complicated code.  It would also slow down Gtk a lot for the average&lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;user.&lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;Most Gtk programs are event-driven programs.  Even driven programs are a&lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;lot simpler to debug than multi-threaded applications.  In general, my&lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;suggestion is to only use threads when you absolutely have to because&lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;they bring a level of complexity that most of the time you can avoid. &lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;You might for instance want to read John Ousterhout's notes for his&lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;Usenix keynote on `Why threads are a bad idea (most of the time)' or&lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;something like that. &lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;Maybe you could explain what your program does, and why you need to use&lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;so many threads?&lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;FONT COLOR=&quot;#737373&quot;&gt;&lt;FONT SIZE=&quot;3&quot;&gt;&lt;I&gt;Miguel&lt;/FONT&gt;&lt;/FONT&gt;&lt;/I&gt;
&lt;/PRE&gt;
    &lt;/BLOCKQUOTE&gt;
&lt;/BODY&gt;
&lt;/HTML&gt;

--=-W09IdzrCJCtqdz613Mbo--



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000497.html">[Gtk-sharp-list] ThreadNotify: The saga continues
</A></li>
	<LI> Next message: <A HREF="000510.html">[Gtk-sharp-list] ThreadNotify: The saga continues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#501">[ date ]</a>
              <a href="thread.html#501">[ thread ]</a>
              <a href="subject.html#501">[ subject ]</a>
              <a href="author.html#501">[ author ]</a>
         </LI>
       </UL>
</body></html>
