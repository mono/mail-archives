<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Menu Position
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Menu%20Position&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005876.html">
   <LINK REL="Next"  HREF="005881.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Menu Position</H1>
    <B>Milen Dzhumerov</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Menu%20Position&In-Reply-To="
       TITLE="[Gtk-sharp-list] Menu Position">gamehack@1nsp1r3d.co.uk
       </A><BR>
    <I>Wed May 11 14:25:47 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="005876.html">[Gtk-sharp-list] Dialog freezing program on Windows
</A></li>
        <LI>Next message: <A HREF="005881.html">[Gtk-sharp-list] Re: Menu Position
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5877">[ date ]</a>
              <a href="thread.html#5877">[ thread ]</a>
              <a href="subject.html#5877">[ subject ]</a>
              <a href="author.html#5877">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I've been having trouble positioning some popup menus. What I do is 
basically put an icon in the system tray, put it in an event box and 
catch right click. On right click I show a popup menu. When the 
(gnome/kde/fd.o compliant) panel is on top, everything works perfectly, 
but when it's on the bottom of the screen, it just displays an arrow to 
scroll and the actual menu items are hidden behind it, so it's unusable. 
I was told to pass a Gtk.MenuPositionFunc(Menu 
&lt;<A HREF="http://www.go-mono.com/docs/monodoc.ashx?link=T%3aGtk.Menu">http://www.go-mono.com/docs/monodoc.ashx?link=T%3aGtk.Menu</A>&gt; menu,out 
int &lt;<A HREF="http://www.go-mono.com/docs/monodoc.ashx?link=T%3aSystem.Int32">http://www.go-mono.com/docs/monodoc.ashx?link=T%3aSystem.Int32</A>&gt; x, 
out int &lt;<A HREF="http://www.go-mono.com/docs/monodoc.ashx?link=T%3aSystem.Int32">http://www.go-mono.com/docs/monodoc.ashx?link=T%3aSystem.Int32</A>&gt; 
y, bool 
&lt;<A HREF="http://www.go-mono.com/docs/monodoc.ashx?link=T%3aSystem.Boolean">http://www.go-mono.com/docs/monodoc.ashx?link=T%3aSystem.Boolean</A>&gt; 
push_in) to Gtk.Menu.Popup(Widget 
&lt;<A HREF="http://www.go-mono.com/docs/monodoc.ashx?link=T%3aGtk.Widget">http://www.go-mono.com/docs/monodoc.ashx?link=T%3aGtk.Widget</A>&gt;, Widget 
&lt;<A HREF="http://www.go-mono.com/docs/monodoc.ashx?link=T%3aGtk.Widget">http://www.go-mono.com/docs/monodoc.ashx?link=T%3aGtk.Widget</A>&gt;, 
MenuPositionFunc 
&lt;<A HREF="http://www.go-mono.com/docs/monodoc.ashx?link=T%3aGtk.MenuPositionFunc">http://www.go-mono.com/docs/monodoc.ashx?link=T%3aGtk.MenuPositionFunc</A>&gt;, 
System.IntPtr 
&lt;<A HREF="http://www.go-mono.com/docs/monodoc.ashx?link=T%3aSystem.IntPtr">http://www.go-mono.com/docs/monodoc.ashx?link=T%3aSystem.IntPtr</A>&gt;, uint 
&lt;<A HREF="http://www.go-mono.com/docs/monodoc.ashx?link=T%3aSystem.UInt32">http://www.go-mono.com/docs/monodoc.ashx?link=T%3aSystem.UInt32</A>&gt;, uint 
&lt;<A HREF="http://www.go-mono.com/docs/monodoc.ashx?link=T%3aSystem.UInt32">http://www.go-mono.com/docs/monodoc.ashx?link=T%3aSystem.UInt32</A>&gt;). The 
only thing I can't work out is the algorithm of calculating the 
coordinates where I should pop up the menu. So I assume the first step 
would be to create a Gtk.Requisition and get menu.SizeRequest() so I 
know the requested size. But where do I go from there? I have spoken to 
some people on irc in #gtk+ but didn't get too much advice. I would 
*greatly* appreciate any help.

Kind regards,
gamehack

PS. I'm doing it for this tutorial 
www.mono-project.com/GtkSharpNotificationIcon. If I get help eventually, 
I will document everything and write a mini howto and hopefully a 
systray_menu_position function so others can use it, because I'm finding 
it really hard to do this on my own with only API references. Again, 
thanks for any help.

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005876.html">[Gtk-sharp-list] Dialog freezing program on Windows
</A></li>
	<LI>Next message: <A HREF="005881.html">[Gtk-sharp-list] Re: Menu Position
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5877">[ date ]</a>
              <a href="thread.html#5877">[ thread ]</a>
              <a href="subject.html#5877">[ subject ]</a>
              <a href="author.html#5877">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
