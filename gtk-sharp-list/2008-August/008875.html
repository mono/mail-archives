<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list]  TreeView &amp; custom colors for nodes, bad alignment
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20%20TreeView%20%26%20custom%20colors%20for%20nodes%2C%20bad%20alignment&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008878.html">
   <LINK REL="Next"  HREF="008879.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list]  TreeView &amp; custom colors for nodes, bad alignment</H1>
    <B>vbtricks</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20%20TreeView%20%26%20custom%20colors%20for%20nodes%2C%20bad%20alignment&In-Reply-To="
       TITLE="[Gtk-sharp-list]  TreeView &amp; custom colors for nodes, bad alignment">vbtricks at gmx.net
       </A><BR>
    <I>Mon Aug  4 13:29:57 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="008878.html">[Gtk-sharp-list] Gtk.Image.Pixbuf memory leak
</A></li>
        <LI>Next message: <A HREF="008879.html">[Gtk-sharp-list] ContextMenu not correctly displaying
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8875">[ date ]</a>
              <a href="thread.html#8875">[ thread ]</a>
              <a href="subject.html#8875">[ subject ]</a>
              <a href="author.html#8875">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Salut,

I'm trying to display a folder structure in a treeview. Some of the folders
shall be displayed grayed out. I found the tutorial at
<A HREF="http://www.mono-project.com/GtkSharp_TreeView_Tutorial#Controlling_how_the_model_is_used">http://www.mono-project.com/GtkSharp_TreeView_Tutorial#Controlling_how_the_model_is_used</A>
which works quite fine if the tree displayed in the TreeView has only one
layer. However if there are more layers than in the example below, the
captions appear badly aligned. Any idea how to solve this?


Thanks in advance,

Stefan

using System;
using Gtk;

public partial class MainWindow: Gtk.Window
{	
	private class FolderItem
	{
		private string name;
		private bool drawGray;

		public FolderItem(string name, bool drawGray)
		{
			this.name = name;
			this.drawGray = drawGray;
		}

		public bool DrawGray
		{
			get { return this.drawGray; }
		}

		public string Name
		{
			get { return this.name; }
		}
	}

	private TreeStore folderStore;

	public MainWindow (): base (Gtk.WindowType.Toplevel)
	{
		Build ();
		
		this.folderStore = new TreeStore(typeof(FolderItem));
		
		this.treeview1.Model = this.folderStore;
		TreeViewColumn nameColumn2 = new TreeViewColumn(&quot;Name&quot;, new
CellRendererText(), &quot;text&quot;, 0);
		Gtk.CellRendererText nameCell2 = new Gtk.CellRendererText ();
		nameColumn2.PackStart (nameCell2, false);
		nameColumn2.SetCellDataFunc(nameCell2, new Gtk.TreeCellDataFunc
(RenderFolderName));
		this.treeview1.AppendColumn(nameColumn2);
		this.treeview1.HeadersVisible = false;

		TreeIter iter = this.folderStore.AppendValues(new FolderItem(&quot;root&quot;,
false));
		this.folderStore.AppendValues(iter, new FolderItem(&quot;black&quot;, false));
		this.folderStore.AppendValues(iter, new FolderItem(&quot;gray&quot;, true));

		
	}
	
	private void RenderFolderName (Gtk.TreeViewColumn column, Gtk.CellRenderer
cell, Gtk.TreeModel model, Gtk.TreeIter iter)
	{
		FolderItem folderItem = (FolderItem) model.GetValue (iter, 0);
		
		if (!folderItem.DrawGray) {
			(cell as Gtk.CellRendererText).Foreground = &quot;black&quot;;
		} else {
			(cell as Gtk.CellRendererText).Foreground = &quot;darkgray&quot;;
		}
 
		(cell as Gtk.CellRendererText).Text = folderItem.Name;
		//(cell as Gtk.CellRendererText).Alignment = Pango.Alignment.Left;
	}
	
	
	protected void OnDeleteEvent (object sender, DeleteEventArgs a)
	{
		Application.Quit ();
		a.RetVal = true;
	}
}
-- 
View this message in context: <A HREF="http://www.nabble.com/TreeView---custom-colors-for-nodes%2C-bad-alignment-tp18815856p18815856.html">http://www.nabble.com/TreeView---custom-colors-for-nodes%2C-bad-alignment-tp18815856p18815856.html</A>
Sent from the Mono - Gtk# mailing list archive at Nabble.com.

</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008878.html">[Gtk-sharp-list] Gtk.Image.Pixbuf memory leak
</A></li>
	<LI>Next message: <A HREF="008879.html">[Gtk-sharp-list] ContextMenu not correctly displaying
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8875">[ date ]</a>
              <a href="thread.html#8875">[ thread ]</a>
              <a href="subject.html#8875">[ subject ]</a>
              <a href="author.html#8875">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
