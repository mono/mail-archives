<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Subclassing a textview cannot control ControlMask	key event
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Subclassing%20a%20textview%20cannot%20control%20ControlMask%0A%09key%20event&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008942.html">
   <LINK REL="Next"  HREF="008940.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Subclassing a textview cannot control ControlMask	key event</H1>
    <B>True Friend</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Subclassing%20a%20textview%20cannot%20control%20ControlMask%0A%09key%20event&In-Reply-To="
       TITLE="[Gtk-sharp-list] Subclassing a textview cannot control ControlMask	key event">true.friend2004 at gmail.com
       </A><BR>
    <I>Mon Aug 25 05:26:14 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="008942.html">[Gtk-sharp-list] Adding a shortcut to menu or a button
</A></li>
        <LI>Next message: <A HREF="008940.html">[Gtk-sharp-list] Subclassing a textview cannot control	ControlMask key event
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8938">[ date ]</a>
              <a href="thread.html#8938">[ thread ]</a>
              <a href="subject.html#8938">[ subject ]</a>
              <a href="author.html#8938">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi
I am trying to subclass a textview to write custom characters. Here is the
sample code which I am using in &quot;protected override OnKeyPress(EventArgs
evnt)&quot; method in derived class.
protected override bool OnKeyPressEvent (EventKey evnt)
        {
        Dictionary&lt;char, char&gt; dict = new Dictionary&lt;char,char&gt;();
        dict['`'] = '&#1613;';
        dict['1'] = '1';
        dict['2'] = '2';
        dict['3'] = '3';
        dict['4'] = '4';
    if(evnt.State != ModifierType.ControlMask)
        {
            char key = (char)evnt.Key;
            this.Editable = false;
            if(dict.ContainsKey(key))
            {
            this.Buffer.InsertInteractiveAtCursor(dict[key].ToString(),
true);
            }
            else
            {
                this.Editable = true;
                return base.OnKeyPressEvent (evnt);
            }
}
I want to write only when Ctrl key is not pressed when it is pressed the
event should be the default one, I've tried to do so but evnt.State !=
ModifierType.ControlMask is not working. The output on console.Writeline is
also given here. Normal key press is Mod2Mask but ctrl key press plus any
other key press is ControlMask, Mod2Mask two in same line are written.
Interesting is this it is accepting ControlMask (input) but allowing to
write the key as well (the hacked evenet handler is processed even).
Any ideas about it? I am missing something or something else involved here?
Regards
-- 
Muhammad Shakir Aziz &#1605;&#1581;&#1605;&#1583; &#1588;&#1575;&#1705;&#1585; &#1593;&#1586;&#1740;&#1586;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/gtk-sharp-list/attachments/20080825/62f458b6/attachment.html">http://lists.ximian.com/pipermail/gtk-sharp-list/attachments/20080825/62f458b6/attachment.html</A> 
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008942.html">[Gtk-sharp-list] Adding a shortcut to menu or a button
</A></li>
	<LI>Next message: <A HREF="008940.html">[Gtk-sharp-list] Subclassing a textview cannot control	ControlMask key event
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8938">[ date ]</a>
              <a href="thread.html#8938">[ thread ]</a>
              <a href="subject.html#8938">[ subject ]</a>
              <a href="author.html#8938">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
