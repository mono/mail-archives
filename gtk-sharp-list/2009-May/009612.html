<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Adding sorting and filtering to nodeview/nodestore
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Adding%20sorting%20and%20filtering%20to%0A%20nodeview/nodestore&In-Reply-To=8ed5cbac0905051143r4a9b9f19u4e5094e0ce5da08b%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009611.html">
   <LINK REL="Next"  HREF="009613.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Adding sorting and filtering to nodeview/nodestore</H1>
    <B>Mike Kestner</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Adding%20sorting%20and%20filtering%20to%0A%20nodeview/nodestore&In-Reply-To=8ed5cbac0905051143r4a9b9f19u4e5094e0ce5da08b%40mail.gmail.com"
       TITLE="[Gtk-sharp-list] Adding sorting and filtering to nodeview/nodestore">mkestner at gmail.com
       </A><BR>
    <I>Tue May  5 17:54:12 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="009611.html">[Gtk-sharp-list] Adding sorting and filtering to nodeview/nodestore
</A></li>
        <LI>Next message: <A HREF="009613.html">[Gtk-sharp-list] CellRendererSpin - Value starts running
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9612">[ date ]</a>
              <a href="thread.html#9612">[ thread ]</a>
              <a href="subject.html#9612">[ subject ]</a>
              <a href="author.html#9612">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 2009-05-05 at 14:43 -0400, Vladimir Giszpenc wrote:
&gt;<i> Hi Mike and others who can help me,
</I>&gt;<i> 
</I>&gt;<i> I am considering adding filtering and sorting functionality to the
</I>&gt;<i> NodeView/NodeStore and wanted to get some help with the design before
</I>&gt;<i> I get started.  I realize that this was a &quot;failed experiment&quot; in the
</I>&gt;<i> eyes of Novell, but I believe it is a very elegant widget that is
</I>&gt;<i> missing some functionality.
</I>
If I said &quot;failed&quot; before, I didn't intend to send that impression.  It
was an experimental feature that reached a certain small level of
capability and proceeded no farther for various reasons.  It is simply
incomplete.  All it is lacking is someone to give it the love to push it
the rest of the way.  It has warts, but they are not terminal.  Also
note that my opinions expressed on my blog and on this list are my own
opinions, and not necessarily consistent with my employer's
opinions.  ;-)

&gt;<i> My thoughts are based on TreeModelFilter and TreeModelSort
</I>
My gut reaction is that you are probably holding closer to the
GtkTreeView mindset than NodeStore is really trying to do.  The idea is
to hide as much of that as possible from the user.  So, figure out what
user operations are exposed by Filter, and add API to NodeStore to
perform them.  This might be as simple as adding a FilterFunc property,
but it most likely would not be of type TreeModelFilterVisibleFunc
because that exposes TreeIter and TreeModel and all the details we are
trying to hide with NodeStore.

Also keep in mind that anything that can reasonably be exposed by adding
an attribute of a property or class should be exposed as such, as that's
the nodestore paradigm.  It may be that to do filtering or sorting
efficiently, you will need a second &quot;store&quot; type, but it would be worth
avoiding that if possible just to keep the discovery simpler for a new
NodeStore user.

&gt;<i> public class NodeStoreSort : NodeStore, Gtk.TreeSortable
</I>
Note that NodeStore itself does not expose Gtk.TreeModel.  It has an
internal class which implements all that an hides all that TreeIter,
TreePath stuff from the user.  Even if you add an additional &quot;wrapper&quot;
store like a NodeStoreSort, it should not directly expose the
TreeSortable interface, but instead expose a node-based alternative API.

&gt;<i> I don't fully understand the Adapters.
</I>&gt;<i> How do I need to use TreeModelAdapter and TreeSortableAdapter?  I want
</I>&gt;<i> to use them to register for events I think.
</I>
The idea is this:  when you implement a GInterface with C# code, you
want to implement the &quot;Implementor&quot; interface, which for sorting would
be TreeModelSortableImplementor.  In order to pass an object which
implements the Implementor iface to a method which expects the full
consumable interface, you need to &quot;adapt&quot; it with the Adapter class.
You can also use the adapter class within the implementation to get
access to signal raising mechanisms, and event connections.

There is a somewhat more detailed description of this at:

<A HREF="http://mono-project.com/ImplementingGInterfaces">http://mono-project.com/ImplementingGInterfaces</A>

With an example of how a TreeModel could be implemented.

-- 
Mike Kestner &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">mkestner at gmail.com</A>&gt;

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009611.html">[Gtk-sharp-list] Adding sorting and filtering to nodeview/nodestore
</A></li>
	<LI>Next message: <A HREF="009613.html">[Gtk-sharp-list] CellRendererSpin - Value starts running
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9612">[ date ]</a>
              <a href="thread.html#9612">[ thread ]</a>
              <a href="subject.html#9612">[ subject ]</a>
              <a href="author.html#9612">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
