<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] TreeView ButonPressEvent doesn't trigger
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20TreeView%20ButonPressEvent%20doesn%27t%20trigger&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006517.html">
   <LINK REL="Next"  HREF="006519.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] TreeView ButonPressEvent doesn't trigger</H1>
    <B>L&#225;szl&#243; Monda</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20TreeView%20ButonPressEvent%20doesn%27t%20trigger&In-Reply-To="
       TITLE="[Gtk-sharp-list] TreeView ButonPressEvent doesn't trigger">mondalaci at gmail.com
       </A><BR>
    <I>Sat Oct 22 12:01:46 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="006517.html">[Gtk-sharp-list] TreeView RowActivated triggers twice
</A></li>
        <LI>Next message: <A HREF="006519.html">[Gtk-sharp-list] TreeView ButonPressEvent doesn't trigger
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6518">[ date ]</a>
              <a href="thread.html#6518">[ thread ]</a>
              <a href="subject.html#6518">[ subject ]</a>
              <a href="author.html#6518">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi List,

I have problems with triggering several TreeView signals.  I know that
many widgets don't receive lots of signals by default.  I tried to
change that behaviour by manipulatating the event mask using:

tv.Events = EventMask.AllEventsMask; or
tv.AddEvents((int)EventMask.ButtonPressMask);

but none of them worked.

I've modified the GTK# ManagedTreeViewDemo.cs example to try this out
and demonstrate this problem.

ButtonReleaseEvent triggers, but ButtonPressEvent doesn't, even after
manipulating the event mask.  I've both attached and included the code
here.

----8&lt;----

// ManagedTreeViewDemo.cs - Another TreeView demo
//
// Author: Rachel Hestilow &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">hestilow at ximian.com</A>&gt;
//
// (c) 2003 Rachel Hestilow

namespace GtkSamples {
	using System;
	using System.Runtime.InteropServices;

	using Gtk;
	using Gdk;

	public class TreeViewDemo {
		private static ListStore store = null;
		
		private class Pair {
			public string a, b;
			public Pair (string a, string b) {
				this.a = a;
				this.b = b;
			}
		}

		private static void PopulateStore ()
		{
			store = new ListStore (typeof (Pair));
			string[] combs = {&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;, &quot;quux&quot;};
			foreach (string a in combs) {
				foreach (string b in combs) {
					store.AppendValues (new Pair (a, b));
				}
			}
		}

		private static void CellDataA (Gtk.TreeViewColumn tree_column,
Gtk.CellRenderer cell, Gtk.TreeModel tree_model, Gtk.TreeIter iter)
		{
			Pair val = (Pair) store.GetValue (iter, 0);
			((CellRendererText) cell).Text = val.a;
		}
		
		private static void CellDataB (Gtk.TreeViewColumn tree_column,
Gtk.CellRenderer cell, Gtk.TreeModel tree_model, Gtk.TreeIter iter)
		{
			Pair val = (Pair) store.GetValue (iter, 0);
			((CellRendererText) cell).Text = val.b;
		}
		
		public static void Main (string[] args)
		{
			Application.Init ();

			PopulateStore ();

			Gtk.Window win = new Gtk.Window (&quot;TreeView demo&quot;);
			win.DeleteEvent += new DeleteEventHandler (DeleteCB);
			win.DefaultWidth = 320;
			win.DefaultHeight = 480;

			ScrolledWindow sw = new ScrolledWindow ();
			win.Add (sw);

			TreeView tv = new TreeView (store);
			//tv.Events = EventMask.AllEventsMask;
			//tv.AddEvents((int)EventMask.ButtonPressMask);
			tv.ButtonPressEvent += new ButtonPressEventHandler(OnButtonPressEvent);
			tv.ButtonReleaseEvent += new ButtonReleaseEventHandler(OnButtonReleaseEvent);
			tv.HeadersVisible = true;

			tv.AppendColumn (&quot;One&quot;, new CellRendererText (), new
TreeCellDataFunc (CellDataA));
			tv.AppendColumn (&quot;Two&quot;, new CellRendererText (), new
TreeCellDataFunc (CellDataB));

			sw.Add (tv);
			win.ShowAll ();

			Application.Run ();
		}

		public static void OnButtonPressEvent(object o, ButtonPressEventArgs args)
		{
		    Console.WriteLine(&quot;Button pressed.&quot;);
		}

		public static void OnButtonReleaseEvent(object o, ButtonReleaseEventArgs args)
		{
		    Console.WriteLine(&quot;Button released.&quot;);
		}

		private static void DeleteCB (System.Object o, DeleteEventArgs args)
		{
			Application.Quit ();
		}
	}
}

----8&lt;----

Anyone could drop some knowledge on this issue?

Thanks in advance!

--
Laci

    Blog: <A HREF="http://monda.hu/~laci/blog">http://monda.hu/~laci/blog</A>
    Home: <A HREF="http://mondalaci.objectis.net">http://mondalaci.objectis.net</A>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ManagedTreeViewDemo.cs
Type: text/x-csharp
Size: 2421 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/gtk-sharp-list/attachments/20051022/1fd24e45/ManagedTreeViewDemo.bin">http://lists.ximian.com/pipermail/gtk-sharp-list/attachments/20051022/1fd24e45/ManagedTreeViewDemo.bin</A>
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006517.html">[Gtk-sharp-list] TreeView RowActivated triggers twice
</A></li>
	<LI>Next message: <A HREF="006519.html">[Gtk-sharp-list] TreeView ButonPressEvent doesn't trigger
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6518">[ date ]</a>
              <a href="thread.html#6518">[ thread ]</a>
              <a href="subject.html#6518">[ subject ]</a>
              <a href="author.html#6518">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
