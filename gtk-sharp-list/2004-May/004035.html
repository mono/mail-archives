<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Trying to use GConf, and it wants a slash
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:awilliam%40whitemice.org">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="004032.html">
   <LINK REL="Next"  HREF="004036.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Trying to use GConf, and it wants a slash
   </H1>
    <B>Adam Tauno Williams
    </B> 
    <A HREF="mailto:awilliam%40whitemice.org"
       TITLE="[Gtk-sharp-list] Trying to use GConf, and it wants a slash">awilliam@whitemice.org
       </A><BR>
    <I>Sun, 09 May 2004 17:49:06 -0400</I>
    <P><UL>
        <LI> Previous message: <A HREF="004032.html">[Gtk-sharp-list] Strange problems when compiling gecko-sharp
</A></li>
        <LI> Next message: <A HREF="004036.html">[Gtk-sharp-list] Using Pango to layout text oustise of GTK+
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4035">[ date ]</a>
              <a href="thread.html#4035">[ thread ]</a>
              <a href="subject.html#4035">[ subject ]</a>
              <a href="author.html#4035">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm attempting to add GConf support to my little app using the
instructions found at -
<A HREF="http://www.go-mono.com/monkeyguide/html/en/gnome/bindings/gconf/gconf.">http://www.go-mono.com/monkeyguide/html/en/gnome/bindings/gconf/gconf.</A>
html

But whenever I attempt to bring up the dialog box with the preference
bindings it crashes with:
Unhandled Exception: GLib.GException: Bad key or directory name:
&quot;localhost&quot;: Must begin with a slash (/)
in &lt;0x00090&gt; GConf.Client:Get (string)
in &lt;0x00050&gt; GConf.PropertyEditors.PropertyEditor:Get ()
in &lt;0x00057&gt; GConf.PropertyEditors.PropertyEditor:Setup ()

Why does the default value have to start with a &quot;/&quot;?  I'm confused.

I used...
env GCONF_CONFIG_SOURCE=&quot;&quot; gconftool-2 --makefile-install-rule
GConfSchema.xml
gconfsharp-schemagen mWhitePage GConfSchema.xml &gt; GConf.cs
... to create GConf.cs from ...
&lt;gconfschemafile&gt;
  &lt;schemalist&gt;
    &lt;schema&gt;
      &lt;key&gt;/schemas/apps/botwm/mWhitePage/serverName&lt;/key&gt;
      &lt;applyto&gt;/apps/botwm/mWhitePage/serverName&lt;/applyto&gt;
      &lt;owner&gt;mWhitePage&lt;/owner&gt;
      &lt;type&gt;string&lt;/type&gt;
      &lt;cstype class=&quot;mWhitePage.ServerName&quot;&gt;string&lt;/cstype&gt;
      &lt;locale name=&quot;C&quot;&gt;
        &lt;short&gt;Server Name&lt;/short&gt;
        &lt;long&gt;Fully qualified domain name of LDAP server&lt;/long&gt;
      &lt;/locale&gt;
      &lt;default&gt;localhost&lt;/default&gt;
    &lt;/schema&gt;
    &lt;schema&gt;
      &lt;key&gt;/schemas/apps/botwm/mWhitePage/serverRootDN&lt;/key&gt;
      &lt;applyto&gt;/apps/botwm/mWhitePage/serverRootDN&lt;/applyto&gt;
      &lt;owner&gt;mWhitePage&lt;/owner&gt;
      &lt;type&gt;string&lt;/type&gt;
      &lt;cstype class=&quot;mWhitePage.ServerRootDN&quot;&gt;string&lt;/cstype&gt;
      &lt;locale name=&quot;C&quot;&gt;
        &lt;short&gt;Server Root&lt;/short&gt;
        &lt;long&gt;Root DN of LDAP server&lt;/long&gt;
      &lt;/locale&gt;
      &lt;default&gt;o=Morrison Industries,c=US&lt;/default&gt;
    &lt;/schema&gt;
    &lt;schema&gt;
      &lt;key&gt;/schemas/apps/botwm/mWhitePage/serverBindDN&lt;/key&gt;
      &lt;applyto&gt;/apps/botwm/mWhitePage/serverBindDN&lt;/applyto&gt;
      &lt;owner&gt;mWhitePage&lt;/owner&gt;
      &lt;type&gt;string&lt;/type&gt;
      &lt;cstype class=&quot;mWhitePage.ServerBindDN&quot;&gt;string&lt;/cstype&gt;
      &lt;locale name=&quot;C&quot;&gt;
        &lt;short&gt;Bind DN&lt;/short&gt;
        &lt;long&gt;DN for binding to LDAP server&lt;/long&gt;
      &lt;/locale&gt;
      &lt;default&gt;ou=People,o=Morrison Industries,c=US&lt;/default&gt;
    &lt;/schema&gt;    
  &lt;/schemalist&gt;
&lt;/gconfschemafile&gt;

Summoning up the preference dialog with...
public class PreferencesWindow
{
[Widget] Dialog preferencesWindow;

	public PreferencesWindow() 
	{
     Glade.XML gxml = new Glade.XML (null, &quot;gui.glade&quot;,
&quot;preferencesWindow&quot;, null);
	 gxml.Autoconnect (this);
	 GConf.PropertyEditors.EditorShell shell =
	   new GConf.PropertyEditors.EditorShell(gxml);
	 shell.Add(mWhitePage.Settings.ServerName, &quot;fieldServerName&quot;);
	 shell.Add(mWhitePage.Settings.ServerRootDN, &quot;fieldServerRootDN&quot;);
	 shell.Add(mWhitePage.Settings.ServerBindDN, &quot;fieldServerBindDN&quot;);
	}
	


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="004032.html">[Gtk-sharp-list] Strange problems when compiling gecko-sharp
</A></li>
	<LI> Next message: <A HREF="004036.html">[Gtk-sharp-list] Using Pango to layout text oustise of GTK+
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4035">[ date ]</a>
              <a href="thread.html#4035">[ thread ]</a>
              <a href="subject.html#4035">[ subject ]</a>
              <a href="author.html#4035">[ author ]</a>
         </LI>
       </UL>
</body></html>
