<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Gconf support for gst-sharp
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:latexer%40gentoo.org">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="004045.html">
   <LINK REL="Next"  HREF="004034.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Gconf support for gst-sharp
   </H1>
    <B>Peter Johanson
    </B> 
    <A HREF="mailto:latexer%40gentoo.org"
       TITLE="[Gtk-sharp-list] Gconf support for gst-sharp">latexer@gentoo.org
       </A><BR>
    <I>Fri, 7 May 2004 01:19:10 -0400</I>
    <P><UL>
        <LI> Previous message: <A HREF="004045.html">[Gtk-sharp-list] Windows System Tray And Minimized Windows
</A></li>
        <LI> Next message: <A HREF="004034.html">[Gtk-sharp-list] Gconf support for gst-sharp
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4019">[ date ]</a>
              <a href="thread.html#4019">[ thread ]</a>
              <a href="subject.html#4019">[ subject ]</a>
              <a href="author.html#4019">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--4bRzO86E/ozDv8r1
Content-Type: multipart/mixed; boundary=&quot;C7zPtVaVf+AK4Oqc&quot;
Content-Disposition: inline


--C7zPtVaVf+AK4Oqc
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

hey all,

glad to finally have anoncvs working for gst-sharp. Attached is a patch
to add support for the small bits of gconf support in gstreamer. In
particular, it lets you poll for the default sinks and sources, instead
of setting them by hand. Included in the patch is a change to
sample/PlayMp3.cs to demonstrate how this is done. I'd say this is
pretty important to bind, but that's just me. (:


-pete

--=20
Peter Johanson
&lt;<A HREF="mailto:latexer@gentoo.org">latexer@gentoo.org</A>&gt;

Key ID =3D 0x6EFA3917
Key fingerprint =3D A90A 2518 57B1 9D20 9B71  A2FF 8649 439B 6EFA 3917

--C7zPtVaVf+AK4Oqc
Content-Type: text/plain; charset=us-ascii
Content-Disposition: attachment; filename=&quot;gst-sharp-gconf-support.diff&quot;
Content-Transfer-Encoding: quoted-printable

Index: gst-sharp/gst-api.raw
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
RCS file: /mono/gst-sharp/gst-sharp/gst-api.raw,v
retrieving revision 1.2
diff -u -b -B -r1.2 gst-api.raw
--- gst-sharp/gst-api.raw	5 May 2004 23:17:04 -0000	1.2
+++ gst-sharp/gst-api.raw	7 May 2004 05:16:24 -0000
@@ -5840,4 +5840,48 @@
       &lt;/method&gt;
     &lt;/object&gt;
   &lt;/namespace&gt;
+  &lt;namespace name=3D&quot;Gst&quot; library=3D&quot;gstgconf-0.8&quot;&gt;
+    &lt;class name=3D&quot;Gconf&quot; cname=3D&quot;GstGconf_&quot;&gt;
+      &lt;method name=3D&quot;GetDefaultAudioSink&quot; cname=3D&quot;gst_gconf_get_default_=
audio_sink&quot; shared=3D&quot;true&quot;&gt;
+        &lt;return-type type=3D&quot;GstElement*&quot;/&gt;
+      &lt;/method&gt;
+      &lt;method name=3D&quot;GetDefaultAudioSrc&quot; cname=3D&quot;gst_gconf_get_default_a=
udio_src&quot; shared=3D&quot;true&quot;&gt;
+        &lt;return-type type=3D&quot;GstElement*&quot;/&gt;
+      &lt;/method&gt;
+      &lt;method name=3D&quot;GetDefaultVideoSink&quot; cname=3D&quot;gst_gconf_get_default_=
video_sink&quot; shared=3D&quot;true&quot;&gt;
+        &lt;return-type type=3D&quot;GstElement*&quot;/&gt;
+      &lt;/method&gt;
+      &lt;method name=3D&quot;GetDefaultVideoSrc&quot; cname=3D&quot;gst_gconf_get_default_v=
ideo_src&quot; shared=3D&quot;true&quot;&gt;
+        &lt;return-type type=3D&quot;GstElement*&quot;/&gt;
+      &lt;/method&gt;
+      &lt;method name=3D&quot;GetDefaultVisualizationElement&quot; cname=3D&quot;gst_gconf_g=
et_default_visualization_element&quot; shared=3D&quot;true&quot;&gt;
+        &lt;return-type type=3D&quot;GstElement*&quot;/&gt;
+      &lt;/method&gt;
+      &lt;method name=3D&quot;GetString&quot; cname=3D&quot;gst_gconf_get_string&quot; shared=3D&quot;=
true&quot;&gt;
+        &lt;return-type type=3D&quot;gchar*&quot;/&gt;
+        &lt;parameters&gt;
+          &lt;parameter type=3D&quot;const-gchar*&quot; name=3D&quot;key&quot;/&gt;
+        &lt;/parameters&gt;
+      &lt;/method&gt;
+      &lt;method name=3D&quot;RenderBinFromDescription&quot; cname=3D&quot;gst_gconf_render_=
bin_from_description&quot; shared=3D&quot;true&quot;&gt;
+        &lt;return-type type=3D&quot;GstElement*&quot;/&gt;
+        &lt;parameters&gt;
+          &lt;parameter type=3D&quot;const-gchar*&quot; name=3D&quot;description&quot;/&gt;
+        &lt;/parameters&gt;
+      &lt;/method&gt;
+      &lt;method name=3D&quot;RenderBinFromKey&quot; cname=3D&quot;gst_gconf_render_bin_from=
_key&quot; shared=3D&quot;true&quot;&gt;
+        &lt;return-type type=3D&quot;GstElement*&quot;/&gt;
+        &lt;parameters&gt;
+          &lt;parameter type=3D&quot;const-gchar*&quot; name=3D&quot;key&quot;/&gt;
+        &lt;/parameters&gt;
+      &lt;/method&gt;
+      &lt;method name=3D&quot;SetString&quot; cname=3D&quot;gst_gconf_set_string&quot; shared=3D&quot;=
true&quot;&gt;
+        &lt;return-type type=3D&quot;void&quot;/&gt;
+        &lt;parameters&gt;
+          &lt;parameter type=3D&quot;const-gchar*&quot; name=3D&quot;key&quot;/&gt;
+          &lt;parameter type=3D&quot;const-gchar*&quot; name=3D&quot;value&quot;/&gt;
+        &lt;/parameters&gt;
+      &lt;/method&gt;
+    &lt;/class&gt;
+  &lt;/namespace&gt;
 &lt;/api&gt;
Index: gst-sharp/gst-sharp.dll.config.in
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
RCS file: /mono/gst-sharp/gst-sharp/gst-sharp.dll.config.in,v
retrieving revision 1.2
diff -u -b -B -r1.2 gst-sharp.dll.config.in
--- gst-sharp/gst-sharp.dll.config.in	5 May 2004 23:17:04 -0000	1.2
+++ gst-sharp/gst-sharp.dll.config.in	7 May 2004 05:16:24 -0000
@@ -3,4 +3,5 @@
   &lt;dllmap dll=3D&quot;libgobject-2.0-0.dll&quot; target=3D&quot;<A HREF="mailto:libgobject-2.0@LIB_PREFIX">libgobject-2.0@LIB_PREFIX</A>=
@<A HREF="mailto:.0@LIB_SUFFIX">.0@LIB_SUFFIX</A>@&quot;/&gt;
   &lt;dllmap dll=3D&quot;gstreamer-0.8&quot; target=3D&quot;<A HREF="mailto:libgstreamer-0.8@LIB_PREFIX">libgstreamer-0.8@LIB_PREFIX</A>@<A HREF="mailto:.1@L">.1@L</A>=
IB_SUFFIX@&quot;/&gt;
   &lt;dllmap dll=3D&quot;gstplay-0.8&quot; target=3D&quot;<A HREF="mailto:libgstplay-0.8@LIB_PREFIX">libgstplay-0.8@LIB_PREFIX</A>@<A HREF="mailto:.0@LIB_S">.0@LIB_S</A>=
UFFIX@&quot;/&gt;
+  &lt;dllmap dll=3D&quot;gstgconf-0.8&quot; target=3D&quot;<A HREF="mailto:libgstgconf-0.8@LIB_PREFIX">libgstgconf-0.8@LIB_PREFIX</A>@<A HREF="mailto:.0@LIB">.0@LIB</A>=
_SUFFIX@&quot;/&gt;
 &lt;/configuration&gt;
Index: sample/PlayMp3.cs
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
RCS file: /mono/gst-sharp/sample/PlayMp3.cs,v
retrieving revision 1.1.1.1
diff -u -b -B -r1.1.1.1 PlayMp3.cs
--- sample/PlayMp3.cs	28 Apr 2004 13:39:09 -0000	1.1.1.1
+++ sample/PlayMp3.cs	7 May 2004 05:16:24 -0000
@@ -27,17 +27,17 @@
 		Element mad =3D ElementFactory.Make (&quot;mad&quot;, &quot;mad&quot;);
 	=09
 		// Create the audio sink
-		Element osssink =3D ElementFactory.Make (&quot;osssink&quot;, &quot;osssink&quot;);
+		Element sink =3D Gst.Gconf.DefaultAudioSink;
 	=09
=20
 		// add the elements to the main pipeline
 		bin.Add (filesrc);
 		bin.Add (mad);
-		bin.Add (osssink);
+		bin.Add (sink);
    =20
 		// connect the elements
 		filesrc.Link (mad);
-		mad.Link (osssink);
+		mad.Link (sink);
 	=09
 		// start playing
 		bin.SetState (ElementState.Playing);
Index: source/gst-sharp-source.xml
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
RCS file: /mono/gst-sharp/source/gst-sharp-source.xml,v
retrieving revision 1.2
diff -u -b -B -r1.2 gst-sharp-source.xml
--- source/gst-sharp-source.xml	5 May 2004 23:17:05 -0000	1.2
+++ source/gst-sharp-source.xml	7 May 2004 05:16:24 -0000
@@ -14,5 +14,10 @@
 		&lt;dir&gt;gst-plugins-0.8.1/gst-libs/gst/play&lt;/dir&gt;
       &lt;/namespace&gt;
     &lt;/library&gt;
+    &lt;library name=3D&quot;gstgconf-0.8&quot;&gt;
+      &lt;namespace name=3D&quot;Gst&quot;&gt;
+		&lt;dir&gt;gst-plugins-0.8.1/gst-libs/gst/gconf&lt;/dir&gt;
+      &lt;/namespace&gt;
+    &lt;/library&gt;
   &lt;/api&gt;
 &lt;/gapi-parser-input&gt;

--C7zPtVaVf+AK4Oqc--

--4bRzO86E/ozDv8r1
Content-Type: application/pgp-signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.4 (GNU/Linux)

iD8DBQFAmxxOhklDm276ORcRAkgRAKC2Y9zsshG/+VJ+S2xR0d2McViFbgCgoZpk
8fr22Pc5b1EobsjQ9BcH0Vk=
=d+41
-----END PGP SIGNATURE-----

--4bRzO86E/ozDv8r1--

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="004045.html">[Gtk-sharp-list] Windows System Tray And Minimized Windows
</A></li>
	<LI> Next message: <A HREF="004034.html">[Gtk-sharp-list] Gconf support for gst-sharp
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4019">[ date ]</a>
              <a href="thread.html#4019">[ thread ]</a>
              <a href="subject.html#4019">[ subject ]</a>
              <a href="author.html#4019">[ author ]</a>
         </LI>
       </UL>
</body></html>
