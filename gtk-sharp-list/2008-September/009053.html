<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list]  Gtk.DotNet.Graphics problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20%20Gtk.DotNet.Graphics%20problem&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009048.html">
   <LINK REL="Next"  HREF="009054.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list]  Gtk.DotNet.Graphics problem</H1>
    <B>daniil00</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20%20Gtk.DotNet.Graphics%20problem&In-Reply-To="
       TITLE="[Gtk-sharp-list]  Gtk.DotNet.Graphics problem">fr.daniil at gmail.com
       </A><BR>
    <I>Thu Sep 25 14:01:11 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="009048.html">[Gtk-sharp-list] Fwd: Message Status - Undeliverable
</A></li>
        <LI>Next message: <A HREF="009054.html">[Gtk-sharp-list] Gtk.DotNet.Graphics problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9053">[ date ]</a>
              <a href="thread.html#9053">[ thread ]</a>
              <a href="subject.html#9053">[ subject ]</a>
              <a href="author.html#9053">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I get this error from time to time when I create the Graphics object with
Gtk.DotNet.Graphics.FromDrawable

System.Drawing.Graphics ret = Gtk.DotNet.Graphics.FromDrawable(
this.drawable );

Any ideas why ?

mono: xcb_lock.c:77: _XGetXCBBuffer: Assertion `((int) ((xcb_req) -
(dpy-&gt;request)) &gt;= 0)' failed.
Stacktrace:

  at (wrapper managed-to-native)
System.Drawing.GDIPlus.GdipCreateFromXDrawable_linux (intptr,intptr,intptr&amp;)
&lt;0x00004&gt;
  at (wrapper managed-to-native)
System.Drawing.GDIPlus.GdipCreateFromXDrawable_linux (intptr,intptr,intptr&amp;)
&lt;0xffffffff&gt;
  at System.Drawing.Graphics.FromXDrawable (intptr,intptr) [0x00000] in
/usr/src/packages/BUILD/mono-1.9.1/mcs/class/System.Drawing/System.Drawing/Graphics.cs:1758
  at (wrapper runtime-invoke)
System.Drawing.Graphics.runtime_invoke_Graphics_intptr_intptr
(object,intptr,intptr,intptr) &lt;0xffffffff&gt;
  at (wrapper managed-to-native) System.Reflection.MonoMethod.InternalInvoke
(object,object[]) &lt;0x00004&gt;
  at (wrapper managed-to-native) System.Reflection.MonoMethod.InternalInvoke
(object,object[]) &lt;0xffffffff&gt;
  at System.Reflection.MonoMethod.Invoke
(object,System.Reflection.BindingFlags,System.Reflection.Binder,object[],System.Globalization.CultureInfo)
[0x00055] in
/usr/src/packages/BUILD/mono-1.9.1/mcs/class/corlib/System.Reflection/MonoMethod.cs:149
  at System.Reflection.MethodBase.Invoke (object,object[]) [0x00000] in
/usr/src/packages/BUILD/mono-1.9.1/mcs/class/corlib/System.Reflection/MethodBase.cs:90
  at Gtk.DotNet.Graphics.FromDrawable (Gdk.Drawable,bool) [0x0011f] in
/usr/src/packages/BUILD/gtk-sharp-2.12.1/gtkdotnet/Graphics.cs:94
  at Gtk.DotNet.Graphics.FromDrawable (Gdk.Drawable) [0x00000] in
/usr/src/packages/BUILD/gtk-sharp-2.12.1/gtkdotnet/Graphics.cs:53
  at HollyLibrary.DrawItemEventArgs.get_Graphics () [0x00002] in
/home/dantes/Documents/Surse/holly-gtk-widgets/HollyLibrary/TreeViewBased/SimpleListEdit/Events/DrawItemEventArgs.cs:45
  at HollyLibrary.HTreeView.OnDrawItem
(int,Gtk.TreeIter,Gdk.Drawable,Gtk.Widget,Gdk.Rectangle,Gdk.Rectangle,Gdk.Rectangle,Gtk.CellRendererState)
[0x000c0] in
/home/dantes/Documents/Surse/holly-gtk-widgets/HollyLibrary/TreeViewBased/TreeView/HTreeView.cs:326
  at HollyLibrary.CellRendererCustom.Render
(Gdk.Drawable,Gtk.Widget,Gdk.Rectangle,Gdk.Rectangle,Gdk.Rectangle,Gtk.CellRendererState)
[0x00000] in
/home/dantes/Documents/Surse/holly-gtk-widgets/HollyLibrary/TreeViewBased/CellRendererCustom.cs:36
  at Gtk.CellRenderer.Render_cb
(intptr,intptr,intptr,Gdk.Rectangle&amp;,Gdk.Rectangle&amp;,Gdk.Rectangle&amp;,Gtk.CellRendererState)
[0x00027] in
/usr/src/packages/BUILD/gtk-sharp-2.12.1/gtk/CellRenderer.custom:99
  at (wrapper native-to-managed) Gtk.CellRenderer.Render_cb
(intptr,intptr,intptr,Gdk.Rectangle&amp;,Gdk.Rectangle&amp;,Gdk.Rectangle&amp;,Gtk.CellRendererState)
&lt;0xffffffff&gt;
  at (wrapper managed-to-native) Gtk.Application.gtk_main () &lt;0x00004&gt;
  at (wrapper managed-to-native) Gtk.Application.gtk_main () &lt;0xffffffff&gt;
  at Gtk.Application.Run () [0x00000] in
/usr/src/packages/BUILD/gtk-sharp-2.12.1/gtk/Application.cs:106
  at test2.MainClass.Main (string[]) [0x00011] in
/home/dantes/Documents/Surse/holly-gtk-widgets/test2/Main.cs:18
  at (wrapper runtime-invoke) test2.MainClass.runtime_invoke_void_string[]
(object,intptr,intptr,intptr) &lt;0xffffffff&gt;

Native stacktrace:

	/usr/bin/mono [0x81813ce]
	[0xffffe410]
	/lib/libc.so.6(abort+0x188) [0xb7d36238]
	/lib/libc.so.6(__assert_fail+0xee) [0xb7d2d70e]
	/usr/lib/libX11.so.6 [0xb6486684]
	/usr/lib/libX11.so.6 [0xb648685d]
	/usr/lib/libX11.so.6(_XReply+0x136) [0xb64875c6]
	/usr/lib/libX11.so.6(XGetGeometry+0x6d) [0xb6462c2d]
	/usr/lib/libgdiplus.so(GdipCreateFromXDrawable_linux+0x6d) [0xb2ac5f9d]
	[0xb2c4bde9]
	[0xb2c4bd5f]
	[0xb2c4bcd5]
	/usr/bin/mono(mono_runtime_invoke_array+0x3e3) [0x80f18c3]
	/usr/bin/mono [0x80f9983]
	[0xb772a7c5]
	[0xb7729d83]
	[0xb772ee23]
	[0xb2d9360c]
	[0xb2d932fd]
	[0xb2b9b936]
	[0xb2b9b4dc]
	[0xb2b9af66]
	[0xb2b9ace3]
	[0xb5f8cd77]
	/usr/lib/libgtk-x11-2.0.so.0(gtk_cell_renderer_render+0xfe) [0xb66bf4ee]
	/usr/lib/libgtk-x11-2.0.so.0 [0xb68ae88a]
	/usr/lib/libgtk-x11-2.0.so.0 [0xb68af69c]
	/usr/lib/libgtk-x11-2.0.so.0 [0xb68aa7f3]
	/usr/lib/libgtk-x11-2.0.so.0 [0xb68ab532]
	/usr/lib/libgtk-x11-2.0.so.0 [0xb6796df6]
	/usr/lib/libgobject-2.0.so.0 [0xb63e6389]
	/usr/lib/libgobject-2.0.so.0(g_closure_invoke+0x1ab) [0xb63e7c3b]
	/usr/lib/libgobject-2.0.so.0 [0xb63fbe7f]
	/usr/lib/libgobject-2.0.so.0(g_signal_emit_valist+0x66c) [0xb63fd50c]
	/usr/lib/libgobject-2.0.so.0(g_signal_emit+0x26) [0xb63fdae6]
	/usr/lib/libgtk-x11-2.0.so.0 [0xb68bfb6e]
	/usr/lib/libgtk-x11-2.0.so.0(gtk_main_do_event+0x568) [0xb6790fc8]
	/usr/lib/libgdk-x11-2.0.so.0 [0xb65cfe75]
	/usr/lib/libgdk-x11-2.0.so.0(gdk_window_process_all_updates+0xff)
[0xb65d048f]
	/usr/lib/libgdk-x11-2.0.so.0 [0xb65d04bb]
	/usr/lib/libgdk-x11-2.0.so.0 [0xb65b582b]
	/usr/lib/libglib-2.0.so.0 [0xb7ef13f1]
	/usr/lib/libglib-2.0.so.0(g_main_context_dispatch+0x1e9) [0xb7ef32d9]
	/usr/lib/libglib-2.0.so.0 [0xb7ef685b]
	/usr/lib/libglib-2.0.so.0(g_main_loop_run+0x1ca) [0xb7ef6d2a]
	/usr/lib/libgtk-x11-2.0.so.0(gtk_main+0xb9) [0xb6791279]
	[0xb2c48e46]
	[0xb2c48e10]
	[0xb7720269]
	[0xb77201c3]
	/usr/bin/mono(mono_runtime_exec_main+0xb6) [0x80efb66]
	/usr/bin/mono(mono_runtime_run_main+0x16d) [0x80f018d]
	/usr/bin/mono(mono_main+0x623) [0x805af33]
	/usr/bin/mono [0x805a422]
	/lib/libc.so.6(__libc_start_main+0xe5) [0xb7d205f5]
	/usr/bin/mono [0x805a361]

Debug info from gdb:

[?1034h(no debugging symbols found)
[Thread debugging using libthread_db enabled]
[New Thread 0xb7d086e0 (LWP 21028)]
[New Thread 0xb719bb90 (LWP 21032)]
[New Thread 0xb771fb90 (LWP 21031)]
0xffffe430 in __kernel_vsyscall ()
  3 Thread 0xb771fb90 (LWP 21031)  0xffffe430 in __kernel_vsyscall ()
  2 Thread 0xb719bb90 (LWP 21032)  0xffffe430 in __kernel_vsyscall ()
  1 Thread 0xb7d086e0 (LWP 21028)  0xffffe430 in __kernel_vsyscall ()

Thread 3 (Thread 0xb771fb90 (LWP 21031)):
#0  0xffffe430 in __kernel_vsyscall ()
#1  0xb7e803e6 in nanosleep () from /lib/libpthread.so.0
#2  0x0811d588 in ?? ()
#3  0xb7e79175 in start_thread () from /lib/libpthread.so.0
#4  0xb7dd7dce in clone () from /lib/libc.so.6

Thread 2 (Thread 0xb719bb90 (LWP 21032)):
#0  0xffffe430 in __kernel_vsyscall ()
#1  0xb7e7cc15 in pthread_cond_wait@@GLIBC_2.3.2 () from
/lib/libpthread.so.0
#2  0xb6232067 in ?? () from /usr/lib/libxcb.so.1
#3  0xb6233004 in xcb_send_request () from /usr/lib/libxcb.so.1
#4  0xb64863c6 in _XPutXCBBuffer () from /usr/lib/libX11.so.6
#5  0xb6486790 in ?? () from /usr/lib/libX11.so.6
#6  0xb6315042 in XRenderFreePicture () from /usr/lib/libXrender.so.1
#7  0xb2b3baf4 in ?? () from /usr/lib/libgdiplus.so
#8  0xb2b1190c in mono_cairo_surface_finish () from /usr/lib/libgdiplus.so
#9  0xb2b119d8 in mono_cairo_surface_destroy () from /usr/lib/libgdiplus.so
#10 0xb2b012e5 in ?? () from /usr/lib/libgdiplus.so
#11 0xb2af9777 in mono_cairo_destroy () from /usr/lib/libgdiplus.so
#12 0xb2ac5c76 in GdipDeleteGraphics () from /usr/lib/libgdiplus.so
#13 0xb2c4d583 in ?? ()
#14 0xb2c4d4fe in ?? ()
#15 0xb2c4d47f in ?? ()
#16 0xb2b9bb61 in ?? ()
#17 0xb2c50759 in ?? ()
#18 0x08188931 in ?? ()
#19 0x0813b191 in ?? ()
#20 0x08188b6c in ?? ()
#21 0x080c8334 in ?? ()
#22 0x081238be in ?? ()
#23 0x0813eed5 in ?? ()
#24 0xb7e79175 in start_thread () from /lib/libpthread.so.0
#25 0xb7dd7dce in clone () from /lib/libc.so.6

Thread 1 (Thread 0xb7d086e0 (LWP 21028)):
#0  0xffffe430 in __kernel_vsyscall ()
#1  0xb7e7fbab in read () from /lib/libpthread.so.0
#2  0xb7f2ab0e in read_ints () from /usr/lib/libglib-2.0.so.0
#3  0xb7f2aff2 in fork_exec_with_pipes () from /usr/lib/libglib-2.0.so.0
#4  0xb7f2b96e in g_spawn_sync () from /usr/lib/libglib-2.0.so.0
#5  0xb7f2be3c in g_spawn_command_line_sync () from
/usr/lib/libglib-2.0.so.0
#6  0x08181485 in ?? ()
#7  &lt;signal handler called&gt;
#8  0xffffe430 in __kernel_vsyscall ()
#9  0xb7d34900 in raise () from /lib/libc.so.6
#10 0xb7d36238 in abort () from /lib/libc.so.6
#11 0xb7d2d70e in __assert_fail () from /lib/libc.so.6
#12 0xb6486684 in _XGetXCBBuffer () from /usr/lib/libX11.so.6
#13 0xb648685d in ?? () from /usr/lib/libX11.so.6
#14 0xb64875c6 in _XReply () from /usr/lib/libX11.so.6
#15 0xb6462c2d in XGetGeometry () from /usr/lib/libX11.so.6
#16 0xb2ac5f9d in GdipCreateFromXDrawable_linux () from
/usr/lib/libgdiplus.so
#17 0xb2c4bde9 in ?? ()
#18 0xb2c4bd5f in ?? ()
#19 0xb2c4bcd5 in ?? ()
#20 0x080f18c3 in mono_runtime_invoke_array ()
#21 0x080f9983 in ?? ()
#22 0xb772a7c5 in ?? ()
#23 0xb7729d83 in ?? ()
#24 0xb772ee23 in ?? ()
#25 0xb2d9360c in ?? ()
#26 0xb2d932fd in ?? ()
#27 0xb2b9b936 in ?? ()
#28 0xb2b9b4dc in ?? ()
#29 0xb2b9af66 in ?? ()
#30 0xb2b9ace3 in ?? ()
#31 0xb5f8cd77 in ?? ()
#32 0xb66bf4ee in gtk_cell_renderer_render () from
/usr/lib/libgtk-x11-2.0.so.0
#33 0xb68ae88a in ?? () from /usr/lib/libgtk-x11-2.0.so.0
#34 0xb68af69c in ?? () from /usr/lib/libgtk-x11-2.0.so.0
#35 0xb68aa7f3 in ?? () from /usr/lib/libgtk-x11-2.0.so.0
#36 0xb68ab532 in ?? () from /usr/lib/libgtk-x11-2.0.so.0
#37 0xb6796df6 in ?? () from /usr/lib/libgtk-x11-2.0.so.0
#38 0xb63e6389 in g_type_class_meta_marshal ()
   from /usr/lib/libgobject-2.0.so.0
#39 0xb63e7c3b in g_closure_invoke () from /usr/lib/libgobject-2.0.so.0
#40 0xb63fbe7f in signal_emit_unlocked_R () from
/usr/lib/libgobject-2.0.so.0
#41 0xb63fd50c in g_signal_emit_valist () from /usr/lib/libgobject-2.0.so.0
#42 0xb63fdae6 in g_signal_emit () from /usr/lib/libgobject-2.0.so.0
#43 0xb68bfb6e in ?? () from /usr/lib/libgtk-x11-2.0.so.0
#44 0xb6790fc8 in gtk_main_do_event () from /usr/lib/libgtk-x11-2.0.so.0
#45 0xb65cfe75 in ?? () from /usr/lib/libgdk-x11-2.0.so.0
#46 0xb65d048f in gdk_window_process_all_updates ()
   from /usr/lib/libgdk-x11-2.0.so.0
#47 0xb65d04bb in ?? () from /usr/lib/libgdk-x11-2.0.so.0
#48 0xb65b582b in ?? () from /usr/lib/libgdk-x11-2.0.so.0
#49 0xb7ef13f1 in g_idle_dispatch () from /usr/lib/libglib-2.0.so.0
#50 0xb7ef32d9 in g_main_context_dispatch () from /usr/lib/libglib-2.0.so.0
#51 0xb7ef685b in g_main_context_iterate () from /usr/lib/libglib-2.0.so.0
#52 0xb7ef6d2a in g_main_loop_run () from /usr/lib/libglib-2.0.so.0
#53 0xb6791279 in gtk_main () from /usr/lib/libgtk-x11-2.0.so.0
#54 0xb2c48e46 in ?? ()
#55 0xb2c48e10 in ?? ()
#56 0xb7720269 in ?? ()
#57 0xb77201c3 in ?? ()
#58 0x080efb66 in mono_runtime_exec_main ()
#59 0x080f018d in mono_runtime_run_main ()
#60 0x0805af33 in mono_main ()
#61 0x0805a422 in ?? ()
#62 0xb7d205f5 in __libc_start_main () from /lib/libc.so.6
#63 0x0805a361 in ?? ()
#0  0xffffe430 in __kernel_vsyscall ()


=================================================================
Got a SIGABRT while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
=================================================================

-- 
View this message in context: <A HREF="http://www.nabble.com/Gtk.DotNet.Graphics-problem-tp19675164p19675164.html">http://www.nabble.com/Gtk.DotNet.Graphics-problem-tp19675164p19675164.html</A>
Sent from the Mono - Gtk# mailing list archive at Nabble.com.

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009048.html">[Gtk-sharp-list] Fwd: Message Status - Undeliverable
</A></li>
	<LI>Next message: <A HREF="009054.html">[Gtk-sharp-list] Gtk.DotNet.Graphics problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9053">[ date ]</a>
              <a href="thread.html#9053">[ thread ]</a>
              <a href="subject.html#9053">[ subject ]</a>
              <a href="author.html#9053">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
