<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Updating of a window not done right away
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Updating%20of%20a%20window%20not%20done%20right%20away&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009030.html">
   <LINK REL="Next"  HREF="009039.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Updating of a window not done right away</H1>
    <B>Mathias Tausig</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Updating%20of%20a%20window%20not%20done%20right%20away&In-Reply-To="
       TITLE="[Gtk-sharp-list] Updating of a window not done right away">mtausig at fsmat.at
       </A><BR>
    <I>Tue Sep 23 04:51:37 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="009030.html">[Gtk-sharp-list] chaning FONT of Gtk.RadioButton
</A></li>
        <LI>Next message: <A HREF="009039.html">[Gtk-sharp-list] Updating of a window not done right away
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9032">[ date ]</a>
              <a href="thread.html#9032">[ thread ]</a>
              <a href="subject.html#9032">[ subject ]</a>
              <a href="author.html#9032">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hy!

I wrote a class DisplayPanel (see below., which should just display some text right away. The problem is, it just doesn't do that if I start some blocking function after setting the text. If I execute

Gtk.Window w = new Gtk.Window(&quot;Test&quot;);
w.Show();
for(int i=0;i&lt;20;++i){
	DisplayPanel dp = new DisplayPanel(&quot;&quot;,w);
	dp.SetTitle(i);
	Thread.Sleep(3000);
	dp.Dispose();
}

sometimes it does display the correct text right away, but sometimes (rather unpredictable, about every third time) I get just an empty Window.
Does anyone have an idea, what might cause this?

cheers
Mathias

public class DisplayPanel : Gtk.MessageDialog{
       private String title, msg;
       public DisplayPanel(String s, Window parent) : base(parent, DialogFlags.DestroyWithParent, MessageType.Other, ButtonsType.None, s){
	   title=&quot;&quot;;
	   msg=&quot;&quot;;
	   Decorated=false; //keine Windowmanager Verzierungen
	   AcceptFocus=false; //Cursor wird nicht angezeigt
      }	   
																						   
   public void SetTitle(String value){
  	 title=value;
	 msg=&quot;&quot;;
	 Update();
  }
   public void SetText(String s){
	msg=s;
	Update();
   }
  public void AddText(String s){
	SetText(msg+s);
  }

  private void Update(){
    Text=title;
    SecondaryText=msg;
   ActivateDefault();
   Present();
   Stick();

   while(Application.EventsPending()){
     Application.RunIteration();
   }
 }
}
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009030.html">[Gtk-sharp-list] chaning FONT of Gtk.RadioButton
</A></li>
	<LI>Next message: <A HREF="009039.html">[Gtk-sharp-list] Updating of a window not done right away
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9032">[ date ]</a>
              <a href="thread.html#9032">[ thread ]</a>
              <a href="subject.html#9032">[ subject ]</a>
              <a href="author.html#9032">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
