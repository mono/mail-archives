<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Adding a custom widget to (designer generated) GUI
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Adding%20a%20custom%20widget%20to%20%28designer%20generated%29%20GUI&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008991.html">
   <LINK REL="Next"  HREF="008994.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Adding a custom widget to (designer generated) GUI</H1>
    <B>True Friend</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Adding%20a%20custom%20widget%20to%20%28designer%20generated%29%20GUI&In-Reply-To="
       TITLE="[Gtk-sharp-list] Adding a custom widget to (designer generated) GUI">true.friend2004 at gmail.com
       </A><BR>
    <I>Sun Sep 14 19:33:09 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="008991.html">[Gtk-sharp-list] Gtk# &amp; background threads
</A></li>
        <LI>Next message: <A HREF="008994.html">[Gtk-sharp-list] Adding a custom widget to (designer generated)	GUI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8993">[ date ]</a>
              <a href="thread.html#8993">[ thread ]</a>
              <a href="subject.html#8993">[ subject ]</a>
              <a href="author.html#8993">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>HI
I have subclassed a textview to type custom language (Urdu in my case).
Providing the code for others' benefit.
-----------------------------
public class UTextView: Gtk.TextView
    {
        bool lang = true;
        public UTextView()
        {
            this.ModifyFont(Pango.FontDescription.FromString(&quot;Nafees Web
Naskh 12&quot;));
            this.WrapMode = Gtk.WrapMode.Word;
        }
        protected override bool OnKeyPressEvent (EventKey evnt)
        {
        Dictionary&lt;char, char&gt; dict = new Dictionary&lt;char,char&gt;();
        dict['`'] = '&#1613;';
        dict['1'] = '1';
        dict['2'] = '2';
        dict['3'] = '3';
        dict['4'] = '4';
        dict['5'] = '5';
        dict['6'] = '6';
        dict['7'] = '7';
        dict['8'] = '8';
        dict['9'] = '9';
        dict['0'] = '0';
        dict['-'] = '&#1571;';
        dict['='] = '&#1553;';
        dict['~'] = '&#1611;';
        dict['!'] = '!';
        dict['@'] = '&#1644;';
        dict['#'] = '&#1536;';
        dict['$'] = '&#1537;';
        dict['%'] = '';
        dict['^'] = '&#1750;';
        dict['&amp;'] = '&#1620;';
        dict['*'] = '&#1612;';
        dict['('] = ')';
        dict[')'] = '(';
        dict['_'] = '&#1552;';
        dict['+'] = '&#1553;';
        dict['q'] = '&#1602;';
        dict['Q'] = '&#1618;';
        dict['w'] = '&#1608;';
        dict['W'] = '&#1572;';
        dict['e'] = '&#1593;';
        dict['E'] = '&#1617;';
        dict['r'] = '&#1585;';
        dict['R'] = '&#1681;';
        dict['t'] = '&#1578;';
        dict['T'] = '&#1657;';
        dict['y'] = '&#1746;';
        dict['Y'] = '&#1747;';
        dict['u'] = '&#1574;';
        dict['U'] = '&#1569;';
        dict['i'] = '&#1740;';
        dict['I'] = '&#1648;';
        dict['o'] = '&#1729;';
        dict['O'] = '&#1731;';
        dict['p'] = '&#1662;';
        dict['P'] = '&#1615;';
        dict['['] = ']';
        dict['{'] = '&#1554;';
        dict[']'] = '[';
        dict['}'] = '&#1555;';
        dict['a'] = '&#1575;';
        dict['A'] = '&#1570;';
        dict['s'] = '&#1587;';
        dict['S'] = '&#1589;';
        dict['d'] = '&#1583;';
        dict['D'] = '&#1672;';
        dict['f'] = '&#1601;';
        dict['F'] = '';
        dict['g'] = '&#1711;';
        dict['G'] = '&#1594;';
        dict['h'] = '&#1726;';
        dict['H'] = '&#1581;';
        dict['j'] = '&#1580;';
        dict['J'] = '&#1590;';
        dict['k'] = '&#1705;';
        dict['K'] = '&#1582;';
        dict['l'] = '&#1604;';
        dict['L'] = '&#1555;';
        dict[';'] = '&#1563;';
        dict[':'] = ':';
        dict['\''] = '&#1648;';
        dict['&quot;'] = '&quot;';
        dict['\\'] = '&#1550;';
        dict['|'] = '&#1556;';
        dict['z'] = '&#1586;';
        dict['Z'] = '&#1584;';
        dict['x'] = '&#1588;';
        dict['X'] = '&#1688;';
        dict['c'] = '&#1670;';
        dict['C'] = '&#1579;';
        dict['v'] = '&#1591;';
        dict['V'] = '&#1592;';
        dict['b'] = '&#1576;';
        dict['B'] = '&#1554;';
        dict['n'] = '&#1606;';
        dict['N'] = '&#1722;';
        dict['m'] = '&#1605;';
        dict['M'] = '';
        dict[','] = '&#1548;';
        dict['&lt;'] = '&#1616;';
        dict['.'] = '&#1748;';
        dict['&gt;'] = '&#1614;';
        dict['/'] = '';
        dict['?'] = '&#1567;';
        dict[' '] = ' ';
        char key = (char)evnt.Key;
        try
            {
                if(evnt.State == Gdk.ModifierType.Mod2Mask ||
                   (evnt.State &amp; Gdk.ModifierType.ShiftMask) != 0)
                {
                    if(lang == true)
                    {

this.Buffer.InsertInteractiveAtCursor(dict[key].ToString(), true);
                        return true;
                    }
                    else
                    {
                        return base.OnKeyPressEvent (evnt);
                        return false;
                    }

                }
                else
                {
                    if((evnt.State &amp; Gdk.ModifierType.ControlMask) != 0)
                    {
                        if((evnt.State &amp; Gdk.ModifierType.ControlMask) != 0)
                        {
                            if(key == (char)Gdk.Key.space)
                            {
                                if(lang == true)
                                {
                                    lang = false;
                                    this.ModifyBase(StateType.Normal, new
Gdk.Color(202, 225, 255));
                                }
                                else
                                {
                                    lang = true;
                                    this.ModifyBase(StateType.Normal, new
Gdk.Color(255, 255, 255));
                                }
                            }
                        return base.OnKeyPressEvent(evnt);
                        return false;
                        }
                    }
                    return base.OnKeyPressEvent(evnt);
                    return false;
                }
            }
            catch(System.Exception)
            {
                return base.OnKeyPressEvent (evnt);
                return false;
            }
            return true;
        }
    }
-------------------------------------------------------
Now the problem I am facing is, I want to add this textview to designer
generated code. I tried to do so in MainWindow Class's constructor under
Build() like this.
UrduLibraryAssistant.UTextView view = new UTextView();
this.scrolledwindow2.Add(view);
view.Show();
It works. I can see it and type in it. But when I try to use it for events,
like to open a file in it, the compiler gives the error of no such type
avilable (I mean no availability of such a thing in code). I wonder how it
can when it is located on same file, same class ... but there is something
wrong. I then tried to put it in Build(). Gone there, put it there but
didn't worked either. Then I added a Gtk.TextView from designer and replaced
Gtk.TextView to UrduLibraryAssistant.UTextView in gui desiger file (opened
by MD in c# systanx format). I saved it and it was workig fine for a
compile. But as fas as I do not disturb designer. When I create/edit a gui
component the partial class file for gui is overwritten and I haev once
again plain old Gtk.TextView.
Sorry for long post. Hopefully you could understand I want to know how can I
add custom textview to form without this dirty way I am using to get work
done.
Regards
-- 
Muhammad Shakir Aziz &#1605;&#1581;&#1605;&#1583; &#1588;&#1575;&#1705;&#1585; &#1593;&#1586;&#1740;&#1586;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/gtk-sharp-list/attachments/20080915/573e2c1d/attachment-0001.html">http://lists.ximian.com/pipermail/gtk-sharp-list/attachments/20080915/573e2c1d/attachment-0001.html</A> 
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008991.html">[Gtk-sharp-list] Gtk# &amp; background threads
</A></li>
	<LI>Next message: <A HREF="008994.html">[Gtk-sharp-list] Adding a custom widget to (designer generated)	GUI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8993">[ date ]</a>
              <a href="thread.html#8993">[ thread ]</a>
              <a href="subject.html#8993">[ subject ]</a>
              <a href="author.html#8993">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
