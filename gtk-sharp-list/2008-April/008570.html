<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Gtk.Image &quot;refresh&quot; image area
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Gtk.Image%20%22refresh%22%20image%20area&In-Reply-To=4804C7CF.5070303%40terra.cl">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008566.html">
   <LINK REL="Next"  HREF="008567.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Gtk.Image &quot;refresh&quot; image area</H1>
    <B>Mauricio Henriquez</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Gtk.Image%20%22refresh%22%20image%20area&In-Reply-To=4804C7CF.5070303%40terra.cl"
       TITLE="[Gtk-sharp-list] Gtk.Image &quot;refresh&quot; image area">mhenriquezs at terra.cl
       </A><BR>
    <I>Wed Apr 16 13:30:16 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="008566.html">[Gtk-sharp-list] Gtk.Image &quot;refresh&quot; image area
</A></li>
        <LI>Next message: <A HREF="008567.html">[Gtk-sharp-list] event handling between window and dialog
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8570">[ date ]</a>
              <a href="thread.html#8570">[ thread ]</a>
              <a href="subject.html#8570">[ subject ]</a>
              <a href="author.html#8570">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>ok, i fix my problem and now i have a nice widget that can be drag and 
drop from monodevelop toolbox and i can set the v4l source or file and 
works nice and don't block the main app...if someone is interesting in 
such kind a widget please let me know...

thanks anyway

Mauricio

Mauricio Henriquez wrote:
&gt;<i> Hi Guys:
</I>&gt;<i>
</I>&gt;<i> My name is Mauricio and this is my first post to the list, so hi to all!!.
</I>&gt;<i>
</I>&gt;<i> I'm playing around  a lot with the Gtk.Image + Pixmap and Pixbuf types 
</I>&gt;<i> in mono/gtk-sharp to build a VideoPlayer widget with the ISE.Video 
</I>&gt;<i> library from the Icarus project (<A HREF="http://icarus.sourceforge.net/">http://icarus.sourceforge.net/</A>), but 
</I>&gt;<i> now I'm a little confuse about the pixmap and pixbuf and convertions 
</I>&gt;<i> between both and also about the gtk.image :-S , let me explain the 
</I>&gt;<i> situation and please be pattience with my poor English:
</I>&gt;<i>
</I>&gt;<i> The ise.video library works as a wrapper for Tao.FFmpeg and let us to 
</I>&gt;<i> work with a &quot;Decoder&quot; that can be used to decode a video file, images 
</I>&gt;<i> from URLs or even from v4l source, the ise.video library expose a number 
</I>&gt;<i> of &quot;video handlers&quot; for different scenarios, like a &quot;texture&quot; one to be 
</I>&gt;<i> used in opengl scenes, a &quot;Bitmap handler&quot; to work in winforms scenarios 
</I>&gt;<i> (I allready have a primary working version of the videoplayer for 
</I>&gt;<i> WinForms and run nice in mono/linux in a winform app showing videos and 
</I>&gt;<i> also my webcam!!, very cool!!), and also a &quot;Pixbuf handler&quot; to use in 
</I>&gt;<i> Gtk# scenarios. Right now I have a simple &quot;pixbuf handler&quot; in a Gtk# app 
</I>&gt;<i> with a Gtk.Image widget, this example app is capable of show a video 
</I>&gt;<i> file or a v4l source in a gtk.image widget allmost without problems...
</I>&gt;<i> Rigth now, the idea is have a custom widget capable of do all the needed 
</I>&gt;<i> configuration &quot;internally&quot; (decoder configuration, etc..), for the 
</I>&gt;<i> winform videoplayer version we do that creating a class the inherit from 
</I>&gt;<i> a simple PictureBox control, so the idea is to do something simillar 
</I>&gt;<i> here (I know that may be you are goin to recomned to use some kind of 
</I>&gt;<i> opengl widget for intensive graphic things, but the current state of 
</I>&gt;<i> gtkopenglarea is not somehting that we whant right now and can be used 
</I>&gt;<i> in a &quot;version 2&quot; of the gtk-videoplayer).
</I>&gt;<i> My problem right now is that I have a VideoPlayer class that inherit 
</I>&gt;<i> from Gtk.Image and add a public &quot;Play&quot; method, the &quot;play&quot; method do all 
</I>&gt;<i> the configuration needed by the decoder and begin the &quot;frame reading 
</I>&gt;<i> loop&quot; (I know that I can have problems related to block the main gtk app 
</I>&gt;<i> loop, but right now that is my second concern :-) , then in each 
</I>&gt;<i> &quot;reading&quot; the &quot;Pixbuf handler&quot; return a updated &quot;frame&quot; (of pixbuf type) 
</I>&gt;<i> and I need to set the &quot;frame&quot; to the internall Pixbuf member of the 
</I>&gt;<i> widget, I do that with a simple: this.Pixbuf = PixbufHandler.frame; but 
</I>&gt;<i> then I need to force for a &quot;update&quot; or &quot;refresh&quot; of the widget to 
</I>&gt;<i> actually see the image displayed and that is the beggining of my 
</I>&gt;<i> problems. How can I do that in a simple way?
</I>&gt;<i>
</I>&gt;<i> Previously in the simple pixbuf handler test (the one with a simple 
</I>&gt;<i> gtk.image widget in a gtk# window) I be able to call to the 
</I>&gt;<i> this.GdkWindow.ProcessUpdates(true); becouse the gtk.image was in the 
</I>&gt;<i> gtk# window, so calling to the ProcessUpdates refresh all the childs and 
</I>&gt;<i> with that all OK...but right now is more dificult to me, becouse inside 
</I>&gt;<i> my custom widget the GdkWindow return &quot;null&quot; (I don't know way...). I 
</I>&gt;<i> also try with the this.QueueDrawArea(0, 0, 800, 340); inside my custom 
</I>&gt;<i> widget but to work witht the &quot;Queue&quot; methods I need to also use the 
</I>&gt;<i> Configure and Expose events and that force me to do some type 
</I>&gt;<i> convertions between PixBuf and pixmap...and is kind of confuse to me, so 
</I>&gt;<i> probably exist a more &quot;direct&quot;way to update the widget screen...I also 
</I>&gt;<i> try to inherit from the DrawingArea widget but also force me to do some 
</I>&gt;<i> convertions...
</I>&gt;<i>
</I>&gt;<i> Sorry for the long explanation but i think that is needed to understed 
</I>&gt;<i> what I'm trying to do..
</I>&gt;<i>
</I>&gt;<i> Any sugestion is apreciated...
</I>&gt;<i>
</I>&gt;<i> In advance thank you..
</I>&gt;<i>
</I>&gt;<i> Mauricio
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Gtk-sharp-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">Gtk-sharp-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">http://lists.ximian.com/mailman/listinfo/gtk-sharp-list</A>
</I>&gt;<i>
</I>&gt;<i>   
</I>
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008566.html">[Gtk-sharp-list] Gtk.Image &quot;refresh&quot; image area
</A></li>
	<LI>Next message: <A HREF="008567.html">[Gtk-sharp-list] event handling between window and dialog
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8570">[ date ]</a>
              <a href="thread.html#8570">[ thread ]</a>
              <a href="subject.html#8570">[ subject ]</a>
              <a href="author.html#8570">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
