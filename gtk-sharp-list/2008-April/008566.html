<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Gtk.Image &quot;refresh&quot; image area
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Gtk.Image%20%22refresh%22%20image%20area&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008565.html">
   <LINK REL="Next"  HREF="008570.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Gtk.Image &quot;refresh&quot; image area</H1>
    <B>Mauricio Henriquez</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Gtk.Image%20%22refresh%22%20image%20area&In-Reply-To="
       TITLE="[Gtk-sharp-list] Gtk.Image &quot;refresh&quot; image area">mhenriquezs at terra.cl
       </A><BR>
    <I>Tue Apr 15 11:20:47 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="008565.html">[Gtk-sharp-list] ListStore &amp; db4o
</A></li>
        <LI>Next message: <A HREF="008570.html">[Gtk-sharp-list] Gtk.Image &quot;refresh&quot; image area
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8566">[ date ]</a>
              <a href="thread.html#8566">[ thread ]</a>
              <a href="subject.html#8566">[ subject ]</a>
              <a href="author.html#8566">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Guys:

My name is Mauricio and this is my first post to the list, so hi to all!!.

I'm playing around  a lot with the Gtk.Image + Pixmap and Pixbuf types 
in mono/gtk-sharp to build a VideoPlayer widget with the ISE.Video 
library from the Icarus project (<A HREF="http://icarus.sourceforge.net/">http://icarus.sourceforge.net/</A>), but 
now I'm a little confuse about the pixmap and pixbuf and convertions 
between both and also about the gtk.image :-S , let me explain the 
situation and please be pattience with my poor English:

The ise.video library works as a wrapper for Tao.FFmpeg and let us to 
work with a &quot;Decoder&quot; that can be used to decode a video file, images 
from URLs or even from v4l source, the ise.video library expose a number 
of &quot;video handlers&quot; for different scenarios, like a &quot;texture&quot; one to be 
used in opengl scenes, a &quot;Bitmap handler&quot; to work in winforms scenarios 
(I allready have a primary working version of the videoplayer for 
WinForms and run nice in mono/linux in a winform app showing videos and 
also my webcam!!, very cool!!), and also a &quot;Pixbuf handler&quot; to use in 
Gtk# scenarios. Right now I have a simple &quot;pixbuf handler&quot; in a Gtk# app 
with a Gtk.Image widget, this example app is capable of show a video 
file or a v4l source in a gtk.image widget allmost without problems...
Rigth now, the idea is have a custom widget capable of do all the needed 
configuration &quot;internally&quot; (decoder configuration, etc..), for the 
winform videoplayer version we do that creating a class the inherit from 
a simple PictureBox control, so the idea is to do something simillar 
here (I know that may be you are goin to recomned to use some kind of 
opengl widget for intensive graphic things, but the current state of 
gtkopenglarea is not somehting that we whant right now and can be used 
in a &quot;version 2&quot; of the gtk-videoplayer).
My problem right now is that I have a VideoPlayer class that inherit 
from Gtk.Image and add a public &quot;Play&quot; method, the &quot;play&quot; method do all 
the configuration needed by the decoder and begin the &quot;frame reading 
loop&quot; (I know that I can have problems related to block the main gtk app 
loop, but right now that is my second concern :-) , then in each 
&quot;reading&quot; the &quot;Pixbuf handler&quot; return a updated &quot;frame&quot; (of pixbuf type) 
and I need to set the &quot;frame&quot; to the internall Pixbuf member of the 
widget, I do that with a simple: this.Pixbuf = PixbufHandler.frame; but 
then I need to force for a &quot;update&quot; or &quot;refresh&quot; of the widget to 
actually see the image displayed and that is the beggining of my 
problems. How can I do that in a simple way?

Previously in the simple pixbuf handler test (the one with a simple 
gtk.image widget in a gtk# window) I be able to call to the 
this.GdkWindow.ProcessUpdates(true); becouse the gtk.image was in the 
gtk# window, so calling to the ProcessUpdates refresh all the childs and 
with that all OK...but right now is more dificult to me, becouse inside 
my custom widget the GdkWindow return &quot;null&quot; (I don't know way...). I 
also try with the this.QueueDrawArea(0, 0, 800, 340); inside my custom 
widget but to work witht the &quot;Queue&quot; methods I need to also use the 
Configure and Expose events and that force me to do some type 
convertions between PixBuf and pixmap...and is kind of confuse to me, so 
probably exist a more &quot;direct&quot;way to update the widget screen...I also 
try to inherit from the DrawingArea widget but also force me to do some 
convertions...

Sorry for the long explanation but i think that is needed to understed 
what I'm trying to do..

Any sugestion is apreciated...

In advance thank you..

Mauricio



</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008565.html">[Gtk-sharp-list] ListStore &amp; db4o
</A></li>
	<LI>Next message: <A HREF="008570.html">[Gtk-sharp-list] Gtk.Image &quot;refresh&quot; image area
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8566">[ date ]</a>
              <a href="thread.html#8566">[ thread ]</a>
              <a href="subject.html#8566">[ subject ]</a>
              <a href="author.html#8566">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
