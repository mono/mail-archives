<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Gtk.Builder &amp; Autoconnect
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.dot.net?Subject=Re%3A%20%5BGtk-sharp-list%5D%20Gtk.Builder%20%26%20Autoconnect&In-Reply-To=%3CCAGzCYFO6mURw85xWXwwBpZ8dW_CbbabNd_Hp0EqRq179WdUing%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="011639.html">
   <LINK REL="Next"  HREF="011651.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Gtk.Builder &amp; Autoconnect</H1>
    <B>Baltasar Garc√≠a Perez-Schofield</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.dot.net?Subject=Re%3A%20%5BGtk-sharp-list%5D%20Gtk.Builder%20%26%20Autoconnect&In-Reply-To=%3CCAGzCYFO6mURw85xWXwwBpZ8dW_CbbabNd_Hp0EqRq179WdUing%40mail.gmail.com%3E"
       TITLE="[Gtk-sharp-list] Gtk.Builder &amp; Autoconnect">baltasarq at gmail.com
       </A><BR>
    <I>Wed Jan 18 11:58:23 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="011639.html">[Gtk-sharp-list] Gtk.Builder &amp; Autoconnect
</A></li>
        <LI>Next message (by thread): <A HREF="011651.html">[Gtk-sharp-list] Gtk.Builder &amp; Autoconnect
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11640">[ date ]</a>
              <a href="thread.html#11640">[ thread ]</a>
              <a href="subject.html#11640">[ subject ]</a>
              <a href="author.html#11640">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, Sascha,

&gt;<i> i've written a new GUI for my program with Glade and Gtk.Builder.
</I>&gt;<i>
</I>Err... why? Nevermind.

&gt;<i> Actually i'm having that constructors:
</I>&gt;<i>
</I>&gt;<i> public static PublicanCreators Create()
</I>&gt;<i> {
</I>&gt;<i>     Builder builder = new Builder();
</I>&gt;<i>     builder.AddFromFile(&quot;gui.glade&quot;);
</I>&gt;<i>     return new PublicanCreators(builder, builder.GetObject(&quot;PublicanCreators&quot;).Handle);
</I>&gt;<i> }protected PublicanCreators(Builder builder, IntPtr handle) : base(handle){
</I>&gt;<i>     _builder = builder;
</I>&gt;<i>     builder.Autoconnect(this);
</I>&gt;<i>     SetupHandlers();}
</I>&gt;<i>
</I>&gt;<i> I don't have much experience with Glade 3, and Gtk 3. Glade 3 uses Gtk+ 3,
</I>while Gtk# uses Gtk+2, so at first glance, they are incompatible.

I've found this answer in stack overflow:
<A HREF="http://stackoverflow.com/questions/15599497/how-do-i-use-gtk-builder-in-c-sharp#19352159">http://stackoverflow.com/questions/15599497/how-do-i-use-gtk-builder-in-c-sharp#19352159</A>

They seem to be able to build a user interface using both methods: with
Gtk.Builder, and with libglade (Glade.XML).

I've tried both. Using the libglade method, I was able to make the program
compile and run, even with the glade XML file as a resource (this is a must
to me).

==
public Ppal()
{
    Gtk.Application.Init();
    var uiInterface =
        new Glade.XML( &quot;GladeTest.Res.glade_test-ui.glade&quot;, &quot;AppWindow&quot; );
    uiInterface.Autoconnect( this );
    Gtk.Application.Run();
}
==

Unfortunately, nothing shows on screen. I double-checked that the GtkWindow
had the Visible property set to true. Then I checked the output, to find:
==
(GladeTest:7658): libglade-WARNING **: Expected &lt;glade-interface&gt;.  Got
&lt;interface&gt;.

(GladeTest:7658): libglade-WARNING **: did not finish in PARSER_FINISH
state!

(GladeTest:7658): libglade-CRITICAL **: glade_xml_get_widget: assertion
'self != NULL' failed

(GladeTest:7658): libglade-CRITICAL **: glade_xml_signal_autoconnect_full:
assertion 'self != NULL' failed
==

It seems that the XML format generated by Glade is not the expected by
libglade.

So libglade does not work... what about Gtk.Builder? The same app, with the
same user interface generated by Glade.

==
public Ppal()
{
    Gtk.Application.Init();
    var guiBuilder = new Gtk.Builder();
    StreamReader uiFile = new StreamReader(
        System.Reflection.Assembly.GetEntryAssembly().
        GetManifestResourceStream( &quot;GladeTest.Res.glade_test-ui.glade&quot; ) );

    guiBuilder.AddFromString( uiFile.ReadToEnd() );
*    // ERROR autoconnect does not exist *

*    //guiBuilder.Autoconnect( this );*
    Gtk.Application.Run();
}
==

The problem with Builder is twofold: a) there is not an &quot;autoconnect&quot;
method, and b) (and most important) the execution fails while executing
AddFromString(), with a Glib.GException with message &quot;&lt;input&gt;: required
gtk+ version 3.0, current version is 2.24&quot;

This is actually the problem I had foreseen, they are not compatible since
Gtk# is stuck in Gtk+2. It requires gtk+3.0 because I messed with the
settings, by default it requires gtk+3.20.

Maybe someone can provide more info about this issue, perhaps a workaround
or something. I'm using Mono 4.6.2.

-- Baltasar
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.dot.net/pipermail/gtk-sharp-list/attachments/20170118/8bd70859/attachment-0001.html">http://lists.dot.net/pipermail/gtk-sharp-list/attachments/20170118/8bd70859/attachment-0001.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: twitter.png
Type: image/png
Size: 1418 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.dot.net/pipermail/gtk-sharp-list/attachments/20170118/8bd70859/attachment-0006.png">http://lists.dot.net/pipermail/gtk-sharp-list/attachments/20170118/8bd70859/attachment-0006.png</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: spacer.gif
Type: image/gif
Size: 1097 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.dot.net/pipermail/gtk-sharp-list/attachments/20170118/8bd70859/attachment-0001.gif">http://lists.dot.net/pipermail/gtk-sharp-list/attachments/20170118/8bd70859/attachment-0001.gif</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: facebook.png
Type: image/png
Size: 956 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.dot.net/pipermail/gtk-sharp-list/attachments/20170118/8bd70859/attachment-0007.png">http://lists.dot.net/pipermail/gtk-sharp-list/attachments/20170118/8bd70859/attachment-0007.png</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: linkedin.png
Type: image/png
Size: 1141 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.dot.net/pipermail/gtk-sharp-list/attachments/20170118/8bd70859/attachment-0008.png">http://lists.dot.net/pipermail/gtk-sharp-list/attachments/20170118/8bd70859/attachment-0008.png</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: skype.png
Type: image/png
Size: 1632 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.dot.net/pipermail/gtk-sharp-list/attachments/20170118/8bd70859/attachment-0009.png">http://lists.dot.net/pipermail/gtk-sharp-list/attachments/20170118/8bd70859/attachment-0009.png</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: github.png
Type: image/png
Size: 2345 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.dot.net/pipermail/gtk-sharp-list/attachments/20170118/8bd70859/attachment-0010.png">http://lists.dot.net/pipermail/gtk-sharp-list/attachments/20170118/8bd70859/attachment-0010.png</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: xing.png
Type: image/png
Size: 2636 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.dot.net/pipermail/gtk-sharp-list/attachments/20170118/8bd70859/attachment-0011.png">http://lists.dot.net/pipermail/gtk-sharp-list/attachments/20170118/8bd70859/attachment-0011.png</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="011639.html">[Gtk-sharp-list] Gtk.Builder &amp; Autoconnect
</A></li>
	<LI>Next message (by thread): <A HREF="011651.html">[Gtk-sharp-list] Gtk.Builder &amp; Autoconnect
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11640">[ date ]</a>
              <a href="thread.html#11640">[ thread ]</a>
              <a href="subject.html#11640">[ subject ]</a>
              <a href="author.html#11640">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.dot.net/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
