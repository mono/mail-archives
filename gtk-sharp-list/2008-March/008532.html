<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Gtk.ComboBoxEntry issues with setting text...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Gtk.ComboBoxEntry%20issues%20with%20setting%20text...&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008531.html">
   <LINK REL="Next"  HREF="008533.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Gtk.ComboBoxEntry issues with setting text...</H1>
    <B>Dennis Craven</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Gtk.ComboBoxEntry%20issues%20with%20setting%20text...&In-Reply-To="
       TITLE="[Gtk-sharp-list] Gtk.ComboBoxEntry issues with setting text...">dcraven at gmail.com
       </A><BR>
    <I>Fri Mar 28 18:55:23 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="008531.html">[Gtk-sharp-list] Problem installing 2.10.4 version of GTK-SHARP
</A></li>
        <LI>Next message: <A HREF="008533.html">[Gtk-sharp-list] Gtk.ComboBoxEntry issues with setting text...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8532">[ date ]</a>
              <a href="thread.html#8532">[ thread ]</a>
              <a href="subject.html#8532">[ subject ]</a>
              <a href="author.html#8532">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi list,

I'm trying to use a ComboBoxEntry to show a list of strings. The model
is of type ListStore. Once realized, the associated menu of available
text
selections drops down as expected, but when one is chosen, the given
text does not appear in the ComboBoxEntry.Entry and the following
assertion appears in the console:

    Gtk-CRITICAL **: gtk_entry_set_text: assertion `text != NULL' failed

The relevant (I think) code goes like this:

         // projectStore is a valid ListStore, containing custom objects
         // of type Project. These have a Name property that is of type string.
         ListStore projectStore = db.GetListStore();

         projectComboBoxEntry = new ComboBoxEntry ();
         CellRendererText projectCellRenderer = new CellRendererText ();
         projectComboBoxEntry.PackStart (projectCellRenderer, true);

         projectComboBoxEntry.SetCellDataFunc (projectCellRenderer,
               new Gtk.CellLayoutDataFunc (ProjectComboBoxEntryDataFunc));
         projectComboBoxEntry.Model = projectStore;

         projectComboBoxEntry.Show ();

      // This is the CellDataFunc
      void ProjectComboBoxEntryDataFunc (CellLayout layout,
            CellRenderer renderer, TreeModel model, TreeIter iter)
      {
         Gtk.CellRendererText crt = renderer as Gtk.CellRendererText;
         Project project = model.GetValue (iter, 0) as Project;

         crt.Text = string.Format (&quot;{0}&quot;, project.Name);
      }

I don't see what the problem with this code could be. If I use a ComboBox with
identical code, it works fine.

Any pointers will be appreciated.
~djc
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008531.html">[Gtk-sharp-list] Problem installing 2.10.4 version of GTK-SHARP
</A></li>
	<LI>Next message: <A HREF="008533.html">[Gtk-sharp-list] Gtk.ComboBoxEntry issues with setting text...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8532">[ date ]</a>
              <a href="thread.html#8532">[ thread ]</a>
              <a href="subject.html#8532">[ subject ]</a>
              <a href="author.html#8532">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
