<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Disposing problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gcarrero%40teklamedia.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <LINK REL="Previous"  HREF="002782.html">
   <LINK REL="Next"  HREF="002784.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Disposing problem
   </H1>
    <B>Gonçal Carrero Puig
    </B> 
    <A HREF="mailto:gcarrero%40teklamedia.com"
       TITLE="[Gtk-sharp-list] Disposing problem">gcarrero@teklamedia.com
       </A><BR>
    <I>Sat, 08 Nov 2003 19:54:21 +0100</I>
    <P><UL>
        <LI> Previous message: <A HREF="002782.html">[Gtk-sharp-list] Opening new Windows
</A></li>
        <LI> Next message: <A HREF="002784.html">[Gtk-sharp-list] Disposing problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2783">[ date ]</a>
              <a href="thread.html#2783">[ thread ]</a>
              <a href="subject.html#2783">[ subject ]</a>
              <a href="author.html#2783">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello:

I'm having problems with pixbuff, I'm trying to make thumbnails of a
directory and all it's ok, but the program hungs because it's not
freeing memory. 

I've this test:


using System;
using Gtk;
using Gdk;

class album
{
	public static void Main(string[] args)
	{
		Gtk.Application.Init();
		Pixbuf p;
		for (int i=0;i&lt;100;i++){
			p = new Pixbuf(&quot;DSCF00022.JPG&quot;);
			p.Dispose();
			}	

	}

}

In the first iterations it's ok, but at some time you see every
iteration is more time consuming and if you look at the memory in use
you will see an incredible amount of memory in use. 
(I get a crash on my Linux System, it freezes X window not responding to
any event, I've to reboot my system.)


After reviewing glib.Object.Dispose I saw that it enqueues all requests
to dispose and then the idle will do the rest calling  to
PerformQueuedUnrefs, but as I saw in my program this method was never
called. I've compiled a version of glib-sharp calling directly each time
the PerformQueuedUnrefs and then runnig this program again all is OK.

Anyone knows why idle is never calling PerformedQueuedUnrefs?

Thank you,

GonÃ§al


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="002782.html">[Gtk-sharp-list] Opening new Windows
</A></li>
	<LI> Next message: <A HREF="002784.html">[Gtk-sharp-list] Disposing problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2783">[ date ]</a>
              <a href="thread.html#2783">[ thread ]</a>
              <a href="subject.html#2783">[ subject ]</a>
              <a href="author.html#2783">[ author ]</a>
         </LI>
       </UL>
</body></html>
