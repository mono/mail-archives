<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] DrawingArea in ScrolledWindow
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20DrawingArea%20in%20ScrolledWindow&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007475.html">
   <LINK REL="Next"  HREF="007477.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] DrawingArea in ScrolledWindow</H1>
    <B>Piotr Zurek</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20DrawingArea%20in%20ScrolledWindow&In-Reply-To="
       TITLE="[Gtk-sharp-list] DrawingArea in ScrolledWindow">p.zurek at gmail.com
       </A><BR>
    <I>Fri Oct 27 23:58:53 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="007475.html">[Gtk-sharp-list] Pixbuf to 8bit pixmap ?
</A></li>
        <LI>Next message: <A HREF="007477.html">[Gtk-sharp-list] Sorting treeview with filter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7476">[ date ]</a>
              <a href="thread.html#7476">[ thread ]</a>
              <a href="subject.html#7476">[ subject ]</a>
              <a href="author.html#7476">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi guys,

I've written about that problem a few days ago but I didn't get any 
answer nor did I managed to solve it myself, therefore I ask again and 
I'll try to be more descriptive.

I have a problem with a DrawingArea placed inside a ScrolledWindow. Of 
course the purpose of it is to have the picture bigger than the visible 
area and scroll it with scrollbars. The problem is that when I scroll 
the area that was previously covered is not being redrawn. I think the 
problem lies in the way that I create my Cairo.Context on the Expose event:

void OnExpose (object sender, ExposeEventArgs args)
{
	myContext = Gdk.CairoHelper.Create (args.Event.Window);
	DrawSomething (myContext);
	((IDisposable) myContext.Target).Dispose ();
	((IDisposable) myContext).Dispose ();
}

It looks like I only create the context to accommodate for what's 
visible on expose and never change it. If I only knew how...

After the scrollbar is moved I fire up a Adjustemnt.ValueChanged which 
calls the Refresh method.

public void Refresh ()
{
	this.mapArea.QueueDrawArea (0, (int) Vadjustment.Value), 					 
mapArea.Allocation.Width, 							mapArea.Allocation.Height);
}

I also tried:

public void Refresh ()
{
	this.mapArea.QueueDrawArea (0, 0, 					 
mapArea.Allocation.Width, 							mapArea.Allocation.Height);
}

The same result. The picture moves but what wasn't visible still is not 
drawn. When I resize the window it works perfectly fine - newly 
allocated area is OK.

Can somebody kick me in the right direction, please? I'm stuck. Without 
that I'm not able to progress.

Screenshots:
<A HREF="http://www.piotrzurek.net/wp-content/uploads/2006/10/screenshot_186.png">http://www.piotrzurek.net/wp-content/uploads/2006/10/screenshot_186.png</A>
<A HREF="http://www.piotrzurek.net/wp-content/uploads/2006/10/screenshot_187.png">http://www.piotrzurek.net/wp-content/uploads/2006/10/screenshot_187.png</A>
<A HREF="http://www.piotrzurek.net/wp-content/uploads/2006/10/screenshot_188.png">http://www.piotrzurek.net/wp-content/uploads/2006/10/screenshot_188.png</A>

cheers
piotr

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007475.html">[Gtk-sharp-list] Pixbuf to 8bit pixmap ?
</A></li>
	<LI>Next message: <A HREF="007477.html">[Gtk-sharp-list] Sorting treeview with filter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7476">[ date ]</a>
              <a href="thread.html#7476">[ thread ]</a>
              <a href="subject.html#7476">[ subject ]</a>
              <a href="author.html#7476">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
