<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Refreshing TreeView
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Refreshing%20TreeView&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008116.html">
   <LINK REL="Next"  HREF="008110.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Refreshing TreeView</H1>
    <B>Vladimir Giszpenc</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Refreshing%20TreeView&In-Reply-To="
       TITLE="[Gtk-sharp-list] Refreshing TreeView">vladimir.giszpenc at gmail.com
       </A><BR>
    <I>Wed Jun 20 09:37:48 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="008116.html">[Gtk-sharp-list] GTK# 2.10 for Windows?
</A></li>
        <LI>Next message: <A HREF="008110.html">[Gtk-sharp-list] Hiding a window
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8109">[ date ]</a>
              <a href="thread.html#8109">[ thread ]</a>
              <a href="subject.html#8109">[ subject ]</a>
              <a href="author.html#8109">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

When I had a NodeView, in my node I could do the following when the
model changed (in a worker thread).

					Gtk.Application.Invoke (delegate {
						OnChanged();
					});

And magically, the view would refresh just the cell in question and
all was good in the world.  I am trying to accomplish the same with a
TreeView (because I need sorting and to my great chagrin, no one has
volunteered to add sorting to the NodeView).

There is no need to explain to me that only the main GUI thread can
update the GUI.  I get it.

Iterators (Gtk.TreeIter) seem to be very finicky.  I know I get a good
one when I do

             Gtk.TreeIter iter = store.AppendValues(node);

Because I use it to add child rows.

I am adding values to the TreeStore that is inside the TreeModelSort
which is attached to the TreeView.   My renderers do their jobs and
everything shows up as it should.

Can I keep this iter in a Hashtable or something like that?  What do I
keep around so that I can refresh just the row in question later
keeping in mind that it is a store within a store?


Enter worker thread.  Work. Work.  Work.
Data changes...

How do I refresh the view?  Let's say EmitRowChanged is the way for
arguments sake.  that takes a path and a TreeIter.  I can get a path
from the TreeIter, so in my mind it only needs the TreeIter.  Of
course, I can't get this to work using the TreeIter from the above
code.  It has gone stale somehow...

If we changed the music store Treeview example and added number sold
as a column.  Then started a worker thread that randomly buys a song
from the list for a while.  How would the code look to keep the view
fresh *as the worker is working*?  How much does the code change if
the list is sorted?


I apologize for asking the same question others have asked in the
past, but I cannot decipher the answers that have been given.  There
must be a way to refresh a treeview.

Thanks,

Vlad
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008116.html">[Gtk-sharp-list] GTK# 2.10 for Windows?
</A></li>
	<LI>Next message: <A HREF="008110.html">[Gtk-sharp-list] Hiding a window
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8109">[ date ]</a>
              <a href="thread.html#8109">[ thread ]</a>
              <a href="subject.html#8109">[ subject ]</a>
              <a href="author.html#8109">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
