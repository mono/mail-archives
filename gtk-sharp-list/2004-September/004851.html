<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Fixing for delegate issue (crashes in Mono HEAD with MonoDevelop,
 F-Spot and others).
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:miguel%40novell.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="004857.html">
   <LINK REL="Next"  HREF="004852.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Fixing for delegate issue (crashes in Mono HEAD with MonoDevelop,
 F-Spot and others).
   </H1>
    <B>Miguel de Icaza
    </B> 
    <A HREF="mailto:miguel%40novell.com"
       TITLE="[Gtk-sharp-list] Fixing for delegate issue (crashes in Mono HEAD with MonoDevelop,
 F-Spot and others).">miguel@novell.com
       </A><BR>
    <I>Sat, 18 Sep 2004 16:46:22 -0400</I>
    <P><UL>
        <LI> Previous message: <A HREF="004857.html">[Gtk-sharp-list] Removing CanvasItems
</A></li>
        <LI> Next message: <A HREF="004852.html">[Gtk-sharp-list] Draging text/uri from external app to widget
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4851">[ date ]</a>
              <a href="thread.html#4851">[ thread ]</a>
              <a href="subject.html#4851">[ subject ]</a>
              <a href="author.html#4851">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--=-p6t81117kSI8fONeyha+
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

Hey Mike,

   The following patch fixes the issues we had with delegates.  There
are a few things to talk about:

	* Should we change from uint to int for the return values
	  of these things, as they would not be otherwise CLS compliant?

	* Should we add a `Remove' to Idle/Timeout that calls
	  Source.Remove?  Just a convenience function?

Miguel.


--=-p6t81117kSI8fONeyha+
Content-Disposition: attachment; filename=delegate-collection.patch
Content-Transfer-Encoding: base64
Content-Type: text/plain; name=delegate-collection.patch; charset=ISO-8859-1

PyBnbGliL2d0ay1zaGFycC5wdWINCkluZGV4OiBDaGFuZ2VMb2cNCj09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NClJDUyBm
aWxlOiAvY3ZzL3B1YmxpYy9ndGstc2hhcnAvQ2hhbmdlTG9nLHYNCnJldHJpZXZpbmcgcmV2aXNp
b24gMS45MTINCmRpZmYgLXUgLXUgLXIxLjkxMiBDaGFuZ2VMb2cNCi0tLSBDaGFuZ2VMb2cJMTcg
U2VwIDIwMDQgMjA6MzY6NTcgLTAwMDAJMS45MTINCisrKyBDaGFuZ2VMb2cJMTggU2VwIDIwMDQg
MTk6MzM6MzkgLTAwMDANCkBAIC0xLDMgKzEsMjIgQEANCisyMDA0LTA5LTE4ICBNaWd1ZWwgZGUg
SWNhemEgIDxtaWd1ZWxAeGltaWFuLmNvbT4NCisNCisJKiBnbGliL1NvdXJjZS5jczogQWRkIG5l
dyBiYXNlIGNsYXNzIHRvIGhvbGQgdGhlIG1ldGhvZCB0byBiZQ0KKwljYWxsZWQsIGFuZCB0aGUg
cHJveHkgaGFuZGxlciB3ZSB1c2UgdG8ga2VlcCByZWZlcmVuY2VzIHRvIHRoZW0NCisJYW5kIGF2
b2lkIGEgY29sbGVjdGlvbi4NCisNCisJRXhwb3NlcyBhIG5ldyB2YXJpYWJsZXMgdGhhdCByZWZl
cmVuY2VzIGFsbCB0aGUgYWN0aXZlIFRpbWVvdXRzDQorCWFuZCBJZGxlIGhhbmRsZXJzIHRvIGF2
b2lkIGNvbGxlY3Rpb24vDQorDQorCSogZ2xpYi9UaW1lb3V0LmNzOiBJbXBsZW1lbnQgVGltZW91
dFByb3h5IHRoYXQgYWN0cyBhcyBhIGZpbHRlciB0bw0KKwlyZW1vdmUgdGhlIHByb3h5IHdoZW4g
dGhlIHRpbWVvdXQgaXMgcmVtb3ZlZC4NCisNCisJUmVnaXN0ZXIgYSBUaW1lb3V0UHJveHkgd2hl
biB3ZSBjcmVhdGUgYSB0aW1lb3V0Lg0KKw0KKwkqIGdsaWIvSWRsZS5jczogSW1wbGVtZW50IElk
bGVQcm94eSB0aGF0IGFjdHMgYXMgYSBmaWx0ZXIgdG8NCisJcmVtb3ZlIHRoZSBwcm94eSB3aGVu
IHRoZSBpZGxlIGhhbmRsZXIgaXMgcmVtb3ZlZC4NCisNCisJUmVnaXN0ZXIgYW4gSWRsZVByb3h5
IHdoZW4gd2UgY3JlYXRlIGEgdGltZW91dC4NCisNCiAyMDA0LTA5LTE3ICBNaWtlIEtlc3RuZXIg
IDxta2VzdG5lckB4aW1pYW4uY29tPg0KIA0KIAkqIGNvbmZpZ3VyZS5pbiA6IGJ1bXAgdmVyc2lv
biBhbmQgdGFnIGZvciAxLjAuMi4NCkluZGV4OiBnbGliL0lkbGUuY3MNCj09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NClJD
UyBmaWxlOiAvY3ZzL3B1YmxpYy9ndGstc2hhcnAvZ2xpYi9JZGxlLmNzLHYNCnJldHJpZXZpbmcg
cmV2aXNpb24gMS42DQpkaWZmIC11IC11IC1yMS42IElkbGUuY3MNCi0tLSBnbGliL0lkbGUuY3MJ
OSBKdWwgMjAwNCAxNToyNTozOSAtMDAwMAkxLjYNCisrKyBnbGliL0lkbGUuY3MJMTggU2VwIDIw
MDQgMTk6MzM6MzkgLTAwMDANCkBAIC0zMCw2ICszMCwyNCBAQA0KIA0KIAlwdWJsaWMgY2xhc3Mg
SWRsZSB7DQogDQorCQlpbnRlcm5hbCBjbGFzcyBJZGxlUHJveHkgOiBTb3VyY2VQcm94eSB7DQor
CQkJcHVibGljIElkbGVQcm94eSAoSWRsZUhhbmRsZXIgcmVhbCkNCisJCQl7DQorCQkJCXJlYWxf
aGFuZGxlciA9IHJlYWw7DQorCQkJCXByb3h5X2hhbmRsZXIgPSBuZXcgSWRsZUhhbmRsZXIgKEhh
bmRsZXIpOw0KKwkJCX0NCisNCisJCQlwdWJsaWMgYm9vbCBIYW5kbGVyICgpDQorCQkJew0KKwkJ
CQlJZGxlSGFuZGxlciBpZGxlX2hhbmRsZXIgPSAoSWRsZUhhbmRsZXIpIHJlYWxfaGFuZGxlcjsN
CisNCisJCQkJYm9vbCBjb250ID0gaWRsZV9oYW5kbGVyICgpOw0KKwkJCQlpZiAoIWNvbnQpDQor
CQkJCQlSZW1vdmUgKCk7DQorCQkJCXJldHVybiBjb250Ow0KKwkJCX0NCisJCX0NCisJCQ0KIAkJ
cHJpdmF0ZSBJZGxlICgpDQogCQl7DQogCQl9DQpAQCAtMzksNyArNTcsMTEgQEANCiANCiAJCXB1
YmxpYyBzdGF0aWMgdWludCBBZGQgKElkbGVIYW5kbGVyIGhuZGxyKQ0KIAkJew0KLQkJCXJldHVy
biBnX2lkbGVfYWRkIChobmRsciwgSW50UHRyLlplcm8pOw0KKwkJCUlkbGVQcm94eSBwID0gbmV3
IElkbGVQcm94eSAoaG5kbHIpOw0KKwkJCXVpbnQgY29kZSA9IGdfaWRsZV9hZGQgKChJZGxlSGFu
ZGxlcikgcC5wcm94eV9oYW5kbGVyLCBJbnRQdHIuWmVybyk7DQorCQkJU291cmNlLnNvdXJjZV9o
YW5kbGVycyBbY29kZV0gPSBwOw0KKw0KKwkJCXJldHVybiBjb2RlOw0KIAkJfQ0KIAkJDQogCQlb
RGxsSW1wb3J0KCJsaWJnbGliLTIuMC0wLmRsbCIpXQ0KQEAgLTQ3LDkgKzY5LDE0IEBADQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICANCiAJCXB1YmxpYyBzdGF0aWMgYm9vbCBSZW1vdmUgKElkbGVI
YW5kbGVyIGhuZGxyKQ0KIAkJew0KKwkJCWZvcmVhY2ggKGludCBjb2RlIGluIFNvdXJjZS5zb3Vy
Y2VfaGFuZGxlcnMuS2V5cyl7DQorCQkJCUlkbGVQcm94eSBwID0gKElkbGVQcm94eSkgU291cmNl
LnNvdXJjZV9oYW5kbGVycyBbY29kZV07DQorCQkJCQ0KKwkJCQlpZiAocC5yZWFsX2hhbmRsZXIg
PT0gaG5kbHIpDQorCQkJCQlTb3VyY2Uuc291cmNlX2hhbmRsZXJzLlJlbW92ZSAocCk7DQorCQkJ
fQ0KIAkJCXJldHVybiBnX3NvdXJjZV9yZW1vdmVfYnlfZnVuY3NfdXNlcl9kYXRhIChobmRsciwg
SW50UHRyLlplcm8pOw0KIAkJfQ0KLQ0KIAl9DQogfQ0KIA0KSW5kZXg6IGdsaWIvU291cmNlLmNz
DQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2cy9wdWJsaWMvZ3RrLXNoYXJwL2dsaWIvU291cmNl
LmNzLHYNCnJldHJpZXZpbmcgcmV2aXNpb24gMS40DQpkaWZmIC11IC11IC1yMS40IFNvdXJjZS5j
cw0KLS0tIGdsaWIvU291cmNlLmNzCTI1IEp1biAyMDA0IDE4OjQyOjE3IC0wMDAwCTEuNA0KKysr
IGdsaWIvU291cmNlLmNzCTE4IFNlcCAyMDA0IDE5OjMzOjM5IC0wMDAwDQpAQCAtMjIsMTYgKzIy
LDM3IEBADQogbmFtZXNwYWNlIEdMaWIgew0KIA0KIAl1c2luZyBTeXN0ZW07DQorCXVzaW5nIFN5
c3RlbS5Db2xsZWN0aW9uczsNCiAJdXNpbmcgU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2Vz
Ow0KIA0KKwkvLw0KKwkvLyBCYXNlIGNsYXNzIGZvciBJZGxlUHJveHkgYW5kIFRpbWVvdXRQcm94
eQ0KKwkvLw0KKwlpbnRlcm5hbCBjbGFzcyBTb3VyY2VQcm94eSB7DQorCQlpbnRlcm5hbCBEZWxl
Z2F0ZSByZWFsX2hhbmRsZXI7DQorCQlpbnRlcm5hbCBEZWxlZ2F0ZSBwcm94eV9oYW5kbGVyOw0K
Kw0KKwkJaW50ZXJuYWwgdm9pZCBSZW1vdmUgKCkNCisJCXsNCisJCQlTb3VyY2Uuc291cmNlX2hh
bmRsZXJzLlJlbW92ZSAodGhpcyk7DQorCQkJcmVhbF9oYW5kbGVyID0gbnVsbDsNCisJCQlwcm94
eV9oYW5kbGVyID0gbnVsbDsNCisJCX0NCisJfQ0KKwkNCiAgICAgICAgIHB1YmxpYyBjbGFzcyBT
b3VyY2Ugew0KIAkJcHJpdmF0ZSBTb3VyY2UgKCkge30NCiAJCQ0KKwkJaW50ZXJuYWwgc3RhdGlj
IEhhc2h0YWJsZSBzb3VyY2VfaGFuZGxlcnMgPSBuZXcgSGFzaHRhYmxlICgpOw0KKwkJDQogCQlb
RGxsSW1wb3J0KCJsaWJnbGliLTIuMC0wLmRsbCIpXQ0KIAkJc3RhdGljIGV4dGVybiBib29sIGdf
c291cmNlX3JlbW92ZSAodWludCB0YWcpOw0KIA0KIAkJcHVibGljIHN0YXRpYyBib29sIFJlbW92
ZSAodWludCB0YWcpDQogCQl7DQorCQkJaWYgKHNvdXJjZV9oYW5kbGVycy5Db250YWlucyAodGFn
KSkNCisJCQkJc291cmNlX2hhbmRsZXJzLlJlbW92ZSAodGFnKTsNCisJCQkNCiAJCQlyZXR1cm4g
Z19zb3VyY2VfcmVtb3ZlICh0YWcpOw0KIAkJfQ0KIAl9DQpJbmRleDogZ2xpYi9UaW1lb3V0LmNz
DQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2cy9wdWJsaWMvZ3RrLXNoYXJwL2dsaWIvVGltZW91
dC5jcyx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEuNQ0KZGlmZiAtdSAtdSAtcjEuNSBUaW1lb3V0
LmNzDQotLS0gZ2xpYi9UaW1lb3V0LmNzCTkgSnVsIDIwMDQgMTU6MjU6MzkgLTAwMDAJMS41DQor
KysgZ2xpYi9UaW1lb3V0LmNzCTE4IFNlcCAyMDA0IDE5OjMzOjM5IC0wMDAwDQpAQCAtMjgsMTMg
KzI4LDM2IEBADQogDQogCXB1YmxpYyBjbGFzcyBUaW1lb3V0IHsNCiANCisJCWludGVybmFsIGNs
YXNzIFRpbWVvdXRQcm94eSA6IFNvdXJjZVByb3h5IHsNCisJCQlwdWJsaWMgVGltZW91dFByb3h5
IChUaW1lb3V0SGFuZGxlciByZWFsKQ0KKwkJCXsNCisJCQkJcmVhbF9oYW5kbGVyID0gcmVhbDsN
CisJCQkJcHJveHlfaGFuZGxlciA9IG5ldyBUaW1lb3V0SGFuZGxlciAoSGFuZGxlcik7DQorCQkJ
fQ0KKw0KKwkJCXB1YmxpYyBib29sIEhhbmRsZXIgKCkNCisJCQl7DQorCQkJCVRpbWVvdXRIYW5k
bGVyIHRpbWVvdXRfaGFuZGxlciA9IChUaW1lb3V0SGFuZGxlcikgcmVhbF9oYW5kbGVyOw0KKw0K
KwkJCQlib29sIGNvbnQgPSB0aW1lb3V0X2hhbmRsZXIgKCk7DQorCQkJCWlmICghY29udCkNCisJ
CQkJCVJlbW92ZSAoKTsNCisJCQkJcmV0dXJuIGNvbnQ7DQorCQkJfQ0KKwkJfQ0KKwkJDQogCQlw
cml2YXRlIFRpbWVvdXQgKCkge30gDQogCQlbRGxsSW1wb3J0KCJsaWJnbGliLTIuMC0wLmRsbCIp
XQ0KIAkJc3RhdGljIGV4dGVybiB1aW50IGdfdGltZW91dF9hZGQgKHVpbnQgaW50ZXJ2YWwsIFRp
bWVvdXRIYW5kbGVyIGQsIEludFB0ciBkYXRhKTsNCiANCiAJCXB1YmxpYyBzdGF0aWMgdWludCBB
ZGQgKHVpbnQgaW50ZXJ2YWwsIFRpbWVvdXRIYW5kbGVyIGhuZGxyKQ0KIAkJew0KLQkJCXJldHVy
biBnX3RpbWVvdXRfYWRkIChpbnRlcnZhbCwgaG5kbHIsIEludFB0ci5aZXJvKTsNCisJCQlUaW1l
b3V0UHJveHkgcCA9IG5ldyBUaW1lb3V0UHJveHkgKGhuZGxyKTsNCisNCisJCQl1aW50IGNvZGUg
PSBnX3RpbWVvdXRfYWRkIChpbnRlcnZhbCwgKFRpbWVvdXRIYW5kbGVyKSBwLnByb3h5X2hhbmRs
ZXIsIEludFB0ci5aZXJvKTsNCisJCQlTb3VyY2Uuc291cmNlX2hhbmRsZXJzIFtjb2RlXSA9IHA7
DQorDQorCQkJcmV0dXJuIGNvZGU7DQogCQl9DQogCX0NCiB9DQo=

--=-p6t81117kSI8fONeyha+--

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="004857.html">[Gtk-sharp-list] Removing CanvasItems
</A></li>
	<LI> Next message: <A HREF="004852.html">[Gtk-sharp-list] Draging text/uri from external app to widget
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4851">[ date ]</a>
              <a href="thread.html#4851">[ thread ]</a>
              <a href="subject.html#4851">[ subject ]</a>
              <a href="author.html#4851">[ author ]</a>
         </LI>
       </UL>
</body></html>
