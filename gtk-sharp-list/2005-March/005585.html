<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Memory leakage in Expose?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:muell_muell_%40gmx.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <LINK REL="Previous"  HREF="005584.html">
   <LINK REL="Next"  HREF="005588.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Memory leakage in Expose?
   </H1>
    <B>Thomas Zühlke
    </B> 
    <A HREF="mailto:muell_muell_%40gmx.net"
       TITLE="[Gtk-sharp-list] Memory leakage in Expose?">muell_muell_@gmx.net
       </A><BR>
    <I>Thu, 24 Mar 2005 16:02:37 +0100</I>
    <P><UL>
        <LI> Previous message: <A HREF="005584.html">[Gtk-sharp-list] Memory leakage in Expose?
</A></li>
        <LI> Next message: <A HREF="005588.html">[Gtk-sharp-list] Drawing colored text and images into listbox or textview, like I do with GDI+ for System.Windows.Forms
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5585">[ date ]</a>
              <a href="thread.html#5585">[ thread ]</a>
              <a href="subject.html#5585">[ subject ]</a>
              <a href="author.html#5585">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is a multi-part message in MIME format.
--------------020508010607060603070807
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit

Hi again,

i found the problem by myself:
if i call &quot;this.ModifyBase(..)&quot; inside the exposed event, then will the
exposed function called again after finishing. therfore the cpu usage
growing up. if i don't use this funkction in the exposed event,
everything is fine and the cpu usage is 0% ;-)
thanks
Thomas Zühlke


<A HREF="mailto:muell_muell_@gmx.net">muell_muell_@gmx.net</A> wrote:

&gt;<i> Hi *,
</I>&gt;<i> i have written an gtk-sharp application in c# and everything works
</I>&gt;<i> fine. My main window is filled with a Gtk.Fixed and on this, there
</I>&gt;<i> will be other widgets placed.
</I>&gt;<i>
</I>&gt;<i> The problem: since the first widget is placed on the Gtk.Fixed the
</I>&gt;<i> program takes up to 90% of cpu usage and the used memory is slowly
</I>&gt;<i> growing up to infinity. During debugging i explored, that there are 2
</I>&gt;<i> exposed functions, which are always called:
</I>&gt;<i> the exposed function of the gtk.Fixed:
</I>&gt;<i>         public void rahmen_ExposeEvent(object o, Gtk.ExposeEventArgs
</I>&gt;<i> args) {
</I>&gt;<i>             Gdk.Color c_inaktiv = new Gdk.Color(0, 0, 0);
</I>&gt;<i>             Gdk.Color c_aktiv = new Gdk.Color(255, 0, 0);
</I>&gt;<i>             foreach (Verbinder verb in this.verbindungen) {
</I>&gt;<i>                 int x1, y1, x2, y2;
</I>&gt;<i>                 verb.Von.TranslateCoordinates(this.bk, 0, 0, out x1,
</I>&gt;<i> out y1);
</I>&gt;<i>                 verb.Bis.TranslateCoordinates(this.bk, 0, 0, out x2,
</I>&gt;<i> out y2);
</I>&gt;<i>
</I>&gt;<i>                 Gtk.Requisition r1 = verb.Von.SizeRequest();
</I>&gt;<i>                 x1 += r1.Width;
</I>&gt;<i>                 y1 +=
</I>&gt;<i> ((verb.Von.kastenrahmen.kastenwidget.SizeRequest().Height/verb.Von.kastenrahmen.buttons_ausgabe.Count)/2);
</I>&gt;<i>
</I>&gt;<i>                 // Linien-Ziel-Koordinaten berechnen
</I>&gt;<i>                 y2 +=
</I>&gt;<i> ((verb.Bis.kastenrahmen.kastenwidget.SizeRequest().Height/verb.Bis.kastenrahmen.buttons_eingabe.Count)/2);
</I>&gt;<i>
</I>&gt;<i>                 if (verb.VerbindungAktiv) {
</I>&gt;<i>                     this.ModifyBase(Gtk.StateType.Normal, c_aktiv);
</I>&gt;<i>                 } else {
</I>&gt;<i>                     this.ModifyBase(Gtk.StateType.Normal, c_inaktiv);
</I>&gt;<i>                 }
</I>&gt;<i>                
</I>&gt;<i> this.GdkWindow.DrawLine(this.Style.BaseGC(Gtk.StateType.Normal), x1,
</I>&gt;<i> y1, x2, y2);
</I>&gt;<i>             }
</I>&gt;<i>         }
</I>&gt;<i> it runs checks a special ArrayList and calculating coordinates of a
</I>&gt;<i> view widgets ans draw lines between them.
</I>&gt;<i>
</I>&gt;<i> the exposed funktion of the widget on the gtk.fixed:
</I>&gt;<i> void Kasten_ExposeEvent(object o, Gtk.ExposeEventArgs args) {
</I>&gt;<i>             kasten_groesse = this.SizeRequest();
</I>&gt;<i>             Gdk.Color c_hintergrund = new Gdk.Color(255, 255, 255);
</I>&gt;<i>             Gdk.Color c_rahmen = new Gdk.Color(0, 0, 0);
</I>&gt;<i>             Gdk.Color c_selected = new Gdk.Color(255, 0, 0);
</I>&gt;<i>
</I>&gt;<i>             this.ModifyBase(Gtk.StateType.Normal, c_hintergrund);
</I>&gt;<i>             Gdk.GC gc = this.Style.BaseGC(Gtk.StateType.Normal);
</I>&gt;<i>             this.GdkWindow.DrawRectangle(gc, true, 0, 0,
</I>&gt;<i> this.kasten_groesse.Width, this.kasten_groesse.Height);
</I>&gt;<i>             this.ModifyBase(Gtk.StateType.Normal, c_rahmen);
</I>&gt;<i>             if (Angeklickt) {
</I>&gt;<i>                 this.ModifyBase(Gtk.StateType.Normal, c_selected);
</I>&gt;<i>             }
</I>&gt;<i>            
</I>&gt;<i> this.GdkWindow.DrawRectangle(this.Style.BaseGC(Gtk.StateType.Normal),
</I>&gt;<i> false, 0, 0, this.kasten_groesse.Width - 1, this.kasten_groesse.Height
</I>&gt;<i> - 1);
</I>&gt;<i>            
</I>&gt;<i> this.GdkWindow.DrawRectangle(this.Style.BaseGC(Gtk.StateType.Normal),
</I>&gt;<i> false, 1, 1, this.kasten_groesse.Width - 3, this.kasten_groesse.Height
</I>&gt;<i> - 3);
</I>&gt;<i>            
</I>&gt;<i> this.GdkWindow.DrawRectangle(this.Style.BaseGC(Gtk.StateType.Normal),
</I>&gt;<i> false, 2, 2, this.kasten_groesse.Width - 5, this.kasten_groesse.Height
</I>&gt;<i> - 5);
</I>&gt;<i>
</I>&gt;<i>             int w,h;
</I>&gt;<i>             layout.GetPixelSize(out w, out h);
</I>&gt;<i>            
</I>&gt;<i> this.GdkWindow.DrawLayout(this.Style.TextGC(StateType.Normal),
</I>&gt;<i> ((kasten_groesse.Width / 2) - (w / 2)), ((kasten_groesse.Height / 2) -
</I>&gt;<i> (h / 2)), layout);
</I>&gt;<i>         }
</I>&gt;<i>
</I>&gt;<i> i think the sourcecode of the exposed functions are correct. i will be
</I>&gt;<i> gratefully for any solution why the program using so much memory and cpu.
</I>&gt;<i> thanks
</I>&gt;<i> Thomas Zühlke 
</I>

--------------020508010607060603070807
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta content=&quot;text/html;charset=ISO-8859-1&quot; http-equiv=&quot;Content-Type&quot;&gt;
  &lt;title&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body bgcolor=&quot;#ffffff&quot; text=&quot;#000000&quot;&gt;
Hi again,&lt;br&gt;
&lt;br&gt;
i found the problem by myself:&lt;br&gt;
if i call &quot;&lt;small&gt;&lt;font face=&quot;Courier New, Courier, monospace&quot;&gt;this.&lt;span&gt;ModifyBase&lt;/span&gt;(&lt;span&gt;..)&lt;big&gt;&lt;font
 face=&quot;Times New Roman, Times, serif&quot;&gt;&quot; inside the exposed event, then
will the exposed function called again after &lt;/font&gt;&lt;/big&gt;&lt;/span&gt;&lt;big&gt;&lt;span&gt;&lt;font
 face=&quot;Times New Roman, Times, serif&quot;&gt;finishing&lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font
 face=&quot;Times New Roman, Times, serif&quot;&gt;. &lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font
 face=&quot;Times New Roman, Times, serif&quot;&gt;therfore&lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font
 face=&quot;Times New Roman, Times, serif&quot;&gt; the &lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font
 face=&quot;Times New Roman, Times, serif&quot;&gt;cpu&lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font
 face=&quot;Times New Roman, Times, serif&quot;&gt; usage growing up. if i don't use
this &lt;span&gt;funkction&lt;/span&gt; in the exposed event, everything is fine
and the &lt;span&gt;cpu&lt;/span&gt; usage is 0% ;-)&lt;br&gt;
thanks&lt;br&gt;
Thomas &lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font face=&quot;Times New Roman, Times, serif&quot;&gt;Z&amp;uuml;hlke&lt;/font&gt;&lt;/span&gt;&lt;span&gt;&lt;font
 face=&quot;Times New Roman, Times, serif&quot;&gt;&lt;br&gt;
&lt;/font&gt;&lt;/span&gt;&lt;/big&gt;&lt;/font&gt;&lt;/small&gt;&lt;big&gt;&lt;br&gt;
&lt;br&gt;
&lt;/big&gt;&lt;a class=&quot;moz-txt-link-abbreviated&quot; href=&quot;mailto:<A HREF="mailto:muell_muell_@gmx.net">muell_muell_@gmx.net</A>&quot;&gt;<A HREF="mailto:muell_muell_@gmx.net">muell_muell_@gmx.net</A>&lt;/a&gt; wrote:
&lt;blockquote cite=&quot;<A HREF="mailto:mid4242B932.9080805@gmx.net">mid4242B932.9080805@gmx.net</A>&quot; type=&quot;cite&quot;&gt;
  &lt;meta content=&quot;text/html;charset=ISO-8859-1&quot; http-equiv=&quot;Content-Type&quot;&gt;
  &lt;title&gt;&lt;/title&gt;
Hi *,&lt;br&gt;
i have written an &lt;span&gt;gtk&lt;/span&gt;-sharp application in c# and
everything works fine. My main window is filled with a &lt;span&gt;Gtk&lt;/span&gt;.Fixed
and on this, there will be other widgets placed.&lt;br&gt;
  &lt;br&gt;
The problem: since the first widget is placed on the &lt;span&gt;Gtk&lt;/span&gt;.Fixed
the program takes up to 90% of &lt;span&gt;cpu&lt;/span&gt; usage and the used
memory is slowly growing up to infinity. During debugging i explored,
that there are 2 exposed functions, which are always called:&lt;br&gt;
the exposed function of the &lt;span&gt;gtk&lt;/span&gt;.Fixed:&lt;br&gt;
  &lt;small&gt;&lt;font face=&quot;Courier New, Courier, monospace&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; public
void
rahmen_ExposeEvent(object o, &lt;span&gt;Gtk&lt;/span&gt;.&lt;span&gt;ExposeEventArgs&lt;/span&gt;
  &lt;span&gt;args&lt;/span&gt;) {&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;span&gt;Gdk&lt;/span&gt;.Color c_inaktiv = new &lt;span&gt;Gdk&lt;/span&gt;.Color(0,
0, 0);&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;span&gt;Gdk&lt;/span&gt;.Color c_aktiv = new &lt;span&gt;Gdk&lt;/span&gt;.Color(255,
0, 0);&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;span&gt;foreach&lt;/span&gt; (&lt;span&gt;Verbinder&lt;/span&gt; verb in this.&lt;span&gt;verbindungen&lt;/span&gt;)
{&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; int x1, y1, x2, y2;&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; verb.Von.&lt;span&gt;TranslateCoordinates&lt;/span&gt;(this.bk, 0,
0, out x1, out y1);&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; verb.Bis.&lt;span&gt;TranslateCoordinates&lt;/span&gt;(this.bk, 0,
0, out x2, out y2);&lt;br&gt;
  &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;span&gt;Gtk&lt;/span&gt;.Requisition r1 = verb.Von.&lt;span&gt;SizeRequest&lt;/span&gt;();&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; x1 += r1.Width;&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; y1 += ((verb.Von.kastenrahmen.kastenwidget.&lt;span&gt;SizeRequest&lt;/span&gt;().Height/verb.Von.&lt;span&gt;kastenrahmen&lt;/span&gt;.buttons_ausgabe.Count)/2);&lt;br&gt;
  &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; // &lt;span&gt;Linien&lt;/span&gt;-&lt;span&gt;Ziel&lt;/span&gt;-&lt;span&gt;Koordinaten&lt;/span&gt;
  &lt;span&gt;berechnen&lt;/span&gt;&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; y2 += ((verb.Bis.kastenrahmen.kastenwidget.&lt;span&gt;SizeRequest&lt;/span&gt;().Height/verb.Bis.&lt;span&gt;kastenrahmen&lt;/span&gt;.buttons_eingabe.Count)/2);&lt;br&gt;
  &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; if (verb.&lt;span&gt;VerbindungAktiv&lt;/span&gt;) {&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; this.&lt;span&gt;ModifyBase&lt;/span&gt;(&lt;span&gt;Gtk&lt;/span&gt;.&lt;span&gt;StateType&lt;/span&gt;.Normal,
c_aktiv);&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; } else {&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; this.&lt;span&gt;ModifyBase&lt;/span&gt;(&lt;span&gt;Gtk&lt;/span&gt;.&lt;span&gt;StateType&lt;/span&gt;.Normal,
c_inaktiv);&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; this.&lt;span&gt;GdkWindow&lt;/span&gt;.&lt;span&gt;DrawLine&lt;/span&gt;(this.Style.&lt;span&gt;BaseGC&lt;/span&gt;(&lt;span&gt;Gtk&lt;/span&gt;.&lt;span&gt;StateType&lt;/span&gt;.Normal),
x1, y1, x2, y2);&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br&gt;
  &lt;/font&gt;&lt;/small&gt;it runs checks a special &lt;span&gt;ArrayList&lt;/span&gt; and
calculating coordinates of a view widgets ans draw lines between them.&lt;br&gt;
  &lt;br&gt;
the exposed &lt;span&gt;funktion&lt;/span&gt; of the widget on the &lt;span&gt;gtk&lt;/span&gt;.fixed:&lt;br&gt;
  &lt;small&gt;&lt;font face=&quot;Courier New, Courier, monospace&quot;&gt;void
Kasten_ExposeEvent(object o, &lt;span&gt;Gtk&lt;/span&gt;.&lt;span&gt;ExposeEventArgs&lt;/span&gt;
  &lt;span&gt;args&lt;/span&gt;) {&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; kasten_groesse = this.&lt;span&gt;SizeRequest&lt;/span&gt;();&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;span&gt;Gdk&lt;/span&gt;.Color c_hintergrund = new &lt;span&gt;Gdk&lt;/span&gt;.Color(255,
255, 255);&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;span&gt;Gdk&lt;/span&gt;.Color c_rahmen = new &lt;span&gt;Gdk&lt;/span&gt;.Color(0,
0, 0);&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;span&gt;Gdk&lt;/span&gt;.Color c_selected = new &lt;span&gt;Gdk&lt;/span&gt;.Color(255,
0, 0);&lt;br&gt;
  &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; this.&lt;span&gt;ModifyBase&lt;/span&gt;(&lt;span&gt;Gtk&lt;/span&gt;.&lt;span&gt;StateType&lt;/span&gt;.Normal,
c_hintergrund);&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; Gdk.GC gc = this.Style.BaseGC(&lt;span&gt;Gtk&lt;/span&gt;.&lt;span&gt;StateType&lt;/span&gt;.Normal);&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; this.GdkWindow.DrawRectangle(&lt;span&gt;gc&lt;/span&gt;, true, 0, 0,
this.kasten_groesse.Width, this.kasten_groesse.Height);&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; this.ModifyBase(&lt;span&gt;Gtk&lt;/span&gt;.&lt;span&gt;StateType&lt;/span&gt;.Normal,
c_rahmen);&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; if (&lt;span&gt;Angeklickt&lt;/span&gt;) {&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; this.ModifyBase(&lt;span&gt;Gtk&lt;/span&gt;.&lt;span&gt;StateType&lt;/span&gt;.Normal,
c_selected);&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; this.GdkWindow.DrawRectangle(this.Style.BaseGC(&lt;span&gt;Gtk&lt;/span&gt;.&lt;span&gt;StateType&lt;/span&gt;.Normal),
false, 0, 0, this.kasten_groesse.Width - 1, this.kasten_groesse.Height
- 1);&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; this.GdkWindow.DrawRectangle(this.Style.BaseGC(&lt;span&gt;Gtk&lt;/span&gt;.&lt;span&gt;StateType&lt;/span&gt;.Normal),
false, 1, 1, this.kasten_groesse.Width - 3, this.kasten_groesse.Height
- 3);&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; this.GdkWindow.DrawRectangle(this.Style.BaseGC(&lt;span&gt;Gtk&lt;/span&gt;.&lt;span&gt;StateType&lt;/span&gt;.Normal),
false, 2, 2, this.kasten_groesse.Width - 5, this.kasten_groesse.Height
- 5);&lt;br&gt;
  &lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; int w,h;&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; layout.&lt;span&gt;GetPixelSize&lt;/span&gt;(out w, out h);&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; this.GdkWindow.DrawLayout(this.Style.TextGC(&lt;span&gt;StateType&lt;/span&gt;.Normal),
((kasten_groesse.Width / 2) - (w / 2)), ((kasten_groesse.Height / 2) -
(h / 2)), layout);&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;/font&gt;&lt;/small&gt;&lt;br&gt;
  &lt;br&gt;
i think the &lt;span&gt;sourcecode&lt;/span&gt; of the exposed functions are
correct. i will be gratefully for any solution why the program using so
much memory and &lt;span&gt;cpu&lt;/span&gt;.&lt;br&gt;
thanks&lt;br&gt;
Thomas &lt;span&gt;Z&amp;uuml;hlke&lt;/span&gt;
&lt;/blockquote&gt;
&lt;/body&gt;
&lt;/html&gt;

--------------020508010607060603070807--

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="005584.html">[Gtk-sharp-list] Memory leakage in Expose?
</A></li>
	<LI> Next message: <A HREF="005588.html">[Gtk-sharp-list] Drawing colored text and images into listbox or textview, like I do with GDI+ for System.Windows.Forms
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5585">[ date ]</a>
              <a href="thread.html#5585">[ thread ]</a>
              <a href="subject.html#5585">[ subject ]</a>
              <a href="author.html#5585">[ author ]</a>
         </LI>
       </UL>
</body></html>
