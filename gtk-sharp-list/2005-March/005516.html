<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] From Gtk+ to Gtk#
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:danw%40novell.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="005512.html">
   <LINK REL="Next"  HREF="005517.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] From Gtk+ to Gtk#
   </H1>
    <B>Dan Winship
    </B> 
    <A HREF="mailto:danw%40novell.com"
       TITLE="[Gtk-sharp-list] From Gtk+ to Gtk#">danw@novell.com
       </A><BR>
    <I>Wed, 09 Mar 2005 09:44:41 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="005512.html">[Gtk-sharp-list] From Gtk+ to Gtk#
</A></li>
        <LI> Next message: <A HREF="005517.html">[Gtk-sharp-list] How to learn Gtk#?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5516">[ date ]</a>
              <a href="thread.html#5516">[ thread ]</a>
              <a href="subject.html#5516">[ subject ]</a>
              <a href="author.html#5516">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, 2005-03-09 at 13:28 +0000, Alexandre Gomes wrote:
&gt;<i> Now, about the Color of pixels, it looks to me that isn't implemented
</I>&gt;<i> yet. The property returns a System.IntPtr or (in C language) a int
</I>&gt;<i> pointer.
</I>
Not quite. The name is a little confusing. IntPtr doesn't mean &quot;int*&quot;,
it means &quot;an integer type that is the same size as a void*&quot; (on x86
Linux that would be a long). Since C# doesn't have pointer types
(outside of unsafe code), we have to cast the guchar* returned by
gdk_pixbuf_get_pixels to some integer type, and that's precisely what
IntPtr is for.

&gt;<i> The documentation states that this pointer points to the real
</I>&gt;<i> data, so you can use it as you would do C - who knows a copy paste would
</I>&gt;<i> work... lol. I've no experience in using C code from C# side, so I can't
</I>&gt;<i> tell you for sure if you will not need to use the &quot;unsafe&quot; option in mcs
</I>&gt;<i> to work out this pointer.
</I>
Right, the issue is that we *could* turn the data into a byte[], but
we'd have to copy all of the data, and then any time you changed it we'd
have to copy it all back again, and it wouldn't be very efficient. So if
you need to work with the raw pixel data, you have to use unsafe code.
Something like:

        unsafe {
                byte* pixel = (void*)pb.Pixels;
                
                // You should be able to just cut and paste that C code here I think
        }

-- Dan



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="005512.html">[Gtk-sharp-list] From Gtk+ to Gtk#
</A></li>
	<LI> Next message: <A HREF="005517.html">[Gtk-sharp-list] How to learn Gtk#?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5516">[ date ]</a>
              <a href="thread.html#5516">[ thread ]</a>
              <a href="subject.html#5516">[ subject ]</a>
              <a href="author.html#5516">[ author ]</a>
         </LI>
       </UL>
</body></html>
