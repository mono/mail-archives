<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Associate user data object with a widget
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Associate%20user%20data%20object%20with%20a%20widget&In-Reply-To=94cdd26f0911260337s76a149b8he95c37ace9f4e519%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009958.html">
   <LINK REL="Next"  HREF="009941.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Associate user data object with a widget</H1>
    <B>Christian Hoff</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Associate%20user%20data%20object%20with%20a%20widget&In-Reply-To=94cdd26f0911260337s76a149b8he95c37ace9f4e519%40mail.gmail.com"
       TITLE="[Gtk-sharp-list] Associate user data object with a widget">christian_hoff at gmx.net
       </A><BR>
    <I>Thu Nov 26 12:37:18 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="009958.html">[Gtk-sharp-list] Associate user data object with a widget
</A></li>
        <LI>Next message: <A HREF="009941.html">[Gtk-sharp-list] Associate user data object with a widget
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9939">[ date ]</a>
              <a href="thread.html#9939">[ thread ]</a>
              <a href="subject.html#9939">[ subject ]</a>
              <a href="author.html#9939">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey guys,

GLib.Object.Data is deprecated according to the docs, but it is not 
marked obsolete in the code for whatever reason. Maybe this decision has 
been reverted and the docs have not been updated yet.

In any case, that means that it won't be removed in Gtk# 3.0. Any 
thoughts on this issue, Mike?


Christian

Chuck Esterbrook wrote:
&gt;<i> On Thu, Nov 26, 2009 at 2:55 AM, Chris Howie &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">cdhowie at gmail.com</A>&gt; wrote:
</I>&gt;<i>   
</I>&gt;&gt;<i> On Thu, Nov 26, 2009 at 12:21 AM, Chuck Esterbrook
</I>&gt;&gt;<i> &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">chuck.esterbrook at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i>     
</I>&gt;&gt;&gt;<i> Hi,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I'd like to associate an arbitrary Mono/.NET object with a widget.
</I>&gt;&gt;&gt;<i> Something like:
</I>&gt;&gt;&gt;<i>    button.Data = &quot;foo&quot;
</I>&gt;&gt;&gt;<i> or:
</I>&gt;&gt;&gt;<i>    menuItem.Data = new MyClass();
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;<i> There are two options here...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 1. Create a Dictionary&lt;Widget, T&gt; (you pick the T according to your
</I>&gt;&gt;<i> needs) and use that dictionary to map widgets to the data you want to
</I>&gt;&gt;<i> associate with them.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 2. Derive the widget classes and create a property on them for your needs.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> I agree that these appear to be the only techniques available.
</I>&gt;<i>
</I>&gt;<i>   
</I>&gt;&gt;<i> The reason that the &quot;user data&quot; mechanism is marked obsolete is
</I>&gt;&gt;<i> because it's completely the wrong way to model something like this and
</I>&gt;&gt;<i> usually creates more problems than it solves.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> Putting a value in a hashtable owned by an object isn't much different
</I>&gt;<i> than putting a value in a variable owned by the object. In fact, some
</I>&gt;<i> languages like Python even store their object variables using a
</I>&gt;<i> hashtable!
</I>&gt;<i>
</I>&gt;<i> There are several GUI framework authors who think user data is okay
</I>&gt;<i> given that GUI libs tend to have this feature including GTK+,
</I>&gt;<i> WinForms, WPF and Silverlight. See also:
</I>&gt;<i> <A HREF="http://stackoverflow.com/questions/1058635/common-uses-for-the-tag-property">http://stackoverflow.com/questions/1058635/common-uses-for-the-tag-property</A>
</I>&gt;<i>
</I>&gt;<i> I've used this technique in other GUI libs without experiencing a
</I>&gt;<i> single problem. It's just an alternate way to stash data in an
</I>&gt;<i> existing object.
</I>&gt;<i>
</I>&gt;<i> While we're still talking about this, I find the docs strange. They
</I>&gt;<i> say &quot;This property is obsolete and should not be used unless you
</I>&gt;<i> explicitly retain a reference to the GLib.Object. Otherwise the Data
</I>&gt;<i> hashtable will be lost when the Garbage Collector releases your
</I>&gt;<i> managed object wrapper.&quot; at:
</I>&gt;<i> <A HREF="http://www.go-mono.com/docs/index.aspx?link=P%3aGLib.Object.Data">http://www.go-mono.com/docs/index.aspx?link=P%3aGLib.Object.Data</A>
</I>&gt;<i>
</I>&gt;<i> But my response is... So what? In the VM you are retaining a reference
</I>&gt;<i> to an object while you are interested in it. And losing the data
</I>&gt;<i> hashtable reference upon losing the managed object is not a problem
</I>&gt;<i> either.
</I>&gt;<i>
</I>&gt;<i> I've CCed <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">mkestner at novell.com</A> in case he wants to comment as he marked
</I>&gt;<i> this obsolete in 2004-12. I wonder if it was marked so because of a
</I>&gt;<i> bug, such as an unresolved integration issue. I haven't looked at the
</I>&gt;<i> implementation yet.
</I>&gt;<i>
</I>&gt;<i> I still find it strange that if I use a higher level language, like
</I>&gt;<i> C#, instead of C, I lose this feature (at least if I heed the obsolete
</I>&gt;<i> tag).
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> -Chuck
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Gtk-sharp-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">Gtk-sharp-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">http://lists.ximian.com/mailman/listinfo/gtk-sharp-list</A>
</I>&gt;<i>
</I>&gt;<i>   
</I>
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009958.html">[Gtk-sharp-list] Associate user data object with a widget
</A></li>
	<LI>Next message: <A HREF="009941.html">[Gtk-sharp-list] Associate user data object with a widget
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9939">[ date ]</a>
              <a href="thread.html#9939">[ thread ]</a>
              <a href="subject.html#9939">[ subject ]</a>
              <a href="author.html#9939">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
