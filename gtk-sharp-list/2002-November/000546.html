<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] struct changes patch
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:vladimir%40pobox.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000545.html">
   <LINK REL="Next"  HREF="000558.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] struct changes patch
   </H1>
    <B>Vladimir Vukicevic
    </B> 
    <A HREF="mailto:vladimir%40pobox.com"
       TITLE="[Gtk-sharp-list] struct changes patch">vladimir@pobox.com
       </A><BR>
    <I>05 Nov 2002 21:22:02 -0800</I>
    <P><UL>
        <LI> Previous message: <A HREF="000545.html">Duh, wrong patch - Was: [Gtk-sharp-list] Adding Gtk.ComboBox.Button
</A></li>
        <LI> Next message: <A HREF="000558.html">[Gtk-sharp-list] struct changes patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#546">[ date ]</a>
              <a href="thread.html#546">[ thread ]</a>
              <a href="subject.html#546">[ subject ]</a>
              <a href="author.html#546">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--=-d6IWdtLLuS8DypcXo63E
Content-Type: text/plain
Content-Transfer-Encoding: 7bit


This patch changes struct generation to use a static &quot;Zero&quot; member to
represent null structs, similar to the way the IntPtr struct does it. 
This makes all structs identical in layout to the C versions. 

Also included here are changes to GtkClipboard and GtkSelectionData, to
make these work in a c# environment; these changes depend on the struct
changes above (since there are some structs where refs need to be passed
to callbacks).

	- Vlad

-- 
Vladimir Vukicevic &lt;<A HREF="mailto:vladimir@pobox.com">vladimir@pobox.com</A>&gt;

--=-d6IWdtLLuS8DypcXo63E
Content-Disposition: attachment; filename=gtksharp-struct.patch
Content-Transfer-Encoding: quoted-printable
Content-Type: text/x-patch; name=gtksharp-struct.patch; charset=ANSI_X3.4-1968

diff -Nuw -r -x CVS -x '*.m4' orig/gtk-sharp/generator/CallbackGen.cs gtk-s=
harp/generator/CallbackGen.cs
--- orig/gtk-sharp/generator/CallbackGen.cs	2002-10-26 19:30:50.000000000 -=
0700
+++ gtk-sharp/generator/CallbackGen.cs	2002-11-03 03:27:31.000000000 -0800
@@ -107,9 +107,6 @@
 				string cstype =3D parms[i].CSType;
 				// FIXME: Too much code copy/pasted here. Refactor?
 				ClassBase parm_wrapper =3D SymbolTable.GetClassGen (ctype);
-				if (parm_wrapper !=3D null &amp;&amp; (parm_wrapper is StructBase)) {
-					sw.WriteLine(&quot;\t\t\t{0}._Initialize ();&quot;, parm_name);
-				}
 				sw.WriteLine(&quot;\t\t\t_args[&quot; + idx + &quot;] =3D &quot; + SymbolTable.FromNative =
(ctype, parm_name) + &quot;;&quot;);
 				if ((parm_wrapper !=3D null &amp;&amp; ((parm_wrapper is OpaqueGen))) || Symbo=
lTable.IsManuallyWrapped (ctype)) {
 					sw.WriteLine(&quot;\t\t\tif (_args[&quot; + idx + &quot;] =3D=3D null)&quot;);
diff -Nuw -r -x CVS -x '*.m4' orig/gtk-sharp/generator/Method.cs gtk-sharp/=
generator/Method.cs
diff -Nuw -r -x CVS -x '*.m4' orig/gtk-sharp/generator/SignalHandler.cs gtk=
-sharp/generator/SignalHandler.cs
--- orig/gtk-sharp/generator/SignalHandler.cs	2002-10-26 19:30:50.000000000=
 -0700
+++ gtk-sharp/generator/SignalHandler.cs	2002-11-03 03:28:38.000000000 -080=
0
@@ -143,8 +143,6 @@
 						}
 						sw.WriteLine(&quot;\t\t\t}&quot;);
 					} else {
-						if (wrapper !=3D null &amp;&amp; (wrapper is StructBase))
-							sw.WriteLine(&quot;\t\t\targ{0}._Initialize ();&quot;, idx);
 						sw.WriteLine(&quot;\t\t\targs.Args[&quot; + (idx-1) + &quot;] =3D &quot; + SymbolTable.F=
romNative (ctype, &quot;arg&quot; + idx)  + &quot;;&quot;);
 					}
 				}
diff -Nuw -r -x CVS -x '*.m4' orig/gtk-sharp/generator/StructBase.cs gtk-sh=
arp/generator/StructBase.cs
--- orig/gtk-sharp/generator/StructBase.cs	2002-10-31 21:01:22.000000000 -0=
800
+++ gtk-sharp/generator/StructBase.cs	2002-11-03 03:30:52.000000000 -0800
@@ -235,25 +235,27 @@
 	=09
 		protected override void GenCtors (StreamWriter sw)
 		{
-			sw.WriteLine (&quot;\t\tbool _is_null;&quot;);
-			sw.WriteLine (&quot;\t\tpublic bool IsNull {&quot;);
-			sw.WriteLine (&quot;\t\t\tget { return _is_null; }&quot;);
-			sw.WriteLine (&quot;\t\t}&quot;);
-			sw.WriteLine (&quot;\t\tpublic void _Initialize () {&quot;);
-			sw.WriteLine (&quot;\t\t\t_is_null =3D false;&quot;);
-			sw.WriteLine (&quot;\t\t}&quot;);
+			sw.WriteLine (&quot;\t\tpublic static {0} Zero =3D new {0} ();&quot;, QualifiedNa=
me);
 			sw.WriteLine();
 			sw.WriteLine (&quot;\t\tpublic static &quot; + QualifiedName + &quot; New(IntPtr raw) =
{&quot;);
-			sw.WriteLine (&quot;\t\t\t{0} self =3D new {0}();&quot;, QualifiedName);
 			sw.WriteLine (&quot;\t\t\tif (raw =3D=3D IntPtr.Zero) {&quot;);
-			sw.WriteLine (&quot;\t\t\t\tself._is_null =3D true;&quot;);
-			sw.WriteLine (&quot;\t\t\t} else {&quot;);
-   		sw.WriteLine (&quot;\t\t\t\tself =3D ({0}) Marshal.PtrToStructure (raw, se=
lf.GetType ());&quot;, QualifiedName);
-			sw.WriteLine (&quot;\t\t\t\tself._is_null =3D false;&quot;);
+			sw.WriteLine (&quot;\t\t\t\treturn {0}.Zero;&quot;, QualifiedName);
 			sw.WriteLine (&quot;\t\t\t}&quot;);
+			sw.WriteLine (&quot;\t\t\t{0} self =3D new {0}();&quot;, QualifiedName);
+			sw.WriteLine (&quot;\t\t\tself =3D ({0}) Marshal.PtrToStructure (raw, self.G=
etType ());&quot;, QualifiedName);
 			sw.WriteLine (&quot;\t\t\treturn self;&quot;);
 			sw.WriteLine (&quot;\t\t}&quot;);
 			sw.WriteLine();
+			sw.WriteLine (&quot;\t\tpublic static bool operator =3D=3D ({0} a, {0} b)&quot;, =
QualifiedName);
+			sw.WriteLine (&quot;\t\t{&quot;);
+			sw.WriteLine (&quot;\t\t\treturn a.Equals (b);&quot;);
+			sw.WriteLine (&quot;\t\t}&quot;);
+			sw.WriteLine ();
+			sw.WriteLine (&quot;\t\tpublic static bool operator !=3D ({0} a, {0} b)&quot;, Qu=
alifiedName);
+			sw.WriteLine (&quot;\t\t{&quot;);
+			sw.WriteLine (&quot;\t\t\treturn ! a.Equals (b);&quot;);
+			sw.WriteLine (&quot;\t\t}&quot;);
+			sw.WriteLine();
=20
 			foreach (Ctor ctor in Ctors) {
 				ctor.ForceStatic =3D true;
diff -Nuw -r -x CVS -x '*.m4' orig/gtk-sharp/glue/Makefile.am gtk-sharp/glu=
e/Makefile.am
--- orig/gtk-sharp/glue/Makefile.am	2002-10-18 22:53:26.000000000 -0700
+++ gtk-sharp/glue/Makefile.am	2002-11-02 07:48:22.000000000 -0800
@@ -16,6 +16,7 @@
 	type.c			\
 	widget.c		\
 	list.c			\
+	clipboard.c		\
 	#
=20
 GNOMESOURCES =3D \
diff -Nuw -r -x CVS -x '*.m4' orig/gtk-sharp/glue/clipboard.c gtk-sharp/glu=
e/clipboard.c
--- orig/gtk-sharp/glue/clipboard.c	1969-12-31 16:00:00.000000000 -0800
+++ gtk-sharp/glue/clipboard.c	2002-11-02 07:48:22.000000000 -0800
@@ -0,0 +1,56 @@
+/*
+ * clipboard.c
+ */
+
+#include &lt;gtk/gtk.h&gt;
+
+GSList *
+gtksharp_clipboard_target_list_add (GSList *list, char *target, guint flag=
s, guint info)
+{
+    GtkTargetEntry *entry =3D g_new0 (GtkTargetEntry, 1);
+
+    entry-&gt;target =3D g_strdup (target);
+    entry-&gt;flags =3D flags;
+    entry-&gt;info =3D info;
+
+    return g_slist_prepend (list, entry);
+}
+
+GtkTargetEntry *
+gtksharp_clipboard_target_list_to_array (GSList *list)
+{
+    GtkTargetEntry *targets;
+    GSList *iter;
+    int i;
+
+    targets =3D g_new0 (GtkTargetEntry, g_slist_length (list));
+    for (iter =3D list, i =3D 0; iter; iter =3D iter-&gt;next, i++) {
+        GtkTargetEntry *t =3D (GtkTargetEntry *) iter-&gt;data;
+        targets[i].target =3D t-&gt;target; /* NOT COPIED */
+        targets[i].flags =3D t-&gt;flags;
+        targets[i].info =3D t-&gt;info;
+    }
+
+    return targets;
+}
+
+void
+gtksharp_clipboard_target_array_free (GtkTargetEntry *targets)
+{
+    g_free (targets);
+}
+
+void
+gtksharp_clipboard_target_list_free (GSList *list)
+{
+    GSList *iter;
+
+    for (iter =3D list; iter; iter =3D iter-&gt;next) {
+        GtkTargetEntry *t =3D (GtkTargetEntry *) iter-&gt;data;
+        g_free (t-&gt;target);
+        g_free (t);
+    }
+
+    g_slist_free (list);
+}
+
diff -Nuw -r -x CVS -x '*.m4' orig/gtk-sharp/gnome/voidObjectAffineSVPintSi=
gnal.cs gtk-sharp/gnome/voidObjectAffineSVPintSignal.cs
--- orig/gtk-sharp/gnome/voidObjectAffineSVPintSignal.cs	2002-09-29 19:21:0=
6.000000000 -0700
+++ gtk-sharp/gnome/voidObjectAffineSVPintSignal.cs	2002-11-02 07:48:22.000=
000000 -0800
@@ -27,7 +27,7 @@
 			} else {
 				args.Args[0] =3D null;
 			}
-			arg2._Initialize ();
+
 			args.Args[1] =3D arg2;
 			args.Args[2] =3D arg3;
 		=09
diff -Nuw -r -x CVS -x '*.m4' orig/gtk-sharp/gtk/Clipboard.custom gtk-sharp=
/gtk/Clipboard.custom
--- orig/gtk-sharp/gtk/Clipboard.custom	1969-12-31 16:00:00.000000000 -0800
+++ gtk-sharp/gtk/Clipboard.custom	2002-11-02 07:48:22.000000000 -0800
@@ -0,0 +1,54 @@
+
+		public static Hashtable clipboard_objects =3D new Hashtable ();
+		private static uint clipboard_object_next_id =3D 0;
+
+		[DllImport(&quot;gtk-x11-2.0&quot;)]
+		static extern bool gtk_clipboard_set_with_data(IntPtr raw, IntPtr target=
s, int n_targets, GtkSharp.GtkClipboardGetFuncNative get_func, GtkSharp.Gtk=
ClipboardClearFuncNative clear_func, uint id);
+
+		[DllImport(&quot;gtksharpglue&quot;)]
+		static extern IntPtr gtksharp_clipboard_target_list_add (IntPtr list, st=
ring name, uint flags, uint info);
+
+		[DllImport(&quot;gtksharpglue&quot;)]
+		static extern IntPtr gtksharp_clipboard_target_list_to_array (IntPtr lis=
t);
+
+		[DllImport(&quot;gtksharpglue&quot;)]
+		static extern void gtksharp_clipboard_target_array_free (IntPtr targets)=
;
+
+		[DllImport(&quot;gtksharpglue&quot;)]
+		static extern void gtksharp_clipboard_target_list_free (IntPtr list);
+
+		GtkSharp.GtkClipboardGetFuncWrapper get_func_wrapper;
+		GtkSharp.GtkClipboardClearFuncWrapper clear_func_wrapper;
+
+		public bool Set (Gtk.TargetEntry[] targets,
+				 Gtk.ClipboardGetFunc get_func,
+				 Gtk.ClipboardClearFunc clear_func,
+				 object data)
+		{
+			uint this_id;
+
+			lock (clipboard_objects) {
+				this_id =3D clipboard_object_next_id++;
+				clipboard_objects[this_id] =3D data;
+			}
+
+			get_func_wrapper =3D new GtkSharp.GtkClipboardGetFuncWrapper (get_func)=
;
+			clear_func_wrapper =3D new GtkSharp.GtkClipboardClearFuncWrapper (clear=
_func);
+
+			IntPtr list =3D IntPtr.Zero;
+
+			foreach (Gtk.TargetEntry t in targets) {
+				list =3D gtksharp_clipboard_target_list_add (list, t.target, t.flags, =
t.info);
+			}
+
+			IntPtr array =3D gtksharp_clipboard_target_list_to_array (list);
+
+			bool ret =3D gtk_clipboard_set_with_data (Handle, array, targets.Length=
, get_func_wrapper.NativeDelegate, clear_func_wrapper.NativeDelegate, this_=
id);
+
+			gtksharp_clipboard_target_array_free (array);
+			gtksharp_clipboard_target_list_free (list);
+
+			return ret;
+		}
+
+
diff -Nuw -r -x CVS -x '*.m4' orig/gtk-sharp/gtk/ClipboardClearFunc.cs gtk-=
sharp/gtk/ClipboardClearFunc.cs
--- orig/gtk-sharp/gtk/ClipboardClearFunc.cs	1969-12-31 16:00:00.000000000 =
-0800
+++ gtk-sharp/gtk/ClipboardClearFunc.cs	2002-11-02 07:48:22.000000000 -0800
@@ -0,0 +1,8 @@
+// Generated File.  Do not modify.
+// &lt;c&gt; 2001-2002 Mike Kestner
+
+namespace Gtk {
+
+	public delegate void ClipboardClearFunc(Gtk.Clipboard clipboard, object o=
);
+
+}
diff -Nuw -r -x CVS -x '*.m4' orig/gtk-sharp/gtk/ClipboardGetFunc.cs gtk-sh=
arp/gtk/ClipboardGetFunc.cs
--- orig/gtk-sharp/gtk/ClipboardGetFunc.cs	1969-12-31 16:00:00.000000000 -0=
800
+++ gtk-sharp/gtk/ClipboardGetFunc.cs	2002-11-02 07:48:22.000000000 -0800
@@ -0,0 +1,8 @@
+// Generated File.  Do not modify.
+// &lt;c&gt; 2001-2002 Mike Kestner
+
+namespace Gtk {
+
+	public delegate void ClipboardGetFunc(Gtk.Clipboard clipboard, ref Gtk.Se=
lectionData selection_data, uint info, object o);
+
+}
diff -Nuw -r -x CVS -x '*.m4' orig/gtk-sharp/gtk/GtkSharp.GtkClipboardClear=
FuncNative.cs gtk-sharp/gtk/GtkSharp.GtkClipboardClearFuncNative.cs
--- orig/gtk-sharp/gtk/GtkSharp.GtkClipboardClearFuncNative.cs	1969-12-31 1=
6:00:00.000000000 -0800
+++ gtk-sharp/gtk/GtkSharp.GtkClipboardClearFuncNative.cs	2002-11-02 07:48:=
22.000000000 -0800
@@ -0,0 +1,31 @@
+
+namespace GtkSharp {
+
+	using System;
+	using System.Collections;
+	public delegate void GtkClipboardClearFuncNative(IntPtr clipboard, uint o=
bjid);
+
+	public class GtkClipboardClearFuncWrapper : GLib.DelegateWrapper {
+
+		public void NativeCallback (IntPtr clipboard, uint objid)
+		{
+			object[] _args =3D new object[2];
+			_args[0] =3D (Gtk.Clipboard) GLib.Opaque.GetOpaque(clipboard);
+			if (_args[0] =3D=3D null)
+				_args[0] =3D new Gtk.Clipboard(clipboard);
+                        _args[1] =3D Gtk.Clipboard.clipboard_objects[objid=
];
+			_managed ((Gtk.Clipboard) _args[0], _args[1]);
+                        Gtk.Clipboard.clipboard_objects.Remove (objid);
+		}
+
+		public GtkClipboardClearFuncNative NativeDelegate;
+		protected Gtk.ClipboardClearFunc _managed;
+
+		public GtkClipboardClearFuncWrapper (Gtk.ClipboardClearFunc managed) : b=
ase ()
+		{
+			NativeDelegate =3D new GtkClipboardClearFuncNative (NativeCallback);
+			_managed =3D managed;
+		}
+	}
+
+}
diff -Nuw -r -x CVS -x '*.m4' orig/gtk-sharp/gtk/GtkSharp.GtkClipboardGetFu=
ncNative.cs gtk-sharp/gtk/GtkSharp.GtkClipboardGetFuncNative.cs
--- orig/gtk-sharp/gtk/GtkSharp.GtkClipboardGetFuncNative.cs	1969-12-31 16:=
00:00.000000000 -0800
+++ gtk-sharp/gtk/GtkSharp.GtkClipboardGetFuncNative.cs	2002-11-02 07:48:22=
.000000000 -0800
@@ -0,0 +1,33 @@
+
+namespace GtkSharp {
+
+	using System;
+	using System.Collections;
+	public delegate void GtkClipboardGetFuncNative(IntPtr clipboard, ref Gtk.=
SelectionData selection_data, uint info, uint obj_id);
+
+	public class GtkClipboardGetFuncWrapper : GLib.DelegateWrapper {
+
+		public void NativeCallback (IntPtr clipboard, ref Gtk.SelectionData sele=
ction_data, uint info, uint obj_id)
+		{
+			object[] _args =3D new object[4];
+			_args[0] =3D (Gtk.Clipboard) GLib.Opaque.GetOpaque(clipboard);
+			if (_args[0] =3D=3D null)
+				_args[0] =3D new Gtk.Clipboard(clipboard);
+			_args[1] =3D selection_data;
+			_args[2] =3D info;
+                        _args[3] =3D Gtk.Clipboard.clipboard_objects[obj_i=
d];
+
+			_managed ((Gtk.Clipboard) _args[0], ref selection_data, (uint) _args[2]=
, _args[3]);
+		}
+
+		public GtkClipboardGetFuncNative NativeDelegate;
+		protected Gtk.ClipboardGetFunc _managed;
+
+		public GtkClipboardGetFuncWrapper (Gtk.ClipboardGetFunc managed) : base =
()
+		{
+			NativeDelegate =3D new GtkClipboardGetFuncNative (NativeCallback);
+			_managed =3D managed;
+		}
+	}
+
+}
diff -Nuw -r -x CVS -x '*.m4' orig/gtk-sharp/gtk/SelectionData.custom gtk-s=
harp/gtk/SelectionData.custom
--- orig/gtk-sharp/gtk/SelectionData.custom	1969-12-31 16:00:00.000000000 -=
0800
+++ gtk-sharp/gtk/SelectionData.custom	2002-11-02 07:48:22.000000000 -0800
@@ -0,0 +1,29 @@
+
+		[DllImport(&quot;gtk-x11-2.0&quot;)]
+		private static extern string gtk_selection_data_get_text (ref Gtk.Select=
ionData selection_data);
+
+		[DllImport(&quot;gtk-x11-2.0&quot;)]
+		private static extern void gtk_selection_data_set_text (ref Gtk.Selectio=
nData selection_data, string str, int len);
+
+		public string Text {
+			get {
+				return gtk_selection_data_get_text (ref this);
+			}
+			set {
+				gtk_selection_data_set_text (ref this, value, value.Length);
+			}
+		}
+
+		[DllImport(&quot;gtk-x11-2.0&quot;)]
+		static extern void gtk_selection_data_set (ref Gtk.SelectionData raw, In=
tPtr type, int format, byte[] data, int length);
+
+		public byte[] Data {
+			get {
+				byte[] ret =3D new byte[length];
+				Marshal.Copy (_data, ret, 0, length);
+				return ret;
+			}
+			set {
+				gtk_selection_data_set (ref this, _type, format, value, value.Length);
+			}
+		}
diff -Nuw -r -x CVS -x '*.m4' orig/gtk-sharp/sources/Gtk.metadata gtk-sharp=
/sources/Gtk.metadata
--- orig/gtk-sharp/sources/Gtk.metadata	2002-10-08 12:14:14.000000000 -0700
+++ gtk-sharp/sources/Gtk.metadata	2002-11-02 07:48:22.000000000 -0800
@@ -1286,6 +1286,19 @@
     &lt;/attribute&gt;
   &lt;/data&gt;
 &lt;/rule&gt;
+&lt;rule&gt;
+  &lt;class name=3D&quot;GtkSelectionData&quot;&gt;
+    &lt;method&gt;GetText&lt;/method&gt;
+    &lt;method&gt;SetText&lt;/method&gt;
+    &lt;method&gt;Set&lt;/method&gt;
+  &lt;/class&gt;
+  &lt;data&gt;
+    &lt;attribute target=3D&quot;method&quot;&gt;
+      &lt;name&gt;hidden&lt;/name&gt;
+      &lt;value&gt;1&lt;/value&gt;
+    &lt;/attribute&gt;
+  &lt;/data&gt;
+&lt;/rule&gt;
=20
 &lt;!-- overloads --&gt;
 &lt;rule&gt;
@@ -1854,7 +1867,7 @@
=20
 &lt;!-- reference rules --&gt;
 &lt;rule&gt;
-  &lt;class name=3D&quot;GtkWidget&quot;&gt;
+&lt;!--  &lt;class name=3D&quot;GtkWidget&quot;&gt;
     &lt;method&gt;GetStyle&lt;/method&gt;
     &lt;method&gt;GetModifierStyle&lt;/method&gt;
     &lt;method&gt;GetDefaultStyle&lt;/method&gt;
@@ -1870,6 +1883,7 @@
       &lt;value&gt;1&lt;/value&gt;
     &lt;/attribute&gt;
   &lt;/data&gt;
+--&gt;
=20
 &lt;/rule&gt;
=20
diff -Nuw -r -x CVS -x '*.m4' orig/gtk-sharp/api/gtk-api.xml gtk-sharp/api/=
gtk-api.xml
--- orig/gtk-sharp/api/gtk-api.xml	2002-10-08 12:32:29.000000000 -0700
+++ gtk-sharp/api/gtk-api.xml	2002-11-02 07:48:22.000000000 -0800
@@ -506,22 +506,6 @@
         &lt;parameter type=3D&quot;GtkArg*&quot; name=3D&quot;args&quot;/&gt;
       &lt;/parameters&gt;
     &lt;/callback&gt;
-    &lt;callback name=3D&quot;ClipboardClearFunc&quot; cname=3D&quot;GtkClipboardClearFunc&quot;&gt;
-      &lt;return-type type=3D&quot;void&quot;/&gt;
-      &lt;parameters&gt;
-        &lt;parameter type=3D&quot;GtkClipboard*&quot; name=3D&quot;clipboard&quot;/&gt;
-        &lt;parameter type=3D&quot;gpointer&quot; name=3D&quot;user_data_or_owner&quot;/&gt;
-      &lt;/parameters&gt;
-    &lt;/callback&gt;
-    &lt;callback name=3D&quot;ClipboardGetFunc&quot; cname=3D&quot;GtkClipboardGetFunc&quot;&gt;
-      &lt;return-type type=3D&quot;void&quot;/&gt;
-      &lt;parameters&gt;
-        &lt;parameter type=3D&quot;GtkClipboard*&quot; name=3D&quot;clipboard&quot;/&gt;
-        &lt;parameter type=3D&quot;GtkSelectionData*&quot; name=3D&quot;selection_data&quot;/&gt;
-        &lt;parameter type=3D&quot;guint&quot; name=3D&quot;info&quot;/&gt;
-        &lt;parameter type=3D&quot;gpointer&quot; name=3D&quot;user_data_or_owner&quot;/&gt;
-      &lt;/parameters&gt;
-    &lt;/callback&gt;
     &lt;callback name=3D&quot;ClipboardReceivedFunc&quot; cname=3D&quot;GtkClipboardReceived=
Func&quot;&gt;
       &lt;return-type type=3D&quot;void&quot;/&gt;
       &lt;parameters&gt;
@@ -10487,26 +10471,6 @@
           &lt;parameter type=3D&quot;gint&quot; name=3D&quot;len&quot;/&gt;
         &lt;/parameters&gt;
       &lt;/method&gt;
-      &lt;method name=3D&quot;SetWithData&quot; cname=3D&quot;gtk_clipboard_set_with_data&quot;&gt;
-        &lt;return-type type=3D&quot;gboolean&quot;/&gt;
-        &lt;parameters&gt;
-          &lt;parameter type=3D&quot;const-GtkTargetEntry*&quot; name=3D&quot;targets&quot;/&gt;
-          &lt;parameter type=3D&quot;guint&quot; name=3D&quot;n_targets&quot;/&gt;
-          &lt;parameter type=3D&quot;GtkClipboardGetFunc&quot; name=3D&quot;get_func&quot;/&gt;
-          &lt;parameter type=3D&quot;GtkClipboardClearFunc&quot; name=3D&quot;clear_func&quot;/&gt;
-          &lt;parameter type=3D&quot;gpointer&quot; name=3D&quot;user_data&quot;/&gt;
-        &lt;/parameters&gt;
-      &lt;/method&gt;
-      &lt;method name=3D&quot;SetWithOwner&quot; cname=3D&quot;gtk_clipboard_set_with_owner&quot;=
&gt;<i>
</I>-        &lt;return-type type=3D&quot;gboolean&quot;/&gt;
-        &lt;parameters&gt;
-          &lt;parameter type=3D&quot;const-GtkTargetEntry*&quot; name=3D&quot;targets&quot;/&gt;
-          &lt;parameter type=3D&quot;guint&quot; name=3D&quot;n_targets&quot;/&gt;
-          &lt;parameter type=3D&quot;GtkClipboardGetFunc&quot; name=3D&quot;get_func&quot;/&gt;
-          &lt;parameter type=3D&quot;GtkClipboardClearFunc&quot; name=3D&quot;clear_func&quot;/&gt;
-          &lt;parameter type=3D&quot;GObject*&quot; name=3D&quot;owner&quot;/&gt;
-        &lt;/parameters&gt;
-      &lt;/method&gt;
       &lt;method name=3D&quot;WaitForContents&quot; cname=3D&quot;gtk_clipboard_wait_for_con=
tents&quot;&gt;
         &lt;return-type type=3D&quot;GtkSelectionData*&quot;/&gt;
         &lt;parameters&gt;
@@ -10809,28 +10773,9 @@
           &lt;parameter type=3D&quot;gint*&quot; name=3D&quot;n_atoms&quot;/&gt;
         &lt;/parameters&gt;
       &lt;/method&gt;
-      &lt;method name=3D&quot;GetText&quot; cname=3D&quot;gtk_selection_data_get_text&quot;&gt;
-        &lt;return-type type=3D&quot;guchar*&quot;/&gt;
-      &lt;/method&gt;
       &lt;method name=3D&quot;GetType&quot; cname=3D&quot;gtk_selection_data_get_type&quot; share=
d=3D&quot;true&quot;&gt;
         &lt;return-type type=3D&quot;GType&quot;/&gt;
       &lt;/method&gt;
-      &lt;method name=3D&quot;Set&quot; cname=3D&quot;gtk_selection_data_set&quot;&gt;
-        &lt;return-type type=3D&quot;void&quot;/&gt;
-        &lt;parameters&gt;
-          &lt;parameter type=3D&quot;GdkAtom&quot; name=3D&quot;type&quot;/&gt;
-          &lt;parameter type=3D&quot;gint&quot; name=3D&quot;format&quot;/&gt;
-          &lt;parameter type=3D&quot;const-guchar*&quot; name=3D&quot;data&quot;/&gt;
-          &lt;parameter type=3D&quot;gint&quot; name=3D&quot;length&quot;/&gt;
-        &lt;/parameters&gt;
-      &lt;/method&gt;
-      &lt;method name=3D&quot;SetText&quot; cname=3D&quot;gtk_selection_data_set_text&quot;&gt;
-        &lt;return-type type=3D&quot;gboolean&quot;/&gt;
-        &lt;parameters&gt;
-          &lt;parameter type=3D&quot;const-gchar*&quot; name=3D&quot;str&quot;/&gt;
-          &lt;parameter type=3D&quot;gint&quot; name=3D&quot;len&quot;/&gt;
-        &lt;/parameters&gt;
-      &lt;/method&gt;
       &lt;method name=3D&quot;TargetsIncludeText&quot; cname=3D&quot;gtk_selection_data_targ=
ets_include_text&quot;&gt;
         &lt;return-type type=3D&quot;gboolean&quot;/&gt;
       &lt;/method&gt;

--=-d6IWdtLLuS8DypcXo63E--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000545.html">Duh, wrong patch - Was: [Gtk-sharp-list] Adding Gtk.ComboBox.Button
</A></li>
	<LI> Next message: <A HREF="000558.html">[Gtk-sharp-list] struct changes patch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#546">[ date ]</a>
              <a href="thread.html#546">[ thread ]</a>
              <a href="subject.html#546">[ subject ]</a>
              <a href="author.html#546">[ author ]</a>
         </LI>
       </UL>
</body></html>
