<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Re: Action and UIManager
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:John%20Luke%20%3Cjohn.luke%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="005082.html">
   <LINK REL="Next"  HREF="005084.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Re: Action and UIManager
   </H1>
    <B>John Luke
    </B> 
    <A HREF="mailto:John%20Luke%20%3Cjohn.luke%40gmail.com%3E"
       TITLE="[Gtk-sharp-list] Re: Action and UIManager">John Luke &lt;john.luke@gmail.com&gt;
       </A><BR>
    <I>Sun, 14 Nov 2004 15:38:14 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="005082.html">[Gtk-sharp-list] pango not found
</A></li>
        <LI> Next message: <A HREF="005084.html">[Gtk-sharp-list] Error building Gtk# 1.9 in Win32
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5083">[ date ]</a>
              <a href="thread.html#5083">[ thread ]</a>
              <a href="subject.html#5083">[ subject ]</a>
              <a href="author.html#5083">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>------=_Part_215_33259816.1100464694068
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

I'm not sure the first message made it ...
but I went ahead and made a patch for the List and SList stuff.

Gtk.Action.Proxies states that &quot;The list is owned by the action and
must not be modified.&quot;
so perhaps something more needs to be done to meet that requirement
but it seems to work now.

Ok to commit?

On Tue, 9 Nov 2004 23:01:10 -0500, John Luke &lt;<A HREF="mailto:john.luke@gmail.com">john.luke@gmail.com</A>&gt; wrote:
&gt;<i> Hey,
</I>&gt;<i> 
</I>&gt;<i>   For the bleedingedge-ers out there I just made a quick pass through
</I>&gt;<i> the Gtk Action, ActionGroup, and UIManager classes in the docs.  Here
</I>&gt;<i> are some things I noticed:
</I>&gt;<i>  - some GLib.List and SList exposed
</I>&gt;<i>  - Action.Name comes from get_name but there is also a name property
</I>&gt;<i> which is read/write
</I>&gt;<i> and should possibly be marked const-gchar*
</I>&gt;<i> - should gettext stuff be exposed (ex. Gtk.ActionGroup.TranslationDomain, etc.)
</I>&gt;<i> 
</I>&gt;<i> Just in case someone wants to fix any of these before I do.
</I>&gt;<i>
</I>
------=_Part_215_33259816.1100464694068
Content-Type: text/x-patch; name=&quot;action_stuff.patch&quot;
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment; filename=&quot;action_stuff.patch&quot;

Index: gtk/Action.custom
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
--- gtk/Action.custom=09(revision 36107)
+++ gtk/Action.custom=09(working copy)
@@ -23,3 +23,17 @@
 =09public Action (string name, string label) : this (name, label, null, nu=
ll)
 =09{
 =09}
+
+=09=09[DllImport(&quot;libgtk-win32-2.0-0.dll&quot;)]
+        static extern IntPtr gtk_action_get_proxies (IntPtr raw);
+
+        public Gtk.Widget[] Proxies {
+            get {
+                IntPtr raw_ret =3D gtk_action_get_proxies (Handle);
+                GLib.SList list =3D new GLib.SList (raw_ret);
+ =09=09=09=09Widget[] result =3D new Widget [list.Count];
+            =09for (int i =3D 0; i &lt; list.Count; i++)
+                =09result [i] =3D list [i] as Widget;
+            =09return result;
+            }
+        }
Index: gtk/ActionGroup.custom
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
--- gtk/ActionGroup.custom=09(revision 0)
+++ gtk/ActionGroup.custom=09(revision 0)
@@ -0,0 +1,33 @@
+// Gtk.ActionGroup.custom - Gtk ActionGroup class customizations
+//
+// Author: John Luke  &lt;<A HREF="mailto:john.luke@gmail.com">john.luke@gmail.com</A>&gt;
+//
+// Copyright (C) 2004 Novell, Inc.
+//
+// This code is inserted after the automatically generated code.
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of version 2 of the Lesser GNU General
+// Public License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+// Lesser General Public License for more details.
+//
+// You should have received a copy of the GNU Lesser General Public
+// License along with this program; if not, write to the
+// Free Software Foundation, Inc., 59 Temple Place - Suite 330,
+// Boston, MA 02111-1307, USA.
+
+=09=09[DllImport (&quot;libgtk-win32-2.0-0.dll&quot;)]
+=09=09static extern IntPtr gtk_action_group_list_actions (IntPtr raw);
+
+=09=09public Gtk.Action[] ListActions() {
+=09=09=09IntPtr raw_ret =3D gtk_action_group_list_actions (Handle);
+=09=09=09GLib.List list =3D new GLib.List (raw_ret);
+ =09=09=09Gtk.Action[] result =3D new Gtk.Action [list.Count];
+            for (int i =3D 0; i &lt; list.Count; i++)
+               =09result [i] =3D list [i] as Gtk.Action;
+=09=09=09return result;
+=09=09}
Index: gtk/UIManager.custom
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
--- gtk/UIManager.custom=09(revision 36107)
+++ gtk/UIManager.custom=09(working copy)
@@ -32,3 +32,29 @@
 =09=09return AddUiFromString (new System.IO.StreamReader (s).ReadToEnd ())=
;
 =09}=09
=20
+=09=09[DllImport (&quot;libgtk-win32-2.0-0.dll&quot;)]
+=09=09static extern IntPtr gtk_ui_manager_get_toplevels (IntPtr raw, int t=
ypes);
+
+=09=09public Widget[] GetToplevels (Gtk.UIManagerItemType types) {
+=09=09=09IntPtr raw_ret =3D gtk_ui_manager_get_toplevels (Handle, (int) ty=
pes);
+=09=09=09GLib.SList list =3D new GLib.SList (raw_ret);
+ =09=09=09Widget[] result =3D new Widget [list.Count];
+            for (int i =3D 0; i &lt; list.Count; i++)
+               =09result [i] =3D list [i] as Widget;
+=09=09=09return result;
+=09=09}
+
+=09=09[DllImport (&quot;libgtk-win32-2.0-0.dll&quot;)]
+=09=09static extern IntPtr gtk_ui_manager_get_action_groups (IntPtr raw);
+
+=09=09public ActionGroup[] ActionGroups {=20
+=09=09=09get {
+=09=09=09=09IntPtr raw_ret =3D gtk_ui_manager_get_action_groups (Handle);
+=09=09=09=09GLib.List list =3D new GLib.List(raw_ret);
+ =09=09=09=09ActionGroup[] result =3D new ActionGroup [list.Count];
+            =09for (int i =3D 0; i &lt; list.Count; i++)
+                =09result [i] =3D list [i] as ActionGroup;
+=09=09=09=09return result;
+=09=09=09}
+=09=09}
+
Index: gtk/Gtk.metadata
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
--- gtk/Gtk.metadata=09(revision 36107)
+++ gtk/Gtk.metadata=09(working copy)
@@ -86,6 +86,7 @@
   &lt;attr path=3D&quot;/api/namespace/interface[@cname=3D'GtkTreeSortable']/metho=
d[@name=3D'SortColumnChanged']&quot; name=3D&quot;name&quot;&gt;ChangeSortColumn&lt;/attr&gt;
   &lt;attr path=3D&quot;/api/namespace/object[@cname=3D'GtkAccelLabel']/constructo=
r[@cname=3D'gtk_accel_label_new']/*/*[@name=3D'string']&quot; name=3D&quot;property_n=
ame&quot;&gt;label&lt;/attr&gt;
   &lt;attr path=3D&quot;/api/namespace/object[@cname=3D'GtkAction']/signal[@name=
=3D'Activate']&quot; name=3D&quot;name&quot;&gt;Activated&lt;/attr&gt;
+  &lt;attr path=3D&quot;/api/namespace/object[@cname=3D'GtkAction']/method[@name=
=3D'GetProxies']&quot; name=3D&quot;hidden&quot;&gt;1&lt;/attr&gt;
   &lt;attr path=3D&quot;/api/namespace/object[@cname=3D'GtkActionGroup']/method[@n=
ame=3D'AddAction']&quot; name=3D&quot;name&quot;&gt;Add&lt;/attr&gt;
   &lt;attr path=3D&quot;/api/namespace/object[@cname=3D'GtkActionGroup']/method[@n=
ame=3D'AddActions']&quot; name=3D&quot;hidden&quot;&gt;1&lt;/attr&gt;
   &lt;attr path=3D&quot;/api/namespace/object[@cname=3D'GtkActionGroup']/method[@n=
ame=3D'AddActionsFull']&quot; name=3D&quot;hidden&quot;&gt;1&lt;/attr&gt;
@@ -94,6 +95,7 @@
   &lt;attr path=3D&quot;/api/namespace/object[@cname=3D'GtkActionGroup']/method[@n=
ame=3D'AddRadioActionsFull']&quot; name=3D&quot;hidden&quot;&gt;1&lt;/attr&gt;
   &lt;attr path=3D&quot;/api/namespace/object[@cname=3D'GtkActionGroup']/method[@n=
ame=3D'AddToggleActions']&quot; name=3D&quot;hidden&quot;&gt;1&lt;/attr&gt;
   &lt;attr path=3D&quot;/api/namespace/object[@cname=3D'GtkActionGroup']/method[@n=
ame=3D'AddToggleActionsFull']&quot; name=3D&quot;hidden&quot;&gt;1&lt;/attr&gt;
+  &lt;attr path=3D&quot;/api/namespace/object[@cname=3D'GtkActionGroup']/method[@n=
ame=3D'ListActions']&quot; name=3D&quot;hidden&quot;&gt;1&lt;/attr&gt;
   &lt;attr path=3D&quot;/api/namespace/object[@cname=3D'GtkActionGroup']/method[@n=
ame=3D'RemoveAction']&quot; name=3D&quot;name&quot;&gt;Remove&lt;/attr&gt;
   &lt;attr path=3D&quot;/api/namespace/object[@cname=3D'GtkAdjustment']/constructo=
r[@cname=3D'gtk_adjustment_new']&quot; name=3D&quot;hidden&quot;&gt;1&lt;/attr&gt;
   &lt;attr path=3D&quot;/api/namespace/object[@cname=3D'GtkAdjustment']/method[@na=
me=3D'Changed']&quot; name=3D&quot;name&quot;&gt;Change&lt;/attr&gt;
@@ -329,6 +331,8 @@
   &lt;attr path=3D&quot;/api/namespace/object[@cname=3D'GtkTreeView']/method[@name=
=3D'ScrollToCell']/*/*[@type=3D'GtkTreeViewColumn*']&quot; name=3D&quot;null_ok&quot;&gt;1&lt;/a=
ttr&gt;
   &lt;attr path=3D&quot;/api/namespace/object[@cname=3D'GtkTreeView']/method[@name=
=3D'SetModel']/*/*[@type=3D'GtkTreeModel*']&quot; name=3D&quot;null_ok&quot;&gt;1&lt;/attr&gt;
   &lt;attr path=3D&quot;/api/namespace/object[@cname=3D'GtkTreeView']/signal[@name=
=3D'SetScrollAdjustments']&quot; name=3D&quot;name&quot;&gt;ScrollAdjustmentsSet&lt;/attr&gt;
+  &lt;attr path=3D&quot;/api/namespace/object[@cname=3D'GtkUIManager']/method[@cna=
me=3D'gtk_ui_manager_get_action_groups']&quot; name=3D&quot;hidden&quot;&gt;1&lt;/attr&gt;
+  &lt;attr path=3D&quot;/api/namespace/object[@cname=3D'GtkUIManager']/method[@nam=
e=3D'GetToplevels']&quot; name=3D&quot;hidden&quot;&gt;1&lt;/attr&gt;
   &lt;attr path=3D&quot;/api/namespace/object[@cname=3D'GtkViewport']/constructor[=
@cname=3D'gtk_viewport_new']/*/*[@type=3D'GtkAdjustment*']&quot; name=3D&quot;null_ok=
&quot;&gt;1&lt;/attr&gt;
   &lt;attr path=3D&quot;/api/namespace/object[@cname=3D'GtkViewport']/method[@name=
=3D'SetHadjustment']/*/*[@type=3D'GtkAdjustment*']&quot; name=3D&quot;null_ok&quot;&gt;1&lt;/att=
r&gt;
   &lt;attr path=3D&quot;/api/namespace/object[@cname=3D'GtkViewport']/method[@name=
=3D'SetVadjustment']/*/*[@type=3D'GtkAdjustment*']&quot; name=3D&quot;null_ok&quot;&gt;1&lt;/att=
r&gt;
Index: gtk/Makefile.am
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
--- gtk/Makefile.am=09(revision 36107)
+++ gtk/Makefile.am=09(working copy)
@@ -31,6 +31,7 @@
 =09Accel.custom=09=09=09\
 =09AccelKey.custom=09=09=09\
 =09Action.custom=09=09=09\
+=09ActionGroup.custom=09=09\
 =09Adjustment.custom=09=09\
 =09Bin.custom=09=09=09\
 =09Button.custom=09=09=09\

------=_Part_215_33259816.1100464694068--

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="005082.html">[Gtk-sharp-list] pango not found
</A></li>
	<LI> Next message: <A HREF="005084.html">[Gtk-sharp-list] Error building Gtk# 1.9 in Win32
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5083">[ date ]</a>
              <a href="thread.html#5083">[ thread ]</a>
              <a href="subject.html#5083">[ subject ]</a>
              <a href="author.html#5083">[ author ]</a>
         </LI>
       </UL>
</body></html>
