<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] GTK# Window Display Issue Outside of Main.cs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=Re%3A%20%5BGtk-sharp-list%5D%20GTK%23%20Window%20Display%20Issue%20Outside%20of%20Main.cs&In-Reply-To=%3CCADfwMx9eKr1w7mxoa%3DLFm38w2szXg%3DF6tiqTGN0%3DNMBh7APzpg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011147.html">
   <LINK REL="Next"  HREF="011149.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] GTK# Window Display Issue Outside of Main.cs</H1>
    <B>Joe Dluzen</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=Re%3A%20%5BGtk-sharp-list%5D%20GTK%23%20Window%20Display%20Issue%20Outside%20of%20Main.cs&In-Reply-To=%3CCADfwMx9eKr1w7mxoa%3DLFm38w2szXg%3DF6tiqTGN0%3DNMBh7APzpg%40mail.gmail.com%3E"
       TITLE="[Gtk-sharp-list] GTK# Window Display Issue Outside of Main.cs">jdluzen at gmail.com
       </A><BR>
    <I>Tue Nov  6 22:37:12 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="011147.html">[Gtk-sharp-list] GTK# Window Display Issue Outside of Main.cs
</A></li>
        <LI>Next message: <A HREF="011149.html">[Gtk-sharp-list] GTK# Window Display Issue Outside of Main.cs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11148">[ date ]</a>
              <a href="thread.html#11148">[ thread ]</a>
              <a href="subject.html#11148">[ subject ]</a>
              <a href="author.html#11148">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Though I haven't run your code, my first guess would be threading issues.
As with practically all GUI toolkits, components are not only not
threadsafe, but code doing anything with the components must be invoked on
the same thread, please see here:
<A HREF="http://www.mono-project.com/Responsive_Applications">http://www.mono-project.com/Responsive_Applications</A>

In the code you have not posted, is anything started on new threads, or on
the threadpool? If so, you'd need to Invoke() any and all update code to
the GUI thread. All speculation right now, sorry.

Joe


On Tue, Nov 6, 2012 at 2:36 PM, Johnnie Odom &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">jodom at escambia.k12.fl.us</A>&gt;wrote:

&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Hello Everyone,
</I>&gt;<i>
</I>&gt;<i>  This is my first day on the mailing list, and as it is I have a question
</I>&gt;<i> regarding some odd behavior I am encountering.
</I>&gt;<i>
</I>&gt;<i>  I am writing an application on OS X 10.8 using C#, Mono 2.10.9 and
</I>&gt;<i> MonoDevelop 3.0.4 (including the Designer views) that makes some simple
</I>&gt;<i> changes to LDAP. As part of it, I decided to get fancy with GTK#. All is
</I>&gt;<i> going well, except for one behavior.
</I>&gt;<i>
</I>&gt;<i>  I have created a window class to display a progress bar and stop button.
</I>&gt;<i> I have further created a function in this class to update the progress bar
</I>&gt;<i> with a fraction and text message. In my code, I create a new instance of
</I>&gt;<i> this window class when real work is happening in another class, and then
</I>&gt;<i> populate it after every ten iterations of a foreach loop.
</I>&gt;<i>
</I>&gt;<i>  My problem is that when the window is created FROM THE CLASS DOING REAL
</I>&gt;<i> WORK, it displays neither the progress bar widget, nor the button. It
</I>&gt;<i> displays only the window title and then white space below. Only this window
</I>&gt;<i> displays this behavior -- several other windows that I create over the
</I>&gt;<i> course of the application all display appropriately.
</I>&gt;<i>
</I>&gt;<i>  If I instead create the progress bar window in Main.cs and call Show(),
</I>&gt;<i> it will display just fine. I can even call the function to set its status
</I>&gt;<i> from Main.cs and it will display correctly.
</I>&gt;<i>
</I>&gt;<i>  I have tried creating the window in Main.cs and passing it to the class
</I>&gt;<i> that does the real work later. I have tried creating it in other classes
</I>&gt;<i> besides the one that does the work. In all cases the behavior is the same
</I>&gt;<i> -- if the window is created and used solely in Main.cs it will display
</I>&gt;<i> fine, but if it it ever invoked or created from anywhere else (whether or
</I>&gt;<i> not it is created in another class or in Main.cs) it will display
</I>&gt;<i> incorrectly.
</I>&gt;<i>
</I>&gt;<i>  I have taken to using the debugger and break points to isolate the
</I>&gt;<i> behavior. If I set a breakpoint immediately after the window is created, it
</I>&gt;<i> is still blank -- that is, I do not think it is a case that the window is
</I>&gt;<i> just not keeping pace with any updates I am sending. I have also compared
</I>&gt;<i> the various values of the window objects and attributes when it is
</I>&gt;<i> displayed (created and used solely in Main.cs) and when it is not
</I>&gt;<i> (displayed in any other class) and they seem to be identical.
</I>&gt;<i>
</I>&gt;<i>  So, I am at a loss, and I would appreciate any advice you might give.
</I>&gt;<i>
</I>&gt;<i>  I can send any code you think would prove useful, but for now I am
</I>&gt;<i> sending you the class where I am trying to call the window, and the
</I>&gt;<i> contents of the window's code-behind.
</I>&gt;<i>
</I>&gt;<i>  Thank you for any guidance you can give.
</I>&gt;<i>
</I>&gt;<i>  Johnnie Odom
</I>&gt;<i>
</I>&gt;<i> Network Services
</I>&gt;<i>
</I>&gt;<i> School District of Escambia County
</I>&gt;<i>
</I>&gt;<i>  ****************
</I>&gt;<i>
</I>&gt;<i> The function from the calling class:
</I>&gt;<i>
</I>&gt;<i>  public string radiazerMain(string radiazerGroup, string radiazerProfile){
</I>&gt;<i>
</I>&gt;<i> Progression MarathonBar = new Progression();
</I>&gt;<i>
</I>&gt;<i> MarathonBar.Show();
</I>&gt;<i>
</I>&gt;<i> string monologger = &quot;&quot;;
</I>&gt;<i>
</I>&gt;<i> string lastLine = &quot;Radiazer completed current run.&quot; + Environment.NewLine;
</I>&gt;<i>
</I>&gt;<i> Array usersToModify = getGroupMembers(radiazerGroup);
</I>&gt;<i>
</I>&gt;<i> string[] radiusAttribs = new
</I>&gt;<i> string[]{&quot;dialupAccess&quot;,&quot;radiusArapFeatures&quot;,&quot;radiusArapSecurity&quot;,&quot;radiusArapZoneAccess&quot;,&quot;radiusAuthType&quot;,&quot;radiusCallbackId&quot;,&quot;radiusCallbackNumber&quot;,&quot;radiusCalledStationId&quot;,&quot;radiusCallingStationId&quot;,&quot;radiusCheckItem&quot;,&quot;radiusClass&quot;,&quot;radiusClientIPAddress&quot;,&quot;radiusExpiration&quot;,&quot;radiusFilterId&quot;,&quot;radiusFramedAppleTalkLink&quot;,&quot;radiusFramedAppleTalkNetwork&quot;,&quot;radiusFramedAppleTalkZone&quot;,&quot;radiusFramedCompression&quot;,&quot;radiusFramedIPAddress&quot;,&quot;radiusFramedIPNetmask&quot;,&quot;radiusFramedIPXNetwork&quot;,&quot;radiusFramedMTU&quot;,&quot;radiusFramedProtocol&quot;,&quot;radiusFramedRoute&quot;,&quot;radiusFramedRouting&quot;,&quot;radiusGroupName&quot;,&quot;radiusHint&quot;,&quot;radiusHuntgroupName&quot;,&quot;radiusIdleTimeout&quot;,&quot;radiusLoginIPHost&quot;,&quot;radiusLoginLATGroup&quot;,&quot;radiusLoginLATNode&quot;,&quot;radiusLoginLATPort&quot;,&quot;radiusLoginLATService&quot;,&quot;radiusLoginService&quot;,&quot;radiusLoginTCPPort&quot;,&quot;radiusLoginTime&quot;,&quot;radiusPasswordRetry&quot;,&quot;radiusPortLimit&quot;,&quot;radiusProfileDn&quot;,&quot;radiusPrompt&quot;,&quot;radiusProxyToRealm&quot;,&quot;radiusRealm&quot;,&quot;radiusReplicateToRealm&quot;,&quot;radiusReplyItem&quot;,&quot;radiusServiceType&quot;,&quot;radiusSessionTimeout&quot;,&quot;radiusSimultaneousUse&quot;,&quot;radiusStripUserName&quot;,&quot;radiusTerminationAction&quot;,&quot;radiusTunnelAssignmentId&quot;,&quot;radiusTunnelClientEndpoint&quot;,&quot;radiusTunnelMediumType&quot;,&quot;radiusTunnelPassword&quot;,&quot;radiusTunnelPreference&quot;,&quot;radiusTunnelPrivateGroupId&quot;,&quot;radiusTunnelServerEndpoint&quot;,&quot;radiusTunnelType&quot;,&quot;radiusUserCategory&quot;,&quot;radiusVSA&quot;};
</I>&gt;<i>
</I>&gt;<i> LdapAttributeSet profileTemplate =
</I>&gt;<i> LdapAttributeSetFiltered(radiazerProfile, radiusAttribs);
</I>&gt;<i>
</I>&gt;<i> profileTemplate.Add(new LdapAttribute(&quot;radiusProfileDn&quot;, radiazerProfile));
</I>&gt;<i>
</I>&gt;<i>  int totalUsersCount = usersToModify.Length;
</I>&gt;<i>
</I>&gt;<i> int currentUserCount = 0;
</I>&gt;<i>
</I>&gt;<i> int errorCount = 0;
</I>&gt;<i>
</I>&gt;<i> MarathonBar.Show();
</I>&gt;<i>
</I>&gt;<i>  foreach(string userToModify in usersToModify){
</I>&gt;<i>
</I>&gt;<i> currentUserCount++;
</I>&gt;<i>
</I>&gt;<i> try{
</I>&gt;<i>
</I>&gt;<i> monologger = monologger + radiazeModifyUser(userToModify, profileTemplate);
</I>&gt;<i>
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> catch(LdapException LdapFailure){
</I>&gt;<i>
</I>&gt;<i> monologger = monologger + &quot;User &quot; + userToModify + &quot; failed. Error is &quot; +
</I>&gt;<i> LdapFailure.ToString() + Environment.NewLine;
</I>&gt;<i>
</I>&gt;<i> errorCount++;
</I>&gt;<i>
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> if(((currentUserCount % 10) == 0) || ((totalUsersCount - currentUserCount)
</I>&gt;<i> &lt; 10)){
</I>&gt;<i>
</I>&gt;<i> MarathonBar.setProgress(((double)currentUserCount / totalUsersCount),
</I>&gt;<i> totalUsersCount , currentUserCount, errorCount, userToModify);
</I>&gt;<i>
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> if(MarathonBar.cancelFromUser){
</I>&gt;<i>
</I>&gt;<i> lastLine = &quot;Radiazer cancelled by user.&quot; + Environment.NewLine;
</I>&gt;<i>
</I>&gt;<i> break;
</I>&gt;<i>
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i>  MarathonBar.Destroy();
</I>&gt;<i>
</I>&gt;<i> monologger = monologger + lastLine;
</I>&gt;<i>
</I>&gt;<i> return monologger;
</I>&gt;<i>
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i>  *************
</I>&gt;<i>
</I>&gt;<i>  The Code-Behind:
</I>&gt;<i>
</I>&gt;<i>  using System;
</I>&gt;<i>
</I>&gt;<i>  namespace Radiazer2
</I>&gt;<i>
</I>&gt;<i> {
</I>&gt;<i>
</I>&gt;<i> public partial class Progression : Gtk.Window
</I>&gt;<i>
</I>&gt;<i> {
</I>&gt;<i>
</I>&gt;<i>  public bool cancelFromUser = false;
</I>&gt;<i>
</I>&gt;<i>  public Progression () :
</I>&gt;<i>
</I>&gt;<i> base(Gtk.WindowType.Toplevel)
</I>&gt;<i>
</I>&gt;<i> {
</I>&gt;<i>
</I>&gt;<i> this.Build ();
</I>&gt;<i>
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i>  public void setProgress(double fractionOfProgress, int totalUnits, int
</I>&gt;<i> finishedUnits, int errorUnits, string finishedUser){
</I>&gt;<i>
</I>&gt;<i> this.progressIndicator.Fraction = fractionOfProgress;
</I>&gt;<i>
</I>&gt;<i> this.progressIndicator.Text = &quot;Completed &quot; + finishedUnits + &quot; of &quot; +
</I>&gt;<i> totalUnits + &quot; with &quot; + errorUnits + &quot; errors. Current user is &quot; +
</I>&gt;<i> finishedUser + &quot;.&quot;;
</I>&gt;<i>
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i>  protected void OnStopUserClicked (object sender, EventArgs e)
</I>&gt;<i>
</I>&gt;<i> {
</I>&gt;<i>
</I>&gt;<i> cancelFromUser = true;
</I>&gt;<i>
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Gtk-sharp-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">Gtk-sharp-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">http://lists.ximian.com/mailman/listinfo/gtk-sharp-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ximian.com/pipermail/gtk-sharp-list/attachments/20121106/54c0d525/attachment-0001.html">http://lists.ximian.com/pipermail/gtk-sharp-list/attachments/20121106/54c0d525/attachment-0001.html</A>&gt;
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011147.html">[Gtk-sharp-list] GTK# Window Display Issue Outside of Main.cs
</A></li>
	<LI>Next message: <A HREF="011149.html">[Gtk-sharp-list] GTK# Window Display Issue Outside of Main.cs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11148">[ date ]</a>
              <a href="thread.html#11148">[ thread ]</a>
              <a href="subject.html#11148">[ subject ]</a>
              <a href="author.html#11148">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
