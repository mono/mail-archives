<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] segfault on void object
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20segfault%20on%20void%20object&In-Reply-To=29ab7a460703260921p330cf3c8jff06ff1cdfa34b1e%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007940.html">
   <LINK REL="Next"  HREF="007944.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] segfault on void object</H1>
    <B>Fredrik Nilsson</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20segfault%20on%20void%20object&In-Reply-To=29ab7a460703260921p330cf3c8jff06ff1cdfa34b1e%40mail.gmail.com"
       TITLE="[Gtk-sharp-list] segfault on void object">jymdman at gmail.com
       </A><BR>
    <I>Mon Mar 26 15:47:29 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="007940.html">[Gtk-sharp-list] segfault on void object
</A></li>
        <LI>Next message: <A HREF="007944.html">[Gtk-sharp-list] segfault on void object
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7942">[ date ]</a>
              <a href="thread.html#7942">[ thread ]</a>
              <a href="subject.html#7942">[ subject ]</a>
              <a href="author.html#7942">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

I'm not sure if this will work, as I can't test this right now.
But I think you need to change your code to the following:

private void OnDeleteEvent(object sender, DeleteEventArgs args) {
    this.Hide();
    args.RetVal = true;
}

If you don't set RetVal to true, your window will be destroyed and you 
have to create a new instance.

/Fredrik
              


Martin Persenius wrote:
&gt;<i> Hi! I thought this was really standard/simple functionality, so I have 
</I>&gt;<i> no idea how to solve this. Relevant code (abbreviated) and error 
</I>&gt;<i> message included below. Error happens every time.
</I>&gt;<i>
</I>&gt;<i> Thanks!
</I>&gt;<i>
</I>&gt;<i> Take care,
</I>&gt;<i> Martin
</I>&gt;<i>
</I>&gt;<i>   1.
</I>&gt;<i>       namespace GSokoban {
</I>&gt;<i>   2.
</I>&gt;<i>               public class MainWindow : Gnome.Window {
</I>&gt;<i>   3.
</I>&gt;<i>                       private SettingsWindow settings_window;
</I>&gt;<i>   4.
</I>&gt;<i>        
</I>&gt;<i>   5.
</I>&gt;<i>                       public MainWindow() {
</I>&gt;<i>   6.
</I>&gt;<i>                               Glade. XML gxml = new
</I>&gt;<i>       &lt;<A HREF="http://www.google.com/search?q=new+msdn.microsoft.com">http://www.google.com/search?q=new+msdn.microsoft.com</A>&gt;
</I>&gt;<i>       Glade.XML( null , &quot;gsokoban-2.glade&quot;, &quot;main_window&quot;, null);
</I>&gt;<i>   7.
</I>&gt;<i>                               gxml. Autoconnect(this);
</I>&gt;<i>   8.
</I>&gt;<i>                              
</I>&gt;<i>   9.
</I>&gt;<i>                               settings_window = new
</I>&gt;<i>       &lt;<A HREF="http://www.google.com/search?q=new+msdn.microsoft.com">http://www.google.com/search?q=new+msdn.microsoft.com</A>&gt;
</I>&gt;<i>       SettingsWindow( );
</I>&gt;<i>  10.
</I>&gt;<i>                       }
</I>&gt;<i>  11.
</I>&gt;<i>        
</I>&gt;<i>  12.
</I>&gt;<i>                       private void OnSettingsActivate(object sender,
</I>&gt;<i>       EventArgs args) {
</I>&gt;<i>  13.
</I>&gt;<i>                               settings_window. Show();
</I>&gt;<i>  14.
</I>&gt;<i>                       }
</I>&gt;<i>  15.
</I>&gt;<i>               }
</I>&gt;<i>  16.
</I>&gt;<i>              
</I>&gt;<i>  17.
</I>&gt;<i>               public class SettingsWindow : Gtk.Window {
</I>&gt;<i>  18.
</I>&gt;<i>                       private Gtk.Window settings_window;
</I>&gt;<i>  19.
</I>&gt;<i>                      
</I>&gt;<i>  20.
</I>&gt;<i>                       public SettingsWindow() : base(WindowType.
</I>&gt;<i>       Toplevel) {
</I>&gt;<i>  21.
</I>&gt;<i>                               base.Name = &quot;settings_window&quot;;
</I>&gt;<i>  22.
</I>&gt;<i>                               base.Title = &quot;Settings&quot;;
</I>&gt;<i>  23.
</I>&gt;<i>       [.......]
</I>&gt;<i>  24.
</I>&gt;<i>                               base.Add (settings_vbox1);
</I>&gt;<i>  25.
</I>&gt;<i>                               settings_vbox1.Show();
</I>&gt;<i>  26.
</I>&gt;<i>                       }
</I>&gt;<i>  27.
</I>&gt;<i>        
</I>&gt;<i>  28.
</I>&gt;<i>                       private void OnDeleteEvent(object sender,
</I>&gt;<i>       DeleteEventArgs args) {
</I>&gt;<i>  29.
</I>&gt;<i>                               this.Hide();
</I>&gt;<i>  30.
</I>&gt;<i>                       }
</I>&gt;<i>  31.
</I>&gt;<i>               }
</I>&gt;<i>  32.
</I>&gt;<i>       }
</I>&gt;<i>  33.
</I>&gt;<i>        
</I>&gt;<i>  34.
</I>&gt;<i>       ERROR:
</I>&gt;<i>  35.
</I>&gt;<i>       DEBUG: OnSettingsActivate
</I>&gt;<i>  36.
</I>&gt;<i>       OnDeleteEvent
</I>&gt;<i>  37.
</I>&gt;<i>       DEBUG: OnSettingsActivate
</I>&gt;<i>  38.
</I>&gt;<i>       Stacktrace:
</I>&gt;<i>  39.
</I>&gt;<i>        
</I>&gt;<i>  40.
</I>&gt;<i>         at (wrapper managed-to-native) Gtk.Widget.gtk_widget_show
</I>&gt;<i>       (intptr) &lt;0x00004&gt;
</I>&gt;<i>  41.
</I>&gt;<i>         at (wrapper managed-to-native ) Gtk.Widget.gtk_widget_show
</I>&gt;<i>       (intptr ) &lt;0xffffffff&gt;
</I>&gt;<i>  42.
</I>&gt;<i>         at Gtk.Widget.Show () &lt;0x0001a&gt;
</I>&gt;<i>  43.
</I>&gt;<i>         at GSokoban.MainWindow.OnSettingsActivate (object,System
</I>&gt;<i>       .EventArgs) [0x0000a] in /home/pmfp/Projects/gsokoban-2/gsokoban
</I>&gt;<i>       -2/windows.cs:47
</I>&gt;<i>  44.
</I>&gt;<i>         at (wrapper delegate-invoke) System
</I>&gt;<i>       .MulticastDelegate.invoke_void_object_EventArgs
</I>&gt;<i>       (object,System.EventArgs ) &lt;0xffffffff&gt;
</I>&gt;<i>  45.
</I>&gt;<i>         at GLib.Signal.voidObjectCallback (intptr,intptr ) &lt;0x00093&gt;
</I>&gt;<i>  46.
</I>&gt;<i>         at (wrapper native-to-managed) GLib.Signal. voidObjectCallback
</I>&gt;<i>       (intptr,intptr) &lt;0xffffffff&gt;
</I>&gt;<i>  47.
</I>&gt;<i>         at (wrapper managed-to-native ) Gtk.Application.gtk_main ()
</I>&gt;<i>       &lt;0x00004&gt;
</I>&gt;<i>  48.
</I>&gt;<i>         at ( wrapper managed-to-native) Gtk.Application.gtk_main ()
</I>&gt;<i>       &lt;0xffffffff&gt;
</I>&gt;<i>  49.
</I>&gt;<i>         at Gtk.Application.Run () &lt;0x00007&gt;
</I>&gt;<i>  50.
</I>&gt;<i>         at GSokoban. GSokoban.Main (string[]) [0x0002c ] in
</I>&gt;<i>       /home/pmfp/Projects/gsokoban-2/gsokoban-2/gsokoban-2.cs:54
</I>&gt;<i>  51.
</I>&gt;<i>         at (wrapper runtime-invoke)
</I>&gt;<i>       System.Object.runtime_invoke_void_string []
</I>&gt;<i>       (object,intptr,intptr,intptr) &lt;0xffffffff&gt;
</I>&gt;<i>  52.
</I>&gt;<i>        
</I>&gt;<i>  53.
</I>&gt;<i>       Native stacktrace:
</I>&gt;<i>  54.
</I>&gt;<i>        
</I>&gt;<i>  55.
</I>&gt;<i>               mono [0x8179af1]
</I>&gt;<i>  56.
</I>&gt;<i>               mono [0x815c62b]
</I>&gt;<i>  57.
</I>&gt;<i>               [0xb7f49440 ]
</I>&gt;<i>  58.
</I>&gt;<i>               [0xb5f9bb60]
</I>&gt;<i>  59.
</I>&gt;<i>               [0xb5f9bb1b ]
</I>&gt;<i>  60.
</I>&gt;<i>               [0xb61e06a8]
</I>&gt;<i>  61.
</I>&gt;<i>               [0xb61d8047 ]
</I>&gt;<i>  62.
</I>&gt;<i>               [0xb5f9e07c]
</I>&gt;<i>  63.
</I>&gt;<i>               [0xb61e066b ]
</I>&gt;<i>  64.
</I>&gt;<i>              
</I>&gt;<i>       /usr/lib/libgobject-2.0.so.0(g_cclosure_marshal_VOID__VOID+0x4b
</I>&gt;<i>       ) [0xb69e9e1b]
</I>&gt;<i>  65.
</I>&gt;<i>               /usr/lib/libgobject-2.0.so .0(g_closure_invoke+0x13b)
</I>&gt;<i>       [0xb69dc98b]
</I>&gt;<i>  66.
</I>&gt;<i>               /usr/lib/libgobject -2.0.so.0 [0xb69ed213]
</I>&gt;<i>  67.
</I>&gt;<i>               /usr/lib/libgobject-2.0
</I>&gt;<i>       .so.0(g_signal_emit_valist+0x899) [0xb69ee429]
</I>&gt;<i>  68.
</I>&gt;<i>               /usr/lib/libgobject-2.0.so.0(g_signal_emit+0x29) [
</I>&gt;<i>       0xb69ee5d9]
</I>&gt;<i>  69.
</I>&gt;<i>               /usr/lib/libgtk-x11-2.0.so.0(gtk_widget_activate+0x92 )
</I>&gt;<i>       [0xb6e00042]
</I>&gt;<i>  70.
</I>&gt;<i>               /usr/lib/libgtk-x11-2.0.so
</I>&gt;<i>       .0(gtk_menu_shell_activate_item+0x122) [0xb6d1e262]
</I>&gt;<i>  71.
</I>&gt;<i>               /usr/lib/libgtk-x11 -2.0.so.0 [0xb6d1f810]
</I>&gt;<i>  72.
</I>&gt;<i>               /usr/lib/libgtk-x11 -2.0.so.0 [0xb6d13d3f]
</I>&gt;<i>  73.
</I>&gt;<i>               /usr/lib/libgtk-x11-2.0
</I>&gt;<i>       .so.0(_gtk_marshal_BOOLEAN__BOXED+0x60) [0xb6d12250]
</I>&gt;<i>  74.
</I>&gt;<i>               /usr/lib/libgobject-2.0.so.0 [0xb69daf49]
</I>&gt;<i>  75.
</I>&gt;<i>               /usr/lib/libgobject-2.0.so.0(g_closure_invoke+0x13b)
</I>&gt;<i>       [0xb69dc98b ]
</I>&gt;<i>  76.
</I>&gt;<i>               /usr/lib/libgobject-2.0.so.0 [0xb69ed56f ]
</I>&gt;<i>  77.
</I>&gt;<i>               /usr/lib/libgobject-2.0.so.0(g_signal_emit_valist+0x678
</I>&gt;<i>       ) [0xb69ee208]
</I>&gt;<i>  78.
</I>&gt;<i>               /usr/lib/libgobject-2.0.so.0 (g_signal_emit+0x29)
</I>&gt;<i>       [0xb69ee5d9]
</I>&gt;<i>  79.
</I>&gt;<i>               /usr/lib/libgtk-x11 -2.0.so.0 [0xb6dfbf64]
</I>&gt;<i>  80.
</I>&gt;<i>               /usr/lib/libgtk-x11-2.0 .so.0(gtk_propagate_event+0x193)
</I>&gt;<i>       [0xb6d0bbd3]
</I>&gt;<i>  81.
</I>&gt;<i>               /usr/lib/libgtk-x11-2.0.so.0(gtk_main_do_event+0x327)
</I>&gt;<i>       [0xb6d0ce07]
</I>&gt;<i>  82.
</I>&gt;<i>               /usr/lib/libgdk-x11-2.0.so.0 [ 0xb6b8feea]
</I>&gt;<i>  83.
</I>&gt;<i>               /usr/lib/libglib-2.0.so.0(g_main_context_dispatch+0x181
</I>&gt;<i>       ) [0xb7ec8731]
</I>&gt;<i>  84.
</I>&gt;<i>               /usr/lib/libglib-2.0.so .0 [0xb7ecb7a6]
</I>&gt;<i>  85.
</I>&gt;<i>               /usr/lib/libglib-2.0.so.0 (g_main_loop_run+0x1b7)
</I>&gt;<i>       [0xb7ecbb67]
</I>&gt;<i>  86.
</I>&gt;<i>               /usr/lib/libgtk-x11 -2.0.so.0(gtk_main+0xc1) [0xb6d0d281]
</I>&gt;<i>  87.
</I>&gt;<i>               [0xb5f9d045]
</I>&gt;<i>  88.
</I>&gt;<i>               [0xb5f9d008]
</I>&gt;<i>  89.
</I>&gt;<i>               [0xb748c958]
</I>&gt;<i>  90.
</I>&gt;<i>               [0xb748c7c3]
</I>&gt;<i>  91.
</I>&gt;<i>               mono [0x815c4f6]
</I>&gt;<i>  92.
</I>&gt;<i>               mono(mono_runtime_invoke+0x27) [0x80f892f]
</I>&gt;<i>  93.
</I>&gt;<i>               mono(mono_runtime_exec_main+0x142) [ 0x80fd289]
</I>&gt;<i>  94.
</I>&gt;<i>               mono(mono_runtime_run_main+0x276) [0x80fd52f ]
</I>&gt;<i>  95.
</I>&gt;<i>               mono(mono_jit_exec+0xbd) [0x80588cd]
</I>&gt;<i>  96.
</I>&gt;<i>               mono [0x80589aa]
</I>&gt;<i>  97.
</I>&gt;<i>               mono(mono_main+0x165b) [0x805a194]
</I>&gt;<i>  98.
</I>&gt;<i>               mono [0x8057ab6]
</I>&gt;<i>  99.
</I>&gt;<i>               /lib/tls/i686/cmov/libc. so.6(__libc_start_main+0xc8)
</I>&gt;<i>       [0xb7d3fea8]
</I>&gt;<i> 100.
</I>&gt;<i>               mono [0x8057a11]
</I>&gt;<i> 101.
</I>&gt;<i>        
</I>&gt;<i> 102.
</I>&gt;<i>       Debug info from gdb:
</I>&gt;<i> 103.
</I>&gt;<i>        
</I>&gt;<i> 104.
</I>&gt;<i>       Using host libthread_db library
</I>&gt;<i>       &quot;/lib/tls/i686/cmov/libthread_db.so.1&quot;.
</I>&gt;<i> 105.
</I>&gt;<i>       [Thread debugging using libthread_db enabled]
</I>&gt;<i> 106.
</I>&gt;<i>       [ New &lt;<A HREF="http://www.google.com/search?q=new+msdn.microsoft.com">http://www.google.com/search?q=new+msdn.microsoft.com</A>&gt;
</I>&gt;<i>       Thread -1210931520 (LWP 14212)]
</I>&gt;<i> 107.
</I>&gt;<i>       [New &lt;<A HREF="http://www.google.com/search?q=new+msdn.microsoft.com">http://www.google.com/search?q=new+msdn.microsoft.com</A>&gt;
</I>&gt;<i>       Thread -1219974224 (LWP 14217 )]
</I>&gt;<i> 108.
</I>&gt;<i>       [New &lt;<A HREF="http://www.google.com/search?q=new+msdn.microsoft.com">http://www.google.com/search?q=new+msdn.microsoft.com</A>&gt;
</I>&gt;<i>       Thread -1214268496 (LWP 14216)]
</I>&gt;<i> 109.
</I>&gt;<i>       0xb7f49410 in ?? ()
</I>&gt;<i> 110.
</I>&gt;<i>         3 Thread -1214268496 (LWP 14216)  0xb7f49410 in ?? ( )
</I>&gt;<i> 111.
</I>&gt;<i>         2 Thread -1219974224 (LWP 14217)  0xb7f49410 in ?? ()
</I>&gt;<i> 112.
</I>&gt;<i>         1 Thread -1210931520 ( LWP 14212)  0xb7f49410 in ?? ()
</I>&gt;<i> 113.
</I>&gt;<i>        
</I>&gt;<i> 114.
</I>&gt;<i>       Thread 3 (Thread -1214268496 (LWP 14216) ):
</I>&gt;<i> 115.
</I>&gt;<i>       #0  0xb7f49410 in ?? ()
</I>&gt;<i> 116.
</I>&gt;<i>       #1  0xb79fb458 in ?? ()
</I>&gt;<i> 117.
</I>&gt;<i>       #2  0x0821d3a8 in ?? ()
</I>&gt;<i> 118.
</I>&gt;<i>       #3  0x00000000 in ?? ()
</I>&gt;<i> 119.
</I>&gt;<i>        
</I>&gt;<i> 120.
</I>&gt;<i>       Thread 2 (Thread -1219974224 (LWP 14217)):
</I>&gt;<i> 121.
</I>&gt;<i>       #0  0xb7f49410 in ?? ()
</I>&gt;<i> 122.
</I>&gt;<i>       #1  0xb748a288 in ?? ()
</I>&gt;<i> 123.
</I>&gt;<i>       #2  0x0000000b in ?? ()
</I>&gt;<i> 124.
</I>&gt;<i>       #3  0x00000000 in ?? ()
</I>&gt;<i> 125.
</I>&gt;<i>        
</I>&gt;<i> 126.
</I>&gt;<i>       Thread 1 (Thread -1210931520 (LWP 14212)):
</I>&gt;<i> 127.
</I>&gt;<i>       #0  0xb7f49410 in ?? ()
</I>&gt;<i> 128.
</I>&gt;<i>       #1  0xbfe5898c in ?? ()
</I>&gt;<i> 129.
</I>&gt;<i>       #2  0x00000000 in ?? ()
</I>&gt;<i> 130.
</I>&gt;<i>       #0  0xb7f49410 in ?? ()
</I>&gt;<i> 131.
</I>&gt;<i>        
</I>&gt;<i> 132.
</I>&gt;<i>        
</I>&gt;<i> 133.
</I>&gt;<i>       =================================================================
</I>&gt;<i> 134.
</I>&gt;<i>       Got a SIGSEGV while executing native code. This usually indicates
</I>&gt;<i> 135.
</I>&gt;<i>       a fatal error in the mono runtime or one of the native libraries
</I>&gt;<i> 136.
</I>&gt;<i>       used by your application.
</I>&gt;<i> 137.
</I>&gt;<i>       =================================================================
</I>&gt;<i>
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Gtk-sharp-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">Gtk-sharp-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">http://lists.ximian.com/mailman/listinfo/gtk-sharp-list</A>
</I>&gt;<i>   
</I>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007940.html">[Gtk-sharp-list] segfault on void object
</A></li>
	<LI>Next message: <A HREF="007944.html">[Gtk-sharp-list] segfault on void object
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7942">[ date ]</a>
              <a href="thread.html#7942">[ thread ]</a>
              <a href="subject.html#7942">[ subject ]</a>
              <a href="author.html#7942">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
