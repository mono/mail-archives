<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Gtk# and gnomeprint
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mwh%40sysrq.dk">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="002512.html">
   <LINK REL="Next"  HREF="002500.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Gtk# and gnomeprint
   </H1>
    <B>Martin Willemoes Hansen
    </B> 
    <A HREF="mailto:mwh%40sysrq.dk"
       TITLE="[Gtk-sharp-list] Gtk# and gnomeprint">mwh@sysrq.dk
       </A><BR>
    <I>Fri, 26 Sep 2003 14:02:18 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="002512.html">[Gtk-sharp-list] Wonderful gtk#/gtk+ interop issue on win32
</A></li>
        <LI> Next message: <A HREF="002500.html">[Gtk-sharp-list] Gtk# and gnomeprint
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2499">[ date ]</a>
              <a href="thread.html#2499">[ thread ]</a>
              <a href="subject.html#2499">[ subject ]</a>
              <a href="author.html#2499">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--=-CJwbdOKjmbpnPGa5Ta/f
Content-Type: multipart/alternative; boundary=&quot;=-G/kLG4Ku/WX4GfMoeJKo&quot;


--=-G/kLG4Ku/WX4GfMoeJKo
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

Hi!

Im doing some wrapping work on GnomePrint and GnomePrintUi for the Gtk#
project. I have discovered some code which do not play that well with
the Gtk# parser and generator. After doing some modifications to your
library I got it to work somewhat okay. Can this be merged back into
GnomePrint?

In gnome-print-config.[ch] I changed function signature:
guchar * gnome_print_config_get (GnomePrintConfig *config, const guchar
*key)
to
const guchar * gnome_print_config_get (GnomePrintConfig *config, const
guchar *key) 

This change helps the generator to use string instead of byte as the
return value in C# and I guess it can make it clear that the returned
value should not be free'd by the user of the function.

In gnome-print-dialog.h and gnome-print-paper-selector.h I changed some
enums from the form:
enum Foobar { ... } to
typedef enum { ... } Foobar;

This change makes the generator eat them, else it just skips them. Also
it makes it clear that gnome_print_dialog_new takes a
GnomePrintDialogFlag as a parameter.

Hope this stuff makes any sense and is usefull to you guys.

Im not on the gnome-print list so please reply to me directly.

-- 
Martin Willemoes Hansen

--------------------------------------------------------
E-Mail	<A HREF="mailto:mwh@sysrq.dk">mwh@sysrq.dk</A>	Website	mwh.sysrq.dk
IRC     MWH, freenode.net
--------------------------------------------------------               


--=-G/kLG4Ku/WX4GfMoeJKo
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: 7bit

&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 TRANSITIONAL//EN&quot;&gt;
&lt;HTML&gt;
&lt;HEAD&gt;
  &lt;META HTTP-EQUIV=&quot;Content-Type&quot; CONTENT=&quot;text/html; CHARSET=UTF-8&quot;&gt;
  &lt;META NAME=&quot;GENERATOR&quot; CONTENT=&quot;GtkHTML/3.0.9&quot;&gt;
&lt;/HEAD&gt;
&lt;BODY&gt;
Hi!&lt;BR&gt;
&lt;BR&gt;
Im doing some wrapping work on GnomePrint and GnomePrintUi for the Gtk# project. I have discovered some code which do not play that well with the Gtk# parser and generator. After doing some modifications to your library I got it to work somewhat okay. Can this be merged back into GnomePrint?&lt;BR&gt;
&lt;BR&gt;
In gnome-print-config.[ch] I changed function signature:&lt;BR&gt;
guchar * gnome_print_config_get (GnomePrintConfig *config, const guchar *key)&lt;BR&gt;
to&lt;BR&gt;
const guchar * gnome_print_config_get (GnomePrintConfig *config, const guchar *key) &lt;BR&gt;
&lt;BR&gt;
This change helps the generator to use string instead of byte as the return value in C# and I guess it can make it clear that the returned value should not be free'd by the user of the function.&lt;BR&gt;
&lt;BR&gt;
In gnome-print-dialog.h and gnome-print-paper-selector.h I changed some enums from the form:&lt;BR&gt;
enum Foobar { ... } to&lt;BR&gt;
typedef enum { ... } Foobar;&lt;BR&gt;
&lt;BR&gt;
This change makes the generator eat them, else it just skips them. Also it makes it clear that gnome_print_dialog_new takes a GnomePrintDialogFlag as a parameter.&lt;BR&gt;
&lt;BR&gt;
Hope this stuff makes any sense and is usefull to you guys.&lt;BR&gt;
&lt;BR&gt;
Im not on the gnome-print list so please reply to me directly.&lt;BR&gt;
&lt;BR&gt;
&lt;TABLE CELLSPACING=&quot;0&quot; CELLPADDING=&quot;0&quot; WIDTH=&quot;100%&quot;&gt;
&lt;TR&gt;
&lt;TD&gt;
&lt;PRE&gt;-- 
Martin Willemoes Hansen

--------------------------------------------------------
E-Mail	<A HREF="mailto:mwh@sysrq.dk">mwh@sysrq.dk</A>	Website	mwh.sysrq.dk
IRC     MWH, freenode.net
--------------------------------------------------------               
&lt;/PRE&gt;
&lt;/TD&gt;
&lt;/TR&gt;
&lt;/TABLE&gt;

&lt;/BODY&gt;
&lt;/HTML&gt;

--=-G/kLG4Ku/WX4GfMoeJKo--

--=-CJwbdOKjmbpnPGa5Ta/f
Content-Disposition: attachment; filename=gnome-print-config.c.diff
Content-Type: text/x-patch; name=gnome-print-config.c.diff; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

--- gnome-print-config.c.old	2003-01-27 00:47:41.000000000 +0100
+++ gnome-print-config.c	2003-09-26 12:08:12.000000000 +0200
@@ -155,7 +155,7 @@
 	return config;
 }
 
-guchar *
+const guchar *
 gnome_print_config_get (GnomePrintConfig *config, const guchar *key)
 {
 	guchar *val;

--=-CJwbdOKjmbpnPGa5Ta/f
Content-Disposition: attachment; filename=gnome-print-config.h.diff
Content-Type: text/x-patch; name=gnome-print-config.h.diff; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

--- gnome-print-config.h.old	2003-01-27 00:47:41.000000000 +0100
+++ gnome-print-config.h	2003-09-26 12:08:42.000000000 +0200
@@ -154,7 +154,7 @@
  * gnome_print_config_get just returns NULL, if given key does not exist.
  *
  */
-guchar  *gnome_print_config_get         (GnomePrintConfig *config, const guchar *key);
+const guchar  *gnome_print_config_get         (GnomePrintConfig *config, const guchar *key);
 gboolean gnome_print_config_set         (GnomePrintConfig *config, const guchar *key, const guchar *value);
 
 gboolean gnome_print_config_get_boolean (GnomePrintConfig *config, const guchar *key, gboolean *val);

--=-CJwbdOKjmbpnPGa5Ta/f
Content-Disposition: attachment; filename=gnome-print-dialog.h.diff
Content-Type: text/x-patch; name=gnome-print-dialog.h.diff; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

--- gnome-print-dialog.h.old	2003-09-25 13:05:07.000000000 +0200
+++ gnome-print-dialog.h	2003-09-26 11:45:48.000000000 +0200
@@ -60,35 +60,35 @@
 /*
  * Flags for creation of range widget
  */
-enum GnomePrintDialogRangeFlags {
+typedef enum {
 	GNOME_PRINT_RANGE_CURRENT = (1 &lt;&lt; 0),
 	GNOME_PRINT_RANGE_ALL = (1 &lt;&lt; 1),
 	GNOME_PRINT_RANGE_RANGE = (1 &lt;&lt; 2),
 	GNOME_PRINT_RANGE_SELECTION = (1 &lt;&lt; 3),
 	GNOME_PRINT_RANGE_SELECTION_UNSENSITIVE  = (1 &lt;&lt; 4),
-};
+} GnomePrintDialogRangeFlags;
 
 /*
  * Flags to specify, whether we want range and copies widgets
  */
-enum GnomePrintDialogFlags {
+typedef enum {
+	GNOME_PRINT_DIALOG_NONE = 0,
 	GNOME_PRINT_DIALOG_RANGE = (1 &lt;&lt; 0),
 	GNOME_PRINT_DIALOG_COPIES = (1 &lt;&lt; 1)
-};
+} GnomePrintDialogFlags;
 
 /*
  * The button numbers corresponding to the standard buttons
  * Used with the GnomeDialog &quot;clicked&quot; signal.
  */
-enum GnomePrintButtons {
+typedef enum {
 	GNOME_PRINT_DIALOG_RESPONSE_PRINT = 1,
 	GNOME_PRINT_DIALOG_RESPONSE_PREVIEW,
-	GNOME_PRINT_DIALOG_RESPONSE_CANCEL = GTK_RESPONSE_CANCEL,
-};
+} GnomePrintDialogResponseType;
 
 GType gnome_print_dialog_get_type (void);
 
-GtkWidget * gnome_print_dialog_new (GnomePrintJob *gpj, const guchar *title, gint flags);
+GtkWidget * gnome_print_dialog_new (GnomePrintJob *gpj, const guchar *title, GnomePrintDialogFlags flags);
 
 /* For language bindings */
 void gnome_print_dialog_construct (GnomePrintDialog *gpd, const guchar *title, gint flags);

--=-CJwbdOKjmbpnPGa5Ta/f
Content-Disposition: attachment; filename=gnome-print-paper-selector.h.diff
Content-Type: text/x-patch; name=gnome-print-paper-selector.h.diff; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

--- gnome-print-paper-selector.h.old	2003-01-11 17:46:47.000000000 +0100
+++ gnome-print-paper-selector.h	2003-09-25 13:10:12.000000000 +0200
@@ -44,10 +44,10 @@
 #include &lt;glib-object.h&gt;
 #include &lt;libgnomeprint/gnome-print-config.h&gt;
 
-enum GnomePaperSelectorFlags {
+typedef enum {
 	GNOME_PAPER_SELECTOR_MARGINS = (1 &lt;&lt; 0),
 	GNOME_PAPER_SELECTOR_FEED_ORIENTATION = (1 &lt;&lt; 1)
-};
+} GnomePaperSelectorFlags;
 
 GType       gnome_paper_selector_get_type (void);
 GtkWidget * gnome_paper_selector_new (GnomePrintConfig *config);

--=-CJwbdOKjmbpnPGa5Ta/f--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="002512.html">[Gtk-sharp-list] Wonderful gtk#/gtk+ interop issue on win32
</A></li>
	<LI> Next message: <A HREF="002500.html">[Gtk-sharp-list] Gtk# and gnomeprint
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2499">[ date ]</a>
              <a href="thread.html#2499">[ thread ]</a>
              <a href="subject.html#2499">[ subject ]</a>
              <a href="author.html#2499">[ author ]</a>
         </LI>
       </UL>
</body></html>
