<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] gtkhtml namespace problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mwh%40sysrq.dk">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="002380.html">
   <LINK REL="Next"  HREF="002382.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] gtkhtml namespace problem
   </H1>
    <B>Martin Willemoes Hansen
    </B> 
    <A HREF="mailto:mwh%40sysrq.dk"
       TITLE="[Gtk-sharp-list] gtkhtml namespace problem">mwh@sysrq.dk
       </A><BR>
    <I>Mon, 01 Sep 2003 22:35:38 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="002380.html">[Gtk-sharp-list] Addition of gtkhtml dir and Makefile.in
</A></li>
        <LI> Next message: <A HREF="002382.html">[Gtk-sharp-list] patch to fix bad nowarn option
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2381">[ date ]</a>
              <a href="thread.html#2381">[ thread ]</a>
              <a href="subject.html#2381">[ subject ]</a>
              <a href="author.html#2381">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--=-F8KbqDQbf3x7ljWnY7N+
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

On Sun, 2003-08-31 at 10:03, Martin Willemoes Hansen wrote:
&gt;<i> Finnaly I took myself together and made the modifications, here is a new
</I>&gt;<i> patch.
</I>
Vups found a bug where the $assembly variable did not get properly
initialized, here is a new patch incorporating the fix.

Okay to commit?



-- 
Martin Willemoes Hansen

--------------------------------------------------------
E-Mail	<A HREF="mailto:mwh@sysrq.dk">mwh@sysrq.dk</A>	Website	mwh.sysrq.dk
IRC     MWH, freenode.net
--------------------------------------------------------               


--=-F8KbqDQbf3x7ljWnY7N+
Content-Disposition: attachment; filename=AdditionOfAssemblyTag-2.diff
Content-Type: text/x-patch; name=AdditionOfAssemblyTag-2.diff; charset=iso-8859-1
Content-Transfer-Encoding: 7bit

Index: parser/gapi.pl
===================================================================
RCS file: /cvs/public/gtk-sharp/parser/gapi.pl,v
retrieving revision 1.1
diff -u -r1.1 gapi.pl
--- parser/gapi.pl	20 Aug 2002 20:35:42 -0000	1.1
+++ parser/gapi.pl	1 Sep 2003 20:46:36 -0000
@@ -28,10 +28,13 @@
 }
 
 foreach $entry (@srcs) {
-	($dir, $ns, $lib) = @$entry;
+	($dir, $ns, $lib, $assembly) = @$entry;
+	if (!$assembly) {
+		$assembly = &quot;&quot;;
+	}
 	print &quot;hi $ns\n&quot;;
 	$file = $files{$ns};
-	system (&quot;gapi_pp.pl $dir | gapi2xml.pl $ns $file $lib&quot;);
+	system (&quot;gapi_pp.pl $dir | gapi2xml.pl $ns $file $lib $assembly&quot;);
 }
 
 foreach $ns (keys (%files)) {
Index: parser/gapi2xml.pl
===================================================================
RCS file: /cvs/public/gtk-sharp/parser/gapi2xml.pl,v
retrieving revision 1.40
diff -u -r1.40 gapi2xml.pl
--- parser/gapi2xml.pl	15 Jul 2003 05:52:08 -0000	1.40
+++ parser/gapi2xml.pl	1 Sep 2003 20:46:36 -0000
@@ -3,8 +3,10 @@
 # gapi2xml.pl : Generates an XML representation of GObject based APIs.
 #
 # Author: Mike Kestner &lt;<A HREF="mailto:mkestner@speakeasy.net">mkestner@speakeasy.net</A>&gt;
+# Author: Martin Willemoes Hansen &lt;<A HREF="mailto:mwh@sysrq.dk">mwh@sysrq.dk</A>&gt;
 #
 # &lt;c&gt; 2001-2003 Mike Kestner
+# &lt;c&gt; 2003 Martin Willemoes Hansen
 ##############################################################
 
 $debug=1;
@@ -12,12 +14,13 @@
 use XML::LibXML;
 use GAPI::Metadata;
 
-if (!$ARGV[2]) {
-	die &quot;Usage: gapi_pp.pl &lt;srcdir&gt; | gapi2xml.pl &lt;namespace&gt; &lt;outfile&gt; &lt;libname&gt;\n&quot;;
+if (!$ARGV[2] &amp;&amp; !$ARGV[3]) {
+	die &quot;Usage: gapi_pp.pl &lt;srcdir&gt; | gapi2xml.pl &lt;namespace&gt; &lt;outfile&gt; &lt;libname&gt; [assembly]\n&quot;;
 }
 
 $ns = $ARGV[0];
 $libname = $ARGV[2];
+$assembly = $ARGV[3];
 
 ##############################################################
 # Check if the filename provided exists.  We parse existing files into
@@ -40,6 +43,9 @@
 $ns_elem = $doc-&gt;createElement('namespace');
 $ns_elem-&gt;setAttribute('name', $ns);
 $ns_elem-&gt;setAttribute('library', $libname);
+if ($assembly ne &quot;&quot;) {
+	$ns_elem-&gt;setAttribute('assembly', $assembly);
+}
 $root-&gt;appendChild($ns_elem);
 
 ##############################################################
Index: sources/gtk-sharp.sources
===================================================================
RCS file: /cvs/public/gtk-sharp/sources/gtk-sharp.sources,v
retrieving revision 1.20
diff -u -r1.20 gtk-sharp.sources
--- sources/gtk-sharp.sources	26 Aug 2003 21:35:28 -0000	1.20
+++ sources/gtk-sharp.sources	1 Sep 2003 20:46:36 -0000
@@ -9,7 +9,7 @@
 libgnomeprint-2.2.1.3/libgnomeprint Gnome gnomeprint-2-2
 libgnomeprintui-2.2.1.3/libgnomeprintui Gnome gnomeprint-2-2
 libgnomeprintui-2.2.1.3/libgnomeprintui/gpaui Gnome gnomeprint-2.2
-gtkhtml-3.0.8/src Gtk gtkhtml-3.0
+gtkhtml-3.0.8/src Gtk gtkhtml-3.0 gtkhtml
 libglade-2.0.0/glade Glade libglade-2.0-0.dll
 libart_lgpl-2.3.10 Art art_lgpl
 libgda-0.90.0/libgda Gda gda-2

--=-F8KbqDQbf3x7ljWnY7N+--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="002380.html">[Gtk-sharp-list] Addition of gtkhtml dir and Makefile.in
</A></li>
	<LI> Next message: <A HREF="002382.html">[Gtk-sharp-list] patch to fix bad nowarn option
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2381">[ date ]</a>
              <a href="thread.html#2381">[ thread ]</a>
              <a href="subject.html#2381">[ subject ]</a>
              <a href="author.html#2381">[ author ]</a>
         </LI>
       </UL>
</body></html>
