<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Stuck in gtk-demo port from c to c#
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:yves%40magnific.ch">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="002514.html">
   <LINK REL="Next"  HREF="002515.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Stuck in gtk-demo port from c to c#
   </H1>
    <B>Yves Kurz
    </B> 
    <A HREF="mailto:yves%40magnific.ch"
       TITLE="[Gtk-sharp-list] Stuck in gtk-demo port from c to c#">yves@magnific.ch
       </A><BR>
    <I>Tue, 30 Sep 2003 14:08:58 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="002514.html">[Gtk-sharp-list] Stuck in gtk-demo port from c to c#
</A></li>
        <LI> Next message: <A HREF="002515.html">[Gtk-sharp-list] Menu.Popup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2517">[ date ]</a>
              <a href="thread.html#2517">[ thread ]</a>
              <a href="subject.html#2517">[ subject ]</a>
              <a href="author.html#2517">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 2003-09-29 at 11:20, Daniel Kornhauser wrote:
&gt;<i> Hi guys:
</I>&gt;<i> 
</I>
Hi Daniel and all... 

&gt;<i> 
</I>&gt;<i> I'm stuck in my  gtk-demo port from c to c#, I'm sending as attachment what I 
</I>&gt;<i> have done. I did not wanted to bother you with my small problems, but now  they have 
</I>&gt;<i> accumulated to become a big problem.
</I>
I started too to port gtk-demo to c#. My intention was to learn
something about gtk#. But like you I'm somewhere in the middle of the
porting effort.

&gt;<i> I have waisted lots of time trying to figure some of these things, sorry if they are
</I>&gt;<i> obvious but I'm newbie and I'm stuck. I haven't done any advances in a week thus 
</I>&gt;<i> it's time to confess my sins :-). Keep in mind I'm a newbie while you read my code ...
</I>&gt;<i> 
</I>&gt;<i> I'll first present my coding conventions, and then go program by program talking
</I>&gt;<i> about where I got stuck.
</I>&gt;<i> 
</I>&gt;<i> One of the first remarks is that every program is independent, because I decided
</I>&gt;<i> to code the main of the gtk-demo program until the end, since it looks the hardest
</I>&gt;<i> and I didn't want to be stuck from the beginning. Thus they all make their
</I>&gt;<i> window from scratch. For naming them I used the save convention that Duncan used
</I>&gt;<i> with test: that is each program is called, the name of the c program, prefixed 
</I>&gt;<i> with demo.
</I>
Started like you, every program is independent (same reason).
&gt;<i> 
</I>&gt;<i> e.g. buttonbox.c --&gt; DemoButtonBoxcs
</I>&gt;<i> 
</I>&gt;<i> I used long names for everything, usually I make an instance of a widget the 
</I>&gt;<i> same name except I start it by a small caps.
</I>&gt;<i> 
</I>&gt;<i> I took some liberties to write scrolledWindow instead of sw, I just think that 
</I>&gt;<i> in examples you should be as explicit as possible ...
</I>&gt;<i> 
</I>&gt;<i> Keep in mind, I still have to clean up, port the comments in ALL the sources.
</I>&gt;<i> I just copied and pasted the c comments.
</I>&gt;<i> 
</I>&gt;<i> If I'm infringing in any way and I wasn't explicit that I wasn't just porting 
</I>&gt;<i> please let me know. I hope that just stating it in the comments is enough to 
</I>&gt;<i> recognize the real authors.
</I>&gt;<i> 
</I>&gt;<i> I avoided porting the error handling, because I'm lazy ...
</I>&gt;<i> 
</I>&gt;<i> When I'm stuck in a program I just put a stuck comment //STUCK
</I>&gt;<i> 
</I>Ok, i will write what I did till now.

&gt;<i> Appwindow.c: Stuck at the beginning 5%
</I>&gt;<i> =====================================
</I>&gt;<i> Didn't find any ItemFactory examples :-(
</I>&gt;<i> 
</I>0% not started.

&gt;<i> DemoButtonBox.cs: Finished 100%
</I>&gt;<i> ===============================
</I>&gt;<i> Allmost exactly the same example.
</I>&gt;<i> Couldn't find a equivalent for gtk_main() thus I used Application.Init()
</I>&gt;<i> I used the prefix Gtk, in window because of ambiguous reference (Gtk.Window or Gdk.Window) 
</I>&gt;<i> I used the prefix Gtk, with the casting of buttons because of bug in mcs compiler
</I>&gt;<i> 		Gtk.ButtonBox bbox = null;
</I>&gt;<i> 		if (horizontal == true){
</I>&gt;<i> 			bbox =  new Gtk.HButtonBox();
</I>&gt;<i> 		}
</I>&gt;<i> 		else {
</I>&gt;<i> 			bbox =  new Gtk.VButtonBox(); 
</I>&gt;<i> 		}
</I>100%

&gt;<i> 
</I>&gt;<i> DemoChangeDisplay.c: Skipped i*(100%)
</I>&gt;<i> =====================================
</I>&gt;<i> My card only supports one display :-(
</I>0% had no interest in it.

&gt;<i> DemoColorSelection.cs: Almost finished 95%
</I>&gt;<i> ==========================================
</I>&gt;<i> I could not write ExposeEventCallback.
</I>&gt;<i> How the hell can I translate gdk_draw_rectangle !!!
</I>&gt;<i> I initialized color to Gtk.Color.Zero couldn't find NULL equivalent in c-sharp.
</I>99% haven't used ExposeEventHandler, but it works anyway. (see comments
in code)

&gt;<i> DemoDialog.cs: Allmost finished 99%
</I>&gt;<i> ===================================
</I>&gt;<i> I Couldn't find a good equivalent to gtk_dialog_new_with_butttons, thus I
</I>&gt;<i> used MessageDialog. 
</I>&gt;<i> Check how to handle response type. Can we make the button to have the binding to
</I>&gt;<i> the cancel signal automagicly like in  gtk_dialog_new_with_butttons or should we
</I>&gt;<i> just use the if ?
</I>&gt;<i> Remark -&gt; This is me just thinking aloud :  
</I>&gt;<i> Wonder what is the best programming style when making several widgets like a label ?
</I>&gt;<i> Declare a static label, for the class and use it for all the labels, or declare an 
</I>&gt;<i> automatic label in each scope where it's needed and use it.
</I>&gt;<i> I decided to declare a label in each scope since I consider it cleaner programming
</I>&gt;<i> and I don't think it imposes a great penalty in memory ...
</I>&gt;<i> Then again I don't have the slightest idea of how I compiler runs, but I
</I>&gt;<i> have a Master in Computer Science... figure that out :-p
</I>99% don't know if I did it like I should but it works.

&gt;<i> 
</I>&gt;<i> DemoDrawingArea.cs: just interface done, no callbacks implemented 50%
</I>&gt;<i> =======================================================================
</I>&gt;<i> I'm lost handling colors, events, drawingareas, you name it, I don't know it
</I>&gt;<i> :-(
</I>&gt;<i> 
</I>&gt;<i> One day, when I grow up, I'll understand pointers ... 
</I>&gt;<i>                                           (Shit!!! I allready have gray hairs)
</I>&gt;<i> 
</I>0% 

&gt;<i> 
</I>&gt;<i> Images.cs just interface done, no callbacks implemented 70%
</I>&gt;<i> ============================================================
</I>&gt;<i> I got timed out in the use of the timeout &gt;:-G
</I>&gt;<i> 
</I>60% progressive image loading is not finished and demo crashes as when
you click twice on the button.

&gt;<i> 
</I>&gt;<i> ItemFactory.cs: Nothing done, stuck at the beginning. -3.14%
</I>&gt;<i> ============================================================
</I>&gt;<i> OUCH, it really hurts when you can't get past the third line of code
</I>&gt;<i> 
</I>0% 

&gt;<i> DemoMenus.cs: Finished 100%
</I>&gt;<i> ==========================
</I>&gt;<i> Copied Menus from Duncan and just did some modifications in order
</I>&gt;<i> to match exactly to the example.
</I>99% wrote it without copying so I'm not sure if it's done right

&gt;<i> DemoPanes.cs:  just interface done, no callbacks implemented 80%
</I>&gt;<i> =================================================================
</I>&gt;<i> Guess what ?
</I>&gt;<i> I Got stuck in the callbacks, :-)
</I>&gt;<i> My question is plain and simple :
</I>&gt;<i> If I have two widgets that call the same callback, how can I find out 
</I>&gt;<i> the name of the widget that invoked the callback ???
</I>5% started and stopped (went to holidays:)

&gt;<i> PixBufs.cs: Skipped  (Planck's constant)
</I>&gt;<i> =======================================
</I>&gt;<i> Didn't even have to try to know I would get stuck right at the begining.
</I>&gt;<i> Pixbuf isn't a trivial widget.
</I>98% works like it should but there is some code in the original demo
which doesn't work by me in gtk# (see comment in code line 116)
&gt;<i> 
</I>&gt;<i> SizeGroups.cs : Finished 100%
</I>&gt;<i> =============================
</I>&gt;<i> I Love to use cp. 
</I>&gt;<i> Allready implemented by Duncan :-)
</I>
0% 

&gt;<i> DemoStockrowser.cs:  just starting doing the interface 1%
</I>&gt;<i> ===================
</I>&gt;<i> I'm sure somewhere somebody know how to say :  
</I>&gt;<i>   store = gtk_list_store_new (2, STOCK_ITEM_INFO_TYPE, G_TYPE_STRING);
</I>&gt;<i> in c#
</I>&gt;<i> I simply didn't find in monodoc that the StockItem Structure had an
</I>&gt;<i> Info member :-(
</I>&gt;<i> Stuck doing ListStore how de hell do they work ?!?!?!
</I>0%

&gt;<i> TextWidget.cs : just starting doing the interface 5%
</I>&gt;<i> ====================================================
</I>&gt;<i> stuck implementing create_tags :
</I>&gt;<i> 
</I>&gt;<i>   gtk_text_buffer_create_tag (buffer, &quot;heading&quot;,
</I>&gt;<i> 			      &quot;weight&quot;, PANGO_WEIGHT_BOLD,
</I>&gt;<i> 			      &quot;size&quot;, 15 * PANGO_SCALE,
</I>&gt;<i> 			      NULL);
</I>&gt;<i> TextBuffer.CreateTag should exist but it doesn't :-(
</I>0%

&gt;<i> DemoEditableCells Stuck in the callbacks 70%
</I>&gt;<i> ============================================
</I>&gt;<i> I definitely don't understand how ListStore's work, I should look
</I>&gt;<i> at an example. Wait a minute I'm actually TRYING to code the example !
</I>&gt;<i> Bummer
</I>&gt;<i> :-(
</I>0%

&gt;<i> DemoListStore Skipped
</I>&gt;<i> =====================
</I>&gt;<i> According to the previous corollary I just skipped this example.
</I>0%

&gt;<i> 
</I>&gt;<i> DemoTreeStore, stuck in the begining 20%
</I>&gt;<i> ========================================
</I>&gt;<i> Lesson learned, I'm not capable of doing a linked list with struct in c#
</I>&gt;<i> 
</I>&gt;<i> If somebody ever knows how to implement a linked list that looks like this
</I>&gt;<i> 
</I>&gt;<i> struct ListNode
</I>&gt;<i> {
</I>&gt;<i>         string        component;
</I>&gt;<i>         int             indentation;
</I>&gt;<i>         ListNode     Link;
</I>&gt;<i> };
</I>&gt;<i> 
</I>&gt;<i> and can avoid a cycle error, please tell me !
</I>&gt;<i> Anyway I did it with a class and it worked fine ...
</I>&gt;<i> But as always I got stuck, couldn't figure how to use TreeStore in a 
</I>&gt;<i> Callback.
</I>0%


&gt;<i> DemoMain.cs 5%
</I>&gt;<i> ==============
</I>&gt;<i> Should I use reflection to get the properties out of the examples, or should
</I>&gt;<i> I do it by hand like in this examples ?
</I>
0%

That's it.. here is my code: <A HREF="http://www.magnific.ch/gtkdemo.tar.gz">http://www.magnific.ch/gtkdemo.tar.gz</A> (at
least as long my internet connections is alive).. 

Hope it will help you bit


yves


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="002514.html">[Gtk-sharp-list] Stuck in gtk-demo port from c to c#
</A></li>
	<LI> Next message: <A HREF="002515.html">[Gtk-sharp-list] Menu.Popup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2517">[ date ]</a>
              <a href="thread.html#2517">[ thread ]</a>
              <a href="subject.html#2517">[ subject ]</a>
              <a href="author.html#2517">[ author ]</a>
         </LI>
       </UL>
</body></html>
