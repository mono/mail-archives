<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Pixbuf API observations.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mkestner%40speakeasy.net">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000982.html">
   <LINK REL="Next"  HREF="001002.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Pixbuf API observations.
   </H1>
    <B>Mike Kestner
    </B> 
    <A HREF="mailto:mkestner%40speakeasy.net"
       TITLE="[Gtk-sharp-list] Pixbuf API observations.">mkestner@speakeasy.net
       </A><BR>
    <I>18 Feb 2003 20:42:26 -0600</I>
    <P><UL>
        <LI> Previous message: <A HREF="000982.html">[Gtk-sharp-list] Pixbuf API observations.
</A></li>
        <LI> Next message: <A HREF="001002.html">[Gtk-sharp-list] Pixbuf API observations.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#997">[ date ]</a>
              <a href="thread.html#997">[ thread ]</a>
              <a href="subject.html#997">[ subject ]</a>
              <a href="author.html#997">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 2003-02-17 at 19:41, Miguel de Icaza wrote:

&gt;<i>     I can fill bugs if people think it is appropriate once I get a
</I>&gt;<i> go/no-go on the following changes:
</I>&gt;<i> 
</I>&gt;<i> * Problems
</I>&gt;<i> 
</I>&gt;<i> 	* Constructor based on: gdk_pixbuf_new_from_data
</I>&gt;<i> 	  	The first argument should be a &quot;byte *data&quot;, but instead
</I>&gt;<i> 	 	the generator picks `byte data'.
</I>&gt;<i> 
</I>&gt;<i> 	* Constructor based on gdk_pixbuf_new_from_inline
</I>&gt;<i> 		The first argument should be a &quot;byte *data&quot;, but instead
</I>&gt;<i> 	 	the geneator picks &quot;byte data&quot;.
</I>&gt;<i> 
</I>&gt;<i> 	* Pixels property return value.
</I>&gt;<i> 		The return value for this is `byte' instead of `byte *'
</I>
More examples of the infamous &quot;pointer to simple type&quot; bug.  I will get
around to fixing that some day.  Until then, feel free to overload the
methods in .custom files, like the dozens of other such cases.  Putting
a note on the bug would be good too so we can make sure its fix works
everywhere and can remove the hand customizations.

&gt;<i> 	* GdkRGB seems to be missing from the generated bindings.
</I>
Yep, since there's no Gdk.RGB type, there's nothing to assign the
methods to.  The parser is typedef driven, and we don't currently
include any methods not directly attributable to a type.  GdkRGB looks
like a candidate for a non-instantiable class with static methods.  I
suppose a bug report would be good to see that the parser handles this
case eventually.

&gt;<i> * Handling failure in constructors
</I>&gt;<i> 
</I>&gt;<i> 	* A few C constructors return null, should we probe for this,
</I>&gt;<i> 	  and throw a no-memory exception in those cases? 
</I>
Well, technically any ctor could return NULL, so we should probably be
guarding all PInvoked ctors with a similar check.  The only question is
what exception to throw. Maybe a GLibSharp.ObjectConstructionException
or something like that. 10 minute hack to generator/Ctor.cs.

&gt;<i> * API Improvements.
</I>&gt;<i> 
</I>&gt;<i> 	* GetFromImage and GetFromDrawable both allow the first argument
</I>&gt;<i> 	  to be NULL (ie, they are really factories for Pixbufs, but
</I>&gt;<i> 	  we are exposing them as instance methods).
</I>&gt;<i> 
</I>&gt;<i> 	  If nobody minds, I can add the .custom changes to have Factory
</I>&gt;<i> 	  versions of them.  The only problem is that the API would be
</I>&gt;<i> 	  the same between instance and static versions of the method. 
</I>&gt;<i> 	  So maybe they will need new names.
</I>&gt;<i> 
</I>&gt;<i> 	  I can do this if Mike does not mind.
</I>
Not at all. Please do.  :)

&gt;<i> 
</I>&gt;<i> 	* Pixbuf.Copy should probably be Pixbuf.Clone, and we could have
</I>&gt;<i> 	  Pixbuf implement the IClonable interface.
</I>
I'd leave Copy alone and have Clone call it.

&gt;<i> 	* Overloads for methods taking color argumnets.
</I>&gt;<i> 
</I>&gt;<i> 	  Currently colors are specified with uint32 colors in a few
</I>&gt;<i> 	  places.  We could make the API more C#-ish, if we used the
</I>&gt;<i> 	  System.Drawing Colors as arguments.  We could have overloads
</I>&gt;<i> 	  for this.
</I>
Another good customization.

&gt;<i> * Wish items:
</I>&gt;<i> 
</I>&gt;<i> 	I can do this if Mike does not mind:
</I>&gt;<i> 
</I>&gt;<i> 	Constructor based on gdk_pixbuf_new_subpixbuf 
</I>&gt;<i> 		Currently the API requires a Pixbuf to be
</I>&gt;<i> 		created first, and then this function can be invoked.
</I>&gt;<i> 
</I>&gt;<i> 		It is not entirely obvious, I would like to have
</I>&gt;<i> 		a Subpixbuf method that would achieve the same.
</I>
Not exactly sure what you're getting at here.  A static Subpixbuf
method?

Feel free to open bugs, send patches, etc for any/all of the above.

Thanks for the nice analysis of Gdk.Pixbuf.  :)

-- 
Mike Kestner &lt;<A HREF="mailto:mkestner@speakeasy.net">mkestner@speakeasy.net</A>&gt;


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000982.html">[Gtk-sharp-list] Pixbuf API observations.
</A></li>
	<LI> Next message: <A HREF="001002.html">[Gtk-sharp-list] Pixbuf API observations.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#997">[ date ]</a>
              <a href="thread.html#997">[ thread ]</a>
              <a href="subject.html#997">[ subject ]</a>
              <a href="author.html#997">[ author ]</a>
         </LI>
       </UL>
</body></html>
