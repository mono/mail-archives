<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Anomaly/bug with Cairo.Context Transformation	Matrix?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Anomaly/bug%20with%20Cairo.Context%20Transformation%0A%09Matrix%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010954.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Anomaly/bug with Cairo.Context Transformation	Matrix?</H1>
    <B>chubbs</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Anomaly/bug%20with%20Cairo.Context%20Transformation%0A%09Matrix%3F&In-Reply-To="
       TITLE="[Gtk-sharp-list] Anomaly/bug with Cairo.Context Transformation	Matrix?">sol.chubb at gmail.com
       </A><BR>
    <I>Sat Dec 31 15:16:11 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="010954.html">[Gtk-sharp-list] Dynamic Label Wrapping - How?
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10955">[ date ]</a>
              <a href="thread.html#10955">[ thread ]</a>
              <a href="subject.html#10955">[ subject ]</a>
              <a href="author.html#10955">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've noticed that it is not possible to set the individual elements of 
the Current Transformation Matrix (CTM) via the Context.Matrix property, 
even though the class reference suggests that this should be OK. For 
example,

public void SetX0( Cairo.Context cr, double x0){
     cr.Matrix.X0 = x0;    // this doesn't work

     Cairo.Matrix m = cr.Matrix; // but this does
     m.X0 = x0;
     cr.Matrix = m;
}

Since Cairo.Matrix is a class, cr.Matrix should be a reference to the 
CTM, so the first version might be expected to work.  However, looking 
at the source code 
(<A HREF="https://github.com/mono/gtk-sharp/blob/master/cairo/Context.cs">https://github.com/mono/gtk-sharp/blob/master/cairo/Context.cs</A>) the get 
accessor for cr.Matrix actually returns a cloned copy of the CTM, so any 
changes to the elements will be on this copy, not on the actual CTM.  
(Digging a bit more, the same approach is taken in the System.Drawing 
namespace, with the Graphics class and the equivalent CTM property).  
Using the second approach is no big problem (and can actually have its 
uses, when keeping partial transforms around) but can anyone with more 
knowledge provide any enlightenment as to why it's done this way, rather 
than follow the class API correctly?

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010954.html">[Gtk-sharp-list] Dynamic Label Wrapping - How?
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10955">[ date ]</a>
              <a href="thread.html#10955">[ thread ]</a>
              <a href="subject.html#10955">[ subject ]</a>
              <a href="author.html#10955">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
