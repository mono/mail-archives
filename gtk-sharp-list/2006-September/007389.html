<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Inexplicable segfaults
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Inexplicable%20segfaults&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007388.html">
   <LINK REL="Next"  HREF="007390.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Inexplicable segfaults</H1>
    <B>Walter Leibbrandt</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Inexplicable%20segfaults&In-Reply-To="
       TITLE="[Gtk-sharp-list] Inexplicable segfaults">walterl at indicium.za.net
       </A><BR>
    <I>Wed Sep  6 22:02:10 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="007388.html">[Gtk-sharp-list] Crashes at random spots
</A></li>
        <LI>Next message: <A HREF="007390.html">&#179;&#204;&#183;s&#170;F&#172;v&#186;&#235;&#191;&#239;&#172;&#252;&#164;k &#197;&#253;&#177;z&#165;&#216;&#164;&#163;&#194;&#224;&#183;&#250;&#170;&#186;&#170;&#190;&#166;W&#164;k&#192;u &#183;i&#169;R&#186;t&#165;X &#181;L&#189;a&#183;Q&#185;&#179;830884568
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7389">[ date ]</a>
              <a href="thread.html#7389">[ thread ]</a>
              <a href="subject.html#7389">[ subject ]</a>
              <a href="author.html#7389">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I'm currently busy with a program that mixes Glade and custom managed 
Gtk widgets. All the Glade files are loaded with a Gtk.Fixed as the root 
and Put() on a custom-created Gtk.Window and shown/hidden according to 
button press events. The weird thing is that I get a segfault every few 
&quot;layout changes&quot; (no particular/reproducible sequence of changes):

&lt;output&gt;
=================================================================
Got a SIGSEGV while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries
used by your application.
=================================================================

Stacktrace:

   at (wrapper managed-to-native) Gtk.Application.gtk_main () &lt;0x00004&gt;
   at (wrapper managed-to-native) Gtk.Application.gtk_main () &lt;0xffffffff&gt;
   at Gtk.Application.Run () &lt;0x00007&gt;
   at MainClass.Main (string[]) [0x0003a] in /path/to/program/src/Main.cs:39
   at (wrapper runtime-invoke) 
System.Object.runtime_invoke_void_string[] (object,intptr,intptr,intptr) 
&lt;0xffffffff&gt;

Native stacktrace:

         mono(mono_handle_native_sigsegv+0xf4) [0x815f9f4]
         mono [0x8149bb3]
         [0xffffe440]
&lt;/output&gt;

This program is not multi threaded, although all used events are 
connected to custom classes which manages the events through my own 
event queue and handler(s). Here's my Main() method (ignore the 
Initializer and UIMan lines; it sets up/loads the UI, etc...):

&lt;code&gt;
public static void Main(string[] args)
{	
	Gtk.Application.Init();
		
	Initializer.Initialize();
		
	IUIManager UIMan = (IUIManager) ObjectManager.Instance[typeof(IUIManager)];
		
	UIMan.Test();
		
	Gtk.Application.Run();	//Line 39
	Gtk.Application.Quit();
}
&lt;/code&gt;

I would assume that something like this would be a possible (or more 
likely) race condition if I were to enqueue these layout change events 
faster than it can be handled, but I made sure that I wait for all 
events to be processed before changing to another layout.

Any ideas on how to fix this?

Thanks in advance,

Walter Leibbrandt

P.S. Unfortunately I'm not in the position to share all the code because 
of a stupid NDA. :(
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007388.html">[Gtk-sharp-list] Crashes at random spots
</A></li>
	<LI>Next message: <A HREF="007390.html">&#179;&#204;&#183;s&#170;F&#172;v&#186;&#235;&#191;&#239;&#172;&#252;&#164;k &#197;&#253;&#177;z&#165;&#216;&#164;&#163;&#194;&#224;&#183;&#250;&#170;&#186;&#170;&#190;&#166;W&#164;k&#192;u &#183;i&#169;R&#186;t&#165;X &#181;L&#189;a&#183;Q&#185;&#179;830884568
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7389">[ date ]</a>
              <a href="thread.html#7389">[ thread ]</a>
              <a href="subject.html#7389">[ subject ]</a>
              <a href="author.html#7389">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
