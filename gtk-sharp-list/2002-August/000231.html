<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] LibGlade
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:hestilow%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000230.html">
   <LINK REL="Next"  HREF="000243.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] LibGlade
   </H1>
    <B>Rachel Hestilow
    </B> 
    <A HREF="mailto:hestilow%40ximian.com"
       TITLE="[Gtk-sharp-list] LibGlade">hestilow@ximian.com
       </A><BR>
    <I>17 Aug 2002 13:15:24 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="000230.html">[Gtk-sharp-list] LibGlade
</A></li>
        <LI> Next message: <A HREF="000243.html">[Gtk-sharp-list] LibGlade
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#231">[ date ]</a>
              <a href="thread.html#231">[ thread ]</a>
              <a href="subject.html#231">[ subject ]</a>
              <a href="author.html#231">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--=-ecrnCnU/3TNkrTPUvCnh
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable

On Sat, 2002-08-17 at 08:41, Paolo Molaro wrote:
&gt;<i> My issue is with:
</I>&gt;<i> 	public class SList=20
</I>&gt;<i> 	[...]
</I>&gt;<i> 	public SList (IntPtr raw)
</I>&gt;<i>=20
</I>&gt;<i> If the type is made internal and exposed only as an IList reference
</I>&gt;<i> I would have no problems.
</I>&gt;<i> &gt;=20
</I>&gt;<i> That is only one of the issues. Look at this:
</I>&gt;<i>=20
</I>&gt;<i> 	public Object (IntPtr raw) (in glib/Object.cs)
</I>&gt;<i>=20
</I>&gt;<i> What happens if I pass an arbitrary value in there?
</I>&gt;<i> I'm just raising the issue: do we want to be able to make untrusted code
</I>&gt;<i> that uses Gtk safely? I think it's a worthwhile target.
</I>&gt;<i> I don't have a solution, I didn't look at the binding design, but I
</I>&gt;<i> think we should take it into account (and the above entry point makes
</I>&gt;<i> it impossible to run safely untrusted code that uses Gtk#).
</I>
Internal types cannot be used cross-assembly, right? Currently, we have
a gdk-sharp, a gtk-sharp, a gnome-sharp, etc. Would you have us combine
all these into a single assembly? That doesn't seem appealing to me.

&gt;<i>=20
</I>&gt;<i> Exactly. The binding is made to match the BCL rules (i.e. the C#
</I>&gt;<i> paradigms), instead of following the Gtk API and exposing a
</I>&gt;<i> BCL-conforming interface based on that.
</I>&gt;<i>=20
</I>&gt;<i> From a purely hypothetical point of view: I'm porting jpython to run on
</I>&gt;<i> the mono CLR and I want to be able to run existing python gtk programs.
</I>&gt;<i> Of course it would be very silly to write a new binding to libgtk that
</I>&gt;<i> follows the (established) python way of doing the binding (usually a
</I>&gt;<i> thin wrapper on the C API).
</I>&gt;<i> With the current gtk# binding, the call chain for the python code:
</I>&gt;<i>=20
</I>&gt;<i> 	win.show_all ()
</I>&gt;<i>=20
</I>&gt;<i> will look like:
</I>&gt;<i>=20
</I>&gt;<i> 	win.show_all ()
</I>&gt;<i> 	-&gt; win.ShowAll ();
</I>&gt;<i> 	   -&gt; gtk_widget_show_all (IntPtr raw);
</I>&gt;<i>=20
</I>&gt;<i> Now, there are three issues with that:
</I>&gt;<i> 1) an extra method call (minor, I know, but why impose it?)
</I>&gt;<i> 2) mapping name issue: the python binding needs to map its
</I>&gt;<i> method names based on the C API to the almost arbitrary BCL-compatible
</I>&gt;<i> name (when it would be enough to just s/gtk_widget_//)
</I>&gt;<i> 3) it would not be enough to make gtk_widget_show_all() public, because
</I>&gt;<i> of the IntPtr type that is exposed (again, I think exposing methods that
</I>&gt;<i> take IntPtr is dangerous and I would limit it also in the internals of
</I>&gt;<i> the binding).
</I>&gt;<i>=20
</I>&gt;<i> So, my suggestion is to have the binding expose a thin wrapper over the
</I>&gt;<i> C API and have the C# side of it provide the BCL-conforming method
</I>&gt;<i> names, permitting other languages to reuse their existing mapping of the
</I>&gt;<i> Gtk+ API without adding an extra layer that maps to the BCL-accepted name=
</I>s
&gt;<i> (the imposed layer is a slight overhead at runtime, but a big wall to cli=
</I>mb to
&gt;<i> have an existing binding work within the CLR).
</I>&gt;<i>=20
</I>
1) Why should the users of languages that follow the .NET naming
conventions be penalized for languages that don't? There are many naming
conventions out there. It is a language's responsiblity to map its
conventions to .NET conventions, and that includes naming conventions.

2) Almost arbitrary? It is a simple algorithm built into the code
generator system. _foo_bar maps into FooBar. The reverse mapping is a
simple one-line perl regex:
   s/([A-Z])/_\l$1/g;
What is so difficult about that?

3) Again, as the bindings near completion, the places in the public API
where IntPtr is exposed for non-binding usage will approach zero.
Exposing the DllImports would be of little to no help to you anyway,
there is a lot more to the bindings than that.

-- Rachel


--=-ecrnCnU/3TNkrTPUvCnh
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.6 (GNU/Linux)
Comment: For info see <A HREF="http://www.gnupg.org">http://www.gnupg.org</A>

iD8DBQA9XpK8apOJdUj74F4RApzjAJ9Cfwf/AttZA9hs8z5yzTMiZ8q59wCeNqEl
FXtzPBsNtLt9YQYf6/lqBwg=
=zft1
-----END PGP SIGNATURE-----

--=-ecrnCnU/3TNkrTPUvCnh--



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000230.html">[Gtk-sharp-list] LibGlade
</A></li>
	<LI> Next message: <A HREF="000243.html">[Gtk-sharp-list] LibGlade
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#231">[ date ]</a>
              <a href="thread.html#231">[ thread ]</a>
              <a href="subject.html#231">[ subject ]</a>
              <a href="author.html#231">[ author ]</a>
         </LI>
       </UL>
</body></html>
