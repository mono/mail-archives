<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Patch to FileSelection.custom
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:joe%40assbarn.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000194.html">
   <LINK REL="Next"  HREF="000197.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Patch to FileSelection.custom
   </H1>
    <B>Joe Shaw
    </B> 
    <A HREF="mailto:joe%40assbarn.com"
       TITLE="[Gtk-sharp-list] Patch to FileSelection.custom">joe@assbarn.com
       </A><BR>
    <I>04 Aug 2002 14:58:00 -0400</I>
    <P><UL>
        <LI> Previous message: <A HREF="000194.html">[Gtk-sharp-list] Stop the presses!
</A></li>
        <LI> Next message: <A HREF="000197.html">[Gtk-sharp-list] Patch to FileSelection.custom
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#195">[ date ]</a>
              <a href="thread.html#195">[ thread ]</a>
              <a href="subject.html#195">[ subject ]</a>
              <a href="author.html#195">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--=-nSK+rjEPDAJMGWzci51f
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

Hey,

Attached is a simple little patch which creates a new class,
Gtk.FileSelection.Button, which contains a reference back to the parent
FileSelection widget.  It's mostly for convenience, so you don't have to
create your own class to get around the lame file selection dealie.  I
also updated the FileSelector test to use it.

If it's okay, then I can do something similar for the
ColorSelectionDialog class.

Joe



--=-nSK+rjEPDAJMGWzci51f
Content-Description: 
Content-Disposition: inline; filename=fsbutton.patch
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset=ISO-8859-1

? fsbutton.patch
? gnome/Makefile
? gnome/gnome-sharp.dll
? gnome/generated/About.cs
? gnome/generated/App.cs
? gnome/generated/AppBar.cs
? gnome/generated/AppBarMsg.cs
? gnome/generated/Canvas.cs
? gnome/generated/CanvasBpath.cs
? gnome/generated/CanvasBpathPriv.cs
? gnome/generated/CanvasClipgroup.cs
? gnome/generated/CanvasEllipse.cs
? gnome/generated/CanvasGroup.cs
? gnome/generated/CanvasItem.cs
? gnome/generated/CanvasLine.cs
? gnome/generated/CanvasPathDef.cs
? gnome/generated/CanvasPixbuf.cs
? gnome/generated/CanvasPolygon.cs
? gnome/generated/CanvasRE.cs
? gnome/generated/CanvasRect.cs
? gnome/generated/CanvasRichText.cs
? gnome/generated/CanvasShape.cs
? gnome/generated/CanvasShapePriv.cs
? gnome/generated/CanvasText.cs
? gnome/generated/CanvasWidget.cs
? gnome/generated/Client.cs
? gnome/generated/ClientFlags.cs
? gnome/generated/ClientState.cs
? gnome/generated/ColorPicker.cs
? gnome/generated/DateEdit.cs
? gnome/generated/DateEditFlags.cs
? gnome/generated/DialogType.cs
? gnome/generated/Druid.cs
? gnome/generated/DruidPage.cs
? gnome/generated/DruidPageEdge.cs
? gnome/generated/DruidPageStandard.cs
? gnome/generated/EdgePosition.cs
? gnome/generated/Entry.cs
? gnome/generated/FileDomain.cs
? gnome/generated/FileEntry.cs
? gnome/generated/FontPicker.cs
? gnome/generated/FontPickerMode.cs
? gnome/generated/GdkPixbufAsyncHandle.cs
? gnome/generated/GdkPixbufDoneCallback.cs
? gnome/generated/GdkPixbufLoadCallback.cs
? gnome/generated/GtkSharp.BackClickedHandler.cs
? gnome/generated/GtkSharp.CancelClickedHandler.cs
? gnome/generated/GtkSharp.ColorSetHandler.cs
? gnome/generated/GtkSharp.ConnectedHandler.cs
? gnome/generated/GtkSharp.DrawBackgroundHandler.cs
? gnome/generated/GtkSharp.FinishClickedHandler.cs
? gnome/generated/GtkSharp.FontSetHandler.cs
? gnome/generated/GtkSharp.IconFocusedHandler.cs
? gnome/generated/GtkSharp.IconSelectedHandler.cs
? gnome/generated/GtkSharp.IconUnselectedHandler.cs
? gnome/generated/GtkSharp.MoveCursorHandler.cs
? gnome/generated/GtkSharp.NextClickedHandler.cs
? gnome/generated/GtkSharp.PreparedHandler.cs
? gnome/generated/GtkSharp.SaveYourselfHandler.cs
? gnome/generated/GtkSharp.TextChangedHandler.cs
? gnome/generated/HRef.cs
? gnome/generated/HelpError.cs
? gnome/generated/IconEntry.cs
? gnome/generated/IconList.cs
? gnome/generated/IconListMode.cs
? gnome/generated/IconSelection.cs
? gnome/generated/IconTextItem.cs
? gnome/generated/InteractFunction.cs
? gnome/generated/InteractStyle.cs
? gnome/generated/ModuleClassInitHook.cs
? gnome/generated/ModuleHook.cs
? gnome/generated/ModuleInfo.cs
? gnome/generated/ModuleInitHook.cs
? gnome/generated/ModuleRequirement.cs
? gnome/generated/PixmapEntry.cs
? gnome/generated/PreferencesType.cs
? gnome/generated/Program.cs
? gnome/generated/ReplyCallback.cs
? gnome/generated/RestartStyle.cs
? gnome/generated/SaveStyle.cs
? gnome/generated/Scores.cs
? gnome/generated/Stock.cs
? gnome/generated/StringCallback.cs
? gnome/generated/Trigger.cs
? gnome/generated/TriggerActionFunction.cs
? gnome/generated/TriggerList.cs
? gnome/generated/TriggerType.cs
? gnome/generated/UIBuilderData.cs
? gnome/generated/UIInfoConfigurableTypes.cs
? gnome/generated/UIInfoType.cs
? gnome/generated/UIPixmapType.cs
? gnome/generated/UISignalConnectFunc.cs
? gnome/generated/URLError.cs
? gnome/generated/boolObjectintSaveStyleboolInteractStyleboolSignal.cs
Index: gtk/FileSelection.custom
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
RCS file: /cvs/public/gtk-sharp/gtk/FileSelection.custom,v
retrieving revision 1.3
diff -u -p -r1.3 FileSelection.custom
--- gtk/FileSelection.custom	13 Jul 2002 20:31:23 -0000	1.3
+++ gtk/FileSelection.custom	4 Aug 2002 18:43:36 -0000
@@ -2,12 +2,25 @@
 // Gtk.FileSelection.custom - Gtk FileSelection class customizations
 //
 // Author: Duncan Mak  (<A HREF="mailto:duncan@ximian.com">duncan@ximian.com</A>)
+//         Joe Shaw  (<A HREF="mailto:joe@ximian.com">joe@ximian.com</A>)
 //
 // Copyright (C) 2002 Ximian, Inc.=20
 //
 // This code is inserted after the automatically generated code.
 //
 	=09
+public class Button : Gtk.Button {
+	private FileSelection file_sel;
+
+	public FileSelection FileSelection {
+		get { return file_sel; }
+	}
+
+	public Button (FileSelection fs, IntPtr raw) : base (raw) {
+		file_sel =3D fs;
+	}
+}
+=09
 [DllImport(&quot;gtksharpglue&quot;)]
 static extern IntPtr gtksharp_file_selection_get_dir_list (IntPtr i);
 public Gtk.TreeView DirList {
@@ -35,19 +48,19 @@ public Gtk.Label SelectionText {
 [DllImport(&quot;gtksharpglue&quot;)]
 static extern IntPtr gtksharp_file_selection_get_ok_button (IntPtr i);
 public Gtk.Button OkButton {
-	get { return new Gtk.Button (gtksharp_file_selection_get_ok_button (this.=
Handle)); }
+	get { return new Button (this, gtksharp_file_selection_get_ok_button (thi=
s.Handle)); }
 }
=20
 [DllImport(&quot;gtksharpglue&quot;)]
 static extern IntPtr gtksharp_file_selection_get_cancel_button (IntPtr i);
 public Gtk.Button CancelButton {
-	get { return new Gtk.Button (gtksharp_file_selection_get_cancel_button (t=
his.Handle)); }
+	get { return new Button (this, gtksharp_file_selection_get_cancel_button =
(this.Handle)); }
 }
=20
 [DllImport(&quot;gtksharpglue&quot;)]
 static extern IntPtr gtksharp_file_selection_get_help_button (IntPtr i);
 public Gtk.Button HelpButton {
-	get { return new Gtk.Button (gtksharp_file_selection_get_help_button (thi=
s.Handle)); }
+	get { return new Button (this, gtksharp_file_selection_get_help_button (t=
his.Handle)); }
 }
=20
 [DllImport(&quot;gtksharpglue&quot;)]
@@ -85,19 +98,19 @@ public string FileopFile {
 [DllImport(&quot;gtksharpglue&quot;)]
 static extern IntPtr gtksharp_file_selection_get_fileop_c_dir (IntPtr i);
 public Gtk.Button FileopCDir {
-	get { return new Gtk.Button (gtksharp_file_selection_get_fileop_c_dir(thi=
s.Handle)); }
+	get { return new Button (this, gtksharp_file_selection_get_fileop_c_dir(t=
his.Handle)); }
 }
=20
 [DllImport(&quot;gtksharpglue&quot;)]
 static extern IntPtr gtksharp_file_selection_get_fileop_del_file (IntPtr i=
);
 public Gtk.Button FileopDelFile {
-	get { return new Gtk.Button (gtksharp_file_selection_get_fileop_del_file =
(this.Handle)); }
+	get { return new Button (this, gtksharp_file_selection_get_fileop_del_fil=
e (this.Handle)); }
 }
=20
 [DllImport(&quot;gtksharpglue&quot;)]
 static extern IntPtr gtksharp_file_selection_get_fileop_ren_file (IntPtr i=
);
 public Gtk.Button FileopRenFile {
-	get { return new Gtk.Button (gtksharp_file_selection_get_fileop_ren_file =
(this.Handle)); }
+	get { return new Button (this, gtksharp_file_selection_get_fileop_ren_fil=
e (this.Handle)); }
 }
=20
 [DllImport(&quot;gtksharpglue&quot;)]
@@ -111,6 +124,3 @@ static extern IntPtr gtksharp_file_selec
 public new Gtk.HButtonBox ActionArea {
 	get { return new Gtk.HButtonBox (gtksharp_file_selection_get_action_area =
(this.Handle)); }
 }
-
-
-
Index: sample/test/TestFileSelection.cs
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
RCS file: /cvs/public/gtk-sharp/sample/test/TestFileSelection.cs,v
retrieving revision 1.4
diff -u -p -r1.4 TestFileSelection.cs
--- sample/test/TestFileSelection.cs	22 Jul 2002 17:06:28 -0000	1.4
+++ sample/test/TestFileSelection.cs	4 Aug 2002 18:43:36 -0000
@@ -39,6 +39,12 @@ namespace WidgetViewer {
=20
 		static void file_selection_ok (object o, EventArgs args)
 		{
+			Gtk.FileSelection.Button fsbutton =3D (Gtk.FileSelection.Button) o;
+
+			Console.WriteLine (&quot;ok button clicked!&quot;);
+
+			fsbutton.FileSelection.Destroy ();
+		=09
 		}
=20
 		static void show_fileops (object o, EventArgs args)

--=-nSK+rjEPDAJMGWzci51f--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000194.html">[Gtk-sharp-list] Stop the presses!
</A></li>
	<LI> Next message: <A HREF="000197.html">[Gtk-sharp-list] Patch to FileSelection.custom
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#195">[ date ]</a>
              <a href="thread.html#195">[ thread ]</a>
              <a href="subject.html#195">[ subject ]</a>
              <a href="author.html#195">[ author ]</a>
         </LI>
       </UL>
</body></html>
