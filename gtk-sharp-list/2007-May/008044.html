<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Still can't show config dialog, but can  show anything else
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Still%20can%27t%20show%20config%20dialog%2C%0A%20but%20can%20%20show%20anything%20else&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008040.html">
   <LINK REL="Next"  HREF="008045.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Still can't show config dialog, but can  show anything else</H1>
    <B>Aaron Oxford</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Still%20can%27t%20show%20config%20dialog%2C%0A%20but%20can%20%20show%20anything%20else&In-Reply-To="
       TITLE="[Gtk-sharp-list] Still can't show config dialog, but can  show anything else">aaron at hardwarehookups.com.au
       </A><BR>
    <I>Sat May 12 01:42:30 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="008040.html">[Gtk-sharp-list] Still can't show config dialog,	but can	show anything else
</A></li>
        <LI>Next message: <A HREF="008045.html">[Gtk-sharp-list] Still can't show config dialog,	but can show anything else
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8044">[ date ]</a>
              <a href="thread.html#8044">[ thread ]</a>
              <a href="subject.html#8044">[ subject ]</a>
              <a href="author.html#8044">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi again,

As promised, here is a modified test program demonstrating the 
timer/dialog lockup. The expected behaviour is to see the main window 
pop up, then be obscured by a dialog saying 'testing testing 1 2 3', 
which in turn is partially obscured by a blank dialog. The app will 
then freeze, and after a while Windows will unblock it and let you kill it.

The desired behaviour is to see the second dialog, full of 'the quick 
brown fox jumped over the lazy dog', and to be able to close all 
three windows and exit the program.

Hope you're enjoying your weekend.

Aaron.

------------------------------------------

using System;
using Gtk;
using Gdk;

public class Test
{
     private Label label = null;
     private int counter = 0;
     private bool configurationFailed = false;
     private Gtk.Window wnd;

     // Create the window.
     public static void Main()
     {
         if (!GLib.Thread.Supported) GLib.Thread.Init();
         Gdk.Threads.Init();
         Gdk.Threads.Enter();

         Application.Init();

         Test t = new Test();

         GLib.Timeout.Add(100, new GLib.TimeoutHandler(t.Tick));

         t.showMessage(&quot;testing testing 1 2 3&quot;);

         Application.Run();
         Gdk.Threads.Leave();
     }

     // This is our window.
     public Test()
     {
         wnd = new Gtk.Window(&quot;Test&quot;);
         wnd.Destroyed += new EventHandler(wnd_Destroyed);

         // Ladida, Gtk# is cool...
         VBox vbox = new VBox();
         label = new Label(counter.ToString());
         vbox.PackStart(label, false, false, 0);
         wnd.Add(vbox);
         wnd.ShowAll();

         // ...and then for some reason:
         // (this line invokes the timer based popup).
         configurationFailed = true;
     }

     // Timer function.
     private bool Tick()
     {
         if (configurationFailed)
         {
             // ...during a timer (ie AFTER Gtk starts)
             string s = &quot;the quick brown fox jumped over the lazy dog. &quot;;
             s += s;
             s += s;
             s += s;
             s += s;
             s += s;

             showMessage(s);  // &lt;-- Crash right here.

             configurationFailed = false;
         }
         label.Text = &quot;&quot; + counter;
         counter++;
         return true;
     }



     // Show a dialog.
     private void showMessage(string p)
     {
         Gtk.Dialog dlg = new Dialog(&quot;caption&quot;, wnd, DialogFlags.Modal);
         dlg.AddButton(Gtk.Stock.Ok, Gtk.ResponseType.Ok);
         dlg.DefaultResponse = Gtk.ResponseType.Ok;
         ScrolledWindow sw = new ScrolledWindow();
         Label l = new Label(p);
         l.WidthRequest = 285;
         l.Wrap = true;
         sw.AddWithViewport(l);
         dlg.VBox.PackStart(sw);
         dlg.SetDefaultSize(320, 160);

         dlg.ShowAll();
         dlg.Run();
         dlg.Destroy();
     }

     // Close program.
     void wnd_Destroyed(object sender, EventArgs e)
     {
         Application.Quit();
     }
}

---------------------------------------------------------------------------------
Aaron Oxford   -   aaron+hardwarehookups .com .au
Director, Innovative Computer Solutions (Aust) Pty. Ltd.
49 Maitland Rd, Mayfield, NSW 2304 Australia
<A HREF="http://www.ic-solutions.com.au">http://www.ic-solutions.com.au</A>
Developer, SourceForge project VioLet Composer
<A HREF="http://sourceforge.net/projects/buzz-like">http://sourceforge.net/projects/buzz-like</A>

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008040.html">[Gtk-sharp-list] Still can't show config dialog,	but can	show anything else
</A></li>
	<LI>Next message: <A HREF="008045.html">[Gtk-sharp-list] Still can't show config dialog,	but can show anything else
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8044">[ date ]</a>
              <a href="thread.html#8044">[ thread ]</a>
              <a href="subject.html#8044">[ subject ]</a>
              <a href="author.html#8044">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
