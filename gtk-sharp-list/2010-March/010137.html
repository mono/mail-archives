<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] The state of GTK#
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20The%20state%20of%20GTK%23&In-Reply-To=8225af791003070625o62e6402fh8831d53884c81591%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010135.html">
   <LINK REL="Next"  HREF="010139.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] The state of GTK#</H1>
    <B>Christian Hoff</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20The%20state%20of%20GTK%23&In-Reply-To=8225af791003070625o62e6402fh8831d53884c81591%40mail.gmail.com"
       TITLE="[Gtk-sharp-list] The state of GTK#">christian_hoff at gmx.net
       </A><BR>
    <I>Sun Mar  7 11:01:16 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="010135.html">[Gtk-sharp-list] The state of GTK#
</A></li>
        <LI>Next message: <A HREF="010139.html">[Gtk-sharp-list] The state of GTK#
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10137">[ date ]</a>
              <a href="thread.html#10137">[ thread ]</a>
              <a href="subject.html#10137">[ subject ]</a>
              <a href="author.html#10137">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sense Hofstede wrote:
&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> The past few weeks I've been working on getting the Mono bindings of
</I>&gt;<i> libappindicator[1] to work correctly. I managed to get everything work
</I>&gt;<i> correctly apart from making the virtual members accessible an
</I>&gt;<i> overridable in C#. The thing is that libappindicator provides two
</I>&gt;<i> (virtual) methods that provide a fall back mechanism. You can
</I>&gt;<i> implement your own by overriding those functions. However, I couldn't
</I>&gt;<i> get this to work because virtual methods aren't supported by GAPI2
</I>&gt;<i> which is included in GTK# 2.12.9. If everything goes well it might be
</I>&gt;<i> included in the GTK# 3.0 release in September. That is too late for
</I>&gt;<i> Lucid, obviously and therefore the libappindicator library won't have
</I>&gt;<i> all functionality in C# that is available in C, Python and in the near
</I>&gt;<i> future in Vala as well.
</I>&gt;<i>   
</I>If there are only two virtual methods that you're struggling with you 
could add custom code to make them work with gapi 2. There are basically 
two ways to get this done:
1.) Write some ugly glue/C code that overrides the function and call it 
from managed custom code. Ugly, but at least it works. Gtk# 2.12 does 
this to get cell renderers to work properly (see 
gtk-sharp-212-branch/gtk/CellRenderer.cs).
2.) Do it all in managed code. This does however not work with 
Microsoft's implementation of .net in Version 1.1. Maybe the attached 
GAPI3 generated code for Cellrenderer.cs helps you getting started (have 
a look at OngetSize, OnRender, ..)
&gt;<i> September 2010 is a quite far away from November 2004, which was when
</I>&gt;<i> VirtualMember.cs was uploaded to SVN for the first time. The long
</I>&gt;<i> waiting period between the introduction seems to be typical for GTK#.
</I>&gt;<i>   
</I>VirtualMethod.cs is already part of 2.12, it is GObjectVM.cs that does 
what you need. However, the initial commit for this class also dates 
back to April 2009.

But it's true that we have a problem with all the code that languishes 
unreleased in SVN. There are already numerous forks of the generator, 
one for GLib (Gstreamer bindings) and probably a dozen other workarounds 
that I'm not aware of.

There have been substantial improvements  especially in GLib and the 
generator, and of course gio bindings are now included in trunk, too.
&gt;<i> You could say that it was GTK# that costed Banshee the position as
</I>&gt;<i> default media player in Ubuntu: GTK# still won't included GIO# in the
</I>&gt;<i> next release -- it was a requirement back then -- but most importantly
</I>&gt;<i> the a11y support wasn't available with the GTK# of that time. Although
</I>&gt;<i> it was mostly written, it wasn't released and if I read the Banshee
</I>&gt;<i> ./configure output correctly it only will be in GTK# 2.12.10. The
</I>&gt;<i> other issues on the list were fixed by the Banshee developers.
</I>&gt;<i>   
</I>Gtk# 2.12.10 plans were buried some 6 months ago. It was planned to 
include GAPI from trunk along with a few extension methods for GLib 2.x 
needed by GAPI3.
&gt;<i> It is a shame that so many features are available, needed, but not
</I>&gt;<i> shipped. F-Spot started to included GIO# in their source because it
</I>&gt;<i> still isn't provided by GTK#. Banshee has taken a few things away from
</I>&gt;<i> the GTK# library as well. This is not how shared libraries should
</I>&gt;<i> work, the whole idea behind a shared library is that the library is
</I>&gt;<i> provided separately from the application, not spread across different
</I>&gt;<i> applications.
</I>&gt;<i>
</I>&gt;<i> It would be good for GTK# and the image of Mono applications on the
</I>&gt;<i> GNOME desktop if GTK# wouldn't be maintained as conservatively as it
</I>&gt;<i> is now. Maybe it should become a part of the GNOME project and move to
</I>&gt;<i> gnome.org, I don't know. What I do know that it is getting
</I>&gt;<i> increasingly harder for Mono applications to maintain their position
</I>&gt;<i> on the desktop. It could be that everything is fixed with the GTK# 3.0
</I>&gt;<i> release, but in time there will be a GTK# 4.0 release as well. Will
</I>&gt;<i> GTK# development for the 3.x tree die out then as well? I hope not,
</I>&gt;<i> because applications like Banshee, Gbrainy and Tomboy surely add
</I>&gt;<i> something to the desktop and they would be missed.
</I>&gt;<i>   
</I>The basic problem in my opinion is that we were targetting Gtk 3.0 way 
too early in trunk and I seriously doubt whether there will actually be 
a release in September. Thus, 2.12 is in a seperate branch and cut off 
from development. That was fine as long as nobody seemed to care about 
the improvements in trunk for some time, but then there were GStreamer, 
F-Spot(GIO#) and numerous others who now all borrowed parts from trunk.

I think that the time has come to do something and release parts of 
trunk. A few possible alternatives that came to my mind:
- Why not simply release Gtk# 3 from trunk as it is now with the 
obsolete API removed? The Gtk+ team makes it pretty clear that version 3 
is a maintenance release with no old, non-deprecated API going to be 
removed. So we would have a Gtk# 3 that uses Gtk+ 2.20 under the hood 
and requires .net 2. No adjustments have to be made, though the version 
name might be misleading and imply that we are binding Gtk+ 3. Once the 
release has been made on the Gtk+ side, all we have to do is recompile 
our binding in order to no depend on the old version 2 binaries no 
longer and include the new features of Gtk+ 3.

-  Release GAPI3 now, but with the glue fallback option set to avoid 
GLib 3 and MS .net 2 dependencies.

-  Include Gio# into Gtk# 2.12.10.

Any comments or suggestions?

- Christian
&gt;<i> [1] <A HREF="https://launchpad.net/indicator-application">https://launchpad.net/indicator-application</A>
</I>&gt;<i> [2] <A HREF="https://blueprints.launchpad.net/ubuntu/+spec/desktop-karmic-default-media-player-choice">https://blueprints.launchpad.net/ubuntu/+spec/desktop-karmic-default-media-player-choice</A>
</I>&gt;<i> [3] <A HREF="https://wiki.ubuntu.com/DesktopTeam/Specs/Karmic/DefaultMediaPlayerChoice">https://wiki.ubuntu.com/DesktopTeam/Specs/Karmic/DefaultMediaPlayerChoice</A>
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>   
</I>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: CellRenderer.cs
Type: text/x-csharp
Size: 32683 bytes
Desc: not available
Url : <A HREF="http://lists.ximian.com/pipermail/gtk-sharp-list/attachments/20100307/11dc5a12/attachment-0001.bin">http://lists.ximian.com/pipermail/gtk-sharp-list/attachments/20100307/11dc5a12/attachment-0001.bin</A> 
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010135.html">[Gtk-sharp-list] The state of GTK#
</A></li>
	<LI>Next message: <A HREF="010139.html">[Gtk-sharp-list] The state of GTK#
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10137">[ date ]</a>
              <a href="thread.html#10137">[ thread ]</a>
              <a href="subject.html#10137">[ subject ]</a>
              <a href="author.html#10137">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
