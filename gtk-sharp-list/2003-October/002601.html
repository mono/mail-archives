<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] GC-Safe P/Invoke
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mkestner%40speakeasy.net">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="002599.html">
   <LINK REL="Next"  HREF="002603.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] GC-Safe P/Invoke
   </H1>
    <B>Mike Kestner
    </B> 
    <A HREF="mailto:mkestner%40speakeasy.net"
       TITLE="[Gtk-sharp-list] GC-Safe P/Invoke">mkestner@speakeasy.net
       </A><BR>
    <I>Fri, 17 Oct 2003 21:04:36 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="002599.html">[Gtk-sharp-list] GC-Safe P/Invoke
</A></li>
        <LI> Next message: <A HREF="002603.html">[Gtk-sharp-list] GC-Safe P/Invoke
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2601">[ date ]</a>
              <a href="thread.html#2601">[ thread ]</a>
              <a href="subject.html#2601">[ subject ]</a>
              <a href="author.html#2601">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, 2003-10-17 at 20:25, Jonathan Pryor wrote:
&gt;<i> I came across this article a couple weeks ago, and was wondering if:
</I>&gt;<i>  1. it was a concern for Gtk#
</I>
Don't think so.  The resources allocated by Gtk# need to be freed from
within the gui thread, so we queue up unref requests from the Dispose
handlers called by the GC thread.  The unrefs are processed by an Idle
Handler, so they should not run until the GUI thread is finished with
any pending event handling.

If I understand correctly, the scenario you describe is a GUI method
being interrupted by the GC thread, and the dispose handler for the
Object being called prior to resumption of the GUI thread.  If you are
in a method already, it will finish running before we get to the Idle
handler and process the unref queued by the Dispose method.

&gt;<i>  2. if Gtk# should do something about it?
</I>
Shouldn't need to unless I'm missing something.

-- 
Mike Kestner &lt;<A HREF="mailto:mkestner@speakeasy.net">mkestner@speakeasy.net</A>&gt;


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="002599.html">[Gtk-sharp-list] GC-Safe P/Invoke
</A></li>
	<LI> Next message: <A HREF="002603.html">[Gtk-sharp-list] GC-Safe P/Invoke
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2601">[ date ]</a>
              <a href="thread.html#2601">[ thread ]</a>
              <a href="subject.html#2601">[ subject ]</a>
              <a href="author.html#2601">[ author ]</a>
         </LI>
       </UL>
</body></html>
