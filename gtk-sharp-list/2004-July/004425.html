<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] patch for gnome binding
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mkestner%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="004426.html">
   <LINK REL="Next"  HREF="004427.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] patch for gnome binding
   </H1>
    <B>Mike Kestner
    </B> 
    <A HREF="mailto:mkestner%40ximian.com"
       TITLE="[Gtk-sharp-list] patch for gnome binding">mkestner@ximian.com
       </A><BR>
    <I>Mon, 12 Jul 2004 07:48:47 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="004426.html">[Gtk-sharp-list] patch for gnome binding
</A></li>
        <LI> Next message: <A HREF="004427.html">[Gtk-sharp-list] patch for gnome binding
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4425">[ date ]</a>
              <a href="thread.html#4425">[ thread ]</a>
              <a href="subject.html#4425">[ subject ]</a>
              <a href="author.html#4425">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 2004-07-12 at 07:22, Mike Kestner wrote:
&gt;<i> On Mon, 2004-07-12 at 03:55, Martin Willemoes Hansen wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; I made a little fix for the gnome-binding of gtk#, what do you think? Is
</I>&gt;<i> &gt; it ok to commit?
</I>&gt;<i> 
</I>&gt;<i> No, this is not the correct way to provide a subclassable ctor now.  It
</I>&gt;<i> would be best to let the generator generate this ctor on its own now,
</I>&gt;<i> since there are no parameters to map.
</I>
Okay, I see there isn't a void ctor for this.  There is no need to have
a disable_void_ctor attr on the class, as the generator doesn't generate
that by default any more.  So that can be removed.  

The new manual implementation should use CreateNativeObject to
instantiate objects for subclasses:

{
        if (GetType () != typeof (PrintJob)) {
                CreateNativeObject (new string [0], new GLib.Value [0]);
		return;
	}

	Raw = gnome_print_job_new (PrintConfig.Default().Handle);
}

The problem with that is there is currently no way to set a PrintConfig
on a PrintJob, which should be done in the CreateNative branch.  So in
order to do this properly, you probably need to also add some glue to
set the config field on the Job.

Using the GType ctor, as you did in your patch, would require that all
subclasses define a GType property.  Even with that, the fact that you
were still using gnome_print_job_new would mean that the type of the
native object would always be Gnome.PrintJob, and not the subclassed
type, which could cause problems with the object wrapping mechanism if
the GC ever gets involved.

-- 
Mike Kestner &lt;<A HREF="mailto:mkestner@ximian.com">mkestner@ximian.com</A>&gt;


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="004426.html">[Gtk-sharp-list] patch for gnome binding
</A></li>
	<LI> Next message: <A HREF="004427.html">[Gtk-sharp-list] patch for gnome binding
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4425">[ date ]</a>
              <a href="thread.html#4425">[ thread ]</a>
              <a href="subject.html#4425">[ subject ]</a>
              <a href="author.html#4425">[ author ]</a>
         </LI>
       </UL>
</body></html>
