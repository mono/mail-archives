<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Problem loading icons: is this a bug?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jymdman%40home.se">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="004468.html">
   <LINK REL="Next"  HREF="004471.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Problem loading icons: is this a bug?
   </H1>
    <B>Fredrik Nilsson
    </B> 
    <A HREF="mailto:jymdman%40home.se"
       TITLE="[Gtk-sharp-list] Problem loading icons: is this a bug?">jymdman@home.se
       </A><BR>
    <I>Fri, 16 Jul 2004 22:34:43 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="004468.html">[Gtk-sharp-list] Problem loading icons: is this a bug?
</A></li>
        <LI> Next message: <A HREF="004471.html">[Gtk-sharp-list] Problem loading icons: is this a bug?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4469">[ date ]</a>
              <a href="thread.html#4469">[ thread ]</a>
              <a href="subject.html#4469">[ subject ]</a>
              <a href="author.html#4469">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On fre, 2004-07-16 at 20:42 +0200, Raúl Moratalla wrote:
&gt;<i> Hi!
</I>&gt;<i> 
</I>&gt;<i> I use glade for edit the interface of my application and I add to a form 
</I>&gt;<i> or to a button an icon: When I execute the application I get the 
</I>&gt;<i> following error and it crashes:
</I>&gt;<i> (&lt;unknown&gt;:31877): GLib-CRITICAL **: file gutils.c: line 577 
</I>&gt;<i> (g_path_get_dirname): assertion `file_name != NULL' failed
</I>&gt;<i> 
</I>&gt;<i> (&lt;unknown&gt;:31877): GdkPixbuf-CRITICAL **: file gdk-pixbuf-io.c: line 761 
</I>&gt;<i> (gdk_pixbuf_new_from_file): assertion `filename != NULL' failed
</I>&gt;<i> 
</I>&gt;<i> Unhandled Exception: System.NullReferenceException: Object reference not 
</I>&gt;<i> set to an instance of an object
</I>&gt;<i> in (unmanaged) (wrapper managed-to-native) 
</I>&gt;<i> Glade.XML:glade_xml_new_from_buffer (byte[],int,string,string)
</I>&gt;<i> in &lt;0x00004&gt; (wrapper managed-to-native) 
</I>&gt;<i> Glade.XML:glade_xml_new_from_buffer (byte[],int,string,string)
</I>&gt;<i> in &lt;0x00133&gt; Glade.XML:.ctor 
</I>&gt;<i> (System.Reflection.Assembly,string,string,string)
</I>&gt;<i> in [0x00017] (at /home/raul/MonoDevelopProjects/glade1/Main.cs:21) 
</I>&gt;<i> GladeApp:.ctor (string[])
</I>&gt;<i> in [0x00001] (at /home/raul/MonoDevelopProjects/glade1/Main.cs:11) 
</I>&gt;<i> GladeApp:Main (string[])
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> press any key to continue...
</I>&gt;<i> 
</I>&gt;<i> It seems that can't load the icon. I looked into the xml file and I can 
</I>&gt;<i> see the following line:
</I>&gt;<i>   &lt;property name=&quot;icon&quot;&gt;App.png&lt;/property&gt;
</I>&gt;<i> 
</I>&gt;<i> I changed it with the complete path to the image and the application now 
</I>&gt;<i> loads and shows the icon, but if I want to distribute the source code 
</I>&gt;<i> this is a problem. Is this a bug or am I doing something wrong?
</I>&gt;<i> I tried to load and assign the icons to my window or my buttons using 
</I>&gt;<i> code but I am a bit confused and I don't know how to do it :( (I think 
</I>&gt;<i> that I should use Gdk.Pixbuf) Anyone could explain to me how to do it? I 
</I>&gt;<i> would to knowt if the application crashes if I assign the icon by code.
</I>&gt;<i> 
</I>&gt;<i> Best regards,
</I>&gt;<i> 
</I>&gt;<i> Raúl
</I>
Hi Raúl!

Guess who... yes, it's me again! ;)

I'm not an expert on this, but this is one way to do it...
Don't set the icons in glade, instead do it in the program.

In Monodevelop, add the icons to 'Resource Files', and it will be
embedded in the exe.

For the window, use this:
window1.Icon = new Gdk.Pixbuf (null, &quot;icon-file-name.png&quot;);

For the button you can do this:
In glade, set a random Icon from the defaults (e.g. Cancel), click on
the Icon in the button and notice it's name (or change it to what you
want), e.g. image1.
In the program, use this code:
image1.Pixbuf = new Gdk.Pixbuf (null, &quot;other-icon-file-name.png&quot;);

Of course you need to 'auto-define' window1 and image1 with the usual:
[Widget] Gtk.Window window1;
[Widget] Gtk.Image image1;
But that you propably already know...


Now I have to go and paint a roof :)

Good luck,

/Fredrik


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="004468.html">[Gtk-sharp-list] Problem loading icons: is this a bug?
</A></li>
	<LI> Next message: <A HREF="004471.html">[Gtk-sharp-list] Problem loading icons: is this a bug?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4469">[ date ]</a>
              <a href="thread.html#4469">[ thread ]</a>
              <a href="subject.html#4469">[ subject ]</a>
              <a href="author.html#4469">[ author ]</a>
         </LI>
       </UL>
</body></html>
