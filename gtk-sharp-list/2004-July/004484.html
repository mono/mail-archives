<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] TextBuffer and TextTags
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:danielmorgan%40verizon.net">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="004482.html">
   <LINK REL="Next"  HREF="004483.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] TextBuffer and TextTags
   </H1>
    <B>Daniel Morgan
    </B> 
    <A HREF="mailto:danielmorgan%40verizon.net"
       TITLE="[Gtk-sharp-list] TextBuffer and TextTags">danielmorgan@verizon.net
       </A><BR>
    <I>Sat, 17 Jul 2004 21:39:05 -0400</I>
    <P><UL>
        <LI> Previous message: <A HREF="004482.html">[Gtk-sharp-list] TextBuffer and TextTags
</A></li>
        <LI> Next message: <A HREF="004483.html">[Gtk-sharp-list] [LONG] Patches to make Gtk-Sharp 1.0 work on FreeBSD and Gnome
 2.6.2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4484">[ date ]</a>
              <a href="thread.html#4484">[ thread ]</a>
              <a href="subject.html#4484">[ subject ]</a>
              <a href="author.html#4484">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Mono and GTK# Documentation can be found at:

<A HREF="http://www.go-mono.com/docs/">http://www.go-mono.com/docs/</A>

Again, take a look at how sqlsharpgtk does it.

<A HREF="http://cvs.hispalinux.es/cgi-bin/cvsweb/sqlsharpgtk/sqlsharpgtk/?cvsroot">http://cvs.hispalinux.es/cgi-bin/cvsweb/sqlsharpgtk/sqlsharpgtk/?cvsroot</A>
=mono

This is for a text view that I log output:

		ScrolledWindow CreateOutputResultsTextView () 
		{
			ScrolledWindow sw;
			sw = new ScrolledWindow (
				new Adjustment (0.0, 0.0, 0.0, 0.0, 0.0,
0.0), 
				new Adjustment (0.0, 0.0, 0.0, 0.0, 0.0,
0.0));
			sw.HscrollbarPolicy = Gtk.PolicyType.Automatic;
			sw.VscrollbarPolicy = Gtk.PolicyType.Automatic;
			sw.ShadowType = Gtk.ShadowType.In;		
			
			textView = new TextView ();
			buf = textView.Buffer;
			textView.Editable = false;
			textView.ModifyFont
(Pango.FontDescription.FromString (&quot;courier new&quot;));
			sw.Add (textView);		

			return sw;
		}

I'm not sure if it does the whole thing or just parts.  Anyways, there
is the SqlEditorSharp widget that maybe some use.
Create your text tags.  Put it into a TextTagTable.  Add the
TextTagTable to your text buffer.  Add the text buffer to the text view.
When you want to insert text, use something like InsertWithTags or
ApplyTag. 

		// widgets
		private ScrolledWindow scroll;
		private TextView sqlTextView;
		private TextBuffer sqlTextBuffer;
		private EditorTab tab = null;

		// Constructors

		public SqlEditorSharp() : base(false, 4) {

			scroll = new ScrolledWindow (
				new Adjustment (0.0, 0.0, 0.0, 0.0, 0.0,
0.0), 
				new Adjustment (0.0, 0.0, 0.0, 0.0, 0.0,
0.0));
			scroll.HscrollbarPolicy =
Gtk.PolicyType.Automatic;
			scroll.VscrollbarPolicy =
Gtk.PolicyType.Automatic;
			scroll.ShadowType = Gtk.ShadowType.In;
			this.PackStart (scroll, true, true, 0);

			// default font famly for SQL editor
			family = &quot;courier&quot;;

			// other default settings
			use_hi_lighting = false;

			// create text tag table
			TextTagTable textTagTable = new TextTagTable ();

			// anything else is normaltext
			normaltext_tag = new TextTag (&quot;normaltext&quot;);
			normaltext_tag.Family = family;
			normaltext_tag.Foreground = &quot;black&quot;;
			normaltext_tag.Style = Pango.Style.Normal;
			textTagTable.Add (normaltext_tag);
       
			// SQL Keywords - SELECT FROM WHERE, etc
			sql_tag = new TextTag (&quot;sql&quot;);
			sql_tag.Family = family;
			sql_tag.Foreground = &quot;blue&quot;;
			sql_tag.Style = Pango.Style.Normal;
			textTagTable.Add (sql_tag);
[...]

			// allow it to be edited
			sqlTextView.Editable = true;

			//line_last_changed = -1;
			//last_freecomment_count = -1;

			// attach OnTextChanged callback function
			// to &quot;changed&quot; signal so we can do something
			// when the text has changed in the buffer
			sqlTextBuffer.Changed += new EventHandler
(OnTextChanged);

			// add the TextView to the ScrolledWindow
			scroll.Add (sqlTextView);

		}

[...]
	
sqlTextBuffer.ApplyTag (sql_tag,
				begin_iter, end_iter);

The GTK+ 2.0 Documentation serves as a good source of docs too.

<A HREF="http://developer.gnome.org/doc/API/2.0/gtk/TextWidget.html">http://developer.gnome.org/doc/API/2.0/gtk/TextWidget.html</A>

Also, look at MonoDevelop or gsirc for example of how its done.

-----Original Message-----
From: <A HREF="mailto:gtk-sharp-list-admin@lists.ximian.com">gtk-sharp-list-admin@lists.ximian.com</A>
[mailto:<A HREF="mailto:gtk-sharp-list-admin@lists.ximian.com">gtk-sharp-list-admin@lists.ximian.com</A>] On Behalf Of Phil Durand
Sent: Saturday, July 17, 2004 6:56 PM
To: gtk-sharp-list
Subject: [Gtk-sharp-list] TextBuffer and TextTags


Since none of this stuff is documented, and I cant seem to be able to
figure out how to do this, I need to ask for help.

I'm trying to format text within a TextView. Things like bolding,
changing font etc, but for specific areas of the buffer, not for all the
textview.

I've found Buffer.InsertWithTags, which takes the text and the iter to
insert at, as well as a TextTag Array. Now how to insert tags in there
is beyond me, because I dont understand how the TextTag class works (if
this is in fact the tools to use to acomplish my task)

Could someone help me figure out how to insert tags within my text to
add bolding, font and color to parts of text that I insert? thanks for
any help

Phil

_______________________________________________
Gtk-sharp-list maillist  -  <A HREF="mailto:Gtk-sharp-list@lists.ximian.com">Gtk-sharp-list@lists.ximian.com</A>
<A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">http://lists.ximian.com/mailman/listinfo/gtk-sharp-list</A>


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="004482.html">[Gtk-sharp-list] TextBuffer and TextTags
</A></li>
	<LI> Next message: <A HREF="004483.html">[Gtk-sharp-list] [LONG] Patches to make Gtk-Sharp 1.0 work on FreeBSD and Gnome
 2.6.2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4484">[ date ]</a>
              <a href="thread.html#4484">[ thread ]</a>
              <a href="subject.html#4484">[ subject ]</a>
              <a href="author.html#4484">[ author ]</a>
         </LI>
       </UL>
</body></html>
