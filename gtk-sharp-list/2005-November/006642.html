<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] NodeView row refreshes only when there's mouse
	activity
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20NodeView%20row%20refreshes%20only%20when%20there%27s%20mouse%0A%09activity&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006635.html">
   <LINK REL="Next"  HREF="006643.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] NodeView row refreshes only when there's mouse
	activity</H1>
    <B>Archie Maskill</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20NodeView%20row%20refreshes%20only%20when%20there%27s%20mouse%0A%09activity&In-Reply-To="
       TITLE="[Gtk-sharp-list] NodeView row refreshes only when there's mouse
	activity">galepsus at gmail.com
       </A><BR>
    <I>Wed Nov 30 12:51:49 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="006635.html">[Gtk-sharp-list] Using pixbuf without X
</A></li>
        <LI>Next message: <A HREF="006643.html">[Gtk-sharp-list] NodeView row refreshes only when there's
	mouse activity
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6642">[ date ]</a>
              <a href="thread.html#6642">[ thread ]</a>
              <a href="subject.html#6642">[ subject ]</a>
              <a href="author.html#6642">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey everyone -

I have a NodeView, populated with some nodes.  A value in one of the
nodes is changed, but this change is not reflected visually until I
move the mouse into (or out of) the offending row.  Moving the mouse
strictly within the offending row has no effect.

The closest thing I've found to someone mentioning this problem is in
this thread : <A HREF="http://lists.ximian.com/pipermail/gtk-sharp-list/2004-November/005099.html">http://lists.ximian.com/pipermail/gtk-sharp-list/2004-November/005099.html</A>

I'm doing much the same thing that this chap describes, and making
sure to use ThreadNotify sensibly.  It seems it was accepted that the
problem was a multiple-thread-related one, but I've managed to
reproduce it using a very simple single-thread example.  I've reduced
this to the simplest possible situation and included it below.

This happens on both Windows 2000 and Linux.

Is this a bug?  Or is it done for reasons of efficiency, and I'm
supposed to call some kind of refresh method once I've made a change
to a node's value?  What do other people do to get round this?

Thanks in advance!
- Archie


using Gtk;
using System;

public class MyTreeNode : Gtk.TreeNode
{
	[Gtk.TreeNodeValue (Column=0)]
	public string variable;
	
	public MyTreeNode (string var)
	{
		variable = var;
	}
}

public class MainClass
{
	static MyTreeNode node_to_change;
	
	public static void Main()
	{
		Application.Init();
		Window w = new Window(&quot;Window Title&quot;);
		VBox v0 = new VBox();
		w.Add(v0);
		
		NodeStore store = new NodeStore( typeof(MyTreeNode) );
		node_to_change = new MyTreeNode(&quot;Click button then point at this&quot;);
		store.AddNode( node_to_change );
		
		NodeView view = new NodeView( store );
		view.AppendColumn(&quot;Column header&quot;, new CellRendererText(), &quot;text&quot;, 0);
		
		Button button = new Button(&quot;button&quot;);
		button.Clicked += new EventHandler( clickHandler );
		
		v0.Add(view);
		v0.Add(button);
		
		w.ShowAll();
		Application.Run();
	}
	
	public static void clickHandler( object sender, EventArgs args)
	{
		((MyTreeNode)node_to_change).variable = &quot;Changed!&quot;;
	}
 }
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006635.html">[Gtk-sharp-list] Using pixbuf without X
</A></li>
	<LI>Next message: <A HREF="006643.html">[Gtk-sharp-list] NodeView row refreshes only when there's
	mouse activity
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6642">[ date ]</a>
              <a href="thread.html#6642">[ thread ]</a>
              <a href="subject.html#6642">[ subject ]</a>
              <a href="author.html#6642">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
