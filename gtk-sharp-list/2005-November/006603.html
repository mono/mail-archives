<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] DataGrid control, data binding, ObjectViews, Swf,
	Gtk
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20DataGrid%20control%2C%20data%20binding%2C%20ObjectViews%2C%20Swf%2C%0A%09Gtk&In-Reply-To=20051119164740.87190.qmail%40web34008.mail.mud.yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006593.html">
   <LINK REL="Next"  HREF="006582.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] DataGrid control, data binding, ObjectViews, Swf,
	Gtk</H1>
    <B>Gennadiy Donchyts</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20DataGrid%20control%2C%20data%20binding%2C%20ObjectViews%2C%20Swf%2C%0A%09Gtk&In-Reply-To=20051119164740.87190.qmail%40web34008.mail.mud.yahoo.com"
       TITLE="[Gtk-sharp-list] DataGrid control, data binding, ObjectViews, Swf,
	Gtk">don at env.com.ua
       </A><BR>
    <I>Sat Nov 19 18:57:56 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="006593.html">[Gtk-sharp-list] DataGrid control, data binding, ObjectViews, Swf,
	Gtk
</A></li>
        <LI>Next message: <A HREF="006582.html">[Gtk-sharp-list] problem with compilation of ToolButton
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6603">[ date ]</a>
              <a href="thread.html#6603">[ thread ]</a>
              <a href="subject.html#6603">[ subject ]</a>
              <a href="author.html#6603">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Another thing I've found there is that grid takes only String values
... I've made a
small hack to fix it (change parameter for SetColumnValue string =&gt; object), but
still it is not everywhere. I have to make some draft version very
soon and then will
clean up and send a modified code. Probably in a few weeks or so.

On 11/19/05, Daniel Morgan &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">monodanmorg at yahoo.com</A>&gt; wrote:
&gt;<i> I really do wish someone would create a real-world enterprise-class DataGrid
</I>&gt;<i> for gtk# with Data Binding and many other fancy features.
</I>&gt;<i>
</I>&gt;<i> And take this DataGrid and make it part of Gtk#.   Maybe have another gtk#
</I>&gt;<i> assembly for these extra widgets.
</I>&gt;<i>
</I>&gt;<i> Anyways, I have something I have worked on for awhile, maybe others can
</I>&gt;<i> improve upon it and give back.  If someone is interested, we could put it
</I>&gt;<i> into subversion somewhere with other gtk# widgets.  Chris and I have
</I>&gt;<i> discussed this in the past, but there is only so much time.
</I>&gt;<i>
</I>&gt;<i> Here are the source files I included:
</I>&gt;<i> DataGrid.cs - creates a DataGrid for Gtk# with data binding support.
</I>&gt;<i> TestDataGrid.cs - tests the gtk# data grid
</I>&gt;<i>
</I>&gt;<i> Basically, you can take a pre-loaded DataTable, and then &quot;data bind&quot; it to
</I>&gt;<i> the DataGrid.  It may not be true data binding like SWF or webforms, but its
</I>&gt;<i> an attempt.
</I>&gt;<i>
</I>&gt;<i> A change to the data in the DataGrid w! ill update the data in the
</I>&gt;<i> DataTable.
</I>&gt;<i> If you add a row or delete a row in the DataGrid, it will be reflected in
</I>&gt;<i> the DataTable.  If you modify a cell in the DataGrid, the row and column in
</I>&gt;<i> the DataTable will be updated.
</I>&gt;<i>
</I>&gt;<i> In the test, there are four menu items:
</I>&gt;<i> 1. Add Row - adds a row
</I>&gt;<i> 2. Dump Table - dumps to the console what's in the DataTable
</I>&gt;<i> 3. Editable - sets the DataGrid editable or not
</I>&gt;<i> 4. Delete Selected Row - deletes the highlighted row
</I>&gt;<i>
</I>&gt;<i> One thing I would love to see added is an Input Mask and Format properties
</I>&gt;<i> added to each column.   Let's say you would like to format dates as a short
</I>&gt;<i> date, you would put &quot;Short Date&quot; in the format property for any locale.  Or
</I>&gt;<i> you could set it to &quot;MM/DD/YYYY&quot; for US locale..   A numeric column you
</I>&gt;<i> could have it format as &quot;###,###,###.##&quot; or just simply say &quot;Currency&quot; for
</I>&gt;<i> any locale.
</I>&gt;<i> An input mask could limit certain characters, such as, alpha only, nu! meric
</I>&gt;<i> only, alphanumeric.  Canadian postal code i believe is alpha, numeric,
</I>&gt;<i> alpha, space, numeric, alpha, numeric.  So your input mask would be: &quot;ANA
</I>&gt;<i> NAN&quot;.
</I>&gt;<i>
</I>&gt;<i> Anyways, please let me know if this is what you wanted.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Christian Hergert &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">christian.hergert at gmail.com</A>&gt; wrote:
</I>&gt;<i> The original version of the datagrid i put in monodevelop was taken
</I>&gt;<i> from sqlsharpgtk. Daniel has since done some additions to the
</I>&gt;<i> monodevelop version to support basic editing and deletion. It also had
</I>&gt;<i> support for somewhat of a managed tree model. To be honest, im not
</I>&gt;<i> sure if ive merged that support yet. Both versions are a hack
</I>&gt;<i> regardless.
</I>&gt;<i>
</I>&gt;<i> Your example below will not work. First, you cant add an object to a
</I>&gt;<i> gtk container that doesnt inherit from Gtk.Widget. Secondly, even if
</I>&gt;<i> it did work, you would have just doubled your requirements on every
</I>&gt;<i> platform to both gtk and swf.
</I>&gt;<i>
</I>&gt;<i> -- Christian
</I>&gt;<i>
</I>&gt;<i> On 11/17/05, Gennadiy Donchyts wrote:
</I>&gt;<i> &gt; Hi all,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I'm wondering if there is some DataGrid-like control available for
</I>&gt;<i> &gt; Gtk# which has data-binding implemented. For now I've found 2
</I>&gt;<i> &gt; DataGirds in the (1) sqlsharpgtk and (2) MD, which one of these is the
</I>&gt;<i> &gt; latest and will be updated in the future?.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Also there is implementation of the (3) SWF DataGrid ...quite complex
</I>&gt;<i> &gt; and still in development but looks very nice also.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The question is if will be theoretically possible to use SWF DataGrid
</I>&gt;<i> instead of
</I>&gt;<i> &gt; Gtk# controls, so to implement something like (Gtk &lt;=&gt; Swf bridge):
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; using Swf = System.Windows.Forms;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Swf.DataGrid grid = new Swf.DataGrid();
</I>&gt;<i> &gt; Gtk.Window w = new Gtk.Window();
</I>&gt;<i> &gt; window.Add(grid);
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Since I need everything to be cross! -platform and stable for my
</I>&gt;<i> application the
</I>&gt;<i> &gt; Gtk# was chosen for gui development. After some play I managed to run a
</I>&gt;<i> nice
</I>&gt;<i> &gt; test (see below), but then it came to the point when it is necessary
</I>&gt;<i> &gt; to extend it
</I>&gt;<i> &gt; quite a lot (add events, properties, etc.) , so my second question is
</I>&gt;<i> &gt; if someone is
</I>&gt;<i> &gt; already doing or plan to continue development of that class?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Best regards,
</I>&gt;<i> &gt; --Gena
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; -----------
</I>&gt;<i> &gt; Test using SqlSharp DataGrid
</I>&gt;<i> &gt; (NHibernate =&gt; IList =&gt; ObjectViews =&gt; (1, Gtk) DataGrid:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; ...
</I>&gt;<i> &gt; class Project
</I>&gt;<i> &gt; {
</I>&gt;<i> &gt; private int id;
</I>&gt;<i> &gt; private string name;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; public int ID { get ... }
</I>&gt;<i> &gt; public string Name { get ... }
</I>&gt;<i> &gt; }
</I>&gt;<i> &gt; ...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; // load from db into IList using NHibernate
</I>&gt;<i> &gt; IList projects = session.Select(typeof(Project), null);
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; // create object view (ITypedList, IBindingList), see objectv! iews on
</I>&gt;<i> sourceforge
</I>&gt;<i> &gt; ObjevtView view = new ObjectView(typeof(Project));
</I>&gt;<i> &gt; view.Columns.Add(new ObjectViewColumn(&quot;ID&quot;));
</I>&gt;<i> &gt; view.Columns.Add(new ObjectViewColumn(&quot;Name&quot;));
</I>&gt;<i> &gt; view.DataSource = projects;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; // create and fill project table
</I>&gt;<i> &gt; DataGrid grid = new DataGrid();
</I>&gt;<i> &gt; grid.DataSource = vew;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; which gives me a nice table with 2 columns :):
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; ID Name
</I>&gt;<i> &gt; -----------------
</I>&gt;<i> &gt; 1 project1
</I>&gt;<i> &gt; 2 project2
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Gtk-sharp-list maillist - <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">Gtk-sharp-list at lists.ximian.com</A>
</I>&gt;<i> &gt;
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">http://lists.ximian.com/mailman/listinfo/gtk-sharp-list</A>
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Christian Hergert
</I>&gt;<i> Medsphere Systems Corporation
</I>&gt;<i> Software Programmer
</I>&gt;<i> C: 253 906 2115
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Gtk-sharp-list maillist - <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">Gtk-sharp-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">http://lists.ximian.com/mailman/listinfo/gtk-sharp-list</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ________________________________
</I>&gt;<i> Yahoo! FareChase - Search multiple travel sites in one click.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> // DataGrid.cs
</I>&gt;<i> namespace Mono.Data.GtkSharp
</I>&gt;<i> {
</I>&gt;<i>        // notice System.Data is not references here
</I>&gt;<i>
</I>&gt;<i>        using System;
</I>&gt;<i>        using System.Collections;
</I>&gt;<i>        using System.ComponentModel;
</I>&gt;<i>        using System.Reflection;
</I>&gt;<i>        using System.Runtime.InteropServices;
</I>&gt;<i>        using System.Text;
</I>&gt;<i>
</I>&gt;<i>        using GLib;
</I>&gt;<i>        using Gtk;
</I>&gt;<i>
</I>&gt;<i>        public class DataGridColumn
</I>&gt;<i>        {
</I>&gt;<i>                private string columnName = &quot;&quot;;
</I>&gt;<i>                private TreeViewColumn treeViewColumn = null;
</I>&gt;<i>                public CellRendererText Renderer = null; // should be
</I>&gt;<i> internal
</I>&gt;<i>
</I>&gt;<i>                public string ColumnName {
</I>&gt;<i>                        get {
</I>&gt;<i>                                return columnName;
</I>&gt;<i>                        }
</I>&gt;<i>                        set {
</I>&gt;<i>                                columnName = value;
</I>&gt;<i>                        }
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                public TreeViewColumn TreeViewColumn {
</I>&gt;<i>                        get {
</I>&gt;<i>                                return treeViewColumn;
</I>&gt;<i>                        }
</I>&gt;<i>                        set {
</I>&gt;<i>                                treeViewColumn = value;
</I>&gt;<i>                        }
</I>&gt;<i>                }
</I>&gt;<i>        }
</I>&gt;<i>
</I>&gt;<i>        public class DataGrid : VBox {
</I>&gt;<i>                private ListStore store;
</I>&gt;<i>                private TreeView treeView;
</I>&gt;<i>
</I>&gt;<i>                public ArrayList gridColumns; // TODO: make Columns a
</I>&gt;<i> collection
</I>&gt;<i>
</I>&gt;<i>                public DataGrid () : base(false, 4) {
</I>&gt;<i>                        ScrolledWindow sw = new ScrolledWindow ();
</I>&gt;<i>                        this.PackStart (sw, true, true, 0);
</I>&gt;<i>
</I>&gt;<i>                        treeView = new TreeView (store);
</I>&gt;<i>                        treeView.HeadersVisible = true;
</I>&gt;<i>                        //treeView.ModifyFont
</I>&gt;<i> (Pango.FontDescription.FromString (&quot;courier new&quot;));
</I>&gt;<i>
</I>&gt;<i>                        gridColumns = new ArrayList(0);
</I>&gt;<i>
</I>&gt;<i>                        sw.Add (treeView);
</I>&gt;<i>
</I>&gt;<i>                        store = new ListStore (GLib.GType.String);
</I>&gt;<i>
</I>&gt;<i>                        treeView.EnableSearch = true;
</I>&gt;<i>                        treeView.HeadersClickable = true;
</I>&gt;<i>                        dataMember = &quot;&quot;;
</I>&gt;<i>                        dataSource = null;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                ArrayList bindrows = null;
</I>&gt;<i>                object resolvedDataSource = null;
</I>&gt;<i>
</I>&gt;<i>                private bool editable = true;
</I>&gt;<i>
</I>&gt;<i>                private object dataSource;
</I>&gt;<i>
</I>&gt;<i>                private string dataMember;
</I>&gt;<i>
</I>&gt;<i>                public int SelectedRow {
</I>&gt;<i>                        get {
</I>&gt;<i>                                TreeIter iter;
</I>&gt;<i>                                TreeModel model;
</I>&gt;<i>                                TreeSelection selection = treeView.Selection;
</I>&gt;<i>                                if (selection.GetSelected (out model, out
</I>&gt;<i> iter)) {
</I>&gt;<i>                                        TreePath[] path =
</I>&gt;<i> selection.GetSelectedRows (out model);
</I>&gt;<i>                                        return path[0].Indices[0]; // return
</I>&gt;<i> selected row
</I>&gt;<i>                                }
</I>&gt;<i>                                else
</I>&gt;<i>                                        return -1; // not selected
</I>&gt;<i>                        }
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                public TreeIter SelectedIter {
</I>&gt;<i>                        get {
</I>&gt;<i>                                TreeIter iter;
</I>&gt;<i>                                TreeModel model;
</I>&gt;<i>                                TreeSelection selection = treeView.Selection;
</I>&gt;<i>                                if (selection.GetSelected (out model, out
</I>&gt;<i> iter))
</I>&gt;<i>                                        return iter; // return seelcted iter
</I>&gt;<i>                                else
</I>&gt;<i>                                        return TreeIter.Zero; // not selected
</I>&gt;<i>                        }
</I>&gt;<i>
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                public TreeView View
</I>&gt;<i>                {
</I>&gt;<i>                        get
</I>&gt;<i>                        {
</I>&gt;<i>                                return treeView;
</I>&gt;<i>                        }
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                public object DataSource
</I>&gt;<i>                {
</I>&gt;<i>                        get
</I>&gt;<i>                        {
</I>&gt;<i>                                return dataSource;
</I>&gt;<i>                        }
</I>&gt;<i>                        set
</I>&gt;<i>                        {
</I>&gt;<i>                                dataSource = value;
</I>&gt;<i>                        }
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                public string DataMember
</I>&gt;<i>                {
</I>&gt;<i>                        get
</I>&gt;<i>                        {
</I>&gt;<i>                                return dataMember;
</I>&gt;<i>                        }
</I>&gt;<i>                        set
</I>&gt;<i>                        {
</I>&gt;<i>                                dataMember = value;
</I>&gt;<i>                        }
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                public ListStore Store
</I>&gt;<i>                {
</I>&gt;<i>                        get
</I>&gt;<i>                        {
</I>&gt;<i>                                return store;
</I>&gt;<i>                        }
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                public ArrayList Columns
</I>&gt;<i>                {
</I>&gt;<i>                        get
</I>&gt;<i>                        {
</I>&gt;<i>                                return gridColumns;
</I>&gt;<i>                        }
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                public bool Editable {
</I>&gt;<i>                        get {
</I>&gt;<i>                                return editable; // not a good way to see if
</I>&gt;<i> its editable or not
</I>&gt;<i>                                // because various columns could be editable
</I>&gt;<i> and others non-editable
</I>&gt;<i>                        }
</I>&gt;<i>
</I>&gt;<i>                        set {
</I>&gt;<i>                                editable = value;
</I>&gt;<i>                                if (value == true) {
</I>&gt;<i>                                        for(int c = 0; c &lt; gridColumns.Count;
</I>&gt;<i> c++) {
</I>&gt;<i>                                                DataGridColumn col =
</I>&gt;<i> (DataGridColumn) gridColumns[c];
</I>&gt;<i>                                                col.TreeViewColumn.Clickable
</I>&gt;<i> = true;
</I>&gt;<i>                                                col.Renderer.Mode =
</I>&gt;<i> CellRendererMode.Editable;
</I>&gt;<i>                                                col.Renderer.Editable = true;
</I>&gt;<i>                                        }
</I>&gt;<i>                                        treeView.RulesHint = true;
</I>&gt;<i>                                        treeView.Selection.Mode =
</I>&gt;<i> SelectionMode.Single;
</I>&gt;<i>                                }
</I>&gt;<i>                                else {
</I>&gt;<i>                                        for(int c = 0; c &lt; gridColumns.Count;
</I>&gt;<i> c++) {
</I>&gt;<i>                                                DataGridColumn col =
</I>&gt;<i> (DataGridColumn) gridColumns[c];
</I>&gt;<i>                                                col.TreeViewColumn.Clickable
</I>&gt;<i> = false;
</I>&gt;<i>                                                col.Renderer.Mode =
</I>&gt;<i> CellRendererMode.Inert;
</I>&gt;<i>                                                col.Renderer.Editable =
</I>&gt;<i> false;
</I>&gt;<i>                                        }
</I>&gt;<i>                                        treeView.RulesHint = false;
</I>&gt;<i>                                        treeView.Selection.Mode =
</I>&gt;<i> SelectionMode.Single;
</I>&gt;<i>                                }
</I>&gt;<i>                        }
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                public int AddNew()
</I>&gt;<i>                {
</I>&gt;<i>                        // TODO: need to check if resolved data source is not
</I>&gt;<i> null
</I>&gt;<i>
</I>&gt;<i>                        IBindingList b = (IBindingList) resolvedDataSource;
</I>&gt;<i>
</I>&gt;<i>                        if (b.AllowNew) {
</I>&gt;<i>                                object obj = b.AddNew();
</I>&gt;<i>                                if (obj == null) {
</I>&gt;<i>                                        //Console.Error.WriteLine(&quot;obj is
</I>&gt;<i> null&quot;);
</I>&gt;<i>                                }
</I>&gt;<i>                                else {
</I>&gt;<i>
</I>&gt;<i> //Console.Error.WriteLine(&quot;Type: &quot; +
</I>&gt;<i> obj.GetType().ToString());
</I>&gt;<i>                                        bindrows.Add(obj);
</I>&gt;<i>
</I>&gt;<i>                                        TreeIter iter = NewRow();
</I>&gt;<i>                                        for(int i = 0; i &lt; gridColumns.Count;
</I>&gt;<i> i++)
</I>&gt;<i>                                                SetColumnValue (iter, i,
</I>&gt;<i> String.Empty);
</I>&gt;<i>
</I>&gt;<i>                                        return bindrows.Count - 1;
</I>&gt;<i>                                }
</I>&gt;<i>                        }
</I>&gt;<i>
</I>&gt;<i>                        return -1;
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                public int DeleteRow(int row)
</I>&gt;<i>                {
</I>&gt;<i>                        if (row &lt; 0)
</I>&gt;<i>                                return -1; // should throw an exception - out
</I>&gt;<i> of range
</I>&gt;<i>
</I>&gt;<i>                        TreeIter iter = TreeIter.Zero;
</I>&gt;<i>                        if (store.IterNthChild(out iter, row) == false)
</I>&gt;<i>                                return -1;
</I>&gt;<i>
</I>&gt;<i>                        IBindingList b = (IBindingList) resolvedDataSource;
</I>&gt;<i>                        if (b.AllowRemove) {
</I>&gt;<i>                                IList list = (IList) resolvedDataSource;
</I>&gt;<i>                                bindrows.RemoveAt(row);
</I>&gt;<i>                                store.Remove (ref iter);
</I>&gt;<i>                                list.RemoveAt (row);
</I>&gt;<i>
</I>&gt;<i>                                return row;
</I>&gt;<i>                        }
</I>&gt;<i>
</I>&gt;<i>                        return -1;
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                // sets the column count.  beware, it clears
</I>&gt;<i>                // use this if you are going to load each column and row
</I>&gt;<i> yourself
</I>&gt;<i>                // instead of using DataBind() or DataLoad()
</I>&gt;<i>                public void SetColumnCount (int columnCount)
</I>&gt;<i>                {
</I>&gt;<i>                        Clear ();
</I>&gt;<i>                        dataMember = &quot;&quot;;
</I>&gt;<i>                        dataSource = null;
</I>&gt;<i>
</I>&gt;<i>                        GLib.GType[] theTypes = new GLib.GType[columnCount];
</I>&gt;<i>                        gridColumns = new ArrayList ();
</I>&gt;<i>                        for (int col = 0; col &lt; columnCount; col++)
</I>&gt;<i>                        {
</I>&gt;<i>                                theTypes[col] = GLib.GType.String;
</I>&gt;<i>                                gridColumns.Add (new DataGridColumn ());
</I>&gt;<i>                        }
</I>&gt;<i>                        store.ColumnTypes = theTypes;
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                // load data from a data table or data set
</I>&gt;<i>                public long DataBind ()
</I>&gt;<i>                {
</I>&gt;<i>                        long rowsRetrieved = 0;
</I>&gt;<i>
</I>&gt;<i>                        Clear ();
</I>&gt;<i>
</I>&gt;<i>                        System.Object o = null;
</I>&gt;<i>                        o = GetResolvedDataSource (DataSource, DataMember);
</I>&gt;<i>                        resolvedDataSource = o;
</I>&gt;<i>                        IEnumerable ie = (IEnumerable) o;
</I>&gt;<i>                        ITypedList tlist = (ITypedList) o;
</I>&gt;<i>                        TreeIter iter = new TreeIter ();
</I>&gt;<i>
</I>&gt;<i>                        PropertyDescriptorCollection pdc =
</I>&gt;<i> tlist.GetItemProperties (new PropertyDescriptor[0]);
</I>&gt;<i>                        gridColumns = new ArrayList(pdc.Count);
</I>&gt;<i>
</I>&gt;<i>                        // define the columns in the treeview store
</I>&gt;<i>                        // based on the schema of the result
</I>&gt;<i>                        GLib.GType[] theTypes = new GLib.GType[pdc.Count];
</I>&gt;<i>                        for (int col = 0; col &lt; pdc.Count; col++) {
</I>&gt;<i>                                theTypes[col] = GLib.GType.String;
</I>&gt;<i>                        }
</I>&gt;<i>                        store.ColumnTypes = theTypes;
</I>&gt;<i>
</I>&gt;<i>                        bindrows = new ArrayList();
</I>&gt;<i>
</I>&gt;<i>                        int colndx = -1;
</I>&gt;<i>                        foreach (PropertyDescriptor pd in pdc) {
</I>&gt;<i>
</I>&gt;<i>                                colndx ++;
</I>&gt;<i>
</I>&gt;<i>                                DataGridColumn gridCol = new DataGridColumn
</I>&gt;<i> ();
</I>&gt;<i>                                gridCol.ColumnName = pd.Name;
</I>&gt;<i>                                gridColumns.Add (gridCol);
</I>&gt;<i>                        }
</I>&gt;<i>
</I>&gt;<i>                        bindrows = new ArrayList();
</I>&gt;<i>
</I>&gt;<i>                        foreach (System.Object obj in ie) {
</I>&gt;<i>                                ICustomTypeDescriptor custom =
</I>&gt;<i> (ICustomTypeDescriptor) obj;
</I>&gt;<i>                                PropertyDescriptorCollection properties =
</I>&gt;<i> custom.GetProperties ();
</I>&gt;<i>
</I>&gt;<i>                                bindrows.Add(obj);
</I>&gt;<i>
</I>&gt;<i>                                rowsRetrieved ++;
</I>&gt;<i>                                iter = NewRow ();
</I>&gt;<i>                                int cv = 0;
</I>&gt;<i>                                foreach (PropertyDescriptor property in
</I>&gt;<i> properties) {
</I>&gt;<i>                                        object oPropValue = property.GetValue
</I>&gt;<i> (obj);
</I>&gt;<i>                                        string sPropValue = &quot;&quot;;
</I>&gt;<i>                                        if (oPropValue.GetType ().ToString
</I>&gt;<i> ().Equals(&quot;System.Byte[]&quot;))  {
</I>&gt;<i>                                                //sPropValue =
</I>&gt;<i> SqlSharpGtk.GetHexString ((byte[]) oPropValue);
</I>&gt;<i>
</I>&gt;<i> Console.Error.WriteLine(&quot;Byte[]  value&quot;);
</I>&gt;<i>                                        }
</I>&gt;<i>                                        else
</I>&gt;<i>                                                sPropValue =
</I>&gt;<i> oPropValue.ToString ();
</I>&gt;<i>
</I>&gt;<i>                                        SetColumnValue (iter, cv,
</I>&gt;<i> sPropValue);
</I>&gt;<i>                                        cv++;
</I>&gt;<i>                                }
</I>&gt;<i>                        }
</I>&gt;<i>
</I>&gt;<i>                        treeView.Model = store;
</I>&gt;<i>                        AutoCreateTreeViewColumns ();
</I>&gt;<i>                        return rowsRetrieved;
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                // borrowed from Mono's System.Web implementation
</I>&gt;<i>                protected IEnumerable GetResolvedDataSource(object source,
</I>&gt;<i> string member)
</I>&gt;<i>                {
</I>&gt;<i>                        if (source != null &amp;&amp; source is IListSource) {
</I>&gt;<i>                                IListSource src = (IListSource) source;
</I>&gt;<i>                                IList list = src.GetList ();
</I>&gt;<i>                                if (!src.ContainsListCollection) {
</I>&gt;<i>                                        return list;
</I>&gt;<i>                                }
</I>&gt;<i>                                if (list != null &amp;&amp; list is ITypedList) {
</I>&gt;<i>
</I>&gt;<i>                                        ITypedList tlist = (ITypedList) list;
</I>&gt;<i>                                        PropertyDescriptorCollection pdc =
</I>&gt;<i> tlist.GetItemProperties (new PropertyDescriptor[0]);
</I>&gt;<i>                                        if (pdc != null &amp;&amp; pdc.Count &gt; 0) {
</I>&gt;<i>                                                PropertyDescriptor pd = null;
</I>&gt;<i>                                                if (member != null &amp;&amp;
</I>&gt;<i> member.Length &gt; 0) {
</I>&gt;<i>                                                        pd = pdc.Find
</I>&gt;<i> (member, true);
</I>&gt;<i>                                                } else {
</I>&gt;<i>                                                        pd = pdc[0];
</I>&gt;<i>                                                }
</I>&gt;<i>                                                if (pd != null) {
</I>&gt;<i>                                                        object rv =
</I>&gt;<i> pd.GetValue (list[0]);
</I>&gt;<i>                                                        if (rv != null &amp;&amp; rv
</I>&gt;<i> is IEnumerable) {
</I>&gt;<i>                                                                return
</I>&gt;<i> (IEnumerable)rv;
</I>&gt;<i>                                                        }
</I>&gt;<i>                                                }
</I>&gt;<i>                                                throw new Exception
</I>&gt;<i> (&quot;ListSource_Missing_DataMember&quot;);
</I>&gt;<i>                                        }
</I>&gt;<i>                                        throw new Exception
</I>&gt;<i> (&quot;ListSource_Without_DataMembers&quot;);
</I>&gt;<i>                                }
</I>&gt;<i>                        }
</I>&gt;<i>                        if (source is IEnumerable) {
</I>&gt;<i>                                return (IEnumerable)source;
</I>&gt;<i>                        }
</I>&gt;<i>                        return null;
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                public void Clear ()
</I>&gt;<i>                {
</I>&gt;<i>                        if (store != null)
</I>&gt;<i>                        {
</I>&gt;<i>                                store.Clear ();
</I>&gt;<i>                                store = null;
</I>&gt;<i>                                store = new ListStore (GLib.GType.String);
</I>&gt;<i>                        }
</I>&gt;<i>                        else
</I>&gt;<i>                                store = new ListStore (GLib.GType.String);
</I>&gt;<i>
</I>&gt;<i>                        if (gridColumns != null)
</I>&gt;<i>                        {
</I>&gt;<i>                                for (int c = 0; c &lt; gridColumns.Count; c++)
</I>&gt;<i>                                {
</I>&gt;<i>                                        DataGridColumn gridCol =
</I>&gt;<i> (DataGridColumn) gridColumns[c];
</I>&gt;<i>                                        if (gridCol.TreeViewColumn != null)
</I>&gt;<i>                                        {
</I>&gt;<i>                                                treeView.RemoveColumn
</I>&gt;<i> (gridCol.TreeViewColumn);
</I>&gt;<i>                                                gridCol.TreeViewColumn =
</I>&gt;<i> null;
</I>&gt;<i>                                        }
</I>&gt;<i>                                }
</I>&gt;<i>                                gridColumns.Clear ();
</I>&gt;<i>                                gridColumns = null;
</I>&gt;<i>                        }
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                public TreeIter NewRow ()
</I>&gt;<i>                {
</I>&gt;<i>                        return store.Append();
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                public void AddRow (object[] columnValues)
</I>&gt;<i>                {
</I>&gt;<i>                        TreeIter iter = NewRow ();
</I>&gt;<i>                        for(int col = 0; col &lt; columnValues.Length; col++) {
</I>&gt;<i>                                string cellValue = columnValues[col].ToString
</I>&gt;<i> ();
</I>&gt;<i>                                SetColumnValue (iter, col, cellValue);
</I>&gt;<i>                        }
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                public void SetColumnValue (TreeIter iter, int column, string
</I>&gt;<i> value)
</I>&gt;<i>                {
</I>&gt;<i>                        GLib.Value cell = new GLib.Value (value);
</I>&gt;<i>                        store.SetValue (iter, column, cell);
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                public void SetColumnValue (TreeIter iter, int column, byte[]
</I>&gt;<i> value)
</I>&gt;<i>                {
</I>&gt;<i>                        //string svalue = SqlSharpGtk.GetHexString (value);
</I>&gt;<i>                        //SetColumnValue (iter, column, svalue);
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                private void AutoCreateTreeViewColumns ()
</I>&gt;<i>                {
</I>&gt;<i>                        for(int col = 0; col &lt; gridColumns.Count; col++) {
</I>&gt;<i>                                // escape underscore _ because it is used
</I>&gt;<i>                                // as the underline in menus and labels
</I>&gt;<i>                                StringBuilder name = new StringBuilder ();
</I>&gt;<i>                                foreach (char ch in ((DataGridColumn)
</I>&gt;<i> gridColumns[col]).ColumnName) {
</I>&gt;<i>                                        if (ch == '_')
</I>&gt;<i>                                                name.Append (&quot;__&quot;);
</I>&gt;<i>                                        else
</I>&gt;<i>                                                name.Append (ch);
</I>&gt;<i>                                }
</I>&gt;<i>                                TreeViewColumn tvc = CreateColumn (col,
</I>&gt;<i> name.ToString ());
</I>&gt;<i>                                AppendColumn (tvc);
</I>&gt;<i>                        }
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                public int AppendColumn(TreeViewColumn tvc)
</I>&gt;<i>                {
</I>&gt;<i>                        return treeView.AppendColumn (tvc);
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                private void TextCellEdited (object o, EditedArgs args)
</I>&gt;<i>                {
</I>&gt;<i>                        IBindingList b = (IBindingList) resolvedDataSource;
</I>&gt;<i>                        if (b.AllowEdit) {
</I>&gt;<i>                                // ITypedList may help you figure out how to
</I>&gt;<i> convert
</I>&gt;<i>                                // between different data types
</I>&gt;<i>                                // such as, how to display numbers, dates,
</I>&gt;<i> etc...
</I>&gt;<i>
</I>&gt;<i>                                TreePath path = new TreePath (args.Path);
</I>&gt;<i>                                TreeIter iter;
</I>&gt;<i>                                store.GetIter (out iter, path);
</I>&gt;<i>                                int i = path.Indices[0];
</I>&gt;<i>
</I>&gt;<i>                                TreePath cpath;
</I>&gt;<i>                                string cellValue = args.NewText;
</I>&gt;<i>
</I>&gt;<i>                                TreeViewColumn tvcolumn;
</I>&gt;<i>                                treeView.GetCursor (out cpath, out tvcolumn);
</I>&gt;<i>                                int c = 0;
</I>&gt;<i>                                for(c = 0; c &lt; gridColumns.Count; c++) {
</I>&gt;<i>                                        TreeViewColumn tvc =
</I>&gt;<i> ((DataGridColumn) gridColumns[c]).TreeViewColumn;
</I>&gt;<i>                                        if (tvcolumn == tvc) {
</I>&gt;<i>
</I>&gt;<i> Console.Error.WriteLine(&quot;Column clicked:  Column Name: &quot; + tvcolumn.Title);
</I>&gt;<i>                                                Console.Error.WriteLine(&quot;
</I>&gt;<i> Ordinal: &quot; + c.ToString());
</I>&gt;<i>                                                break;
</I>&gt;<i>                                        }
</I>&gt;<i>                                }
</I>&gt;<i>
</I>&gt;<i>                                if (c &gt;= gridColumns.Count)
</I>&gt;<i>                                        Console.Error.WriteLine(&quot;tv col not
</I>&gt;<i> found&quot;);
</I>&gt;<i>
</I>&gt;<i>                                ICustomTypeDescriptor custom =
</I>&gt;<i> (ICustomTypeDescriptor) bindrows[i];
</I>&gt;<i>                                PropertyDescriptorCollection properties =
</I>&gt;<i> custom.GetProperties ();
</I>&gt;<i>                                PropertyDescriptor pd = properties[c];
</I>&gt;<i>                                pd.SetValue(bindrows[i], cellValue);
</I>&gt;<i>
</I>&gt;<i>                                Console.Error.WriteLine(&quot;    Row number: &quot; +
</I>&gt;<i> path.Indices[0].ToString());
</I>&gt;<i>                                Console.Error.WriteLine(&quot;    Cell Value: &quot; +
</I>&gt;<i> cellValue);
</I>&gt;<i>
</I>&gt;<i>                                ((IEditableObject) bindrows[i]).BeginEdit();
</I>&gt;<i>                                SetColumnValue(iter, c, cellValue);
</I>&gt;<i>                                ((IEditableObject) bindrows[i]).EndEdit();
</I>&gt;<i>                        }
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                public TreeViewColumn CreateColumn (int columnNum, string
</I>&gt;<i> columnName)
</I>&gt;<i>                {
</I>&gt;<i>                        TreeViewColumn treeViewCol = new TreeViewColumn ();
</I>&gt;<i>                        CellRendererText renderer = new CellRendererText ();
</I>&gt;<i>                        treeViewCol.Clickable = true;
</I>&gt;<i>                        treeView.RulesHint = true;
</I>&gt;<i>
</I>&gt;<i>                        treeView.Selection.Mode = SelectionMode.Single;
</I>&gt;<i>                        //treeView.Selection.Mode = SelectionMode.Multiple;
</I>&gt;<i>
</I>&gt;<i>                        // Editable, Activatable, Inert
</I>&gt;<i>                        renderer.Mode = CellRendererMode.Editable;
</I>&gt;<i>                        //renderer.Family = &quot;courier new&quot;;
</I>&gt;<i>                        renderer.Editable = true;
</I>&gt;<i>                        renderer.Edited += new EditedHandler
</I>&gt;<i> (TextCellEdited);
</I>&gt;<i>                        treeViewCol.Title = columnName;
</I>&gt;<i>                        treeViewCol.PackStart (renderer, true);
</I>&gt;<i>                        treeViewCol.AddAttribute (renderer, &quot;text&quot;,
</I>&gt;<i> columnNum);
</I>&gt;<i>
</I>&gt;<i>                        DataGridColumn gridCol = (DataGridColumn)
</I>&gt;<i> gridColumns[columnNum];
</I>&gt;<i>                        gridCol.Renderer = renderer;
</I>&gt;<i>                        gridCol.TreeViewColumn = treeViewCol;
</I>&gt;<i>
</I>&gt;<i>                        return treeViewCol;
</I>&gt;<i>                }
</I>&gt;<i>        }
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> // $ mcs /out:TestDataGrid.exe TestDataGrid.cs DataGrid.cs
</I>&gt;<i> -pkg:gtk-sharp-2.0 /r:System.Data.dll
</I>&gt;<i> // TestDataGrid.cs
</I>&gt;<i> namespace Mono.Data.GtkSharp
</I>&gt;<i> {
</I>&gt;<i>        using System;
</I>&gt;<i>        using System.Collections;
</I>&gt;<i>        using System.Collections.Specialized;
</I>&gt;<i>        using System.Configuration;
</I>&gt;<i>        using System.Data;
</I>&gt;<i>        using System.Data.Common;
</I>&gt;<i>        using System.Data.SqlTypes;
</I>&gt;<i>        using System.Text;
</I>&gt;<i>        using System.IO;
</I>&gt;<i>        using System.Reflection;
</I>&gt;<i>        using System.Runtime.Remoting;
</I>&gt;<i>        using System.Runtime.InteropServices;
</I>&gt;<i>        using System.Diagnostics;
</I>&gt;<i>
</I>&gt;<i>        using Gdk;
</I>&gt;<i>        using Gtk;
</I>&gt;<i>
</I>&gt;<i>        public class TestDataGrid
</I>&gt;<i>        {
</I>&gt;<i>                private DataTable table;
</I>&gt;<i>                private Gtk.Window win;
</I>&gt;<i>                private DataGrid grid;
</I>&gt;<i>                //private TextView textView;
</I>&gt;<i>
</I>&gt;<i>                public static readonly string ApplicationName = &quot;Gtk#
</I>&gt;<i> DataGrid Test&quot;;
</I>&gt;<i>
</I>&gt;<i>                public TestDataGrid ()
</I>&gt;<i>                {
</I>&gt;<i>                        CreateGui ();
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                public DataGrid Grid {
</I>&gt;<i>                        get {
</I>&gt;<i>                                return grid;
</I>&gt;<i>                        }
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                public void Show ()
</I>&gt;<i>                {
</I>&gt;<i>                        win.ShowAll ();
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                public void CreateGui ()
</I>&gt;<i>                {
</I>&gt;<i>                        win = new Gtk.Window (ApplicationName);
</I>&gt;<i>                        win.DeleteEvent += new Gtk.DeleteEventHandler
</I>&gt;<i> (OnWindow_Delete);
</I>&gt;<i>                        win.BorderWidth = 4;
</I>&gt;<i>                        win.SetDefaultSize (600, 500);
</I>&gt;<i>
</I>&gt;<i>                        VBox vbox = new VBox (false, 4);
</I>&gt;<i>                        win.Add (vbox);
</I>&gt;<i>
</I>&gt;<i>                        MenuBar mb = CreateMenuBar ();
</I>&gt;<i>                        vbox.PackStart (mb, false, false, 0);
</I>&gt;<i>
</I>&gt;<i>                        VPaned vpaned = new VPaned ();
</I>&gt;<i>                        vbox.PackStart (vpaned, true, true, 0);
</I>&gt;<i>                        grid = CreateOutputResultsDataGrid();
</I>&gt;<i>                        vpaned.Add1 (grid);
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                DataGrid CreateOutputResultsDataGrid ()
</I>&gt;<i>                {
</I>&gt;<i>                        DataGrid grid = new DataGrid ();
</I>&gt;<i>
</I>&gt;<i>                        //grid.View.ButtonReleaseEvent +=
</I>&gt;<i>                        //      new Gtk.ButtonReleaseEventHandler
</I>&gt;<i> (OnDataGridButtonRelease);
</I>&gt;<i>                        //grid.Editable = false;
</I>&gt;<i>
</I>&gt;<i>                        return grid;
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                void OnWindow_Delete (object o, Gtk.DeleteEventArgs args)
</I>&gt;<i>                {
</I>&gt;<i>                        QuitApplication();
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                void QuitApplication ()
</I>&gt;<i>                {
</I>&gt;<i>                        Application.Quit ();
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                public static void DoEvents ()
</I>&gt;<i>                {
</I>&gt;<i>                        while (Application.EventsPending ())
</I>&gt;<i>                                Application.RunIteration ();
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                public DataTable BuildDataTableSample()
</I>&gt;<i>                {
</I>&gt;<i>                        table = new DataTable();
</I>&gt;<i>
</I>&gt;<i>                        int maxColumns = 5;
</I>&gt;<i>                        int maxRows = 3;
</I>&gt;<i>
</I>&gt;<i>                        for(int i = 0; i &lt; maxColumns; i++) {
</I>&gt;<i>                                string columnName =
</I>&gt;<i> String.Format(&quot;Column{0}&quot;, i);
</I>&gt;<i>                                table.Columns.Add(columnName);
</I>&gt;<i>                        }
</I>&gt;<i>
</I>&gt;<i>                        for(int r = 0; r &lt; maxRows; r++) {
</I>&gt;<i>                                DataRow row = table.NewRow();
</I>&gt;<i>                                for(int c = 0; c &lt; table.Columns.Count; c++)
</I>&gt;<i> {
</I>&gt;<i>                                        string cellValue =
</I>&gt;<i> String.Format(&quot;(Row{0},Column{1})&quot;, r, c);
</I>&gt;<i>                                        row[c] = cellValue;
</I>&gt;<i>                                }
</I>&gt;<i>                                table.Rows.Add(row);
</I>&gt;<i>                        }
</I>&gt;<i>
</I>&gt;<i>                        return table;
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                void OnMenu_DumpTable (object o, EventArgs args)
</I>&gt;<i>                {
</I>&gt;<i>                        Console.Error.WriteLine(&quot;__===========  T a b l e
</I>&gt;<i> D u m p  =========__&quot;);
</I>&gt;<i>                        Console.Error.WriteLine(&quot;Row Count: &quot; +
</I>&gt;<i> table.Rows.Count.ToString());
</I>&gt;<i>                        for(int r = 0; r &lt; table.Rows.Count; r++) {
</I>&gt;<i>                                DataRow row = table.Rows[r];
</I>&gt;<i>                                StringBuilder sb = new StringBuilder();
</I>&gt;<i>                                for(int c = 0; c &lt; table.Columns.Count; c++)
</I>&gt;<i> {
</I>&gt;<i>                                        string s = row[c].ToString();
</I>&gt;<i>                                        sb.Append(s);
</I>&gt;<i>                                        sb.Append(&quot; &quot;);
</I>&gt;<i>                                }
</I>&gt;<i>                                Console.Error.WriteLine(sb.ToString());
</I>&gt;<i>                        }
</I>&gt;<i>
</I>&gt;<i> Console.Error.WriteLine(&quot;=-----------------------------------------------=&quot;);
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                void OnMenu_Editable (object o, EventArgs args)
</I>&gt;<i>                {
</I>&gt;<i>                        grid.Editable = !grid.Editable;
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                void OnMenu_AddNew (object o, EventArgs args)
</I>&gt;<i>                {
</I>&gt;<i>                        AddNew();
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                void OnMenu_DeleteSelectedRow (object o, EventArgs args)
</I>&gt;<i>                {
</I>&gt;<i>                        int selectedRow = 0;
</I>&gt;<i>                        selectedRow = grid.SelectedRow;
</I>&gt;<i>                        if (selectedRow &gt;= 0)
</I>&gt;<i>                                grid.DeleteRow (selectedRow);
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                void AddNew()
</I>&gt;<i>                {
</I>&gt;<i>                        grid.AddNew();
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                public MenuBar CreateMenuBar () {
</I>&gt;<i>                        MenuBar menuBar = new MenuBar ();
</I>&gt;<i>                        Menu menu;
</I>&gt;<i>                        MenuItem item;
</I>&gt;<i>                        MenuItem barItem;
</I>&gt;<i>
</I>&gt;<i>                        menu = new Menu ();
</I>&gt;<i>
</I>&gt;<i>                        item = new MenuItem (&quot;Add Row&quot;);
</I>&gt;<i>                        item.Activated += new EventHandler (OnMenu_AddNew);
</I>&gt;<i>                        menu.Append (item);
</I>&gt;<i>
</I>&gt;<i>                        item = new MenuItem (&quot;Dump Table&quot;);
</I>&gt;<i>                        item.Activated += new EventHandler
</I>&gt;<i> (OnMenu_DumpTable);
</I>&gt;<i>                        menu.Append (item);
</I>&gt;<i>
</I>&gt;<i>                        item = new MenuItem (&quot;Editable&quot;);
</I>&gt;<i>                        item.Activated += new EventHandler (OnMenu_Editable);
</I>&gt;<i>                        menu.Append (item);
</I>&gt;<i>
</I>&gt;<i>                        item = new MenuItem (&quot;Delete Selected Row&quot;);
</I>&gt;<i>                        item.Activated += new EventHandler
</I>&gt;<i> (OnMenu_DeleteSelectedRow);
</I>&gt;<i>                        menu.Append (item);
</I>&gt;<i>
</I>&gt;<i>                        barItem = new MenuItem (&quot;Test&quot;);
</I>&gt;<i>                        barItem.Submenu = menu;
</I>&gt;<i>                        menuBar.Append (barItem);
</I>&gt;<i>
</I>&gt;<i>                        return menuBar;
</I>&gt;<i>                }
</I>&gt;<i>
</I>&gt;<i>                public static int Main (string[] args)
</I>&gt;<i>                {
</I>&gt;<i>                        Application.Init ();
</I>&gt;<i>                        TestDataGrid test = new TestDataGrid ();
</I>&gt;<i>                        DataTable sampleTable = test.BuildDataTableSample();
</I>&gt;<i>                        test.Grid.DataSource = sampleTable;
</I>&gt;<i>                        test.Grid.DataBind();
</I>&gt;<i>                        test.Show ();
</I>&gt;<i>                        DoEvents ();
</I>&gt;<i>                        //test.Grid.Editable = false;
</I>&gt;<i>                        Application.Run ();
</I>&gt;<i>                        return 0;
</I>&gt;<i>                }
</I>&gt;<i>        }
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I></PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006593.html">[Gtk-sharp-list] DataGrid control, data binding, ObjectViews, Swf,
	Gtk
</A></li>
	<LI>Next message: <A HREF="006582.html">[Gtk-sharp-list] problem with compilation of ToolButton
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6603">[ date ]</a>
              <a href="thread.html#6603">[ thread ]</a>
              <a href="subject.html#6603">[ subject ]</a>
              <a href="author.html#6603">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
