<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] new Gdk.Pixbuf (svg_stream) fails on windows but works on unix
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20new%20Gdk.Pixbuf%20%28svg_stream%29%20fails%20on%20windows%0A%20but%20works%20on%20unix&In-Reply-To=e6613230810210014k3df0d690i4c09ba859d876a8e%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009139.html">
   <LINK REL="Next"  HREF="009142.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] new Gdk.Pixbuf (svg_stream) fails on windows but works on unix</H1>
    <B>Thomas Wach</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20new%20Gdk.Pixbuf%20%28svg_stream%29%20fails%20on%20windows%0A%20but%20works%20on%20unix&In-Reply-To=e6613230810210014k3df0d690i4c09ba859d876a8e%40mail.gmail.com"
       TITLE="[Gtk-sharp-list] new Gdk.Pixbuf (svg_stream) fails on windows but works on unix">th.wach at wach-it-solutions.de
       </A><BR>
    <I>Tue Oct 21 06:15:24 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="009139.html">[Gtk-sharp-list] new Gdk.Pixbuf (svg_stream) fails on windows	but works on unix
</A></li>
        <LI>Next message: <A HREF="009142.html">[Gtk-sharp-list] new Gdk.Pixbuf (svg_stream) fails on windows	but works on unix
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9141">[ date ]</a>
              <a href="thread.html#9141">[ thread ]</a>
              <a href="subject.html#9141">[ subject ]</a>
              <a href="author.html#9141">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hello Billy,

also a perfect hint! I inpsected my boxes for files named &quot;*loaders*&quot; and
found them as

Windows box ..: C:\Programme\Mono-2.0\etc\gtk-2.0\gdk-pixbuf.loaders
Linux box.........: /etc/gtk-2.0/i386-redhat-linux-gnu/gdk-pixbuf.loaders

Indeed, the file on the Windows box missed the entry for SVG.
So I added a copy of the related section from the Linux box to the file on
my Windows box as follows (modified the first line regaridng the file
location analog to all other entries in my windows file):

&quot;c:/devel/target/gtk+-2.10.6/lib/gtk-2.0/2.10.0/loaders/svg_loader.dll&quot;
&quot;svg&quot; 2 &quot;gtk20&quot; &quot;Scalable Vector Graphics&quot;
&quot;image/svg+xml&quot; &quot;image/svg&quot; &quot;image/svg-xml&quot; &quot;image/vnd.adobe.svg+xml&quot;
&quot;text/xml-svg&quot; &quot;image/svg+xml-compressed&quot; &quot;&quot;
&quot;svg&quot; &quot;svgz&quot; &quot;svg.gz&quot; &quot;&quot;
&quot; &lt;svg&quot; &quot;*    &quot; 100
&quot; &lt;!DOCTYPE svg&quot; &quot;*             &quot; 100

So far, the Pixbuf.Loaders enumeration on my Windows box now shows the type
svg!

But trying to create a pixbuf from a svg-resource now leads me to the same
problem as of direct loading svg-files:
The given module cannot be found.
In case of direct loading an file into an rsvg-object the complained module
was lib-rsvg2.dll.
In this case, creating a pixbuf from a svg-file the complained module is
svg_loader.dll.
But, of course, BOTH files exist in the correct place.

&quot;new Gdk.Pixbuf (svg-stream)&quot; now leads to:
GLib.GException: Bildlader-Modul konnte nicht geladen werden
(pictureloader-module could not be loaded):
C:\Programme\Mono-2.0/lib/gtk-2.0/2.10.0/loaders/svg_loader.dll: Das
angegebene Modul wurde nicht gefunden.
  at Gdk.PixbufLoader.Write (System.Byte[] buf, UInt64 count) [0x00000] 
  at Gdk.PixbufLoader.Write (System.Byte[] bytes, UInt32 count) [0x00000] 
  at Gdk.PixbufLoader.LoadFromStream (System.IO.Stream input) [0x00000] 
  at Gdk.PixbufLoader.InitFromStream (System.IO.Stream stream) [0x00000] 
  at Gdk.PixbufLoader..ctor (System.IO.Stream stream) [0x00000] 
  at Gdk.Pixbuf..ctor (System.IO.Stream stream) [0x00000] 
  at Stairs.Window1..ctor (System.String[] args) [0x00000] 

gdk-pixbuf-query-loaders.exe shows on the console:
g_module_open() failed for
C:\Programme\Mono-2.0/lib/gtk-2.0/2.10.0/loaders\svg_loader.dll: Das
angegebene Modul wurde nicht gefunden. (given module not found)

But prior it pops up messagebox that it could not find libcroco-0.6-3.dll
.....

This is the same file my early test with direct loading and creating of rsvg
objects leaded to.
Searching about libcroco did not give me very much information but it seems
to be a XML-helper for SAX or similar. Anyhow, on my Windows box there not
any file containing &quot;croco&quot; in its name. Neither lib* nor .dll nor .so, just
nothing..

Inspecting the svg_loader.so on my Linux box gave a long list of
dependencies, including the specified libcroco-0.6.so.3.

So It turns out to be a problem of a missing dll-file, though I thaught and
hoped it would not.

Conclusion: The problem is a missing libcroco, isn't it?
Someone got rid of that lib? Maybe an exsiting Windows-dll with another name
that could be mapped via dllmap in Mono-2.0/etc/config? Or a setup that
includes libcroco-0.6-3.dll for Windows boxes?

Kind regards
Thomas



Billy Schoenberg-2 wrote:
&gt;<i> 
</I>&gt;<i> Hello,
</I>&gt;<i> There is also a config file for GTK/GDK *gdk_pixbuf.loaders* which needs
</I>&gt;<i> to
</I>&gt;<i> be set up properly.  I know that I have had many issues using GTK on my
</I>&gt;<i> Win
</I>&gt;<i> XP and Vista boxes.
</I>&gt;<i> 
</I>&gt;<i> Billy
</I>&gt;<i> ______________________________________________
</I>&gt;<i> Gtk-sharp-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">Gtk-sharp-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">http://lists.ximian.com/mailman/listinfo/gtk-sharp-list</A>
</I>&gt;<i> 
</I>
-- 
View this message in context: <A HREF="http://www.nabble.com/new-Gdk.Pixbuf-%28svg_stream%29-fails-on-windows-but-works-on-unix-tp20055917p20086513.html">http://www.nabble.com/new-Gdk.Pixbuf-%28svg_stream%29-fails-on-windows-but-works-on-unix-tp20055917p20086513.html</A>
Sent from the Mono - Gtk# mailing list archive at Nabble.com.

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009139.html">[Gtk-sharp-list] new Gdk.Pixbuf (svg_stream) fails on windows	but works on unix
</A></li>
	<LI>Next message: <A HREF="009142.html">[Gtk-sharp-list] new Gdk.Pixbuf (svg_stream) fails on windows	but works on unix
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9141">[ date ]</a>
              <a href="thread.html#9141">[ thread ]</a>
              <a href="subject.html#9141">[ subject ]</a>
              <a href="author.html#9141">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
