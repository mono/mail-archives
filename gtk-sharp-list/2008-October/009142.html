<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] new Gdk.Pixbuf (svg_stream) fails on windows	but works on unix
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20new%20Gdk.Pixbuf%20%28svg_stream%29%20fails%20on%20windows%0A%09but%20works%20on%20unix&In-Reply-To=20086513.post%40talk.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009141.html">
   <LINK REL="Next"  HREF="009143.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] new Gdk.Pixbuf (svg_stream) fails on windows	but works on unix</H1>
    <B>Billy Schoenberg</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20new%20Gdk.Pixbuf%20%28svg_stream%29%20fails%20on%20windows%0A%09but%20works%20on%20unix&In-Reply-To=20086513.post%40talk.nabble.com"
       TITLE="[Gtk-sharp-list] new Gdk.Pixbuf (svg_stream) fails on windows	but works on unix">wasbridge at gmail.com
       </A><BR>
    <I>Tue Oct 21 09:39:34 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="009141.html">[Gtk-sharp-list] new Gdk.Pixbuf (svg_stream) fails on windows but works on unix
</A></li>
        <LI>Next message: <A HREF="009143.html">[Gtk-sharp-list] new Gdk.Pixbuf (svg_stream) fails on windows but works on unix
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9142">[ date ]</a>
              <a href="thread.html#9142">[ thread ]</a>
              <a href="subject.html#9142">[ subject ]</a>
              <a href="author.html#9142">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,
Whoa, now you are entering what I like to call the unknown zone.... for me I
try to read the error messages as best as I can and put the dll's its asking
for in the proper places.  There is also a file with the extension
.immodules that I think is important in processes like this.  For me its
located in the same directory as the .loaders file, but I have been using an
experimental medsphere installer.  If I was you I would go on a hunt for
your libcroco, and patch the build and send it along upstream.  Make sure
though that libcroco is cross platform, aka no improper PInvokes etc.

Billy

On Tue, Oct 21, 2008 at 12:15 PM, Thomas Wach
&lt;<A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">th.wach at wach-it-solutions.de</A>&gt;wrote:

&gt;<i>
</I>&gt;<i> Hello Billy,
</I>&gt;<i>
</I>&gt;<i> also a perfect hint! I inpsected my boxes for files named &quot;*loaders*&quot; and
</I>&gt;<i> found them as
</I>&gt;<i>
</I>&gt;<i> Windows box ..: C:\Programme\Mono-2.0\etc\gtk-2.0\gdk-pixbuf.loaders
</I>&gt;<i> Linux box.........: /etc/gtk-2.0/i386-redhat-linux-gnu/gdk-pixbuf.loaders
</I>&gt;<i>
</I>&gt;<i> Indeed, the file on the Windows box missed the entry for SVG.
</I>&gt;<i> So I added a copy of the related section from the Linux box to the file on
</I>&gt;<i> my Windows box as follows (modified the first line regaridng the file
</I>&gt;<i> location analog to all other entries in my windows file):
</I>&gt;<i>
</I>&gt;<i> &quot;c:/devel/target/gtk+-2.10.6/lib/gtk-2.0/2.10.0/loaders/svg_loader.dll&quot;
</I>&gt;<i> &quot;svg&quot; 2 &quot;gtk20&quot; &quot;Scalable Vector Graphics&quot;
</I>&gt;<i> &quot;image/svg+xml&quot; &quot;image/svg&quot; &quot;image/svg-xml&quot; &quot;image/vnd.adobe.svg+xml&quot;
</I>&gt;<i> &quot;text/xml-svg&quot; &quot;image/svg+xml-compressed&quot; &quot;&quot;
</I>&gt;<i> &quot;svg&quot; &quot;svgz&quot; &quot;svg.gz&quot; &quot;&quot;
</I>&gt;<i> &quot; &lt;svg&quot; &quot;*    &quot; 100
</I>&gt;<i> &quot; &lt;!DOCTYPE svg&quot; &quot;*             &quot; 100
</I>&gt;<i>
</I>&gt;<i> So far, the Pixbuf.Loaders enumeration on my Windows box now shows the type
</I>&gt;<i> svg!
</I>&gt;<i>
</I>&gt;<i> But trying to create a pixbuf from a svg-resource now leads me to the same
</I>&gt;<i> problem as of direct loading svg-files:
</I>&gt;<i> The given module cannot be found.
</I>&gt;<i> In case of direct loading an file into an rsvg-object the complained module
</I>&gt;<i> was lib-rsvg2.dll.
</I>&gt;<i> In this case, creating a pixbuf from a svg-file the complained module is
</I>&gt;<i> svg_loader.dll.
</I>&gt;<i> But, of course, BOTH files exist in the correct place.
</I>&gt;<i>
</I>&gt;<i> &quot;new Gdk.Pixbuf (svg-stream)&quot; now leads to:
</I>&gt;<i> GLib.GException: Bildlader-Modul konnte nicht geladen werden
</I>&gt;<i> (pictureloader-module could not be loaded):
</I>&gt;<i> C:\Programme\Mono-2.0/lib/gtk-2.0/2.10.0/loaders/svg_loader.dll: Das
</I>&gt;<i> angegebene Modul wurde nicht gefunden.
</I>&gt;<i>  at Gdk.PixbufLoader.Write (System.Byte[] buf, UInt64 count) [0x00000]
</I>&gt;<i>  at Gdk.PixbufLoader.Write (System.Byte[] bytes, UInt32 count) [0x00000]
</I>&gt;<i>  at Gdk.PixbufLoader.LoadFromStream (System.IO.Stream input) [0x00000]
</I>&gt;<i>   at Gdk.PixbufLoader.InitFromStream (System.IO.Stream stream) [0x00000]
</I>&gt;<i>  at Gdk.PixbufLoader..ctor (System.IO.Stream stream) [0x00000]
</I>&gt;<i>  at Gdk.Pixbuf..ctor (System.IO.Stream stream) [0x00000]
</I>&gt;<i>   at Stairs.Window1..ctor (System.String[] args) [0x00000]
</I>&gt;<i>
</I>&gt;<i> gdk-pixbuf-query-loaders.exe shows on the console:
</I>&gt;<i> g_module_open() failed for
</I>&gt;<i> C:\Programme\Mono-2.0/lib/gtk-2.0/2.10.0/loaders\svg_loader.dll: Das
</I>&gt;<i> angegebene Modul wurde nicht gefunden. (given module not found)
</I>&gt;<i>
</I>&gt;<i> But prior it pops up messagebox that it could not find libcroco-0.6-3.dll
</I>&gt;<i> .....
</I>&gt;<i>
</I>&gt;<i> This is the same file my early test with direct loading and creating of
</I>&gt;<i> rsvg
</I>&gt;<i> objects leaded to.
</I>&gt;<i> Searching about libcroco did not give me very much information but it seems
</I>&gt;<i> to be a XML-helper for SAX or similar. Anyhow, on my Windows box there not
</I>&gt;<i> any file containing &quot;croco&quot; in its name. Neither lib* nor .dll nor .so,
</I>&gt;<i> just
</I>&gt;<i> nothing..
</I>&gt;<i>
</I>&gt;<i> Inspecting the svg_loader.so on my Linux box gave a long list of
</I>&gt;<i> dependencies, including the specified libcroco-0.6.so.3.
</I>&gt;<i>
</I>&gt;<i> So It turns out to be a problem of a missing dll-file, though I thaught and
</I>&gt;<i> hoped it would not.
</I>&gt;<i>
</I>&gt;<i> Conclusion: The problem is a missing libcroco, isn't it?
</I>&gt;<i> Someone got rid of that lib? Maybe an exsiting Windows-dll with another
</I>&gt;<i> name
</I>&gt;<i> that could be mapped via dllmap in Mono-2.0/etc/config? Or a setup that
</I>&gt;<i> includes libcroco-0.6-3.dll for Windows boxes?
</I>&gt;<i>
</I>&gt;<i> Kind regards
</I>&gt;<i> Thomas
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Billy Schoenberg-2 wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Hello,
</I>&gt;<i> &gt; There is also a config file for GTK/GDK *gdk_pixbuf.loaders* which needs
</I>&gt;<i> &gt; to
</I>&gt;<i> &gt; be set up properly.  I know that I have had many issues using GTK on my
</I>&gt;<i> &gt; Win
</I>&gt;<i> &gt; XP and Vista boxes.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Billy
</I>&gt;<i> &gt; ______________________________________________
</I>&gt;<i> &gt; Gtk-sharp-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">Gtk-sharp-list at lists.ximian.com</A>
</I>&gt;<i> &gt; <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">http://lists.ximian.com/mailman/listinfo/gtk-sharp-list</A>
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> View this message in context:
</I>&gt;<i> <A HREF="http://www.nabble.com/new-Gdk.Pixbuf-%28svg_stream%29-fails-on-windows-but-works-on-unix-tp20055917p20086513.html">http://www.nabble.com/new-Gdk.Pixbuf-%28svg_stream%29-fails-on-windows-but-works-on-unix-tp20055917p20086513.html</A>
</I>&gt;<i> Sent from the Mono - Gtk# mailing list archive at Nabble.com.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Gtk-sharp-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">Gtk-sharp-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">http://lists.ximian.com/mailman/listinfo/gtk-sharp-list</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/gtk-sharp-list/attachments/20081021/4105a899/attachment.html">http://lists.ximian.com/pipermail/gtk-sharp-list/attachments/20081021/4105a899/attachment.html</A> 
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009141.html">[Gtk-sharp-list] new Gdk.Pixbuf (svg_stream) fails on windows but works on unix
</A></li>
	<LI>Next message: <A HREF="009143.html">[Gtk-sharp-list] new Gdk.Pixbuf (svg_stream) fails on windows but works on unix
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9142">[ date ]</a>
              <a href="thread.html#9142">[ thread ]</a>
              <a href="subject.html#9142">[ subject ]</a>
              <a href="author.html#9142">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
