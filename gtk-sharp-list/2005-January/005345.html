<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Patch to make Gtk.FileChooserDialog somewhat useable
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:Rafael%20Teixeira%20%3Cmonoman%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="005357.html">
   <LINK REL="Next"  HREF="005346.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Patch to make Gtk.FileChooserDialog somewhat useable
   </H1>
    <B>Rafael Teixeira
    </B> 
    <A HREF="mailto:Rafael%20Teixeira%20%3Cmonoman%40gmail.com%3E"
       TITLE="[Gtk-sharp-list] Patch to make Gtk.FileChooserDialog somewhat useable">Rafael Teixeira &lt;monoman@gmail.com&gt;
       </A><BR>
    <I>Mon, 24 Jan 2005 19:40:18 -0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="005357.html">[Gtk-sharp-list] Missing declaration in autotools stuff
</A></li>
        <LI> Next message: <A HREF="005346.html">[Gtk-sharp-list] Any news on bug 68713 (Encoding Problem)?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5345">[ date ]</a>
              <a href="thread.html#5345">[ thread ]</a>
              <a href="subject.html#5345">[ subject ]</a>
              <a href="author.html#5345">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>------=_Part_4940_5219300.1106602818956
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

With this patch in place this snippet runs:

		using (FileChooserDialog chooser = 
			new FileChooserDialog(&quot;Choose new picture file&quot;, Gtk.Stock.Open,
this.MainWindow, FileChooserAction.Open)) {
			chooser.SelectMultiple = false;
			ResponseType response = (ResponseType) chooser.Run();
			if (response == ResponseType.Accept) {
				Console.WriteLine(&quot;FileChooserDialog filename = '{0}'&quot;, chooser.Filename);
				myLife.PathToPhoto  = chooser.Filename;
			} else {
				Console.WriteLine(&quot;FileChooserDialog response = '{0}'&quot;, response);
			}
			chooser.Destroy();
		}

Hope it can be accepted,

-- 
Rafael &quot;Monoman&quot; Teixeira
---------------------------------------
I'm trying to become a &quot;Rosh Gadol&quot; before my own eyes. 
See <A HREF="http://www.joelonsoftware.com/items/2004/12/06.html">http://www.joelonsoftware.com/items/2004/12/06.html</A> for enlightment.

------=_Part_4940_5219300.1106602818956
Content-Type: text/x-patch; name=&quot;FileChooserDialog.diff&quot;
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment; filename=&quot;FileChooserDialog.diff&quot;

Index: FileChooserDialog.custom
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
--- FileChooserDialog.custom=09(revision 39432)
+++ FileChooserDialog.custom=09(working copy)
@@ -21,6 +21,29 @@
=20
=20
 =09=09[DllImport(&quot;libgtk-win32-2.0-0.dll&quot;)]
+=09=09static extern IntPtr gtk_file_chooser_dialog_new(string title, IntPt=
r parent, int action,=20
+=09=09=09string firstButtonText, int firstButtonResponse,=20
+=09=09=09string secondButtonText, int secondButtonResponse, IntPtr nil);
+
+=09=09public FileChooserDialog (string title, string acceptButtonText, Win=
dow parent, FileChooserAction action)
+=09=09{
+=09=09=09if (GetType () !=3D typeof (FileChooserDialog)) {
+=09=09=09=09CreateNativeObject (new string[0], new GLib.Value[0]);
+=09=09=09=09Title =3D title;
+=09=09=09=09if (parent !=3D null)
+=09=09=09=09=09TransientFor =3D parent;
+=09=09=09=09Action =3D action;
+=09=09=09=09return;
+=09=09=09}
+=09=09=09Raw =3D gtk_file_chooser_dialog_new (title, parent =3D=3D null ? =
IntPtr.Zero : parent.Handle, (int)action,=20
+=09=09=09=09=09Gtk.Stock.Cancel, (int)ResponseType.Cancel,
+=09=09=09=09=09acceptButtonText, (int)ResponseType.Accept,
+=09=09=09=09=09IntPtr.Zero);
+=09=09}
+=09=09
+=09=09
+
+=09=09[DllImport(&quot;libgtk-win32-2.0-0.dll&quot;)]
 =09=09static extern IntPtr gtk_file_chooser_dialog_new(string title, IntPt=
r parent, int action, IntPtr nil);
=20
 =09=09public FileChooserDialog (string title, Window parent, FileChooserAc=
tion action)
@@ -131,3 +154,5 @@
 =09=09=09=09return result;
 =09=09=09}
 =09=09}
+
+=20

------=_Part_4940_5219300.1106602818956--

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="005357.html">[Gtk-sharp-list] Missing declaration in autotools stuff
</A></li>
	<LI> Next message: <A HREF="005346.html">[Gtk-sharp-list] Any news on bug 68713 (Encoding Problem)?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5345">[ date ]</a>
              <a href="thread.html#5345">[ thread ]</a>
              <a href="subject.html#5345">[ subject ]</a>
              <a href="author.html#5345">[ author ]</a>
         </LI>
       </UL>
</body></html>
