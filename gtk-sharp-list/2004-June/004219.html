<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] broken bindings.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:lewing%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="004218.html">
   <LINK REL="Next"  HREF="004220.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] broken bindings.
   </H1>
    <B>Larry Ewing
    </B> 
    <A HREF="mailto:lewing%40ximian.com"
       TITLE="[Gtk-sharp-list] broken bindings.">lewing@ximian.com
       </A><BR>
    <I>Thu, 17 Jun 2004 23:47:30 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="004218.html">[Gtk-sharp-list] Underline in pango
</A></li>
        <LI> Next message: <A HREF="004220.html">[Gtk-sharp-list] broken bindings.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4219">[ date ]</a>
              <a href="thread.html#4219">[ thread ]</a>
              <a href="subject.html#4219">[ subject ]</a>
              <a href="author.html#4219">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--=-JjeBbV6fPmlgzjF+gjZS
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

So in the last couple of days I've run into some seriously broken
bindings.  I hear things are supposed to be api frozen but the
CanvasItem and Pixdata methods are basically useless without this patch.
The polygon change just seems reasonable if the freeze is already
broken.

--Larry

--=-JjeBbV6fPmlgzjF+gjZS
Content-Disposition: attachment; filename=api.patch
Content-Type: text/plain; name=api.patch; charset=ISO-8859-15
Content-Transfer-Encoding: 7bit

? art/gtk-sharp.pub
? atk/gtk-sharp.pub
? gconf/GConf/gtk-sharp.pub
? gconf/GConf.PropertyEditors/gtk-sharp.pub
? gdk/gtk-sharp.pub
? glade/gtk-sharp.pub
? glib/gtk-sharp.pub
? gnome/gtk-sharp.pub
? gtk/gtk-sharp.pub
? gtkhtml/gtk-sharp.pub
? pango/gtk-sharp.pub
? parser/GAPI/Makefile
? parser/GAPI/Makefile.in
? rsvg/gtk-sharp.pub
? vte/gtk-sharp.pub
Index: ChangeLog
===================================================================
RCS file: /cvs/public/gtk-sharp/ChangeLog,v
retrieving revision 1.864
diff -u -p -r1.864 ChangeLog
--- ChangeLog	15 Jun 2004 13:38:43 -0000	1.864
+++ ChangeLog	18 Jun 2004 05:47:55 -0000
@@ -1,3 +1,20 @@
+2004-06-17  Larry Ewing  &lt;<A HREF="mailto:lewing@ximian.com">lewing@ximian.com</A>&gt;
+
+	* gdk/Makefile.am (sources): add Pixdata.custom
+
+	* gdk/Drawable.custom: make filled be a boolean.
+
+	* gdk/Pixdata.custom: add new file to fix Serialize.
+
+	* gnome/CanvasItem.custom: remove the incorrect custom bindings.
+
+	* gnome/Gnome.metadata: stop hiding the AffineRelative and
+	AffineAbsolute the generator gets them right they are not out
+	params.
+
+	* gdk/Gdk.metadata: mark the Pixdata byte stream as and array hide
+	the broken serialize method.
+
 2004-06-15  Mike Kestner  &lt;<A HREF="mailto:mkestner@ximian.com">mkestner@ximian.com</A>&gt;
 
 	* gtk/Gtk.metadata : hide the button_new_from_stock ctor.
Index: gdk/Drawable.custom
===================================================================
RCS file: /cvs/public/gtk-sharp/gdk/Drawable.custom,v
retrieving revision 1.9
diff -u -p -r1.9 Drawable.custom
--- gdk/Drawable.custom	15 Mar 2004 20:13:30 -0000	1.9
+++ gdk/Drawable.custom	18 Jun 2004 05:47:55 -0000
@@ -11,9 +11,9 @@ public void DrawRectangle(Gdk.GC gc, boo
 }
 
 [DllImport(&quot;libgdk-win32-2.0-0.dll&quot;)]
-static extern void gdk_draw_polygon(IntPtr raw, IntPtr gc, int filled, Gdk.Point[] points, int npoints);
+static extern void gdk_draw_polygon(IntPtr raw, IntPtr gc, bool filled, Gdk.Point[] points, int npoints);
 
-public void DrawPolygon(Gdk.GC gc, int filled, Gdk.Point[] points)
+public void DrawPolygon(Gdk.GC gc, bool filled, Gdk.Point[] points)
 {
 	gdk_draw_polygon(Handle, gc.Handle, filled, points, points.Length);
 }
@@ -42,4 +42,4 @@ internal static extern IntPtr gdk_x11_dr
 
 		return o;
 	}
-#endif
\ No newline at end of file
+#endif
Index: gdk/Gdk.metadata
===================================================================
RCS file: /cvs/public/gtk-sharp/gdk/Gdk.metadata,v
retrieving revision 1.30
diff -u -p -r1.30 Gdk.metadata
--- gdk/Gdk.metadata	14 Jun 2004 20:25:50 -0000	1.30
+++ gdk/Gdk.metadata	18 Jun 2004 05:47:55 -0000
@@ -15,7 +15,7 @@
   &lt;attr path=&quot;/api/namespace/class[@cname='GdkGlobal']/method[@name='ListVisuals']&quot; name=&quot;hidden&quot;&gt;1&lt;/attr&gt;
   &lt;attr path=&quot;/api/namespace/class[@cname='GdkPango_']&quot; name=&quot;name&quot;&gt;PangoHelper&lt;/attr&gt;
   &lt;attr path=&quot;/api/namespace/class[@cname='GdkPixbuf_']&quot; name=&quot;hidden&quot;&gt;1&lt;/attr&gt;
-  &lt;attr path=&quot;/api/namespace/class[@cname='GdkPointer_']/method[@name='Grab']/*/*[@name='confine_to']&quot; name=&quot;null_ok&quot;&gt;1&lt;/attr&gt;
+  &lt;attr path=&quot;/api/namespace/class[@cname='GdkPoiter_']/method[@name='Grab']/*/*[@name='confine_to']&quot; name=&quot;null_ok&quot;&gt;1&lt;/attr&gt;
   &lt;attr path=&quot;/api/namespace/class[@cname='GdkPointer_']/method[@name='Grab']/*/*[@name='cursor']&quot; name=&quot;null_ok&quot;&gt;1&lt;/attr&gt;
   &lt;attr path=&quot;/api/namespace/class[@cname='GdkProperty_']/method[@name='Get']/*/*[@name='actual_property_type']&quot; name=&quot;pass_as&quot;&gt;out&lt;/attr&gt;
   &lt;attr path=&quot;/api/namespace/enum[@cname='GdkWindowClass']/member[@name='Output']&quot; name=&quot;name&quot;&gt;InputOutput&lt;/attr&gt;
@@ -99,6 +99,8 @@
   &lt;attr path=&quot;/api/namespace/struct[@cname='GdkEventSetting']&quot; name=&quot;hidden&quot;&gt;1&lt;/attr&gt;
   &lt;attr path=&quot;/api/namespace/struct[@cname='GdkEventVisibility']&quot; name=&quot;hidden&quot;&gt;1&lt;/attr&gt;
   &lt;attr path=&quot;/api/namespace/struct[@cname='GdkEventWindowState']&quot; name=&quot;hidden&quot;&gt;1&lt;/attr&gt;
+  &lt;attr path=&quot;/api/namespace/struct[@cname='GdkPixdata']/method[@name='Deserialize']/*/*[@name='stream']&quot; name=&quot;array&quot;&gt;1&lt;/attr&gt;
+  &lt;attr path=&quot;/api/namespace/struct[@cname='GdkPixdata']/method[@name='Serialize']&quot; name=&quot;hidden&quot;&gt;1&lt;/attr&gt;
   &lt;attr path=&quot;/api/namespace/struct[@cname='GdkPixmapObject']&quot; name=&quot;hidden&quot;&gt;1&lt;/attr&gt;
   &lt;attr path=&quot;/api/namespace/struct[@cname='GdkRegion']&quot; name=&quot;opaque&quot;&gt;1&lt;/attr&gt;
   &lt;attr path=&quot;/api/namespace/struct[@cname='GdkRegion']/method[@name='GetRectangles']&quot; name=&quot;hidden&quot;&gt;1&lt;/attr&gt;
Index: gdk/Makefile.am
===================================================================
RCS file: /cvs/public/gtk-sharp/gdk/Makefile.am,v
retrieving revision 1.14
diff -u -p -r1.14 Makefile.am
--- gdk/Makefile.am	11 Jun 2004 18:19:38 -0000	1.14
+++ gdk/Makefile.am	18 Jun 2004 05:47:55 -0000
@@ -50,6 +50,7 @@ customs = 			\
 	Global.custom		\
 	Pixbuf.custom		\
 	PixbufLoader.custom	\
+	Pixdata.custom		\
 	Point.custom		\
 	Rectangle.custom	\
 	Region.custom		\
Index: gdk/Pixdata.custom
===================================================================
RCS file: gdk/Pixdata.custom
diff -N gdk/Pixdata.custom
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ gdk/Pixdata.custom	18 Jun 2004 05:47:55 -0000
@@ -0,0 +1,16 @@
+// Pixdata.Custom 
+//
+// (C) 2004 Novell, Inc.
+
+	[DllImport(&quot;libgdk_pixbuf-2.0-0.dll&quot;)]
+	static extern IntPtr gdk_pixdata_serialize (ref Gdk.Pixdata raw, out uint len);
+	
+	public byte [] Serialize () {
+		uint len;
+		IntPtr raw_ret = gdk_pixdata_serialize (ref this, out len);
+
+		byte [] data = new byte [len];
+		Marshal.Copy (raw_ret, data, 0, (int)len);
+		
+		return data;
+	}	
Index: gnome/CanvasItem.custom
===================================================================
RCS file: /cvs/public/gtk-sharp/gnome/CanvasItem.custom,v
retrieving revision 1.13
diff -u -p -r1.13 CanvasItem.custom
--- gnome/CanvasItem.custom	12 Jun 2004 00:18:05 -0000	1.13
+++ gnome/CanvasItem.custom	18 Jun 2004 05:47:55 -0000
@@ -26,22 +26,6 @@
                 }
 
 		[DllImport(&quot;gnomecanvas-2&quot;)]
-		static extern void gnome_canvas_item_affine_relative(IntPtr raw, double[] affine);
-
-		public void AffineRelative (out double[] affine) {
-                        affine = new double [6];
-			gnome_canvas_item_affine_relative(Handle, affine);
-		}
-
-		[DllImport(&quot;gnomecanvas-2&quot;)]
-		static extern void gnome_canvas_item_affine_absolute(IntPtr raw, double[] affine);
-
-		public void AffineAbsolute (out double[] affine) {
-                        affine = new double [6];
-			gnome_canvas_item_affine_absolute(Handle, affine);
-		}
-
-		[DllImport(&quot;gnomecanvas-2&quot;)]
 		static extern void gnome_canvas_item_i2c_affine(IntPtr raw, double[] affine);
 
 		public void I2cAffine(out double[] affine) {
Index: gnome/Gnome.metadata
===================================================================
RCS file: /cvs/public/gtk-sharp/gnome/Gnome.metadata,v
retrieving revision 1.15
diff -u -p -r1.15 Gnome.metadata
--- gnome/Gnome.metadata	8 May 2004 02:50:28 -0000	1.15
+++ gnome/Gnome.metadata	18 Jun 2004 05:47:55 -0000
@@ -37,8 +37,6 @@
   &lt;attr path=&quot;/api/namespace/object[@cname='GnomeCanvas']/method[@name='W2cAffine']&quot; name=&quot;hidden&quot;&gt;1&lt;/attr&gt;
   &lt;attr path=&quot;/api/namespace/object[@cname='GnomeCanvasClipgroup']/property[@name='Wind']&quot; name=&quot;type&quot;&gt;ArtWindRule&lt;/attr&gt;
   &lt;attr path=&quot;/api/namespace/object[@cname='GnomeCanvasItem']/constructor[@cname='gnome_canvas_item_new']&quot; name=&quot;hidden&quot;&gt;1&lt;/attr&gt;
-  &lt;attr path=&quot;/api/namespace/object[@cname='GnomeCanvasItem']/method[@name='AffineAbsolute']&quot; name=&quot;hidden&quot;&gt;1&lt;/attr&gt;
-  &lt;attr path=&quot;/api/namespace/object[@cname='GnomeCanvasItem']/method[@name='AffineRelative']&quot; name=&quot;hidden&quot;&gt;1&lt;/attr&gt;
   &lt;attr path=&quot;/api/namespace/object[@cname='GnomeCanvasItem']/method[@name='Construct']&quot; name=&quot;hidden&quot;&gt;1&lt;/attr&gt;
   &lt;attr path=&quot;/api/namespace/object[@cname='GnomeCanvasItem']/method[@name='GetBounds']/*/*[@type='double*']&quot; name=&quot;pass_as&quot;&gt;out&lt;/attr&gt;
   &lt;attr path=&quot;/api/namespace/object[@cname='GnomeCanvasItem']/method[@name='I2cAffine']&quot; name=&quot;hidden&quot;&gt;1&lt;/attr&gt;

--=-JjeBbV6fPmlgzjF+gjZS--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="004218.html">[Gtk-sharp-list] Underline in pango
</A></li>
	<LI> Next message: <A HREF="004220.html">[Gtk-sharp-list] broken bindings.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4219">[ date ]</a>
              <a href="thread.html#4219">[ thread ]</a>
              <a href="subject.html#4219">[ subject ]</a>
              <a href="author.html#4219">[ author ]</a>
         </LI>
       </UL>
</body></html>
