<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> Ant:  Re: Ant:  Re: Ant: Re: Ant: Re: Ant: Re:
	[Gtk-sharp-list] gtk-sharp.dll not working on linux because it
	references win32 dll's
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=Ant%3A%20%20Re%3A%20Ant%3A%20%20Re%3A%20Ant%3A%20Re%3A%20Ant%3A%20Re%3A%20Ant%3A%20Re%3A%0A%09%5BGtk-sharp-list%5D%20gtk-sharp.dll%20not%20working%20on%20linux%20because%20it%0A%09references%20win32%20dll%27s&In-Reply-To=20050721184231.64084.qmail%40web26703.mail.ukl.yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006227.html">
   <LINK REL="Next"  HREF="006195.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Ant:  Re: Ant:  Re: Ant: Re: Ant: Re: Ant: Re:
	[Gtk-sharp-list] gtk-sharp.dll not working on linux because it
	references win32 dll's</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=Ant%3A%20%20Re%3A%20Ant%3A%20%20Re%3A%20Ant%3A%20Re%3A%20Ant%3A%20Re%3A%20Ant%3A%20Re%3A%0A%09%5BGtk-sharp-list%5D%20gtk-sharp.dll%20not%20working%20on%20linux%20because%20it%0A%09references%20win32%20dll%27s&In-Reply-To=20050721184231.64084.qmail%40web26703.mail.ukl.yahoo.com"
       TITLE="Ant:  Re: Ant:  Re: Ant: Re: Ant: Re: Ant: Re:
	[Gtk-sharp-list] gtk-sharp.dll not working on linux because it
	references win32 dll's">jonpryor at vt.edu
       </A><BR>
    <I>Thu Jul 21 20:22:40 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="006227.html">Ant: Re: Ant: Re: Ant: Re: Ant: Re: Ant: Re: [Gtk-sharp-list]
	gtk-sharp.dll not working on linux because it references win32 dll's
</A></li>
        <LI>Next message: <A HREF="006195.html">[Gtk-sharp-list] Current SVN doesn't compile fully as Samples
	stumble
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6234">[ date ]</a>
              <a href="thread.html#6234">[ thread ]</a>
              <a href="subject.html#6234">[ subject ]</a>
              <a href="author.html#6234">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 2005-07-21 at 20:42 +0200, Jost Boekemeier wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> &gt; Because that's one of the *fundamental*
</I>&gt;<i> &gt; underpinnings of .NET. 
</I>&gt;<i> 
</I>&gt;<i> Pardon?  *Every* such system, be it elf, java, ... has
</I>&gt;<i> the concept of a &quot;most recent&quot; or &quot;default&quot; version.
</I>
Thank you for completely missing the point of the example in my last
message.  Obviously I wasn't clear enough.

So, some historical perspective: 

 1. User installs AppA, which depends on MFC.DLL, and installs this 
    into C:\Windows.

 2. User installs AppB, which installs a different version of MFC.DLL
    into C:\Windows.

 3. User tries to run AppA.  AppA aborts.  User is not happy.

 4. User uninstalls AppB.  AppB's uninstall program is broken, and 
    doesn't revert MFC.DLL.  AppA still aborts.  (There are perfectly 
    valid reasons to not revert MFC.DLL as well, since Win32 .DLLs 
    contain a version number and AppB's .DLL may be more recent.
    That doesn't keep AppA from breaking, though.)

 5. User is forced to re-install the entire OS in order to get a sane
    version of MFC.DLL (though the user doesn't actually understand 
    this, they just believe that Windows is flaky-as-sin and requires
    these period re-installs...)

Welcome to &quot;DLL Hell.&quot;   This is what happens when *real* library
versioning is not present.  This is what .NET tries to fix.

And this is precisely what you want to do.

You're WRONG.  WRONG WRONG WRONG WRONG WRONG.

Did I mention that you're WRONG?

It's because of this that Microsoft started putting version numbers into
library names -- see MFC42.DLL.  However, maintaining backward
compatibility is difficult, so they eventually reached the point where
MFC42.DLL's API was stable, but MFC42d.dll (the debug version) wasn't,
so if you had a broken app that depended on the debug version, an
upgrade would, again, break the app.

Suffice it to say, Win32 DOES NOT provide a decent versioning system.

Neither, for that matter, does Java.  You either need to modify
CLASSPATH to get the right version, or rely on the end-user to install
jar files into the right place, and if they install stuff into the boot
classpath that has a different API...  Oops, you're dead.  Thank you for
playing.

Of the formats you listed, only ELF supports proper versioning, which is
why you can have *parallel* installs of libc.so.6, libc.so.5, etc., and
you can have different major versions of the &quot;same&quot; library installed
and things Just Work.  You can even have several different major+minor
versions installed, and through judicious use of symbolic links the most
recent version -- within a major release -- will be used when an
application loads.

The only problem with ELF approach is that it requires a unique base
name, and thus doesn't handle file name conflicts at all.

.NET requires a base name, version, and public key token.  The public
key token allows multiple different companies to ship assemblies with
the same base name and allow things to Just Work.

Be nice to your users, and don't use partial assembly names.  It's for
your own good and their happiness.

&gt;<i> The user doesn't care for all this, he/she wants to
</I>&gt;<i> open the library that is installed on the system.
</I>
And this is where you need to firmly define who your user is.

The end user doesn't care about libraries, they care about
*applications*.  If the app breaks, they're not happy.

Developers can put up with a little grief to ensure that the end users
are happy.  This means LEARNING ABOUT PROPER VERSIONING AND DOING THE
RIGHT THING.

So which user are you talking about?  The end-user?  Or the developer?

 - Jon


</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006227.html">Ant: Re: Ant: Re: Ant: Re: Ant: Re: Ant: Re: [Gtk-sharp-list]
	gtk-sharp.dll not working on linux because it references win32 dll's
</A></li>
	<LI>Next message: <A HREF="006195.html">[Gtk-sharp-list] Current SVN doesn't compile fully as Samples
	stumble
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6234">[ date ]</a>
              <a href="thread.html#6234">[ thread ]</a>
              <a href="subject.html#6234">[ subject ]</a>
              <a href="author.html#6234">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
