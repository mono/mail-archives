<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Window won't refresh
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Window%20won%27t%20refresh&In-Reply-To=BAY5-F1197F56E287963351B4D40D6E60%40phx.gbl">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006113.html">
   <LINK REL="Next"  HREF="006115.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Window won't refresh</H1>
    <B>Brad Taylor</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Window%20won%27t%20refresh&In-Reply-To=BAY5-F1197F56E287963351B4D40D6E60%40phx.gbl"
       TITLE="[Gtk-sharp-list] Window won't refresh">brad at getcoded.net
       </A><BR>
    <I>Tue Jul  5 14:38:31 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="006113.html">[Gtk-sharp-list] Window won't refresh
</A></li>
        <LI>Next message: <A HREF="006115.html">[Gtk-sharp-list] Problems with custom treeview column
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6114">[ date ]</a>
              <a href="thread.html#6114">[ thread ]</a>
              <a href="subject.html#6114">[ subject ]</a>
              <a href="author.html#6114">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

&gt;<i> I'm trying to get a TextView window to go through each line in its 
</I>&gt;<i> TextBuffer and select that line at a certain pace, using some sort of timer. 
</I>&gt;<i> The selection and all that works fine, so long as I manually step through 
</I>&gt;<i> each line. However, if I use a timer or a thread in order to do it 
</I>&gt;<i> automatically, the window will basically freeze until it gets to the last 
</I>&gt;<i> line in the TextBuffer, at which point it stops, and then refreshes the 
</I>&gt;<i> window again.
</I>
When you say using a thread, are you trying to update the widget from
this thread?  Just to let you know, Gtk is a single-threaded toolkit so
modifying anything from another thread will only lead to massive amounts
of badness.

&gt;<i> I know that it executes the code correctly, but the window 
</I>&gt;<i> won't update anything until it's done with the timer. The same thing happens 
</I>&gt;<i> whether I'm using a timer or thread. I'll email some source code if you need 
</I>&gt;<i> it; I haven't in this message because my code is rather long and complex, 
</I>&gt;<i> and would take some time to get down to the barebones.
</I>
Are you using Thread.Sleep to control these updates?  If so, you're
blocking Gtk's mainloop from working and thats why the window isn't
updating.  You should be using the GLib.Timeout set of functions to
control the timer like so:

GLib.Timeout.Add (1000, new TimeoutHandler (OnTimeout));

Maybe if you could attach a small test-case, it would be a little easier
to diagnose your problem.


Hope this helps.

-Brad

-- 
Brad Taylor
Genome Software LLC
<A HREF="http://www.getcoded.net">http://www.getcoded.net</A>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : <A HREF="http://galactus.ximian.com/pipermail/gtk-sharp-list/attachments/20050705/1289534f/attachment.bin">http://galactus.ximian.com/pipermail/gtk-sharp-list/attachments/20050705/1289534f/attachment.bin</A>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006113.html">[Gtk-sharp-list] Window won't refresh
</A></li>
	<LI>Next message: <A HREF="006115.html">[Gtk-sharp-list] Problems with custom treeview column
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6114">[ date ]</a>
              <a href="thread.html#6114">[ thread ]</a>
              <a href="subject.html#6114">[ subject ]</a>
              <a href="author.html#6114">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
