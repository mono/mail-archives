<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Problems with custom treeview column
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Problems%20with%20custom%20treeview%20column&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006114.html">
   <LINK REL="Next"  HREF="006117.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Problems with custom treeview column</H1>
    <B>Matthew Beckler</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Problems%20with%20custom%20treeview%20column&In-Reply-To="
       TITLE="[Gtk-sharp-list] Problems with custom treeview column">mbeckler at wins-inc.com
       </A><BR>
    <I>Tue Jul  5 15:21:26 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="006114.html">[Gtk-sharp-list] Window won't refresh
</A></li>
        <LI>Next message: <A HREF="006117.html">[Gtk-sharp-list] Problems with custom treeview column
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6115">[ date ]</a>
              <a href="thread.html#6115">[ thread ]</a>
              <a href="subject.html#6115">[ subject ]</a>
              <a href="author.html#6115">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello everyone,

I am trying to put a datetime into a liststore -&gt; treeview. Eventually,
I would like to be able to enable sorting for that column, but first I
need it to work without sorting. I determined that I need to have a
custom tree cell data function that will take the datatime passed in and
extract the date in the proper format, and set the cell's text property
to that date. Here is that function:

public static void dateColumnFunction (Gtk.TreeViewColumn tree_column,
Gtk.CellRenderer cell, Gtk.TreeModel tree_model, Gtk.TreeIter iter)
{
    DateTime dt = (DateTime) tree_model.GetValue (iter, 2);
    ((CellRendererText) cell).Text = dt.ToShortDateString();
}

My problem is in assigning that tree cell data func. to the column. When
I use the following line to create and append the column to the
treeview, everything works as I would like it to, ie. the text is
properly displayed in the datetime column.

//this one works:
treeview.AppendColumn(&quot;Date Of Birth&quot;, new CellRendererText(), new
TreeCellDataFunc(dateColumnFunction));

//I think this one should work as well, but it isn't:
TreeViewColumn tvc = new TreeViewColumn();
tvc.Title = &quot;Date Of Birth&quot;;
tvc.SetCellDataFunc(new CellRendererText(), new
TreeCellDataFunc(dateColumnFunction));
treeview.AppendColumn(tvc);

If anybody knows of a good tutorial on how to do this sort of thing
properly, I would appreciate that as well.

Also, as I mentioned before, eventually I would like to be able to sort
by this column, probably needing a custom cell sorter function? Any help
or direction will be greatly appreciated.

Thanks in advance,

Matthew

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006114.html">[Gtk-sharp-list] Window won't refresh
</A></li>
	<LI>Next message: <A HREF="006117.html">[Gtk-sharp-list] Problems with custom treeview column
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6115">[ date ]</a>
              <a href="thread.html#6115">[ thread ]</a>
              <a href="subject.html#6115">[ subject ]</a>
              <a href="author.html#6115">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
