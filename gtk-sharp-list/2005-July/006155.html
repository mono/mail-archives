<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Re: Marshaling a byte[] for a pixbuf
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Re%3A%20Marshaling%20a%20byte%5B%5D%20for%20a%20pixbuf&In-Reply-To=1121211502.30672.8.camel%40localhost.localdomain">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006154.html">
   <LINK REL="Next"  HREF="006156.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Re: Marshaling a byte[] for a pixbuf</H1>
    <B>MDK</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Re%3A%20Marshaling%20a%20byte%5B%5D%20for%20a%20pixbuf&In-Reply-To=1121211502.30672.8.camel%40localhost.localdomain"
       TITLE="[Gtk-sharp-list] Re: Marshaling a byte[] for a pixbuf">mdk at mdk.org.pl
       </A><BR>
    <I>Tue Jul 12 20:43:56 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="006154.html">[Gtk-sharp-list] Marshaling a byte[] for a pixbuf
</A></li>
        <LI>Next message: <A HREF="006156.html">[Gtk-sharp-list] Marshaling a byte[] for a pixbuf
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6155">[ date ]</a>
              <a href="thread.html#6155">[ thread ]</a>
              <a href="subject.html#6155">[ subject ]</a>
              <a href="author.html#6155">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> I've got an unmanaged C code that returns a pointer to a guchar memory
</I>&gt;<i> containing RGB data. I'd like to use this data to create a pixbuf...
</I>
Okay, now I see that trying to marshal a byte[] was bad right from the
start (strange it worked). I managed to get it working by creating the
pixbuf at the unmanaged side, passing the pointer to it, and getting the
pixbuf back on the managed with 

	new Gdk.Pixbuf (IntPtr raw);

However, it seems I'm know responsible for freeing the rgb data myself.
That should happen when the pixbuf is garbage collected. I'm wondering,
if passing the managed delegate address as a &quot;destroy notification&quot; will
do the trick... in the delegated function I could use
GLib.Marshaler.Free .


-- 
Micha&#322; Dominik K.
<A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">mdk at mdk.org.pl</A>
www.mdk.org.pl


 
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006154.html">[Gtk-sharp-list] Marshaling a byte[] for a pixbuf
</A></li>
	<LI>Next message: <A HREF="006156.html">[Gtk-sharp-list] Marshaling a byte[] for a pixbuf
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6155">[ date ]</a>
              <a href="thread.html#6155">[ thread ]</a>
              <a href="subject.html#6155">[ subject ]</a>
              <a href="author.html#6155">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
