<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Fwd: Re:  Gtk# instability nightmares
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Fwd%3A%20Re%3A%20%20Gtk%23%20instability%20nightmares&In-Reply-To=20070406062830.54C7C7000B%40herald.ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007956.html">
   <LINK REL="Next"  HREF="007958.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Fwd: Re:  Gtk# instability nightmares</H1>
    <B>Alp Toker</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Fwd%3A%20Re%3A%20%20Gtk%23%20instability%20nightmares&In-Reply-To=20070406062830.54C7C7000B%40herald.ximian.com"
       TITLE="[Gtk-sharp-list] Fwd: Re:  Gtk# instability nightmares">alp at atoker.com
       </A><BR>
    <I>Fri Apr  6 04:10:30 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="007956.html">[Gtk-sharp-list] Fwd: Re:  Gtk# instability nightmares
</A></li>
        <LI>Next message: <A HREF="007958.html">[Gtk-sharp-list] Fwd: Re:  Gtk# instability nightmares
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7957">[ date ]</a>
              <a href="thread.html#7957">[ thread ]</a>
              <a href="subject.html#7957">[ subject ]</a>
              <a href="author.html#7957">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Aaron Oxford wrote:
&gt;<i> Hi Adam and list,
</I>&gt;<i> 
</I>&gt;<i> Thanks for the heads-up. From reading about those Init() functions in 
</I>&gt;<i> the docs it seems GLib(#?) and Gdk(#?) have some critical sections 
</I>&gt;<i> that are not handled properly by default.
</I>&gt;<i> 
</I>&gt;<i> Now to get on my high-horse for a bit, this is a major no-no even on 
</I>&gt;<i> single core systems, and the speed with which it broke my dual core 
</I>&gt;<i> system suggests that these are *serious* misimplementations from a 
</I>&gt;<i> threading point of view. Minor problems like this can take days or 
</I>&gt;<i> weeks to manifest; these problems take the app down within a matter of seconds.
</I>&gt;<i> 
</I>&gt;<i> Can I very strongly suggest that
</I>&gt;<i> 
</I>&gt;<i> if(!GLib.Thread.Supported)
</I>&gt;<i>           GLib.Thread.Init();
</I>&gt;<i> Gdk.Threads.Init();
</I>&gt;<i> 
</I>&gt;<i> be placed inside Application.Init()? Basically the whole API is 
</I>&gt;<i> broken on a dual core system unless these calls are made. It's either 
</I>&gt;<i> this or you need to update every doco and sample in circulation to 
</I>&gt;<i> include these lines - something I'm guessing would be impractical. :-)
</I>
When I originally implemented the GLib.Thread class, I proposed that it 
be used automatically in Application.Init(). Mike made the point that 
Gtk# is a binding and that there's value in keeping a one-to-one mapping 
of the original API to the C# API to ease porting between languages. 
It'd be annoying to find out that Gtk# was doing magic behind the scenes 
yet your identical c/pygtk/gtkmm port doesn't work.

This would all have been fine, but it turned out that Gtk+ is more 
forgiving on Unix than it is on Windows, so Gtk# applications get 
written, released and only when someone tries to run them on Windows is 
it found that they're unstable. Hopefully they'll notice the warning in 
the API documentation and add the check-and-init to their application's 
startup, and everything will just work.

This issue has been known for 5 years, so it's probably not going to 
change any time soon. There are however still some arguments in favour 
of updating Application.Init():

  * Application.cs is already more than a thin &quot;one-to-one&quot; wrapper 
around Gtk+ entry points.

  * The scenario where a Gtk# application is built and deployed by a 
developer who only has access to Linux but is then run by Windows users 
is quite common. This is different to C applications where some 
developer will have to explicitly build on Windows, noticing the bug in 
the process.

  * Gtk# applications seem to make more use of threads than C Gtk+ 
applications.
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007956.html">[Gtk-sharp-list] Fwd: Re:  Gtk# instability nightmares
</A></li>
	<LI>Next message: <A HREF="007958.html">[Gtk-sharp-list] Fwd: Re:  Gtk# instability nightmares
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7957">[ date ]</a>
              <a href="thread.html#7957">[ thread ]</a>
              <a href="subject.html#7957">[ subject ]</a>
              <a href="author.html#7957">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
