<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] TreeCellDataFunc not getting pinged
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20TreeCellDataFunc%20not%20getting%20pinged&In-Reply-To=1176294688.4953.8.camel%40aleph.whitemice.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007981.html">
   <LINK REL="Next"  HREF="007983.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] TreeCellDataFunc not getting pinged</H1>
    <B>aybiss</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20TreeCellDataFunc%20not%20getting%20pinged&In-Reply-To=1176294688.4953.8.camel%40aleph.whitemice.org"
       TITLE="[Gtk-sharp-list] TreeCellDataFunc not getting pinged">aaron at hardwarehookups.com.au
       </A><BR>
    <I>Wed Apr 11 18:51:35 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="007981.html">[Gtk-sharp-list] TreeCellDataFunc not getting pinged
</A></li>
        <LI>Next message: <A HREF="007983.html">[Gtk-sharp-list] TreeCellDataFunc not getting pinged
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7982">[ date ]</a>
              <a href="thread.html#7982">[ thread ]</a>
              <a href="subject.html#7982">[ subject ]</a>
              <a href="author.html#7982">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>


Adam Tauno Williams-2 wrote:
&gt;<i> 
</I>&gt;<i> It might be easier to just come up with a different demo;  this is all
</I>&gt;<i> intertwined quite a bit -  <A HREF="http://code.google.com/p/consonance/">http://code.google.com/p/consonance/</A>
</I>&gt;<i> 
</I>&gt;<i> Maybe this is enough....
</I>&gt;<i> 
</I>
Well, I now have this:

using System;
using Gtk;
using Gdk;

public class Task /* Bogus Task Object */
{
    public Task() { }
    public int ObjectId { get { return 1000; } }
    public bool IsToDo { get { return true; } }
} 

public class Test
{
    private Label label = null;
    private int counter = 0;
    private bool configurationFailed = false;
    private Gtk.Window wnd;
    
    // Want to display a dialog, but can't.
    public static void Main()
    {
        if (!GLib.Thread.Supported) GLib.Thread.Init();
        Gdk.Threads.Init();
        Application.Init();

        Test t = new Test();

        Gdk.Threads.Enter();

        Application.Run();
        Gdk.Threads.Leave();
    }

    public Test()
    {
        wnd = new Gtk.Window(&quot;Test&quot;);
        wnd.Destroyed += new EventHandler(wnd_Destroyed);

        Gtk.TreeViewColumn column;
        Gtk.CellRendererText cell;
        TreeView treeView;
        TreeModelFilter filter;
        ListStore taskStore;

        taskStore = new ListStore(typeof(Task));
        taskStore.AppendValues(new Task());
        taskStore.AppendValues(new Task());
        taskStore.AppendValues(new Task());
        taskStore.AppendValues(new Task()); 

        treeView = new TreeView();
        filter = new TreeModelFilter(taskStore, null);
        filter.VisibleFunc = new Gtk.TreeModelFilterVisibleFunc(ToDoFilter);
        treeView.Model = filter;
        column = new Gtk.TreeViewColumn();
        column.Title = &quot;Object Id&quot;;
        cell = new Gtk.CellRendererText();
        column.SetCellDataFunc(cell, new
Gtk.TreeCellDataFunc(RenderObjectId));
        column.PackStart(cell, true);
        treeView.AppendColumn(column);

        wnd.Add(treeView);

        wnd.ShowAll();
    }

    protected virtual void RenderObjectId(
            Gtk.TreeViewColumn _column,
            Gtk.CellRenderer _cell,
            Gtk.TreeModel _model,
            Gtk.TreeIter _iter)
    {
        Task task;

        Console.WriteLine(&quot;RenderObjectId invoked&quot;);
        task = (Task)_model.GetValue(_iter, 0);
        (_cell as Gtk.CellRendererText).Text = task.ObjectId.ToString();
    }

    private bool ToDoFilter(Gtk.TreeModel _model, Gtk.TreeIter _iter)
    {
        Task task;
        Console.WriteLine(&quot;Filtering task for ToDo list&quot;);
        task = (Task)_model.GetValue(_iter, 0);
        if (task == null) return false;
        if (task.IsToDo) return true;
        return false;
    } 

    void wnd_Destroyed(object sender, EventArgs e)
    {
        Application.Quit();
    }
}

And what I see is a list of empty cells.
-- 
View this message in context: <A HREF="http://www.nabble.com/TreeCellDataFunc-not-getting-pinged-tf3548034.html#a9950017">http://www.nabble.com/TreeCellDataFunc-not-getting-pinged-tf3548034.html#a9950017</A>
Sent from the Mono - Gtk# mailing list archive at Nabble.com.

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007981.html">[Gtk-sharp-list] TreeCellDataFunc not getting pinged
</A></li>
	<LI>Next message: <A HREF="007983.html">[Gtk-sharp-list] TreeCellDataFunc not getting pinged
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7982">[ date ]</a>
              <a href="thread.html#7982">[ thread ]</a>
              <a href="subject.html#7982">[ subject ]</a>
              <a href="author.html#7982">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
