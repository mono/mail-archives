<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Gtk# on Windows OK for me now!
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Gtk%23%20on%20Windows%20OK%20for%20me%20now%21&In-Reply-To=1176998831.5976.13.camel%40cleenotebook.bdi.internal">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008004.html">
   <LINK REL="Next"  HREF="008006.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Gtk# on Windows OK for me now!</H1>
    <B>Chris Lee</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Gtk%23%20on%20Windows%20OK%20for%20me%20now%21&In-Reply-To=1176998831.5976.13.camel%40cleenotebook.bdi.internal"
       TITLE="[Gtk-sharp-list] Gtk# on Windows OK for me now!">chris at lee-gertner.net
       </A><BR>
    <I>Thu Apr 19 17:36:30 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="008004.html">[Gtk-sharp-list] Failing to use Gtk# on windows
</A></li>
        <LI>Next message: <A HREF="008006.html">[Gtk-sharp-list] Opening a DYK dialog
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8005">[ date ]</a>
              <a href="thread.html#8005">[ thread ]</a>
              <a href="subject.html#8005">[ subject ]</a>
              <a href="author.html#8005">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Another followup...

After clearing the Windows GAC of some leftovers from an experimental
Gtk# install (by manual rm -rf in appropriate directories, because more
sane(?) methods via Windows Explorer didn't work), and re-installing
Paco's Gtk# dist for Windows, the errors about not locating different
assemblies went away.  I was about to build and (sort of) run my test
program.  The program crashes on MS .Net with some casting errors in gtk
unmanaged code, but assemblies are now at least found.

Then, I tried building and running with Mono, and the program ran fine.
I don't know what I did to get it working, but it worked.  Then, I
replaced NPlot with my new custom graph widget it my original big hairy
program, compiled it with gmcs on Windows, and it runs fine on
Windows!!!  I don't know what changes in the end made things work, but
it is now working.  This app is doing multiple threads, updated charts
from data parsed out of UDP packets, multiple windows, using anonymous
delegates, using generics, etc.... and it is all working just like it
did in Linux (knock on wood!).

I feel I should post that since I've left a train of scary problem
emails on the public email list....  My advice for someone trying to
build a cross platform app using Mono/Gtk# is to test it on all
platforms from the start.  This seems obvious in hind-sight, but I had
gotten away with not doing this with Gtk/C programs a couple times, so I
wasn't paranoid enough when trying Mono.

Thanks to everyone working on Mono/Gtk#!!!

 -Chris

On Thu, 2007-04-19 at 12:07 -0400, Chris Lee wrote:
&gt;<i> A followup:
</I>&gt;<i> 
</I>&gt;<i> On Linux, I recompiled with mcs instead of gmcs, used gtk-sharp-1.0.
</I>&gt;<i> Runs OK on Linux, but crashes in the same place in Windows (in unmanaged
</I>&gt;<i> code, in show-all).
</I>&gt;<i> 
</I>&gt;<i> On Windows, I installed Gtk# for .Net using Paco's installer (from
</I>&gt;<i> Novell Forge), and recompiled the code in MS .Net 2003.  When I run, I
</I>&gt;<i> get an error about not being able to find the pango-sharp (or a
</I>&gt;<i> dependency) when the code first tries to get a pango-context.  I
</I>&gt;<i> recompiled using .Net 2003 and Gtk#-2, and I get an error about not
</I>&gt;<i> being able to find gtk-sharp (or a dependency).  I re-ran the script in
</I>&gt;<i> the Gtk# for .Net directory that adds things to the GAC, but it didn't
</I>&gt;<i> help.
</I>&gt;<i> 
</I>&gt;<i> Running
</I>&gt;<i> 
</I>&gt;<i>  gacco -q &quot;pango-sharp&quot;
</I>&gt;<i> 
</I>&gt;<i> reports a location for pango-sharp.dll which seems OK (it has the dll
</I>&gt;<i> and a file __AssemblyInfo__.ini).
</I>&gt;<i> 
</I>&gt;<i> I'm not sure what else I can do....
</I>&gt;<i> 
</I>&gt;<i> On Wed, 2007-04-18 at 18:04 -0400, Chris Lee wrote:
</I>&gt;<i> &gt; I'm now trying to get a smaller program running with Gtk# on windows, a
</I>&gt;<i> &gt; simple graphing widget (I was using NPlot-gtk-0.9.9.2, but it wasn't
</I>&gt;<i> &gt; working on Windows due to calls to gdk_x11_*).  I'm trying to do very
</I>&gt;<i> &gt; simple stuff, and for now compiling with mono-1.2.3 on linux using gtk#
</I>&gt;<i> &gt; 1.0 and then running the .exe with mono-1.2.3 on windows.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I'm getting a crash in unmanaged call gtk_widget_show_all() right after
</I>&gt;<i> &gt; I make my widgets, when I call ShowAll on my top-level window, before
</I>&gt;<i> &gt; the program gets to Application.Run().
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I'm using no threads now, but I am compiling with gmcs.  I'm using .Net
</I>&gt;<i> &gt; 2.0 only for the generics.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Is using gmcs my problem?  Is this not yet stable with Gtk# on windows?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Gtk-sharp-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">Gtk-sharp-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">http://lists.ximian.com/mailman/listinfo/gtk-sharp-list</A>
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008004.html">[Gtk-sharp-list] Failing to use Gtk# on windows
</A></li>
	<LI>Next message: <A HREF="008006.html">[Gtk-sharp-list] Opening a DYK dialog
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8005">[ date ]</a>
              <a href="thread.html#8005">[ thread ]</a>
              <a href="subject.html#8005">[ subject ]</a>
              <a href="author.html#8005">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
