<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Fwd: Re:  Gtk# instability nightmares
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Fwd%3A%20Re%3A%20%20Gtk%23%20instability%20nightmares&In-Reply-To=1175873495.22824.67.camel%40linux-dii6.site">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007964.html">
   <LINK REL="Next"  HREF="007965.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Fwd: Re:  Gtk# instability nightmares</H1>
    <B>Alp Toker</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Fwd%3A%20Re%3A%20%20Gtk%23%20instability%20nightmares&In-Reply-To=1175873495.22824.67.camel%40linux-dii6.site"
       TITLE="[Gtk-sharp-list] Fwd: Re:  Gtk# instability nightmares">alp at atoker.com
       </A><BR>
    <I>Sat Apr  7 14:43:23 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="007964.html">[Gtk-sharp-list] Fwd: Re:  Gtk# instability nightmares
</A></li>
        <LI>Next message: <A HREF="007965.html">[Gtk-sharp-list] Fwd: Re:  Gtk# instability nightmares
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7963">[ date ]</a>
              <a href="thread.html#7963">[ thread ]</a>
              <a href="subject.html#7963">[ subject ]</a>
              <a href="author.html#7963">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Mike Kestner wrote:
&gt;<i> On Fri, 2007-04-06 at 09:10 +0100, Alp Toker wrote:
</I>&gt;<i> 
</I>&gt;&gt;&gt;<i> Can I very strongly suggest that
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> if(!GLib.Thread.Supported)
</I>&gt;&gt;&gt;<i>           GLib.Thread.Init();
</I>&gt;&gt;&gt;<i> Gdk.Threads.Init();
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> be placed inside Application.Init()? Basically the whole API is 
</I>&gt;&gt;&gt;<i> broken on a dual core system unless these calls are made. It's either 
</I>&gt;&gt;&gt;<i> this or you need to update every doco and sample in circulation to 
</I>&gt;&gt;&gt;<i> include these lines - something I'm guessing would be impractical. :-)
</I>&gt;<i> 
</I>&gt;<i> AFAICT, this is only an issue on win32, correct?  I have not heard
</I>&gt;<i> reports of any instability on linux that this &quot;workaround&quot; fixes.  I had
</I>&gt;<i> considered in the past adding such a check with platform specific
</I>&gt;<i> guarding around it for win32, but have resisted doing that because it
</I>&gt;<i> felt like a workaround if added to Gtk#.  
</I>
This isn't only an issue on Win32, it's an issue on any runtime that 
isn't Mono.

 From mini_init() in mono/mono/mini.c:

	if (!g_thread_supported ())
		g_thread_init (NULL);

I consider this a bug of the Mono runtime, but at least if we had put it 
in Application.Init(), it would have levelled the playing ground between 
.NET runtimes. Like I said before, the sad thing is that people write 
applications that would otherwise be perfectly portable except for their 
reliance on this behaviour.

Sometimes it's worth sticking to principles but I've never been 
convinced that expecting Gtk# developers to understand this quirk is a 
good move, especially now as their applications are bound to break 
anyway as Mono moves towards eglib.

I also think that representing this as a performance issue is not 
entirely honest when the Mono runtime itself does g_thread_init() for 
_every_ application. Not being able to communicate this issue and a few 
  others to Mike resulted in my (slightly misguided) &quot;NGtk&quot; Gtk# 
development branch for those who still remember.
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007964.html">[Gtk-sharp-list] Fwd: Re:  Gtk# instability nightmares
</A></li>
	<LI>Next message: <A HREF="007965.html">[Gtk-sharp-list] Fwd: Re:  Gtk# instability nightmares
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7963">[ date ]</a>
              <a href="thread.html#7963">[ thread ]</a>
              <a href="subject.html#7963">[ subject ]</a>
              <a href="author.html#7963">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
