<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Fwd: Re:  Gtk# instability nightmares
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Fwd%3A%20Re%3A%20%20Gtk%23%20instability%20nightmares&In-Reply-To=200704051005.23347.AdamWood%40xephi.co.uk">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007980.html">
   <LINK REL="Next"  HREF="007957.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Fwd: Re:  Gtk# instability nightmares</H1>
    <B>Aaron Oxford</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Fwd%3A%20Re%3A%20%20Gtk%23%20instability%20nightmares&In-Reply-To=200704051005.23347.AdamWood%40xephi.co.uk"
       TITLE="[Gtk-sharp-list] Fwd: Re:  Gtk# instability nightmares">aaron at hardwarehookups.com.au
       </A><BR>
    <I>Fri Apr  6 02:28:15 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="007980.html">[Gtk-sharp-list] Gtk.TextBuffer and Pixbuf
</A></li>
        <LI>Next message: <A HREF="007957.html">[Gtk-sharp-list] Fwd: Re:  Gtk# instability nightmares
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7956">[ date ]</a>
              <a href="thread.html#7956">[ thread ]</a>
              <a href="subject.html#7956">[ subject ]</a>
              <a href="author.html#7956">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Adam and list,

Thanks for the heads-up. From reading about those Init() functions in 
the docs it seems GLib(#?) and Gdk(#?) have some critical sections 
that are not handled properly by default.

Now to get on my high-horse for a bit, this is a major no-no even on 
single core systems, and the speed with which it broke my dual core 
system suggests that these are *serious* misimplementations from a 
threading point of view. Minor problems like this can take days or 
weeks to manifest; these problems take the app down within a matter of seconds.

Can I very strongly suggest that

if(!GLib.Thread.Supported)
          GLib.Thread.Init();
Gdk.Threads.Init();

be placed inside Application.Init()? Basically the whole API is 
broken on a dual core system unless these calls are made. It's either 
this or you need to update every doco and sample in circulation to 
include these lines - something I'm guessing would be impractical. :-)

I know not to expect too much when asking about 64-bit or Server2K3 
support, but dual cores are here to stay - at my shop anyone not 
buying the balls out cheapest rig they can will get a dual core 
system from me every day of the week. So I don't wanna sound like 
'get with the program' or anything, but *assuming* what I've 
discovered about Gtk# and AMD X2s so far is correct, this needs to 
happen pronto for the benefit of ourselves and all our users.

After a couple of days of tests with these modifications, I am now 
quite satisfied that Gtk# is at least as stable as my own code. I 
thank you all once again for providing and being part of the only 
viable option for C# cross-platform GUI development, and especially 
for dealing with chump Visual Studio users like me. :-)

Aaron.

At 07:05 PM 5/04/2007, you wrote:
&gt;<i>Hi Aaron,
</I>&gt;<i>
</I>&gt;<i>Thanks for your e-mail. Those changes certainly made a big difference. I hope
</I>&gt;<i>they fix the underlying problem though.
</I>&gt;<i>
</I>&gt;<i>I had to replace:
</I>&gt;<i>
</I>&gt;<i>GLib.Thread.Init();
</I>&gt;<i>
</I>&gt;<i>with:
</I>&gt;<i>if(!GLib.Thread.Supported)
</I>&gt;<i>          GLib.Thread.Init();
</I>&gt;<i>
</I>&gt;<i>I just thought I'd warn you in case you start seeing errors about 
</I>&gt;<i>GLib threads
</I>&gt;<i>at startup.
</I>&gt;<i>
</I>&gt;<i>Adam
</I>

---------------------------------------------------------------------------------
Aaron Oxford   -   aaron+hardwarehookups .com .au
Director, Innovative Computer Solutions (Aust) Pty. Ltd.
49 Maitland Rd, Mayfield, NSW 2304 Australia
<A HREF="http://www.ic-solutions.com.au">http://www.ic-solutions.com.au</A>
Developer, SourceForge project VioLet Composer
<A HREF="http://sourceforge.net/projects/buzz-like">http://sourceforge.net/projects/buzz-like</A>

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007980.html">[Gtk-sharp-list] Gtk.TextBuffer and Pixbuf
</A></li>
	<LI>Next message: <A HREF="007957.html">[Gtk-sharp-list] Fwd: Re:  Gtk# instability nightmares
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7956">[ date ]</a>
              <a href="thread.html#7956">[ thread ]</a>
              <a href="subject.html#7956">[ subject ]</a>
              <a href="author.html#7956">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
