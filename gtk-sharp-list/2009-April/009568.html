<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Help with widget not displaying in dialog
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Help%20with%20widget%20not%20displaying%20in%20dialog&In-Reply-To=49EB81CA.4040101%40ntlworld.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009567.html">
   <LINK REL="Next"  HREF="009569.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Help with widget not displaying in dialog</H1>
    <B>Andy Selvig</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Help%20with%20widget%20not%20displaying%20in%20dialog&In-Reply-To=49EB81CA.4040101%40ntlworld.com"
       TITLE="[Gtk-sharp-list] Help with widget not displaying in dialog">ajselvig at gmail.com
       </A><BR>
    <I>Sun Apr 19 18:23:56 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="009567.html">[Gtk-sharp-list] Help with widget not displaying in dialog
</A></li>
        <LI>Next message: <A HREF="009569.html">[Gtk-sharp-list] Help with widget not displaying in dialog
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9568">[ date ]</a>
              <a href="thread.html#9568">[ thread ]</a>
              <a href="subject.html#9568">[ subject ]</a>
              <a href="author.html#9568">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Alan-

The drawing code (in FrameDisplay.DrawAxes()) should really called on the
expose event handler for FrameDisplay. This way, it will get called whenever
the control needs to be redrawn. Just put

ExposeEvent += HandleExposeEvent;

into the FrameDisplay constructor, then put a call to DrawAxes() in the
handler:

void HandleExposeEvent(object o, Gtk.ExposeEventArgs args)
{
    DrawAxes();
}

Hope this helps.


On Sun, Apr 19, 2009 at 2:55 PM, alan battersby &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">alan.battersby at ntlworld.com</A>
&gt;<i> wrote:
</I>
&gt;<i> Hi,
</I>&gt;<i> I have a problem, I have a dialog containing a widget I wrote to display
</I>&gt;<i> axis information. In turn this widget contains another widget to draw
</I>&gt;<i> the axes concerned in a drawingarea. When I run the dialog, the drawing
</I>&gt;<i> initially appears but then is cleared. When I click on a button to
</I>&gt;<i> rotate the axes then drawing appears again and stays visible. So could
</I>&gt;<i> someone suggest what I am doing wrong or how I can stop the drawingarea
</I>&gt;<i> from being cleared initially.  Is it being cleared when I run the Dialog?
</I>&gt;<i>
</I>&gt;<i> Thanks any help would be appreciated as Ive spent all afternoon trying
</I>&gt;<i> to solve this,
</I>&gt;<i> Alan
</I>&gt;<i>
</I>&gt;<i> Code fragments are
</I>&gt;<i>
</I>&gt;<i> public partial class AxismapDialog : Gtk.Dialog
</I>&gt;<i> {
</I>&gt;<i>         public AxisMap AxisMap {
</I>&gt;<i>            get {
</I>&gt;<i>                return axismapdisplay.AxisMap;
</I>&gt;<i>            }
</I>&gt;<i>            set {
</I>&gt;<i>                axismapdisplay.AxisMap = value;
</I>&gt;<i>            }
</I>&gt;<i>  }
</I>&gt;<i>
</I>&gt;<i> public partial class AxismapDisplay : Gtk.Bin
</I>&gt;<i>  {
</I>&gt;<i>        AxisMap _map;
</I>&gt;<i>
</I>&gt;<i>        public AxisMap AxisMap {
</I>&gt;<i>            get {
</I>&gt;<i>                return _map;
</I>&gt;<i>            }
</I>&gt;<i>            set {
</I>&gt;<i>                _map = value;
</I>&gt;<i>               // code to set UI textfields etc
</I>&gt;<i>                ...
</I>&gt;<i>                // SHOULD DRAW HERE
</I>&gt;<i>                framedisplay1.Frame = _map.Frame;
</I>&gt;<i>                framedisplay1.DrawAxes();     // put this in out of
</I>&gt;<i> desperation shouldn't need it
</I>&gt;<i>            }
</I>&gt;<i>
</I>&gt;<i>            // in widget I have a buttons to rotate the axes
</I>&gt;<i>          protected virtual void OnXrotBTNClicked (object sender,
</I>&gt;<i> System.EventArgs e)
</I>&gt;<i>            {
</I>&gt;<i>                _map.Frame.Rotate90(AXIS.X);
</I>&gt;<i>                framedisplay1.DrawAxes();      // this works ok
</I>&gt;<i>            }
</I>&gt;<i>  }
</I>&gt;<i>
</I>&gt;<i> public partial class FrameDisplay : Gtk.Bin
</I>&gt;<i>  {
</I>&gt;<i>             Frame _frame;
</I>&gt;<i>
</I>&gt;<i>        public Frame Frame {
</I>&gt;<i>            get {
</I>&gt;<i>                    return _frame;
</I>&gt;<i>                }
</I>&gt;<i>            set {
</I>&gt;<i>                    _frame = value;
</I>&gt;<i>                    DrawAxes();
</I>&gt;<i>            }
</I>&gt;<i>
</I>&gt;<i>          public void DrawAxes()
</I>&gt;<i>        {
</I>&gt;<i>            if (_frame == null) return;
</I>&gt;<i>            drawingarea.GdkWindow.Clear();
</I>&gt;<i>            using (Context ct =
</I>&gt;<i> Gdk.CairoHelper.Create(drawingarea.GdkWindow))
</I>&gt;<i>            {
</I>&gt;<i>                // now scale window and centre to origin
</I>&gt;<i>                int height = 0,width = 0;
</I>&gt;<i>
</I>&gt;<i>                drawingarea.GdkWindow.GetSize(out width, out height);
</I>&gt;<i>                l = (float)Math.Min(width/2,height/2);
</I>&gt;<i>                ct.Translate(width/2,height/2);
</I>&gt;<i>                // should be centred now
</I>&gt;<i>                // first x axis
</I>&gt;<i>                ct.Color = new Cairo.Color(1,0,0);
</I>&gt;<i>                drawline(_frame.X,ct,l,AXIS.X.ToString());
</I>&gt;<i>                // now y axis
</I>&gt;<i>                ct.Color = new Cairo.Color(0,1,0);
</I>&gt;<i>                drawline(_frame.Y,ct,l,AXIS.Y.ToString());
</I>&gt;<i>                // now z axis
</I>&gt;<i>                ct.Color = new Cairo.Color(0,0,1);
</I>&gt;<i>                drawline(_frame.Z,ct,l,AXIS.Z.ToString());
</I>&gt;<i>            }
</I>&gt;<i>        }
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> //in main user window have a button to create and display the dialog.
</I>&gt;<i> protected virtual void OnAxismapbtnClicked (object sender,
</I>&gt;<i> System.EventArgs e)
</I>&gt;<i>        {
</I>&gt;<i>            AxismapDialog amd = new AxismapDialog();
</I>&gt;<i>            amd.AxisMap = _codegen.AxisMap;
</I>&gt;<i>            if (amd.Run() == (int)ResponseType.Ok)
</I>&gt;<i>            {
</I>&gt;<i>                _codegen.AxisMap = amd.AxisMap;
</I>&gt;<i>            }
</I>&gt;<i>            amd.Destroy();
</I>&gt;<i>            axismaplabel.Text = _codegen.AxisMap.ShortString;
</I>&gt;<i>        }
</I>&gt;<i>
</I>&gt;<i> Dont know if this enough information to help.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Gtk-sharp-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">Gtk-sharp-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">http://lists.ximian.com/mailman/listinfo/gtk-sharp-list</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/gtk-sharp-list/attachments/20090419/1443e0de/attachment-0001.html">http://lists.ximian.com/pipermail/gtk-sharp-list/attachments/20090419/1443e0de/attachment-0001.html</A> 
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009567.html">[Gtk-sharp-list] Help with widget not displaying in dialog
</A></li>
	<LI>Next message: <A HREF="009569.html">[Gtk-sharp-list] Help with widget not displaying in dialog
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9568">[ date ]</a>
              <a href="thread.html#9568">[ thread ]</a>
              <a href="subject.html#9568">[ subject ]</a>
              <a href="author.html#9568">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
