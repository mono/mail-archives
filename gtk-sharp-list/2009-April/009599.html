<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Gnome.Canvas slows down
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Gnome.Canvas%20slows%20down&In-Reply-To=23229581.post%40talk.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009593.html">
   <LINK REL="Next"  HREF="009603.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Gnome.Canvas slows down</H1>
    <B>Michael Hutchinson</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Gnome.Canvas%20slows%20down&In-Reply-To=23229581.post%40talk.nabble.com"
       TITLE="[Gtk-sharp-list] Gnome.Canvas slows down">m.j.hutchinson at gmail.com
       </A><BR>
    <I>Sun Apr 26 15:14:16 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="009593.html">[Gtk-sharp-list]  Gnome.Canvas slows down
</A></li>
        <LI>Next message: <A HREF="009603.html">[Gtk-sharp-list] Gnome.Canvas slows down
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9599">[ date ]</a>
              <a href="thread.html#9599">[ thread ]</a>
              <a href="subject.html#9599">[ subject ]</a>
              <a href="author.html#9599">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, Apr 25, 2009 at 3:56 AM, SKeaLoT &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">skealot at gmail.com</A>&gt; wrote:
&gt;<i> searched for this around the internet but found nothing...
</I>&gt;<i>
</I>&gt;<i> well.
</I>&gt;<i> i made a little application to test some cylindrical coordinate rendering
</I>&gt;<i> using a Gnome.Canvas . this is the first time i use this class, so i'm
</I>&gt;<i> probably missing something, but anyway the problem is that the more i play
</I>&gt;<i> with a slider, the slower the rendering gets. (each slider controls a point
</I>&gt;<i> of view property... and redraws the scene)
</I>
I'm not familiar with GnomeCanvas, but I'm pretty sure it's a retained
mode canvas, i.e. you add a collection of shapes to it, and it handles
rendering them. Then you can manipulate the shapes (e.g. using affine
transformations) and add/remove them. It retains the shapes because it
handles repainting for you, e.g. when the window is invalidated by
another window moving over it.

&gt;<i>From a quick look at your code, I suspect you're re-adding the
</I>transformed shapes every time the scene changes, covering up the old
ones without removing them. Hence your canvas is filling up with
unused, hidden items. So, if I'm correct, you should have you sliders
rotate the existing group instead of re-adding it.

However, AFAIK GnomeCanvas is deprecated. There are a few alternatives
for retained mode canvases (such as the Moonlight GTK widget), but it
looks to me like your drawing model is more suited to immediate mode.
If you want to do immediate mode graphics, I suggest creating a custom
widget that subclasses Gtk.DrawingArea, then override OnExposeEvent to
do the drawing directly:
<A HREF="http://www.go-mono.com/docs/index.aspx?tlink=22@ecma:871%23DrawingArea/">http://www.go-mono.com/docs/index.aspx?tlink=22@ecma:871%23DrawingArea/</A>

You can also use Gdk.CairoHelper to get a Cairo context from the
GdkWindow, then use Cairo to draw on the GdkWindow.

-- 
Michael Hutchinson
<A HREF="http://mjhutchinson.com">http://mjhutchinson.com</A>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009593.html">[Gtk-sharp-list]  Gnome.Canvas slows down
</A></li>
	<LI>Next message: <A HREF="009603.html">[Gtk-sharp-list] Gnome.Canvas slows down
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9599">[ date ]</a>
              <a href="thread.html#9599">[ thread ]</a>
              <a href="subject.html#9599">[ subject ]</a>
              <a href="author.html#9599">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
