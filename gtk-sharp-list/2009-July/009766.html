<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Crash when working with multiple TreeViews alongside WebView
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Crash%20when%20working%20with%20multiple%20TreeViews%0A%20alongside%20WebView&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009763.html">
   <LINK REL="Next"  HREF="009767.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Crash when working with multiple TreeViews alongside WebView</H1>
    <B>Andorien</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Crash%20when%20working%20with%20multiple%20TreeViews%0A%20alongside%20WebView&In-Reply-To="
       TITLE="[Gtk-sharp-list] Crash when working with multiple TreeViews alongside WebView">andorien at gmail.com
       </A><BR>
    <I>Sun Jul 12 12:56:15 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="009763.html">[Gtk-sharp-list] Gtk-sharp-list Digest, Vol 51, Issue 4
</A></li>
        <LI>Next message: <A HREF="009767.html">[Gtk-sharp-list] Crash when working with multiple TreeViews	alongside WebView
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9766">[ date ]</a>
              <a href="thread.html#9766">[ thread ]</a>
              <a href="subject.html#9766">[ subject ]</a>
              <a href="author.html#9766">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
So I'm trying to put together a simple RSS feed reader as sort of a personal
project.  It uses the standard design of a feed list to the left, a list of
articles on top, and the actual article being displayed on bottom.

The desired behavior is that selecting a feed will clear the article list of
any previous entries and populate it with the feed's articles.  Selecting an
article then loads the Webkit.WebView widget with the html string from the
article for display.

The crash occurs if you have a feed as well as an article already selected,
and you click another feed to select.  This causes an exception to be thrown
with the following text:
System.NullReferenceException: Object reference not set to an instance of an
object

It should be noted that this crash doesn't occur when selecting different
feeds as long as an article hasn't been selected yet.

Here are the relevant functions:
void OnFeedSelectionChanged(object o, EventArgs args)
{
	TreeSelection selection = (TreeSelection) o;
	TreeIter iter;
	selection.GetSelected(out iter);
			
	Feed feed = (Feed) FeedList.Model.GetValue(iter, 0);
			
	ItemList.View.Selection.UnselectAll(); // &lt;-- Crash occurs at both this
function call and the next
	ItemList.Model.Clear();
			
	for(byte n = 0; n &lt; feed.Items.Count; n++)
		ItemList.Model.AppendValues(feed.Items[n]);
}

void OnItemSelectionChanged(object o, EventArgs args)
{
	TreeSelection selection = (TreeSelection) o;
	TreeIter iter;
	selection.GetSelected(out iter);
			
	Feed.FeedItem item = (Feed.FeedItem) ItemList.Model.GetValue(iter, 0);
			
	View.LoadHtmlString(item.Contents, &quot;&quot;);
}


Interestingly enough, if I remove the code loading the WebView widget with
HTML, the crash disappears.  This initially led me to believe that there was
a problem with WebView, but replacing it with gtk.HTML resulted in the same
problem.  I figure there must be some issue with the why I'm manipulating
the two TreeViews, but I have no idea.  Any help would be greatly
appreciated.
-- 
View this message in context: <A HREF="http://www.nabble.com/Crash-when-working-with-multiple-TreeViews-alongside-WebView-tp24445931p24445931.html">http://www.nabble.com/Crash-when-working-with-multiple-TreeViews-alongside-WebView-tp24445931p24445931.html</A>
Sent from the Mono - Gtk# mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://lists.ximian.com/pipermail/gtk-sharp-list/attachments/20090712/56663a43/attachment.html">http://lists.ximian.com/pipermail/gtk-sharp-list/attachments/20090712/56663a43/attachment.html</A> 
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009763.html">[Gtk-sharp-list] Gtk-sharp-list Digest, Vol 51, Issue 4
</A></li>
	<LI>Next message: <A HREF="009767.html">[Gtk-sharp-list] Crash when working with multiple TreeViews	alongside WebView
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9766">[ date ]</a>
              <a href="thread.html#9766">[ thread ]</a>
              <a href="subject.html#9766">[ subject ]</a>
              <a href="author.html#9766">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
