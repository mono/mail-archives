<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Newbie's TreeView updates *very* slowly
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Newbie%27s%20TreeView%20updates%20%2Avery%2A%20slowly&In-Reply-To=3d2f29dc0812241626h2efca43ar1d4afe35f5dfe737%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009284.html">
   <LINK REL="Next"  HREF="009311.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Newbie's TreeView updates *very* slowly</H1>
    <B>fourthirtysix</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Newbie%27s%20TreeView%20updates%20%2Avery%2A%20slowly&In-Reply-To=3d2f29dc0812241626h2efca43ar1d4afe35f5dfe737%40mail.gmail.com"
       TITLE="[Gtk-sharp-list] Newbie's TreeView updates *very* slowly">fourthirtysix at yahoo.com
       </A><BR>
    <I>Tue Dec 30 19:37:30 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="009284.html">[Gtk-sharp-list] Newbie's TreeView updates *very* slowly
</A></li>
        <LI>Next message: <A HREF="009311.html">[Gtk-sharp-list] Newbie's TreeView updates *very* slowly
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9310">[ date ]</a>
              <a href="thread.html#9310">[ thread ]</a>
              <a href="subject.html#9310">[ subject ]</a>
              <a href="author.html#9310">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I've read over many of the suggestions and links in the replies, thank you to
everyone, and have added in Threading to keep the GUI responsive. There is
one weird catch however--

I load about 500,000 records into a huge ArrayList and then run multiple
searches over that. Each time I iterate over the big list, it generates a
&quot;hit&quot; and I want to update the ListStore. I do so with an AppendValues,
however the GUI does not refresh completely.

I can see it &quot;sort of&quot; refresh for some of my hits.. It will put in a few
values for each row, or add in a zero as placeholders, but it does not
update the entire screen properly until the hits are mostly in and I
actually move the mouse cursor into the treeview section of the GUI. It may
be that I have to hover over an actual Row, but I need to test some more.

Basically, it appears to be trying to update the GUI, but doesn't &quot;fully&quot;
and properly refresh until the big processes are done and i mouse into the
GUI.

During the intensive searches, I *can* get the GUI buttons to light up and I
can get a different Label.Text update to work in the statusbar.

Help!  and Thanks!



Chris Howie wrote:
&gt;<i> 
</I>&gt;<i> On Wed, Dec 24, 2008 at 5:21 PM,  &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">christian.hergert at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> Updates to the widget do not happen synchronously. Please make sure your
</I>&gt;&gt;<i> &quot;Intense Database Query&quot; is done within a thread so that gtk can continue
</I>&gt;&gt;<i> to
</I>&gt;&gt;<i> draw from its main loop when the tree model is updated.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If you get to the point where you are doing thousands of additions to the
</I>&gt;&gt;<i> model, you may want to consider removing the model from the treeview,
</I>&gt;&gt;<i> doing
</I>&gt;&gt;<i> the updates, and then re-attaching the model. This will speed up the UI
</I>&gt;&gt;<i> because many of the model events (such as row added) do not need to be
</I>&gt;&gt;<i> handled by the treeview.
</I>&gt;<i> 
</I>&gt;<i> ( Directed at fourthirtysix: )
</I>&gt;<i> 
</I>&gt;<i> Also, updating a model that's attached to a widget from another thread
</I>&gt;<i> is likely to segfault your application, or at least cause some odd
</I>&gt;<i> behavior.  You would have to use Application.Invoke to do this, which
</I>&gt;<i> is probably going to be very slow since it pushes a fake event on the
</I>&gt;<i> event stack to be executed on the main loop (in other words, it
</I>&gt;<i> involves costly cross-thread synchronization).
</I>&gt;<i> 
</I>&gt;<i> You might be better off using a progress bar to indicate progress.
</I>&gt;<i> Just have it update every half second or so (see GLib.Timeout) from a
</I>&gt;<i> value you write to on your other thread.  I've used this model with
</I>&gt;<i> pretty good success.  It cuts down on the CPU usage required to update
</I>&gt;<i> the visual progress meter while keeping it responsive enough that the
</I>&gt;<i> user knows it's not frozen.
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Chris Howie
</I>&gt;<i> <A HREF="http://www.chrishowie.com">http://www.chrishowie.com</A>
</I>&gt;<i> <A HREF="http://en.wikipedia.org/wiki/User:Crazycomputers">http://en.wikipedia.org/wiki/User:Crazycomputers</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Gtk-sharp-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">Gtk-sharp-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">http://lists.ximian.com/mailman/listinfo/gtk-sharp-list</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>
-- 
View this message in context: <A HREF="http://www.nabble.com/Newbie%27s-TreeView-updates-*very*-slowly-tp21151505p21225429.html">http://www.nabble.com/Newbie%27s-TreeView-updates-*very*-slowly-tp21151505p21225429.html</A>
Sent from the Mono - Gtk# mailing list archive at Nabble.com.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009284.html">[Gtk-sharp-list] Newbie's TreeView updates *very* slowly
</A></li>
	<LI>Next message: <A HREF="009311.html">[Gtk-sharp-list] Newbie's TreeView updates *very* slowly
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9310">[ date ]</a>
              <a href="thread.html#9310">[ thread ]</a>
              <a href="subject.html#9310">[ subject ]</a>
              <a href="author.html#9310">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
