<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] ComboBox with two columns
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20ComboBox%20with%20two%20columns&In-Reply-To=19953369.post%40talk.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009860.html">
   <LINK REL="Next"  HREF="009862.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] ComboBox with two columns</H1>
    <B>Madian</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20ComboBox%20with%20two%20columns&In-Reply-To=19953369.post%40talk.nabble.com"
       TITLE="[Gtk-sharp-list] ComboBox with two columns">madian001 at gmail.com
       </A><BR>
    <I>Tue Sep  8 12:14:10 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="009860.html">[Gtk-sharp-list] Dual/multi monitor support?
</A></li>
        <LI>Next message: <A HREF="009862.html">[Gtk-sharp-list] [Mono-dev] Gtk depends on Winforms &#191;?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9861">[ date ]</a>
              <a href="thread.html#9861">[ thread ]</a>
              <a href="subject.html#9861">[ subject ]</a>
              <a href="author.html#9861">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi, everybody,
well at first let me say, that we must to understand how the combobox are
made ,
we have a list, and an entry(in ComboBoxEntry), a model,
To get data from some database or another kind of dataprovider you need at
first
to define what column or data will be displayed in the dropdown list
for example if have a simple table let's say Countries

Table Countries
Id Int
Name varchar(25)

I assume you wish to show Name column, ok?
so the TreeModel for your combo look's like this

TreeModel ComboData = new TreeModel(typeof (string), typeof (int));

Always, and i don't now why, but always the first column must to be a
string, the rest 
of data types it doesn't mather.

Please se my sample down.
After, when you try to get the id, or value asosiated to the 
item selected in the combobox 

if(combo.GetActiveIter(out iter))
   Console.WriteLine(combo.Model.GetValue(iter,1));

This is a simple Sub, that I made for to fill a combo with data
To do something like the DataSource property it does in the WindowsForm

public static void SetDataSource (string SQLQuery,
                                  Gtk.ComboBoxEntry Combo)
{
//Here the origin of data are set
	MySqlConnection	Connection	= new
MySqlConnection(DataBase.ConnectionString);
	MySqlCommand	Command	= new MySqlCommand(SQLQuery);
	MySqlDataReader	DataReader;
	
	try{
		Connection.Open();
		Command.Connection = Connection;
		DataReader = Command.ExecuteReader();
		
		if (DataReader.HasRows)
		{//Declare a simple liststore
			ListStore store = new ListStore(typeof (string),typeof(int));
                        //Fill the liststore
			while (DataReader.Read())
				store.AppendValues (DataReader.GetString(1),DataReader.GetInt32(0));
			
                        //Set this liststore as model of your combo
			Combo.Model = store;
                        //this part it's optional if you wish to enable
search into the combo
			Combo.Entry.Completion = new EntryCompletion();
			Combo.Entry.Completion.Model = store;
			Combo.Entry.Completion.TextColumn = 0;
		}
		DataReader.Close();
	}
	catch (MySqlException  mex)
	{
		MsgBox.Show(mex.Message +
		            Environment.NewLine +
		            mex.Source +
		            Environment.NewLine +
		            mex.Number.ToString(),
		            MessageType.Error);
	}
	catch (Exception sex)
	{
		MsgBox.Show(sex.Message +
		            Environment.NewLine +
		            sex.Source +
		            Environment.NewLine,
		            MessageType.Error);
	}
	finally
	{
		Command.Dispose();
		Command.Connection.Dispose();
	}
}

I hope this could be helpful. any doubt, comment, please mail me.
-- 
View this message in context: <A HREF="http://www.nabble.com/ComboBox-with-two-columns-tp19953369p25349318.html">http://www.nabble.com/ComboBox-with-two-columns-tp19953369p25349318.html</A>
Sent from the Mono - Gtk# mailing list archive at Nabble.com.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009860.html">[Gtk-sharp-list] Dual/multi monitor support?
</A></li>
	<LI>Next message: <A HREF="009862.html">[Gtk-sharp-list] [Mono-dev] Gtk depends on Winforms &#191;?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9861">[ date ]</a>
              <a href="thread.html#9861">[ thread ]</a>
              <a href="subject.html#9861">[ subject ]</a>
              <a href="author.html#9861">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
