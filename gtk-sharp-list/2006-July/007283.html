<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Object destruction
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Object%20destruction&In-Reply-To=1153046303.5572.3.camel%40localhost.localdomain">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007281.html">
   <LINK REL="Next"  HREF="007287.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Object destruction</H1>
    <B>Victor Rafael Rivarola Soerensen (FANATICO y LOCO por Cristo)</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Object%20destruction&In-Reply-To=1153046303.5572.3.camel%40localhost.localdomain"
       TITLE="[Gtk-sharp-list] Object destruction">vrrivaro at gmail.com
       </A><BR>
    <I>Sun Jul 16 14:38:59 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="007281.html">[Gtk-sharp-list] Object destruction
</A></li>
        <LI>Next message: <A HREF="007287.html">[Gtk-sharp-list] Object destruction
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7283">[ date ]</a>
              <a href="thread.html#7283">[ thread ]</a>
              <a href="subject.html#7283">[ subject ]</a>
              <a href="author.html#7283">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2006/7/16, Thorsten Schoel &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">thorsten.schoel at lycos.de</A>&gt;:
&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> I stumbled upon a behaviour of Gtk# that seems to be quite problematic
</I>&gt;<i> to me:
</I>&gt;<i>
</I>&gt;<i> When a Widget is removed from a container and no more obvious references
</I>&gt;<i> to it exist it is still not destroyed. No Destroy or DestroyEvent event
</I>&gt;<i> is emitted. Also if you encapsulate a widget in a new class its
</I>&gt;<i> destructor isn't called, even after a call to System.GC.Sollect(). This
</I>&gt;<i> is in contrast to the same code written in C. I have attached three
</I>&gt;<i> examples: test.c showing the (correctly working) C-code, test.cs showing
</I>&gt;<i> the (not correctly working) C#-code using a simple Gtk#-object and
</I>&gt;<i> test2.cs showing the (not working correctly as well) C#-code using an
</I>&gt;<i> encapsulated object - in this last case the destructor is only called
</I>&gt;<i> when the whole program exits as its output is
</I>&gt;<i>
</I>&gt;<i> Quit
</I>&gt;<i> Exit
</I>&gt;<i> Destructor called!
</I>&gt;<i>
</I>&gt;<i> What the program does is simply remove a button from the window when it's clicked.
</I>&gt;<i>
</I>&gt;<i> My question is if this behaviour is a bug in Gtk# (it would be a rather
</I>&gt;<i> serious one in my opinion) or if I made some mistake in my code. Since I am somehow confused about this behaviour of Gtk# I would appreciate any comments that could enlighen me here.
</I>&gt;<i>
</I>&gt;<i> Thank you
</I>&gt;<i>
</I>
This is not a bug, but a C&#183; fetaure ;-) by design.

Destructors are not called until the memoty is needed. Period.

Except the objects which implement the IIsDisposable interface.

Suppose the Gtk.Button class implements this interface (I don't
remember if it does or doesn't). All you would have to do in your
program is call the methods:

button.Dispose ();
wnd.Dispose ();

Jesus bless you,

Victor Rivarola

-- 
FAN&#193;TICO
&quot;Por cuanto eres tibio, y no fr&#237;o ni caliente, te vomitar&#233; de mi boca.&quot;
Apocalipsis 3:16

LOCO
&quot;Porque la Palabra de la Cruz es locura para los que se pierden; pero a
los que se salvan, esto es, a nosotros, es poder de Dios.&quot;
1 Corintios 1:18
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007281.html">[Gtk-sharp-list] Object destruction
</A></li>
	<LI>Next message: <A HREF="007287.html">[Gtk-sharp-list] Object destruction
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7283">[ date ]</a>
              <a href="thread.html#7283">[ thread ]</a>
              <a href="subject.html#7283">[ subject ]</a>
              <a href="author.html#7283">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
