<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Trouble with DrawingArea.MotionNotifyEvent.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ivan.guzvinec%40telemach.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
   <LINK REL="Previous"  HREF="003677.html">
   <LINK REL="Next"  HREF="003676.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Trouble with DrawingArea.MotionNotifyEvent.
   </H1>
    <B>Ivan Gu¾vinec
    </B> 
    <A HREF="mailto:ivan.guzvinec%40telemach.net"
       TITLE="[Gtk-sharp-list] Trouble with DrawingArea.MotionNotifyEvent.">ivan.guzvinec@telemach.net
       </A><BR>
    <I>Tue, 23 Mar 2004 09:16:24 +0100</I>
    <P><UL>
        <LI> Previous message: <A HREF="003677.html">[Gtk-sharp-list] Trouble with DrawingArea.MotionNotifyEvent.
</A></li>
        <LI> Next message: <A HREF="003676.html">[Gtk-sharp-list] wacom tablet / xinput
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3693">[ date ]</a>
              <a href="thread.html#3693">[ thread ]</a>
              <a href="subject.html#3693">[ subject ]</a>
              <a href="author.html#3693">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--=-jgE7LKqKhcqUsCE60pPT
Content-Type: multipart/mixed; boundary=&quot;=-PV07YZLzOYyDIh7REwxY&quot;


--=-PV07YZLzOYyDIh7REwxY
Content-Type: multipart/alternative; boundary=&quot;=-QYRClxjdbyyuBjx/pUZ+&quot;


--=-QYRClxjdbyyuBjx/pUZ+
Content-Type: text/plain; charset=iso-8859-2
Content-Transfer-Encoding: quoted-printable

One of the answers I was looking for was that:
Gdk.EventMotion ev =3D args.Event;
Gdk.Window window =3D ev.Window;
if (ev.IsHint) {
    Gdk.ModifierType s;
    window.GetPointer (out x, out y, out s);
}
MUST be performed inside MotionNotifyEventHandler.

This &quot;bug-fixed&quot; attached sample works as expected.

Thanks for luck ;))
Ivan

On Sun, 2004-03-21 at 17:33, Ofer Achler wrote:

&gt;<i> You can get the same effect by attaching to the expose event of the
</I>&gt;<i> parent window.
</I>&gt;<i>=20
</I>&gt;<i> =20
</I>&gt;<i>=20
</I>&gt;<i> Good luck!
</I>&gt;<i>=20
</I>&gt;<i> =20
</I>&gt;<i>=20
</I>&gt;<i>                                   =20
</I>&gt;<i> ______________________________________________________________________
</I>&gt;<i>=20
</I>&gt;<i> From:<A HREF="mailto:gtk-sharp-list-admin@lists.ximian.com">gtk-sharp-list-admin@lists.ximian.com</A>
</I>&gt;<i> [mailto:<A HREF="mailto:gtk-sharp-list-admin@lists.ximian.com">gtk-sharp-list-admin@lists.ximian.com</A>] On Behalf Of Ivan
</I>&gt;<i> Gu=BEvinec
</I>&gt;<i> Sent: Sunday, March 21, 2004 6:07 AM
</I>&gt;<i> To: <A HREF="mailto:gtk-sharp-list@lists.ximian.com">gtk-sharp-list@lists.ximian.com</A>
</I>&gt;<i> Subject: [Gtk-sharp-list] Trouble with DrawingArea.MotionNotifyEvent.
</I>&gt;<i>=20
</I>&gt;<i>=20
</I>&gt;<i> =20
</I>&gt;<i>=20
</I>&gt;<i> Hi,
</I>&gt;<i>=20
</I>&gt;<i> I'm having trouble with MotionNotifyEvent in my derived Window class.
</I>&gt;<i> I would like to create a DrawingArea widget, add it to self (this) and
</I>&gt;<i> then catch its MotionNotifyEvent(s). So far I only get exactly one
</I>&gt;<i> MotionNotifyEvent when (1) mouse Enters the window area or (2) when I
</I>&gt;<i> press mouse buttons and then move the mouse inside the DrawingArea.
</I>&gt;<i> But when I simply move the mouse inside the DrawingArea, no
</I>&gt;<i> MotionNotifyEvents are fired.
</I>&gt;<i>=20
</I>&gt;<i> Perhaps I'm doing things the wrong way, so any hint/help would be
</I>&gt;<i> greatly appreciated.
</I>&gt;<i>=20
</I>&gt;<i> I've made a simple test program to demonstrate this. Please find the
</I>&gt;<i> attached &quot;CreatedWindow.cs&quot;, compile with &quot;mcs -r gtk-sharp.dll -r
</I>&gt;<i> gdk-sharp.dll -r glib-sharp.dll CreatedWindow.cs&quot;
</I>&gt;<i>=20
</I>&gt;<i> thanks,
</I>&gt;<i> Ivan=20
</I>&gt;<i>=20
</I>&gt;<i>=20
</I>
--=-QYRClxjdbyyuBjx/pUZ+
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: quoted-printable

&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 TRANSITIONAL//EN&quot;&gt;
&lt;HTML&gt;
&lt;HEAD&gt;
  &lt;META HTTP-EQUIV=3D&quot;Content-Type&quot; CONTENT=3D&quot;text/html; CHARSET=3DUTF-8&quot;&gt;
  &lt;META NAME=3D&quot;GENERATOR&quot; CONTENT=3D&quot;GtkHTML/3.0.9&quot;&gt;
&lt;/HEAD&gt;
&lt;BODY LINK=3D&quot;#0000ff&quot;&gt;
One of the answers I was looking for was that:&lt;BR&gt;
Gdk.EventMotion ev =3D args.Event;&lt;BR&gt;
Gdk.Window window =3D ev.Window;&lt;BR&gt;
if (ev.IsHint) {&lt;BR&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; Gdk.ModifierType s;&lt;BR&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; window.GetPointer (out x, out y, out s);&lt;BR&gt;
}&lt;BR&gt;
MUST be performed inside MotionNotifyEventHandler.&lt;BR&gt;
&lt;BR&gt;
This &amp;quot;bug-fixed&amp;quot; attached sample works as expected.&lt;BR&gt;
&lt;BR&gt;
Thanks for luck ;))&lt;BR&gt;
Ivan&lt;BR&gt;
&lt;BR&gt;
On Sun, 2004-03-21 at 17:33, Ofer Achler wrote:
&lt;BLOCKQUOTE TYPE=3DCITE&gt;
    &lt;FONT COLOR=3D&quot;#000080&quot; SIZE=3D&quot;2&quot;&gt;&lt;I&gt;You can get the same effect by at=
taching to the expose event of the parent window.&lt;/FONT&gt;&lt;BR&gt;
    &lt;FONT COLOR=3D&quot;#737373&quot;&gt;&lt;/FONT&gt;&lt;BR&gt;
    &lt;FONT COLOR=3D&quot;#000080&quot; SIZE=3D&quot;2&quot;&gt;&amp;nbsp;&lt;/FONT&gt;&lt;BR&gt;
    &lt;FONT COLOR=3D&quot;#737373&quot;&gt;&lt;/FONT&gt;&lt;BR&gt;
    &lt;FONT COLOR=3D&quot;#000080&quot; SIZE=3D&quot;2&quot;&gt;Good luck!&lt;/FONT&gt;&lt;BR&gt;
    &lt;FONT COLOR=3D&quot;#737373&quot;&gt;&lt;/FONT&gt;&lt;BR&gt;
    &lt;FONT COLOR=3D&quot;#000080&quot; SIZE=3D&quot;2&quot;&gt;&amp;nbsp;&lt;/FONT&gt;&lt;BR&gt;
    &lt;FONT COLOR=3D&quot;#737373&quot;&gt;&lt;BR&gt;
    &lt;DIV ALIGN=3Dcenter&gt;
&lt;HR&gt;
&lt;/DIV&gt;&lt;BR&gt;
    &lt;/FONT&gt;&lt;BR&gt;
    &lt;FONT COLOR=3D&quot;#737373&quot; SIZE=3D&quot;2&quot;&gt;&lt;B&gt;From:&lt;/B&gt;<A HREF="mailto:gtk-sharp-list-admin@lis">gtk-sharp-list-admin@lis</A>=
ts.ximian.com [mailto:<A HREF="mailto:gtk-sharp-list-admin@lists.ximian.com">gtk-sharp-list-admin@lists.ximian.com</A>] &lt;B&gt;On Behalf O=
f &lt;/B&gt;Ivan Gu&amp;#382;vinec&lt;BR&gt;
    &lt;B&gt;Sent:&lt;/B&gt; Sunday, March 21, 2004 6:07 AM&lt;BR&gt;
    &lt;B&gt;To:&lt;/B&gt; <A HREF="mailto:gtk-sharp-list@lists.ximian.com">gtk-sharp-list@lists.ximian.com</A>&lt;BR&gt;
    &lt;B&gt;Subject:&lt;/B&gt; [Gtk-sharp-list] Trouble with DrawingArea.MotionNotifyE=
vent.&lt;/FONT&gt;&lt;BR&gt;
    &lt;FONT COLOR=3D&quot;#737373&quot;&gt;&lt;BR&gt;
    &lt;/FONT&gt;&lt;BR&gt;
    &lt;FONT COLOR=3D&quot;#737373&quot; SIZE=3D&quot;3&quot;&gt;&amp;nbsp;&lt;/FONT&gt;&lt;BR&gt;
    &lt;FONT COLOR=3D&quot;#737373&quot;&gt;&lt;/FONT&gt;&lt;BR&gt;
    &lt;FONT COLOR=3D&quot;#737373&quot; SIZE=3D&quot;3&quot;&gt;Hi,&lt;BR&gt;
    &lt;BR&gt;
    I'm having trouble with MotionNotifyEvent in my derived Window class. I=
 would like to create a DrawingArea widget, add it to self (this) and then =
catch its MotionNotifyEvent(s). So far I only get exactly one MotionNotifyE=
vent when (1) mouse Enters the window area or (2) when I press mouse button=
s and then move the mouse inside the DrawingArea. But when I simply move th=
e mouse inside the DrawingArea, no MotionNotifyEvents are fired.&lt;BR&gt;
    &lt;BR&gt;
    Perhaps I'm doing things the wrong way, so any hint/help would be great=
ly appreciated.&lt;BR&gt;
    &lt;BR&gt;
    I've made a simple test program to demonstrate this. Please find the at=
tached &amp;quot;CreatedWindow.cs&amp;quot;, compile with &amp;quot;mcs -r gtk-sharp.dl=
l -r gdk-sharp.dll -r glib-sharp.dll CreatedWindow.cs&amp;quot;&lt;BR&gt;
    &lt;BR&gt;
    thanks,&lt;BR&gt;
    Ivan &lt;/FONT&gt;&lt;BR&gt;
    &lt;FONT COLOR=3D&quot;#737373&quot;&gt;&lt;BR&gt;
    &lt;/I&gt;&lt;/FONT&gt;&lt;BR&gt;
&lt;/BLOCKQUOTE&gt;
&lt;/BODY&gt;
&lt;/HTML&gt;

--=-QYRClxjdbyyuBjx/pUZ+--

--=-PV07YZLzOYyDIh7REwxY
Content-Disposition: attachment; filename=CreatedWindow.cs
Content-Transfer-Encoding: base64
Content-Type: text/x-csharp; name=CreatedWindow.cs; charset=

Ly8gY3JlYXRlZCBvbiAwMy8yMS8yMDA0IGF0IDE0OjQwDQp1c2luZyBTeXN0ZW07DQp1c2luZyBH
dGs7DQp1c2luZyBHZGs7DQoNCnB1YmxpYyBjbGFzcyBDcmVhdGVkV2luZG93IDogR3RrLldpbmRv
dw0Kew0KCXN0YXRpYyBHTGliLkdUeXBlIHR5cGU7DQoJDQoJcHJpdmF0ZSBEcmF3aW5nQXJlYQlk
YTsNCgkNCglzdGF0aWMgQ3JlYXRlZFdpbmRvdyAoKQ0KCXsNCgkJdHlwZSA9IFJlZ2lzdGVyR1R5
cGUgKHR5cGVvZiAoQ3JlYXRlZFdpbmRvdykpOwkJfQ0KCQ0KCXB1YmxpYyBDcmVhdGVkV2luZG93
ICgpIDogYmFzZSAodHlwZSkNCgl7DQoJCWRhID0gbmV3IERyYXdpbmdBcmVhKCk7DQoJCWRhLlNl
dFNpemVSZXF1ZXN0KDY0MCwgNDgwKTsJCQ0KCQl0aGlzLkFkZChkYSk7DQoJCWRhLk1vdGlvbk5v
dGlmeUV2ZW50ICs9IG5ldyBNb3Rpb25Ob3RpZnlFdmVudEhhbmRsZXIocGljdl9Nb3ZlKTsNCiAg
ICAJCWRhLkV2ZW50cyA9ICAoaW50KUdkay5FdmVudE1hc2suQWxsRXZlbnRzTWFzazsNCgl9DQoJ
DQoJcHJpdmF0ZSB2b2lkIHBpY3ZfTW92ZShvYmplY3Qgb2JqLCBNb3Rpb25Ob3RpZnlFdmVudEFy
Z3MgYXJncykNCgl7DQoJCWludCB4LCB5Ow0KCQlHZGsuTW9kaWZpZXJUeXBlIHN0YXRlOw0KCQlH
ZGsuRXZlbnRNb3Rpb24gZXYgPSBhcmdzLkV2ZW50Ow0KCQlHZGsuV2luZG93IHdpbmRvdyA9IGV2
LldpbmRvdzsNCgkJCQ0KCQlTeXN0ZW0uQ29uc29sZS5Xcml0ZUxpbmUoIlg9ezB9LCBZPXsxfSIs
IGV2LlgsIGV2LlkpOw0KDQoJCWlmIChldi5Jc0hpbnQpIHsNCgkJCUdkay5Nb2RpZmllclR5cGUg
czsNCgkJCXdpbmRvdy5HZXRQb2ludGVyIChvdXQgeCwgb3V0IHksIG91dCBzKTsNCgkJCS8vc3Rh
dGUgPSBzOw0KCQl9DQoJCQ0KCQlhcmdzLlJldFZhbCA9IHRydWU7DQoJfQ0KfQ0KDQpjbGFzcyBN
YWluQ2xhc3Mgew0KCXB1YmxpYyBzdGF0aWMgdm9pZCBNYWluKCkNCgl7DQoJCUFwcGxpY2F0aW9u
LkluaXQoKTsNCgkJDQoJCUNyZWF0ZWRXaW5kb3cgd2luID0gbmV3IENyZWF0ZWRXaW5kb3coKTsN
CgkJd2luLlNob3dBbGwoKTsNCgkJDQoJCUFwcGxpY2F0aW9uLlJ1bigpOw0KCX0NCn0NCg==

--=-PV07YZLzOYyDIh7REwxY--

--=-jgE7LKqKhcqUsCE60pPT
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.2 (GNU/Linux)

iQCUAwUAQF/yWMj+Az87AOMpAQIQqAP1EeXdqFDJbmdDoau8GNA9VQpjSFYYTmby
5n/d7xuEHv+yYo21+088I9TgC0ph9h51X3KmxCEAXY4VdJ66IHpc9vDx3DWL7KDj
AasyqquCX02mg///IXeoYV7cUZaX47rHiiDMxMwr8c9Qg8ARF42zYerTU+d5voYG
yk9d1CpTjw==
=YCoH
-----END PGP SIGNATURE-----

--=-jgE7LKqKhcqUsCE60pPT--


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="003677.html">[Gtk-sharp-list] Trouble with DrawingArea.MotionNotifyEvent.
</A></li>
	<LI> Next message: <A HREF="003676.html">[Gtk-sharp-list] wacom tablet / xinput
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3693">[ date ]</a>
              <a href="thread.html#3693">[ thread ]</a>
              <a href="subject.html#3693">[ subject ]</a>
              <a href="author.html#3693">[ author ]</a>
         </LI>
       </UL>
</body></html>
