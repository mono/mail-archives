<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Gtk-sharp-list] Creating critical section for	unhandled	exception handler
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Creating%20critical%20section%0A%20for%09unhandled%09exception%20handler&In-Reply-To=1274649419536-2228076.post%40n4.nabble.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010299.html">
   <LINK REL="Next"  HREF="010301.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Gtk-sharp-list] Creating critical section for	unhandled	exception handler</H1>
    <B>Christopher David Howie</B> 
    <A HREF="mailto:gtk-sharp-list%40lists.ximian.com?Subject=%5BGtk-sharp-list%5D%20Creating%20critical%20section%0A%20for%09unhandled%09exception%20handler&In-Reply-To=1274649419536-2228076.post%40n4.nabble.com"
       TITLE="[Gtk-sharp-list] Creating critical section for	unhandled	exception handler">me at chrishowie.com
       </A><BR>
    <I>Sun May 23 20:57:46 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="010299.html">[Gtk-sharp-list] Creating critical section for	unhandled	exception handler
</A></li>
        <LI>Next message: <A HREF="010301.html">[Gtk-sharp-list] Creating critical section	for	unhandled	exception handler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10300">[ date ]</a>
              <a href="thread.html#10300">[ thread ]</a>
              <a href="subject.html#10300">[ subject ]</a>
              <a href="author.html#10300">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 05/23/2010 05:16 PM, Styne wrote:
&gt;<i> If something is reentrant then it can be called again without
</I>&gt;<i> waiting for the previous invocation. So if we assume that my 
</I>&gt;<i> UnhandledException event handler is reentrant (since it doesn't 
</I>&gt;<i> access global data etc.) then it can be executed concurrently.
</I>
What member of what class are you attaching your event handler to?

&gt;<i> Now the point that looses me completely... the thread never leaves my
</I>&gt;<i> event handler so how can it reenter it? The thread calls
</I>&gt;<i> Dialog.Run() which is meant to block. If this blocks then how can the
</I>&gt;<i> same blocked thread reenter the event handler?
</I>
Run() blocks in that it does not return until the dialog is closed.  But
it must call the GLib main loop again, because this loop is responsible
for dispatching GTK+ events.  In other words, if it did not re-enter the
main loop, the dialog would not be able to respond to events.  So this
is the possible execution path I see:

* GLib main loop.
** Unhandled exception handler, calls Dialog.Run().
*** Dialog.Run() sets up the dialog, calls main loop to process events.
**** GLib main loop.
***** Unhandled exception handler.
****** ...

It sounds like you need a more sophisticated mechanism to handle the
case where exceptions may be thrown while the dialog is shown.  You
might consider using a Queue&lt;&gt; to hold exceptions that have been thrown.
 Additionally, you should be very careful to catch every possible
exception that might occur in your UnhandledException handler so as to
prevent an infinite loop.

-- 
Chris Howie
<A HREF="http://www.chrishowie.com">http://www.chrishowie.com</A>
<A HREF="http://en.wikipedia.org/wiki/User:Crazycomputers">http://en.wikipedia.org/wiki/User:Crazycomputers</A>

If you correspond with me on a regular basis, please read this document:
<A HREF="http://www.chrishowie.com/email-preferences/">http://www.chrishowie.com/email-preferences/</A>

PGP fingerprint: 2B7A B280 8B12 21CC 260A DF65 6FCE 505A CF83 38F5

------------------------------------------------------------------------
                    IMPORTANT INFORMATION/DISCLAIMER

This document should be read only by those persons to whom it is
addressed.  If you have received this message it was obviously addressed
to you and therefore you can read it.

Additionally, by sending an email to ANY of my addresses you are
agreeing that I am, by definition, &quot;the intended recipient,&quot; and that I
may do whatever I wish with the contents of any message you send me,
unless a pre-existing agreement prohibits me from so doing.

This overrides any disclaimer or statement of confidentiality that may
be included on your message.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010299.html">[Gtk-sharp-list] Creating critical section for	unhandled	exception handler
</A></li>
	<LI>Next message: <A HREF="010301.html">[Gtk-sharp-list] Creating critical section	for	unhandled	exception handler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10300">[ date ]</a>
              <a href="thread.html#10300">[ thread ]</a>
              <a href="subject.html#10300">[ subject ]</a>
              <a href="author.html#10300">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/gtk-sharp-list">More information about the Gtk-sharp-list
mailing list</a><br>
</body></html>
