<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-docs-list] Documentation Updating...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-docs-list%40lists.ximian.com?Subject=%5BMono-docs-list%5D%20Documentation%20Updating...&In-Reply-To=1166800972.32662.76.camel%40melchior.magi">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001740.html">
   <LINK REL="Next"  HREF="001739.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-docs-list] Documentation Updating...</H1>
    <B>latency at gmx.de</B> 
    <A HREF="mailto:mono-docs-list%40lists.ximian.com?Subject=%5BMono-docs-list%5D%20Documentation%20Updating...&In-Reply-To=1166800972.32662.76.camel%40melchior.magi"
       TITLE="[Mono-docs-list] Documentation Updating...">latency at gmx.de
       </A><BR>
    <I>Thu Jan 25 11:21:11 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="001740.html">[Mono-docs-list] MSBuild docs
</A></li>
        <LI>Next message: <A HREF="001739.html">[Mono-docs-list] MSBuild docs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1737">[ date ]</a>
              <a href="thread.html#1737">[ thread ]</a>
              <a href="subject.html#1737">[ subject ]</a>
              <a href="author.html#1737">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I would use the approach 3b. This seems to be the best solution for me since 
it shows clearly when a member is present without those &lt;since&gt; &lt;removed&gt; 
&lt;again-since&gt; &lt;removed again&gt; tags. In addition it would be similar to the 
way microsoft has it's documentation organized. Each Member in MSDocs has 
a &quot;Available in:&quot; note on the bottom.

But is this checking if a member can be removed or not necessary? In my 
opinion marking the member with short &lt;avaliable_in&gt; tags would be enough.

Kind Regards,
Valentin S.

On Friday 22 December 2006 16:22, Jonathan Pryor wrote:
&gt;<i> I'm working on getting monodocer support into monodoc/class.  As
</I>&gt;<i> suggested in an earlier email, my current approach is this:
</I>&gt;<i>
</I>&gt;<i> UPDATE_COMMAND = \
</I>&gt;<i> 	mono --debug ../tools/monodocer1.exe -pretty -overrides -ignore_extra_docs
</I>&gt;<i>  \ -assembly:@prefix@/lib/mono/1.0/$(1).dll                            \
</I>&gt;<i> -path:./$(2)/en || exit 1;                                          \ mono
</I>&gt;<i> --debug ../tools/monodocer.exe -pretty -overrides                      \
</I>&gt;<i> -assembly:@prefix@/lib/mono/2.0/$(1).dll                            \
</I>&gt;<i> -path:./$(2)/en || exit 1;
</I>&gt;<i>
</I>&gt;<i> update:
</I>&gt;<i> 	for i in $(UPDATE_DIRS); do \
</I>&gt;<i> 		a=`echo $$i | sed -r 's/^([^:]+).*$$/\1/'`; \
</I>&gt;<i> 		d=`echo $$i | sed -r 's/^[^:]+:(.*)$$/\1/'`; \
</I>&gt;<i> 		if test -z &quot;$$d&quot; ; then d=&quot;$$a&quot;; fi; \
</I>&gt;<i> 		$(call UPDATE_COMMAND,$$a,$$d)
</I>&gt;<i> 	done
</I>&gt;<i> 	mono --debug ../tools/monodocer.exe -pretty -overrides \
</I>&gt;<i> 		-assembly:@prefix@/lib/mono/1.0/nunit.framework.dll -path:./nunit/en
</I>&gt;<i>
</I>&gt;<i> That is, I run monodocer *twice* on each assembly, one under the 1.0
</I>&gt;<i> profile (to get any members we added from .NET 1.0), and again under the
</I>&gt;<i> 2.0 profile (to get any members added from .NET 2.0).  (It's trivial to
</I>&gt;<i> expand this for .NET 3.0 -- just run monodocer again!)
</I>&gt;<i>
</I>&gt;<i> You'll note the `-ignore_extra_docs' flag.  This is a (currently
</I>&gt;<i> private) addition which prevents the removal of members that aren't
</I>&gt;<i> found.  This is necessary so that repeated invocations don't remove
</I>&gt;<i> documentation -- e.g. you update the 2.0 docs, then re-run the process,
</I>&gt;<i> the 2.0 members won't be found in the 1.0 assemblies, and we don't want
</I>&gt;<i> these removed so that (1) their documentation is preserved, and (2)
</I>&gt;<i> they'll be present when we run against the 2.0 assemblies.
</I>&gt;<i>
</I>&gt;<i> Then for good measure, the 2.0 update doesn't have -ignore_extra_docs,
</I>&gt;<i> under the assumption that 2.0 will have all the methods found in 1.0.
</I>&gt;<i>
</I>&gt;<i> Alas, this assumption is wrong -- there are a number of members in
</I>&gt;<i> corlib 2.0 that are `#if !NET_2_0' -- they're only present under .NET
</I>&gt;<i> 1.0.  Examples: System.Text.UnicodeEncoding.GetBytes(string), and there
</I>&gt;<i> are 17 others in mscorlib alone (I haven't tried this on anything else
</I>&gt;<i> yet).
</I>&gt;<i>
</I>&gt;<i> Obviously, we don't want to remove these members...or do we?
</I>&gt;<i>
</I>&gt;<i> The obvious fix is to add -ignore_extra_docs to the 2.0 generation, but
</I>&gt;<i> this means that if a member is ever added, it will never get deleted.
</I>&gt;<i> Perhaps this isn't a problem, perhaps it is.
</I>&gt;<i>
</I>&gt;<i> What is becoming apparent is that 1.0 and 2.0 are sufficiently different
</I>&gt;<i> that saying &quot;monodoc should document what the source code permits&quot; is
</I>&gt;<i> impossible to do with complete accuracy.
</I>&gt;<i>
</I>&gt;<i> Which leaves us with a few choices:
</I>&gt;<i>
</I>&gt;<i> 1. Live with the limitations, and use -ignore_extra_docs on 2.0
</I>&gt;<i> assemblies (thus implying that some members displayed in monodoc
</I>&gt;<i> actually exist in 2.0, which may not be true), or leave off
</I>&gt;<i> -ignore_extra_docs on 2.0 assemblies (so we lose some members/overrides
</I>&gt;<i> that were present in 1.0 but not 2.0).
</I>&gt;<i>
</I>&gt;<i> 2. Have separate documentation trees for 1.0 vs 2.0 assemblies.  This
</I>&gt;<i> mirrors the mdsn.microsoft.com vs msdn2.microsoft.com separation.  Alas,
</I>&gt;<i> this means documentation duplication, and we have enough problems
</I>&gt;<i> writing documentation that this probably isn't a good idea.
</I>&gt;<i>
</I>&gt;<i> 3. Find some way of removing the limitations of (1).  I'm not entirely
</I>&gt;<i> sure what this would entail -- perhaps having a monodocer mode where, if
</I>&gt;<i> a module is removed, it adds a Docs/removed element with the same value
</I>&gt;<i> as &lt;since/&gt;, e.g. &lt;removed version=&quot;.NET 2.0&quot; /&gt;.
</I>&gt;<i>
</I>&gt;<i> 3b. Modify the documentation format so that we explicitly state in which
</I>&gt;<i> versions a member exists, so instead of
</I>&gt;<i> a /Type/AssemblyInfo/AssemblyVersion element, we'd
</I>&gt;<i> have /Type/Members/Member/AssemblyInfo/AssemblyVersion elements, one for
</I>&gt;<i> each assembly version that contains this member.  Monodocer could then
</I>&gt;<i> know when an &lt;AssemblyVersion/&gt; can be removed (if the member was
</I>&gt;<i> deleted and the docs have an &lt;AssemblyVersion/&gt; identical to what
</I>&gt;<i> monodocer is currently processing), and if all &lt;AssemblyVersion/&gt;s are
</I>&gt;<i> removed then the member can be removed.
</I>&gt;<i>
</I>&gt;<i> I'm open to other ideas...
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i>  - Jon
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Mono-docs-list maillist  -  <A HREF="http://lists.ximian.com/mailman/listinfo/mono-docs-list">Mono-docs-list at lists.ximian.com</A>
</I>&gt;<i> <A HREF="http://lists.ximian.com/mailman/listinfo/mono-docs-list">http://lists.ximian.com/mailman/listinfo/mono-docs-list</A>
</I></PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001740.html">[Mono-docs-list] MSBuild docs
</A></li>
	<LI>Next message: <A HREF="001739.html">[Mono-docs-list] MSBuild docs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1737">[ date ]</a>
              <a href="thread.html#1737">[ thread ]</a>
              <a href="subject.html#1737">[ subject ]</a>
              <a href="author.html#1737">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-docs-list">More information about the Mono-docs-list
mailing list</a><br>
</body></html>
