<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-docs-list] Monodoc editing and live preview.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:miguel%40ximian.com">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000796.html">
   <LINK REL="Next"  HREF="000803.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-docs-list] Monodoc editing and live preview.
   </H1>
    <B>Miguel de Icaza
    </B> 
    <A HREF="mailto:miguel%40ximian.com"
       TITLE="[Mono-docs-list] Monodoc editing and live preview.">miguel@ximian.com
       </A><BR>
    <I>05 Sep 2003 22:10:29 -0400</I>
    <P><UL>
        <LI> Previous message: <A HREF="000796.html">[Mono-docs-list] Mono class libraries.
</A></li>
        <LI> Next message: <A HREF="000803.html">[Mono-docs-list] Monodoc editing and live preview.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#800">[ date ]</a>
              <a href="thread.html#800">[ thread ]</a>
              <a href="subject.html#800">[ subject ]</a>
              <a href="author.html#800">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--=-+yUZ5tJRrVt6ndd2TZBi
Content-Type: multipart/alternative; boundary=&quot;=-wsc6os1aOLqSsNGRw2lV&quot;


--=-wsc6os1aOLqSsNGRw2lV
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

Hey guys,

   I got a simple patch to do real-time previewing of the text being
entered into the editor as we go:


Mandatory Screenshot





How it works


   This works by creating a small xml document like this:

    &lt;?xml version=&quot;1.0&quot;?&gt;
    &lt;docs&gt;
	CONTENTS_OF_THE_EDITOR_WINDOW_GO_HERE
    &lt;/docs&gt;

    And then parsing that into an XmlDocument, and passing it to the
EcmaHelpSource.Htmlize routine.  Since the input might very well be
invalid, code is protected with a try/catch.


Problems


   The current solution does work for everything, it fails when:


      * &lt;see cref=&quot;SomeType&quot;/&gt; is invoked, the error message I get is:
        
        
                        
                        Error is:
                        System.Xml.XPath.XPathException: function monodoc:MakeNiceSignature not found
                        in [0x00102] (at
                        /cvs/mcs/class/System.XML/System.Xml.XPath/Expression.cs:1312) 00 System.Xml.XPath.ExprFunctionCall:Evaluate (System.Xml.XPath.BaseIterator)
                        in [0x00002] (at
                        /cvs/mcs/class/System.XML/System.Xml.XPath/Expression.cs:392) 00 System.Xml.XPath.Expression:EvaluateString (System.Xml.XPath.BaseIterator)
                        in [0x00007] (at
                        /cvs/mcs/class/System.XML/System.Xml.XPath/Expression.cs:112) 00 System.Xml.XPath.CompiledExpression:EvaluateString (System.Xml.XPath.BaseIterator)
                        in [0x00018] (at
                        /cvs/mcs/class/System.XML/System.Xml.XPath/Expression.cs:115) 00 System.Xml.XPath.CompiledExpression:EvaluateString (System.Xml.XPath.BaseIterator)



      * I guess the above is due to me using the Htmlize function as
        opposed to the Htmlize function with the Extension object.  So I
        need some help here.



      * I would love to give some loving to the various &quot;block&quot; types to
        spice up our rendering.  For example, the informational block
        probably should use a lighbulb like the one above (should be
        easy: we can embed more icons, and we just need some tweaks to
        our stylesheet).  Bonus point: make this work also on the Web
        edition.



      *  The current routine that pulls the text to edit, pulls too
        much.  So the external &lt;para&gt; is removed, so that means that by
        default we are on an error condition.  This is one for Ben:
        could we get for the editor, everything inside the node?  Ie,
        given &quot;&lt;summary&gt;&lt;para&gt;Hello!&lt;/para&gt;&lt;/summary&gt;&quot;, we should get
        &quot;&lt;para&gt;Hello!&lt;/para&gt;&quot; instead of just &quot;Hello!&quot;.  


Best wishes,
Miguel.
-- 
Miguel de Icaza &lt;<A HREF="mailto:miguel@ximian.com">miguel@ximian.com</A>&gt;

--=-wsc6os1aOLqSsNGRw2lV
Content-Type: text/html; charset=utf-8

&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 TRANSITIONAL//EN&quot;&gt;
&lt;HTML&gt;
&lt;HEAD&gt;
  &lt;META HTTP-EQUIV=&quot;Content-Type&quot; CONTENT=&quot;text/html; CHARSET=UTF-8&quot;&gt;
  &lt;META NAME=&quot;GENERATOR&quot; CONTENT=&quot;GtkHTML/3.0.8&quot;&gt;
&lt;/HEAD&gt;
&lt;BODY&gt;
Hey guys,&lt;BR&gt;
&lt;BR&gt;
&amp;nbsp;&amp;nbsp; I got a simple patch to do real-time previewing of the text being entered into the editor as we go:&lt;BR&gt;
&lt;BR&gt;
&lt;H3&gt;Mandatory Screenshot&lt;/H3&gt;
&lt;BR&gt;
&lt;IMG SRC=&quot;cid:<A HREF="mailto:1062812186.4489.293.camel@erandi.boston.ximian.com">1062812186.4489.293.camel@erandi.boston.ximian.com</A>&quot; ALIGN=&quot;top&quot; ALT=&quot;&quot; BORDER=&quot;0&quot;&gt;&lt;BR&gt;
&lt;BR&gt;
&lt;H3&gt;How it works&lt;/H3&gt;
&lt;BR&gt;
&amp;nbsp;&amp;nbsp; This works by creating a small xml document like this:&lt;BR&gt;
&lt;BR&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;lt;?xml version=&amp;quot;1.0&amp;quot;?&amp;gt;&lt;BR&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;lt;docs&amp;gt;&lt;BR&gt;
	CONTENTS_OF_THE_EDITOR_WINDOW_GO_HERE&lt;BR&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;lt;/docs&amp;gt;&lt;BR&gt;
&lt;BR&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp; And then parsing that into an XmlDocument, and passing it to the EcmaHelpSource.Htmlize routine.&amp;nbsp; Since the input might very well be invalid, code is protected with a try/catch.&lt;BR&gt;
&lt;BR&gt;
&lt;H3&gt;Problems&lt;/H3&gt;
&lt;BR&gt;
&amp;nbsp;&amp;nbsp; The current solution does work for everything, it fails when:&lt;BR&gt;
&lt;BR&gt;
&lt;UL&gt;
    &lt;LI&gt;&amp;lt;see cref=&amp;quot;SomeType&amp;quot;/&amp;gt; is invoked, the error message I get is:
&lt;/UL&gt;
&lt;BLOCKQUOTE&gt;
    &lt;BR&gt;
    &lt;TABLE BGCOLOR=&quot;#ccccc0&quot; CELLSPACING=&quot;0&quot; WIDTH=&quot;80%&quot;&gt;
&lt;TR&gt;
&lt;TD&gt;
&lt;TABLE BGCOLOR=&quot;#fffff0&quot; CELLSPACING=&quot;0&quot; CELLPADDING=&quot;3&quot; WIDTH=&quot;100%&quot;&gt;
&lt;TR&gt;
&lt;TD VALIGN=&quot;top&quot;&gt;
&lt;BLOCKQUOTE&gt;
    &lt;BLOCKQUOTE&gt;
        &lt;IMG SRC=&quot;cid:<A HREF="mailto:1062812366.4489.297.camel@erandi.boston.ximian.com">1062812366.4489.297.camel@erandi.boston.ximian.com</A>&quot; VSPACE=&quot;2&quot; HSPACE=&quot;3&quot; VSPACE=&quot;2&quot; ALIGN=&quot;bottom&quot; BORDER=&quot;0&quot;&gt;
    &lt;/BLOCKQUOTE&gt;
&lt;/BLOCKQUOTE&gt;
&lt;/TD&gt;
&lt;TD WIDTH=&quot;100%&quot;&gt;
&lt;BLOCKQUOTE&gt;
    &lt;BLOCKQUOTE&gt;
        Error is: System.Xml.XPath.XPathException: function monodoc:MakeNiceSignature not found&lt;BR&gt;
        in [0x00102] (at /cvs/mcs/class/System.XML/System.Xml.XPath/Expression.cs:1312) 00 System.Xml.XPath.ExprFunctionCall:Evaluate (System.Xml.XPath.BaseIterator)&lt;BR&gt;
        in [0x00002] (at /cvs/mcs/class/System.XML/System.Xml.XPath/Expression.cs:392) 00 System.Xml.XPath.Expression:EvaluateString (System.Xml.XPath.BaseIterator)&lt;BR&gt;
        in [0x00007] (at /cvs/mcs/class/System.XML/System.Xml.XPath/Expression.cs:112) 00 System.Xml.XPath.CompiledExpression:EvaluateString (System.Xml.XPath.BaseIterator)&lt;BR&gt;
        in [0x00018] (at /cvs/mcs/class/System.XML/System.Xml.XPath/Expression.cs:115) 00 System.Xml.XPath.CompiledExpression:EvaluateString (System.Xml.XPath.BaseIterator)
    &lt;/BLOCKQUOTE&gt;
&lt;/BLOCKQUOTE&gt;
&lt;/TD&gt;
&lt;/TR&gt;
&lt;/TABLE&gt;

&lt;/TD&gt;
&lt;/TR&gt;
&lt;/TABLE&gt;

&lt;/BLOCKQUOTE&gt;
&lt;BR&gt;
&lt;UL&gt;
    &lt;LI&gt;I guess the above is due to me using the Htmlize function as opposed to the Htmlize function with the Extension object.&amp;nbsp; So I need some help here.
&lt;/UL&gt;
&lt;BR&gt;
&lt;UL&gt;
    &lt;LI&gt;I would love to give some loving to the various &amp;quot;block&amp;quot; types to spice up our rendering.&amp;nbsp; For example, the informational block probably should use a lighbulb like the one above (should be easy: we can embed more icons, and we just need some tweaks to our stylesheet).&amp;nbsp; Bonus point: make this work also on the Web edition.
&lt;/UL&gt;
&lt;BR&gt;
&lt;UL&gt;
    &lt;LI&gt; The current routine that pulls the text to edit, pulls too much.&amp;nbsp; So the external &amp;lt;para&amp;gt; is removed, so that means that by default we are on an error condition.&amp;nbsp; This is one for Ben: could we get for the editor, everything inside the node?&amp;nbsp; Ie, given &amp;quot;&amp;lt;summary&amp;gt;&amp;lt;para&amp;gt;Hello!&amp;lt;/para&amp;gt;&amp;lt;/summary&amp;gt;&amp;quot;, we should get &amp;quot;&amp;lt;para&amp;gt;Hello!&amp;lt;/para&amp;gt;&amp;quot; instead of just &amp;quot;Hello!&amp;quot;.&amp;nbsp; 
&lt;/UL&gt;
&lt;BR&gt;
Best wishes,&lt;BR&gt;
Miguel.&lt;BR&gt;
&lt;TABLE CELLSPACING=&quot;0&quot; CELLPADDING=&quot;0&quot; WIDTH=&quot;100%&quot;&gt;
&lt;TR&gt;
&lt;TD&gt;
-- &lt;BR&gt;
Miguel de Icaza &amp;lt;&lt;A HREF=&quot;mailto:<A HREF="mailto:miguel@ximian.com">miguel@ximian.com</A>&quot;&gt;&lt;U&gt;<A HREF="mailto:miguel@ximian.com">miguel@ximian.com</A>&lt;/U&gt;&lt;/A&gt;&amp;gt;
&lt;/TD&gt;
&lt;/TR&gt;
&lt;/TABLE&gt;

&lt;/BODY&gt;
&lt;/HTML&gt;

--=-wsc6os1aOLqSsNGRw2lV--

--=-+yUZ5tJRrVt6ndd2TZBi
Content-ID: &lt;<A HREF="mailto:1062812366.4489.297.camel@erandi.boston.ximian.com">1062812366.4489.297.camel@erandi.boston.ximian.com</A>&gt;
Content-Disposition: attachment; filename=info_bulb.png
Content-Type: image/png; name=info_bulb.png
Content-Transfer-Encoding: base64

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

--=-+yUZ5tJRrVt6ndd2TZBi
Content-ID: &lt;<A HREF="mailto:1062812186.4489.293.camel@erandi.boston.ximian.com">1062812186.4489.293.camel@erandi.boston.ximian.com</A>&gt;
Content-Disposition: attachment; filename=Screenshot-LiveEdit.png
Content-Type: image/png; name=Screenshot-LiveEdit.png
Content-Transfer-Encoding: base64


--=-+yUZ5tJRrVt6ndd2TZBi--

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000796.html">[Mono-docs-list] Mono class libraries.
</A></li>
	<LI> Next message: <A HREF="000803.html">[Mono-docs-list] Monodoc editing and live preview.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#800">[ date ]</a>
              <a href="thread.html#800">[ thread ]</a>
              <a href="subject.html#800">[ subject ]</a>
              <a href="author.html#800">[ author ]</a>
         </LI>
       </UL>
</body></html>
