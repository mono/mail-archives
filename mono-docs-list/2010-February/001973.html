<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-docs-list] monodoc --edit crashes on newly created doc
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-docs-list%40lists.ximian.com?Subject=%5BMono-docs-list%5D%20monodoc%20--edit%20crashes%20on%20newly%20created%20doc&In-Reply-To=edbf28f01002211128l4dcc8920hf293e6d0f51e082a%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001972.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-docs-list] monodoc --edit crashes on newly created doc</H1>
    <B>Jonathan Pryor</B> 
    <A HREF="mailto:mono-docs-list%40lists.ximian.com?Subject=%5BMono-docs-list%5D%20monodoc%20--edit%20crashes%20on%20newly%20created%20doc&In-Reply-To=edbf28f01002211128l4dcc8920hf293e6d0f51e082a%40mail.gmail.com"
       TITLE="[Mono-docs-list] monodoc --edit crashes on newly created doc">jonpryor at vt.edu
       </A><BR>
    <I>Mon Feb 22 16:44:17 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001972.html">[Mono-docs-list] monodoc --edit crashes on newly created doc
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1973">[ date ]</a>
              <a href="thread.html#1973">[ thread ]</a>
              <a href="subject.html#1973">[ subject ]</a>
              <a href="author.html#1973">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, 2010-02-21 at 14:28 -0500, Matthew Pirocchi wrote:
&gt;<i> I'm working on following this guide to getting started on documenting
</I>&gt;<i> my code:
</I>&gt;<i> <A HREF="http://www.mono-project.com/Generating_Documentation">http://www.mono-project.com/Generating_Documentation</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> My code is divided into 4 assemblies, so I generated the documentation
</I>&gt;<i> with these 4 commands:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> mdoc update -o cardinal-doc Cardinal.exe
</I>&gt;<i> mdoc update -o cardinal-doc Cardinal.Core.dll
</I>&gt;<i> mdoc update -o cardinal-doc Cardinal.Interface.dll
</I>&gt;<i> mdoc update -o cardinal-doc Cardinal.Services.dll
</I>
Don't do that.

'cardinal-doc/index.xml' is supposed to contain all the types that are
within the assemblies you're documenting.  However, it is regenerated
each time 'mdoc' runs, and contains only those assemblies which are
being processed for that invocation.

Result: your second 'mdoc update' command causes index.xml to &quot;lose&quot; all
the types that were added by the first 'mdoc update', and the third
overwrites the second invocation, and...

There are two ways to handle multiple assemblies:

1. List all the assemblies at the same time, thus allowing index.xml to
properly contain all the types within the documentation index:

        mdoc update -o cardinal-doc Cardinal.exe Cardinal.Core.dll \
        	 Cardinal.Interfaces.dll Cardinal.Services.dll

2. Have multiple mdoc repositories, one per assembly:

        mdoc update -o cardinal-docs/Cardinal Cardinal.exe
        mdoc update -o cardinal-docs/Cardinal.Core Cardinal.Core.dll
        # ...

I follow (2) within <A HREF="http://gitorious.org/cadenza,">http://gitorious.org/cadenza,</A> placing documentation
within 'src/ASSEMBLY/Documentation/en', e.g. my MSBuild file [0]
contains a post-build event which updates the documentation [1]:

        &lt;Import Project=&quot;..\..\lib\mdoc-net\mdoc.targets&quot; /&gt;
        &lt;PostBuildEvent&gt;
                $(Mdoc) update --exceptions=added -o $(ProjectDir)Documentation\en $(TargetPath)
        &lt;/PostBuildEvent&gt;

mdoc-export-html will accept multiple source directories, allowing a
single directory tree to contain documentation from all the assemblies:

        mdoc export-html -o html src/*/Documentation/en

To use 'monodoc --edit', you would need to use --edit separately for
each directory:

        monodoc --edit cardinal-docs/Cardinal \
        	--edit cardinal-docs/Cardinal.Core \
        # ...
&gt;<i> MonoDoc opens, and I see &quot;Cardinal&quot; in the sidebar as expected. I can
</I>&gt;<i> click on &quot;Cardinal&quot;, but when I expand it and try to click on any of
</I>&gt;<i> its assemblies, monodoc crashes with this trace:
</I>
Which version of Mono is this?  Mono 2.4 seems to crash a lot for me,
while 2.6 and/or trunk seem far more stable.  I haven't investigated
why.  This could be the cause of your current pains, or having a
&quot;confused&quot; index.xml (as described above) could be the cause as well.

 - Jon

[0]
<A HREF="http://gitorious.org/cadenza/cadenza/blobs/master/src/Cadenza/Cadenza.csproj">http://gitorious.org/cadenza/cadenza/blobs/master/src/Cadenza/Cadenza.csproj</A>

[1]
<A HREF="http://gitorious.org/cadenza/cadenza/trees/master/src/Cadenza/Documentation/en">http://gitorious.org/cadenza/cadenza/trees/master/src/Cadenza/Documentation/en</A>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001972.html">[Mono-docs-list] monodoc --edit crashes on newly created doc
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1973">[ date ]</a>
              <a href="thread.html#1973">[ thread ]</a>
              <a href="subject.html#1973">[ subject ]</a>
              <a href="author.html#1973">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-docs-list">More information about the Mono-docs-list
mailing list</a><br>
</body></html>
