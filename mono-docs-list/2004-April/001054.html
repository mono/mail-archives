<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-docs-list] Question about EXE binaries and kernels?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:felipe_alfaro%40linuxmail.org">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="001055.html">
   <LINK REL="Next"  HREF="001062.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-docs-list] Question about EXE binaries and kernels?
   </H1>
    <B>Felipe Alfaro Solana
    </B> 
    <A HREF="mailto:felipe_alfaro%40linuxmail.org"
       TITLE="[Mono-docs-list] Question about EXE binaries and kernels?">felipe_alfaro@linuxmail.org
       </A><BR>
    <I>Wed, 07 Apr 2004 01:20:50 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="001055.html">[Mono-docs-list] Question about EXE binaries and kernels?
</A></li>
        <LI> Next message: <A HREF="001062.html">[Mono-docs-list] monodoc newbie]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1054">[ date ]</a>
              <a href="thread.html#1054">[ thread ]</a>
              <a href="subject.html#1054">[ subject ]</a>
              <a href="author.html#1054">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 2004-04-06 at 23:57, Aaron Weber wrote:

&gt;<i> Thanks for the explanation. How's this sound?
</I>
This looks really good. Please take a look at the end of the e-mail for
some additional comments.

&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> The normal way to run a Mono application is to invoke it through the
</I>&gt;<i> interpreter, like so:
</I>&gt;<i> 
</I>&gt;<i> mono myprogram.exe
</I>
&gt;<i> However, there are two things you can do to make it more convenient to
</I>&gt;<i> run Mono applications. The first is to use a shell script instead of
</I>&gt;<i> the EXE file. For example, if you had &quot;myprogram.exe&quot; you could create
</I>&gt;<i> a shell script called &quot;myprogram&quot; that had the contents: 
</I>&gt;<i> 
</I>&gt;<i>        #!/bin/sh
</I>&gt;<i>        /usr/bin/mono myprogram.exe
</I>&gt;<i>      
</I>&gt;<i> If you installed mono to a different location, substitute that for
</I>&gt;<i> /usr/bin/mono. You can check with the &quot;which mono&quot; command. 
</I>&gt;<i> 
</I>&gt;<i> You can also make a systemwide change, and use binfmt to register the
</I>&gt;<i> exe files as non-native binaries. Then, when trying to launch an exe
</I>&gt;<i> file, the kernel will run the mono interpreter to handle the command.
</I>&gt;<i> Binfmt can also be used to launch Windows executables using WINE, or
</I>&gt;<i> Java .class files using a JVM. To register exe with the kernel: 
</I>
&gt;<i>      1. Turn on binfmt in your kernel. 
</I>      1.1. If you choose to enable binfmt as a module, you'll need
           to manually load it by running

           modprobe binfmt

           as root. Usually, you will want to place the previous
           command inside the boot script, for example /etc/rc.local
           so the module gets loaded during boot.

&gt;<i>      1. Add the line below to your fstab: 
</I>&gt;<i>         binfmt_misc /proc/sys/fs/binfmt_misc binfmt_misc none
</I>&gt;<i>      2. Then, have your system run the following command on boot: 
</I>&gt;<i>         echo ':CLR:M::MZ::/usr/bin/mono:' &gt; /proc/sys/fs/binfmt_misc/register
</I>
          This is usually placed inside a boot script, like
          /etc/rc.local, for example, so it gets invoked automatically
          at startup.

&gt;<i>      1. Be sure to mark your .exe files as executable in the
</I>&gt;<i>         filesystem as well:
</I>&gt;<i>         chmod +x myprogram.exe
</I>
Also, it would be interesing to state that enabling BINFMT support
shouldn't create any compatibility or interaction problem between EXE
files, the MONO CLR and the kernel, and shouldn't pose any problems when
upgrading MONO CLR or the kernel itself, since the process of launching
and running the EXE file is handled by a userspace program,
/usr/bin/mono, that is, the MONO CLR. Thus, this will work with any
BINFMT-enabled kernel, such as 2.4.x and 2.6.x kernels.

Recently, I submitted a patch against the 2.6.5 kernel that describes
process exactly in the same way as you did in the previous e-mail. It's
already upstream so anyone working with a 2.6.5 kernel can also have
this handy steps at a well-known place: Documentation/mono.txt and
inside the kernel config help text.

Thanks!


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="001055.html">[Mono-docs-list] Question about EXE binaries and kernels?
</A></li>
	<LI> Next message: <A HREF="001062.html">[Mono-docs-list] monodoc newbie]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1054">[ date ]</a>
              <a href="thread.html#1054">[ thread ]</a>
              <a href="subject.html#1054">[ subject ]</a>
              <a href="author.html#1054">[ author ]</a>
         </LI>
       </UL>
</body></html>
