<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-docs-list] Miguel asked me to pass this to you.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:farrisg%40shaw.ca">
   <META NAME="robots" CONTENT="index,nofollow">
   
   
   <LINK REL="Next"  HREF="000429.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-docs-list] Miguel asked me to pass this to you.
   </H1>
    <B>George Farris
    </B> 
    <A HREF="mailto:farrisg%40shaw.ca"
       TITLE="[Mono-docs-list] Miguel asked me to pass this to you.">farrisg@shaw.ca
       </A><BR>
    <I>Fri, 28 Feb 2003 18:46:01 -0800</I>
    <P><UL>
        
        <LI> Next message: <A HREF="000429.html">[Mono-docs-list] Miguel asked me to pass this to you.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#413">[ date ]</a>
              <a href="thread.html#413">[ thread ]</a>
              <a href="subject.html#413">[ subject ]</a>
              <a href="author.html#413">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--Boundary_(ID_NI1B5cFUpVBiK8LFr18u7Q)
Content-type: text/plain
Content-transfer-encoding: 7BIT

I have written some very preliminary docs for the TreeView widget. 
Please feel free to include them in the docs for GTK#.  I will expand
the documentation to include selections and also make what I provide
here much better over the long run but this should allow people to get
stated.

Let me know what you think.

-- 
George Farris &lt;<A HREF="mailto:farrisg@shaw.ca">farrisg@shaw.ca</A>&gt;

--Boundary_(ID_NI1B5cFUpVBiK8LFr18u7Q)
Content-type: text/html; name=treeview.html; charset=ISO-8859-1
Content-transfer-encoding: 7BIT
Content-disposition: attachment; filename=treeview.html

&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 3.2//EN&quot;&gt;
&lt;HTML&gt;
&lt;HEAD&gt;
	&lt;META HTTP-EQUIV=&quot;CONTENT-TYPE&quot; CONTENT=&quot;text/html; charset=utf-8&quot;&gt;
	&lt;TITLE&gt;The Mono Handbook - GNOME.NET - GTK#&lt;/TITLE&gt;
&lt;/HEAD&gt;
&lt;BODY LANG=&quot;en-US&quot;&gt;
&lt;P&gt;&lt;BR&gt;
&lt;/P&gt;
&lt;H1&gt;GTK#&lt;/H1&gt;
&lt;H2&gt;Miscellaneous Widgets&lt;/H2&gt;
&lt;H3&gt;Tree and List Widget&lt;/H3&gt;
&lt;P&gt;The TreeView widget is one of the more complex GTK widgets. It is
well worth while spending some time studing it carefully. 
&lt;/P&gt;
&lt;P&gt;These widgets are designed around a &lt;I&gt;Model/View/Controller&lt;/I&gt;
design and consists of four major parts:&lt;/P&gt;
&lt;P&gt;&lt;B&gt;GtkTreeView :&lt;/B&gt; the tree view widget&lt;/P&gt;
&lt;P&gt;&lt;B&gt;GtkTreeViewColumn&lt;/B&gt; : the view column&lt;/P&gt;
&lt;P&gt;&lt;B&gt;GtkCellRenderer&lt;/B&gt; : the cell renderers&lt;/P&gt;
&lt;P&gt;&lt;B&gt;GtkTreeModel&lt;/B&gt; : the model interface&lt;/P&gt;
&lt;P&gt;A quick look at the situation boils down to this:&lt;/P&gt;
&lt;P&gt;CellRender -----&amp;gt; TreeViewColumn -----&amp;gt; TreeView&lt;/P&gt;
&lt;P&gt;A cell (CellRenderer) of type text, pixbuf or toggle
is created and packed into a newly created column (TreeViewColumn).
The column in turn is appended to the tree (TreeView). Data is added
to the tree model (TreeStore or ListStore) and the model is
associated with the newly created tree.&lt;/P&gt;
&lt;P&gt;&lt;BR&gt;&lt;BR&gt;
&lt;/P&gt;
&lt;P&gt;Lets start with a simple example and explain as we go:&lt;/P&gt;
&lt;P&gt;We'll create a simple list view with one column and text data
stored in it. We could of course create multiple columns of different
types but for our purposes, simple is better.&lt;/P&gt;
&lt;P&gt;Lets create the TreeView widget first. We'll assume that the
parent widget that we are going to pack the TreeView widget into has
already been created.&lt;/P&gt;
&lt;P&gt;First we create a ListStore for holding the data that our list
widget is going to display.&lt;/P&gt;
&lt;P&gt;The ListStore object is a list model for use with a TreeView
widget. It implements the TreeModel interface, and consequentialy,
can use all of the methods available there. It also implements the
TreeSortable interface so it can be sorted by the view. Finally, it
also implements the tree interfaces.&lt;/P&gt;
&lt;PRE STYLE=&quot;margin-bottom: 0.5cm&quot;&gt;ListStore store = null;&lt;/PRE&gt;&lt;P&gt;
Next we create a new TreeView widget and associate our newly created
ListStore with the TreeView.&lt;/P&gt;
&lt;PRE STYLE=&quot;margin-bottom: 0.5cm&quot;&gt;TreeView tv = new TreeView (store);&lt;/PRE&gt;&lt;P&gt;
Here we assign attributes to the TreeView such as making sure headers
are on. Headers refer to the column headers that appear as buttons
and may be tied to such functions as sorting the view of column data.&lt;/P&gt;
&lt;PRE STYLE=&quot;margin-bottom: 0.5cm&quot;&gt;tv.HeadersVisible = true;&lt;/PRE&gt;&lt;P&gt;
Now we need to add columns to our TreeView. We are going to add one
column. We get a new TreeViewColumn and a new CellRenderer of type
text to add to our column. 
&lt;/P&gt;
&lt;P&gt;&lt;BR&gt;&lt;BR&gt;
&lt;/P&gt;
&lt;PRE&gt;TreeViewColumn NameCol = new TreeViewColumn ();
CellRenderer NameRenderer = new CellRendererText ();
NameCol.Title = &amp;quot;Name&amp;quot;;
NameCol.PackStart (NameRenderer, true);
NameCol.AddAttribute (NameRenderer, &amp;quot;text&amp;quot;, 0);
tv.AppendColumn (NameCol);&lt;/PRE&gt;&lt;P&gt;
Since we aren't going to add any more columns to our TreeView we can
finish by packing it into whatever parent widget we have. 
&lt;/P&gt;
&lt;PRE&gt;mywidget.Add (tv);&lt;/PRE&gt;&lt;P&gt;
mywidget.ShowAll ();&lt;/P&gt;
&lt;P&gt;&lt;BR&gt;&lt;BR&gt;
&lt;/P&gt;
&lt;P&gt;Our next task is to to populate the TreeView with data. Data is
stored in the ListStore that was created as the first step above.
When a ListStore or TreeStore is created we tell it what type of data
the store is holding for each column . In the example below we have
one column of type string. 
&lt;/P&gt;
&lt;P&gt;store = new ListStore ((int)TypeFundamentals.TypeString);&lt;/P&gt;
&lt;P&gt;If we had more than one column we would expand the creation of the
ListStore to include those columns and their type. Here is an example
that creates two columns, one of type bool and one of type
string.&lt;/P&gt;
&lt;PRE&gt;store = new ListStore ((int)TypeFundamentals.TypeBool,(int)TypeFundamentals.TypeString);

Right now lets put some data in our list.  We need to get a new TreeIter.  A TreeIter is used 
to store the location where the data will be stored.  The TreeIter is updated automatically 
here bye a call to store.Append, we don't actually set the TreeIter.  We need to 
append a TreeIter to the store to before we can store data in it.

&lt;PRE&gt;TreeIter iter = new TreeIter ();&lt;/PRE&gt;

Great now lets put four rows of text data into the list.  The ListStore and TreeStore actually 
store a Glib.Value not a text string so first we must store our string in a Glib.Value then 
we can set the value in the ListStore.  Note the 0 in the SetValue call is acually the 
column we are writing data to.
&lt;PRE&gt;
for (int i = 0; i &amp;lt; 4; i++) {
  GLib.Value value = new Glib.Value(data +i.ToString());
  store.Append (out iter);
  store.SetValue (iter, 0, value);
}
&lt;/PRE&gt;
&lt;H2&gt;Example&lt;/H2&gt;
&lt;P&gt;Here is a complete example of what we have just done above
complete with toplevel window.&lt;/P&gt;
&lt;PRE&gt;namespace Samples {
        using System;
        using System.Drawing;
        using GLib;
        using Gtk;
        using GtkSharp;


        public class TreeView {
                
                public static void Main (string[] args)
                {
                        TreeStore store = null;
                                                
                        Application.Init ();


                        store = new TreeStore ((int)TypeFundamentals.TypeString,
                                               (int)TypeFundamentals.TypeString);


                        TreeIter iter = new TreeIter ();
                        
                        for (int i=0; i&amp;lt;10; i++)
                        {
                                GLib.Value Name = new GLib.Value (&amp;quot;Demo &amp;quot; +
i.ToString());
                                GLib.Value Type = new GLib.Value (&amp;quot;Data &amp;quot; +
i.ToString());
                                store.Append (out iter);
                                store.SetValue (iter, 0, Name);
                                store.SetValue (iter, 1, Type);
                        }
                        
                        Window win = new Window (&amp;quot;TreeView List Demo&amp;quot;);
                        win.DeleteEvent += new DeleteEventHandler (delete_cb);
                        win.DefaultSize = new Size (400,250);


                        ScrolledWindow sw = new ScrolledWindow ();
                        win.Add (sw);


                        TreeView tv = new TreeView (store);
                        tv.HeadersVisible = true;


                        TreeViewColumn DemoCol = new TreeViewColumn ();
                        CellRenderer DemoRenderer = new CellRendererText ();
                        DemoCol.Title = &amp;quot;Demo&amp;quot;;
                        DemoCol.PackStart (DemoRenderer, true);
                        DemoCol.AddAttribute (DemoRenderer, &amp;quot;text&amp;quot;, 0);
                        tv.AppendColumn (DemoCol);


                        TreeViewColumn DataCol = new TreeViewColumn ();
                        CellRenderer DataRenderer = new CellRendererText ();
                        DataCol.Title = &amp;quot;Data&amp;quot;;
                        DataCol.PackStart (DataRenderer, false);
                        DataCol.AddAttribute (DataRenderer, &amp;quot;text&amp;quot;, 1);
                        tv.AppendColumn (DataCol);


                        sw.Add (tv);
                        sw.Show();
                        win.ShowAll ();
                        Application.Run ();
                }


                private static void delete_cb (System.Object o, DeleteEventArgs
args)
                {
                        Application.Quit ();
                        args.RetVal = true;
                }
        }
}&lt;/PRE&gt;
&lt;/BODY&gt;
&lt;/HTML&gt;

--Boundary_(ID_NI1B5cFUpVBiK8LFr18u7Q)--

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI> Next message: <A HREF="000429.html">[Mono-docs-list] Miguel asked me to pass this to you.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#413">[ date ]</a>
              <a href="thread.html#413">[ thread ]</a>
              <a href="subject.html#413">[ subject ]</a>
              <a href="author.html#413">[ author ]</a>
         </LI>
       </UL>
</body></html>
