<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-docs-list] simple try/catch patch
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-docs-list%40lists.ximian.com?Subject=%5BMono-docs-list%5D%20simple%20try/catch%20patch&In-Reply-To=1132346728.6972.568.camel%40linux.site">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001511.html">
   <LINK REL="Next"  HREF="001513.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-docs-list] simple try/catch patch</H1>
    <B>Rafael Ferreira</B> 
    <A HREF="mailto:mono-docs-list%40lists.ximian.com?Subject=%5BMono-docs-list%5D%20simple%20try/catch%20patch&In-Reply-To=1132346728.6972.568.camel%40linux.site"
       TITLE="[Mono-docs-list] simple try/catch patch">lists at ophion.org
       </A><BR>
    <I>Sun Nov 20 03:08:27 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001511.html">[Mono-docs-list] simple try/catch patch
</A></li>
        <LI>Next message: <A HREF="001513.html">[Mono-docs-list] Re: Mono-docs-list Digest, Vol 7, Issue 6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1512">[ date ]</a>
              <a href="thread.html#1512">[ thread ]</a>
              <a href="subject.html#1512">[ subject ]</a>
              <a href="author.html#1512">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Miguel, 

Currently the ECMA provider does not trap exceptions. For instance, one
easy way to crash the browser is to do a url lookup for a malformed url
like this: &quot;ecma:blah&quot;...  that causes this beauty:

System.ArgumentOutOfRangeException: &lt; 0
Parameter name: length
in [0x00088]
(at /home/rafael/dev/tmp/mono-1.1.9/mcs/class/corlib/System/String.cs:345) System.String:Substring (Int32 startIndex, Int32 length)
in [0x0001b]
(at /home/rafael/dev/mono-svn/monodoc/engine/ecma-provider.cs:1313)
Monodoc.EcmaHelpSource:GetFile (System.String url, System.String rest)
in [0x0000b]
(at /home/rafael/dev/mono-svn/monodoc/engine/ecma-provider.cs:859)
Monodoc.EcmaHelpSource:GetXmlFromUrl (System.String url, System.String
rest)
in [0x00004]
(at /home/rafael/dev/mono-svn/monodoc/engine/ecma-provider.cs:871)
Monodoc.EcmaHelpSource:GetTextFromUrl (System.String url)
in [0x0007f]
(at /home/rafael/dev/mono-svn/monodoc/engine/ecma-provider.cs:517)
Monodoc.EcmaHelpSource:GetText (System.String url, Monodoc.Node
match_node)
in [0x00670]
(at /home/rafael/dev/mono-svn/monodoc/engine/provider.cs:1254)
Monodoc.RootTree:RenderUrl (System.String url, Monodoc.Node match_node)
in [0x000b6]
(at /home/rafael/dev/mono-svn/mono-tools/docbrowser/browser.cs:556)
Monodoc.Browser:LoadUrl (System.String url)

I believe that letting the exception propagate is the best behavior for
the providers in general, the only problem was that up until my patch
the browser would not trap the exception and crash. 

Let me know if that doesn't make sense to you, 

- raf




On Fri, 2005-11-18 at 15:45 -0500, Miguel de Icaza wrote:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> &gt; this is a simple try/catch patch that should help put an end to the
</I>&gt;<i> &gt; claims of instability of the browser. This patch does not &quot;fix&quot; anything
</I>&gt;<i> &gt; per say but will prevent the browser from crashing if an exception
</I>&gt;<i> &gt; occurs while trying to render a url.  I'll commit it sometime in the
</I>&gt;<i> &gt; next few days if I no one is against it. 
</I>&gt;<i> 
</I>&gt;<i> That sounds fine, but what kind of errors have you observed with Monodoc
</I>&gt;<i> that crash the browser?  We should be fixing those bugs.
</I>&gt;<i> 
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001511.html">[Mono-docs-list] simple try/catch patch
</A></li>
	<LI>Next message: <A HREF="001513.html">[Mono-docs-list] Re: Mono-docs-list Digest, Vol 7, Issue 6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1512">[ date ]</a>
              <a href="thread.html#1512">[ thread ]</a>
              <a href="subject.html#1512">[ subject ]</a>
              <a href="author.html#1512">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-docs-list">More information about the Mono-docs-list
mailing list</a><br>
</body></html>
