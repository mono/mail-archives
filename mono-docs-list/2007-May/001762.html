<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Mono-docs-list] ASP.NET example primed for mono-project postgreSQL	page
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mono-docs-list%40lists.ximian.com?Subject=%5BMono-docs-list%5D%20ASP.NET%20example%20primed%20for%20mono-project%20postgreSQL%0A%09page&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001761.html">
   <LINK REL="Next"  HREF="001763.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mono-docs-list] ASP.NET example primed for mono-project postgreSQL	page</H1>
    <B>mono.docs.list at jumpstation.co.uk</B> 
    <A HREF="mailto:mono-docs-list%40lists.ximian.com?Subject=%5BMono-docs-list%5D%20ASP.NET%20example%20primed%20for%20mono-project%20postgreSQL%0A%09page&In-Reply-To="
       TITLE="[Mono-docs-list] ASP.NET example primed for mono-project postgreSQL	page">mono.docs.list at jumpstation.co.uk
       </A><BR>
    <I>Wed May 16 11:44:13 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="001761.html">[Mono-docs-list] Intended Audiance of Developer Resource Category?
</A></li>
        <LI>Next message: <A HREF="001763.html">[Mono-docs-list] Intended Audiance of Developer Resource	Category?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1762">[ date ]</a>
              <a href="thread.html#1762">[ thread ]</a>
              <a href="subject.html#1762">[ subject ]</a>
              <a href="author.html#1762">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>hi,

I saw the C# example on <A HREF="http://www.mono-project.com/PostgreSQL">http://www.mono-project.com/PostgreSQL</A> using Npgsql 
and found it very useful in testing installation.

I thought it would benifit others if I refactored it into ASP.NET/C# as this 
was why I setup postgreSQL.
So I was a bit surprised when found I could not edit the page or even register 
an account.

Code follows as a single .aspx file run to run on monos xsp/2, if anyone can 
put it on the webpage I think it would help.

&lt;%@ Page Language=&quot;c#&quot; Title=&quot;postgres via Npgsql&quot; %&gt;
&lt;%@ Assembly name=&quot;System&quot; %&gt;
&lt;%@ Assembly name=&quot;System.Data&quot; %&gt;
&lt;%@ Assembly name=&quot;Npgsql&quot; %&gt;

&lt;script runat=&quot;server&quot;&gt;
		protected void Page_Load(object sender, EventArgs e) 
		{
			if (!Page.IsPostBack)
			{
		      string connectionString =
          		&quot;Server=localhost;&quot; +
          		&quot;Database=test;&quot; +
          		&quot;User ID=postgres;&quot; +
          		&quot;Password=fun2db;&quot;;
		      	System.Data.IDbConnection dbcon;
		       	dbcon = new Npgsql.NpgsqlConnection(connectionString);
		       	dbcon.Open();
		       	System.Data.IDbCommand dbcmd = dbcon.CreateCommand();
       			string sql =
           			&quot;SELECT firstname, lastname &quot; +
           			&quot;FROM employee&quot;;
		       	dbcmd.CommandText = sql;
		       	System.Data.IDataReader reader = dbcmd.ExecuteReader();
				dg.DataSource = reader;
				dg.DataBind();
			    reader.Close();
       			reader = null;
       			dbcmd.Dispose();
       			dbcmd = null;
       			dbcon.Close();
       			dbcon = null;
			}
		}
&lt;/script&gt;

&lt;html&gt; 
&lt;body&gt;
The DataGrid that follows should list employees &lt;/ br&gt;
&lt;asp:DataGrid id=&quot;dg&quot; runat=&quot;server&quot;&gt;
&lt;/asp:DataGrid&gt;
&lt;pre&gt;
       // requires a table to be created named employee
       // with columns firstname and lastname
       // such as,
       //        CREATE TABLE employee (
       //           firstname varchar(32),
       //           lastname varchar(32));
       //
       // create records thus
       //        INSERT INTO employee 
       //           SELECT 'Rob','Davis';
       //        INSERT INTO employee 
       //           SELECT 'Sarah','Davis';
&lt;/pre&gt;
&lt;/body&gt;
&lt;/html&gt;  

Regards

Rob
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001761.html">[Mono-docs-list] Intended Audiance of Developer Resource Category?
</A></li>
	<LI>Next message: <A HREF="001763.html">[Mono-docs-list] Intended Audiance of Developer Resource	Category?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1762">[ date ]</a>
              <a href="thread.html#1762">[ thread ]</a>
              <a href="subject.html#1762">[ subject ]</a>
              <a href="author.html#1762">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/mono-docs-list">More information about the Mono-docs-list
mailing list</a><br>
</body></html>
