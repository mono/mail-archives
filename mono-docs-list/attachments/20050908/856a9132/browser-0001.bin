Index: browser/ChangeLog
===================================================================
--- browser/ChangeLog	(revision 49472)
+++ browser/ChangeLog	(working copy)
@@ -1,3 +1,6 @@
+2005-09-08 Mario Sopena Novales <mario.sopena@gmail.com>
+	* ecma-provider.cs: Track use_css better
+	
 2005-09-05 Mario Sopena Novales <mario.sopena@gmail.com>
 	Implement basic searching capabilities
 	* provider.cs: 
Index: browser/ecma-provider.cs
===================================================================
--- browser/ecma-provider.cs	(revision 49472)
+++ browser/ecma-provider.cs	(working copy)
@@ -1024,20 +1024,26 @@
 		ecma_transform.Transform (ecma_xml, args, w, null);
 	}
 	
+	static XslTransform ecma_transform_css, ecma_transform_no_css;
 	static void EnsureTransform ()
 	{
 		if (ecma_transform == null) {
-			ecma_transform = new XslTransform ();
+			ecma_transform_css = new XslTransform ();
+			ecma_transform_no_css = new XslTransform ();
 			Assembly assembly = System.Reflection.Assembly.GetCallingAssembly ();
-			Stream stream;
-			if (use_css) 
-				stream = assembly.GetManifestResourceStream ("mono-ecma-css.xsl");
-			else 
-				stream = assembly.GetManifestResourceStream ("mono-ecma.xsl");
-
+			
+			Stream stream = assembly.GetManifestResourceStream ("mono-ecma-css.xsl");
 			XmlReader xml_reader = new XmlTextReader (stream);
-			ecma_transform.Load (xml_reader, null, null);
-		}
+			ecma_transform_css.Load (xml_reader, null, null);
+			
+			stream = assembly.GetManifestResourceStream ("mono-ecma.xsl");
+			xml_reader = new XmlTextReader (stream);
+			ecma_transform_no_css.Load (xml_reader, null, null);
+		}
+		if (use_css)
+			ecma_transform = ecma_transform_css;
+		else
+			ecma_transform = ecma_transform_no_css;
 	}
 
 	// This ExtensionObject stuff is used to check at run time whether