<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Moonlight-bugs] [Bug 627286] New: UIElement.UpdateLayout enters an infinite loop and hangs the browser
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:moonlight-bugs%40lists.ximian.com?Subject=%5BMoonlight-bugs%5D%20%5BBug%20627286%5D%20New%3A%20UIElement.UpdateLayout%20enters%20an%0A%20infinite%20loop%20and%20hangs%20the%20browser&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002392.html">
   <LINK REL="Next"  HREF="002394.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Moonlight-bugs] [Bug 627286] New: UIElement.UpdateLayout enters an infinite loop and hangs the browser</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:moonlight-bugs%40lists.ximian.com?Subject=%5BMoonlight-bugs%5D%20%5BBug%20627286%5D%20New%3A%20UIElement.UpdateLayout%20enters%20an%0A%20infinite%20loop%20and%20hangs%20the%20browser&In-Reply-To="
       TITLE="[Moonlight-bugs] [Bug 627286] New: UIElement.UpdateLayout enters an infinite loop and hangs the browser">bugzilla_noreply at novell.com
       </A><BR>
    <I>Sat Jul 31 12:20:35 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002392.html">[Moonlight-bugs] [Bug 627282] XmlReader.GetAttribute unexpectedly	returns null
</A></li>
        <LI>Next message: <A HREF="002394.html">[Moonlight-bugs] [Bug 627286] UIElement.UpdateLayout enters an infinite loop and hangs the browser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2393">[ date ]</a>
              <a href="thread.html#2393">[ thread ]</a>
              <a href="subject.html#2393">[ subject ]</a>
              <a href="author.html#2393">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://bugzilla.novell.com/show_bug.cgi?id=627286">http://bugzilla.novell.com/show_bug.cgi?id=627286</A>

<A HREF="http://bugzilla.novell.com/show_bug.cgi?id=627286#c0">http://bugzilla.novell.com/show_bug.cgi?id=627286#c0</A>


           Summary: UIElement.UpdateLayout enters an infinite loop and
                    hangs the browser
    Classification: Mono
           Product: Moonlight
           Version: unspecified
          Platform: x86
        OS/Version: SLED 11
            Status: NEW
          Severity: Critical
          Priority: P5 - None
         Component: plugin
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/moonlight-bugs">moonlight-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/moonlight-bugs">pedrojorge.silva at pt.unisys.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/moonlight-bugs">moonlight-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Created an attachment (id=379706)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=379706">http://bugzilla.novell.com/attachment.cgi?id=379706</A>)
Browser trace file with related exceptions

User-Agent:       Mozilla/5.0 (Windows; U; Windows NT 6.1; en-GB; rv:1.9.1.11)
Gecko/20100701 Firefox/3.5.11

In my SL application, I have caught several situations where
System.Windows.UIElement.UpdateLayout enters an infinite loop and hangs the
browser for large periods of time. It is happening with several controls within
the application, being difficult to identify the exact error pattern.

I'm sending a browser log file sample where a set of different controls raise
the problem. Here's an example:

Moonlight: Unhandled exception in Events.SafeDispatcher: System.Exception:
UpdateLayout has entered an infinite loop and has been aborted. The site will
not render correctly.
  at Mono.NativeMethods.uielement_update_layout (IntPtr instance) [0x00000] in
&lt;filename unknown&gt;:0 
  at System.Windows.UIElement.UpdateLayout () [0x00000] in &lt;filename unknown&gt;:0 
  at Telerik.Windows.Controls.PopupWrapper.AdjustPopupLocation () [0x00000] in
&lt;filename unknown&gt;:0 
  at Telerik.Windows.Controls.PopupWrapper.OnPopupOpened (System.Object sender,
System.EventArgs e) [0x00000] in &lt;filename unknown&gt;:0 
  at Mono.Events+&lt;CreateEventHandlerDispatcher&gt;c__AnonStorey9.&lt;&gt;m__7 (IntPtr
sender, IntPtr calldata, IntPtr closure) [0x00000] in &lt;filename unknown&gt;:0 
  at
Mono.Events+&lt;SafeDispatcher&gt;c__AnonStorey2+&lt;SafeDispatcher&gt;c__AnonStorey3.&lt;&gt;m__27
() [0x00000] in &lt;filename unknown&gt;:0 
  at Mono.Events.SafeAction (System.Action action) [0x00000] in &lt;filename
unknown&gt;:0 
System.Windows.Interop.Settings.get_EnableAutoZoom: NIEX
ERROR: &lt;ExceptionReport
FormatterType=&quot;Unisys.ETM.Sys.Diagnostics.DynamicLog.Formatters.XmlReportFormatter,
Unisys.ETM.Sys.SL, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null&quot;&gt;
  &lt;ExceptionStack&gt;
    &lt;Exception&gt;
      &lt;ExceptionDetails&gt;
        &lt;Type&gt;System.Exception&lt;/Type&gt;
        &lt;Message&gt;UpdateLayout has entered an infinite loop and has been
aborted. The site will not render correctly.&lt;/Message&gt;
        &lt;ExceptionData /&gt;
        &lt;StackTrace&gt;  at Mono.NativeMethods.uielement_update_layout (IntPtr
instance) [0x00000] in &amp;lt;filename unknown&amp;gt;:0 
  at System.Windows.UIElement.UpdateLayout () [0x00000] in &amp;lt;filename
unknown&amp;gt;:0 
  at Telerik.Windows.Controls.PopupWrapper.AdjustPopupLocation () [0x00000] in
&amp;lt;filename unknown&amp;gt;:0 
  at Telerik.Windows.Controls.RadComboBox.&amp;lt;DropDownPopupOpened&amp;gt;b__7 ()
[0x00000] in &amp;lt;filename unknown&amp;gt;:0 
  at System.Windows.Threading.Dispatcher.InvokeDelegate (System.Delegate d,
System.Object[] args) [0x00000] in &amp;lt;filename unknown&amp;gt;:0 
  at System.Windows.Threading.DispatcherOperation.Invoke () [0x00000] in
&amp;lt;filename unknown&amp;gt;:0 &lt;/StackTrace&gt;
      &lt;/ExceptionDetails&gt;
    &lt;/Exception&gt;
  &lt;/ExceptionStack&gt;
  &lt;AdditionalInformation&gt;
    &lt;Info key=&quot;Application.FriendlyName&quot;&gt;Silverlight AppDomain&lt;/Info&gt;
    &lt;Info
key=&quot;Application.Host&quot;&gt;<A HREF="http://srvdevpmc02:9000/PMC.CorporateDesktop.xap&lt;/Info">http://srvdevpmc02:9000/PMC.CorporateDesktop.xap&lt;/Info</A>&gt;
    &lt;Info key=&quot;Application.Host.Settings&quot;&gt;
      &lt;ObjectDump&gt;
        &lt;Type&gt;System.Windows.Interop.Settings&lt;/Type&gt;
        &lt;Value&gt;System.Windows.Interop.Settings&lt;/Value&gt;
        &lt;Properties&gt;
          &lt;Property Name=&quot;EnableFrameRateCounter&quot;&gt;False&lt;/Property&gt;
          &lt;Property Name=&quot;EnableHTMLAccess&quot;&gt;True&lt;/Property&gt;
          &lt;Property Name=&quot;EnableRedrawRegions&quot;&gt;False&lt;/Property&gt;
          &lt;Property Name=&quot;EnableGPUAcceleration&quot;&gt;False&lt;/Property&gt;
          &lt;Property Name=&quot;EnableCacheVisualization&quot;&gt;False&lt;/Property&gt;
          &lt;Property Name=&quot;MaxFrameRate&quot;&gt;60&lt;/Property&gt;
          &lt;Property Name=&quot;Windowless&quot;&gt;False&lt;/Property&gt;
          &lt;Property Name=&quot;EnableAutoZoom&quot;&gt;False&lt;/Property&gt;
        &lt;/Properties&gt;
      &lt;/ObjectDump&gt;
    &lt;/Info&gt;
    &lt;Info key=&quot;CurrentThread.Culture&quot;&gt;English (United States)&lt;/Info&gt;
    &lt;Info key=&quot;CurrentThread.Id&quot;&gt;1&lt;/Info&gt;
    &lt;Info key=&quot;CurrentThread.IsBackground&quot;&gt;False&lt;/Info&gt;
    &lt;Info key=&quot;CurrentThread.Name&quot;&gt;Main Thread&lt;/Info&gt;
    &lt;Info key=&quot;CurrentThread.ThreadState&quot;&gt;Running&lt;/Info&gt;
    &lt;Info key=&quot;CurrentThread.UICulture&quot;&gt;English (United States)&lt;/Info&gt;
    &lt;Info key=&quot;Deployment.EntryPointAssembly&quot;&gt;Banif.PMC.CorporateDesktop&lt;/Info&gt;
    &lt;Info key=&quot;Deployment.EntryPointType&quot;&gt;Banif.PMC.CorporateDesktop.App&lt;/Info&gt;
    &lt;Info key=&quot;Deployment.ExternalCallersFromCrossDomain&quot;&gt;NoAccess&lt;/Info&gt;
    &lt;Info key=&quot;Deployment.RuntimeVersion&quot;&gt;2.0.31005.0&lt;/Info&gt;
    &lt;Info key=&quot;Environment.HasShutdownStarted&quot;&gt;False&lt;/Info&gt;
    &lt;Info key=&quot;Environment.OSVersion&quot;&gt;2.6.27.19&lt;/Info&gt;
    &lt;Info key=&quot;Environment.OSVersion.Platform&quot;&gt;Unix&lt;/Info&gt;
    &lt;Info key=&quot;Environment.Version&quot;&gt;4.0.50524.0&lt;/Info&gt;
    &lt;Info key=&quot;OS.Architecture&quot;&gt;32&lt;/Info&gt;
    &lt;Info key=&quot;Time.Local&quot;&gt;7/31/2010 3:25:13 PM&lt;/Info&gt;
    &lt;Info key=&quot;Time.UTC&quot;&gt;7/31/2010 2:25:13 PM&lt;/Info&gt;
  &lt;/AdditionalInformation&gt;
&lt;/ExceptionReport&gt;


Reproducible: Always

Steps to Reproduce:
1.
2.
3.
Actual Results:  
An infinite loop caused by plugin hangs the browser

-- 
Configure bugmail: <A HREF="http://bugzilla.novell.com/userprefs.cgi?tab=email">http://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002392.html">[Moonlight-bugs] [Bug 627282] XmlReader.GetAttribute unexpectedly	returns null
</A></li>
	<LI>Next message: <A HREF="002394.html">[Moonlight-bugs] [Bug 627286] UIElement.UpdateLayout enters an infinite loop and hangs the browser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2393">[ date ]</a>
              <a href="thread.html#2393">[ thread ]</a>
              <a href="subject.html#2393">[ subject ]</a>
              <a href="author.html#2393">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/moonlight-bugs">More information about the Moonlight-bugs
mailing list</a><br>
</body></html>
