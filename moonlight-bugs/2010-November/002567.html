<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Moonlight-bugs] [Bug 653945] New: Manually implemented animation	causes memory leak
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:moonlight-bugs%40lists.ximian.com?Subject=%5BMoonlight-bugs%5D%20%5BBug%20653945%5D%20New%3A%20Manually%20implemented%20animation%0A%09causes%20memory%20leak&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002566.html">
   <LINK REL="Next"  HREF="002568.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Moonlight-bugs] [Bug 653945] New: Manually implemented animation	causes memory leak</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:moonlight-bugs%40lists.ximian.com?Subject=%5BMoonlight-bugs%5D%20%5BBug%20653945%5D%20New%3A%20Manually%20implemented%20animation%0A%09causes%20memory%20leak&In-Reply-To="
       TITLE="[Moonlight-bugs] [Bug 653945] New: Manually implemented animation	causes memory leak">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Nov 16 07:59:02 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002566.html">[Moonlight-bugs] [Bug 615673] Browser crash while using Twist silverlight website using Moonlight 3 Preview 7
</A></li>
        <LI>Next message: <A HREF="002568.html">[Moonlight-bugs] [Bug 653984] New: Scrollviewer has rendering problems when contents are animated with storyboard
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2567">[ date ]</a>
              <a href="thread.html#2567">[ thread ]</a>
              <a href="subject.html#2567">[ subject ]</a>
              <a href="author.html#2567">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=653945">https://bugzilla.novell.com/show_bug.cgi?id=653945</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=653945#c0">https://bugzilla.novell.com/show_bug.cgi?id=653945#c0</A>


           Summary: Manually implemented animation causes memory leak
    Classification: Mono
           Product: Moonlight
           Version: SVN
          Platform: Other
        OS/Version: Other
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: engine
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/moonlight-bugs">moonlight-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/moonlight-bugs">rui at ruicraveiro.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/moonlight-bugs">moonlight-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Created an attachment (id=400490)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=400490">http://bugzilla.novell.com/attachment.cgi?id=400490</A>)
Working Demo

User-Agent:       Mozilla/5.0 (X11; U; Linux x86_64; en-US) AppleWebKit/534.7
(KHTML, like Gecko) Chrome/7.0.517.41 Safari/534.7

The customer's app has a manually implemented animation, that essentially
changes the translate transform of two controls over time, making them appear
to slide. The constant motion is implemented by recursive use of the
dispatcher. In ML, this leaks. 

Though the original app has loads of classes to implement this, I am attaching
a working demo that is stripped down to as possible as I was able and still
reproducing the bug. In the demo, all the magic is in the codebehind of the
single page.

There are two important aspects to it. The first is that there is a
ScrollViewer involved. If you remove the scrollviewer, it won't leak. There is
a line of code in the codebehind that if you remove, the leak is gone as well.
It sets a Clip on the container of the child elements. Removing that line,
there is an initial kind of flicker in the animation in SL. In ML, you will not
see a difference, besides that it won't leak any more. The line is identified
in the demo with a comment.

Reproducible: Always

Steps to Reproduce:
1. Run the TestPage.html of the attached working demo.
2. Press the button that says &quot;Animat&quot;.
3. While the animation is in progress, look at Firefox's memory consumption go
up never to come down again.
Actual Results:  
Memory leak

Expected Results:  
No memory leak

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002566.html">[Moonlight-bugs] [Bug 615673] Browser crash while using Twist silverlight website using Moonlight 3 Preview 7
</A></li>
	<LI>Next message: <A HREF="002568.html">[Moonlight-bugs] [Bug 653984] New: Scrollviewer has rendering problems when contents are animated with storyboard
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2567">[ date ]</a>
              <a href="thread.html#2567">[ thread ]</a>
              <a href="subject.html#2567">[ subject ]</a>
              <a href="author.html#2567">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/moonlight-bugs">More information about the Moonlight-bugs
mailing list</a><br>
</body></html>
