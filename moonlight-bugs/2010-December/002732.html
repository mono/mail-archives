<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Moonlight-bugs] [Bug 660685] generics verification fails if a more-constrained generic tries to access a less constrained generic
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:moonlight-bugs%40lists.ximian.com?Subject=%5BMoonlight-bugs%5D%20%5BBug%20660685%5D%20generics%20verification%20fails%20if%20a%0A%20more-constrained%20generic%20tries%20to%20access%20a%20less%20constrained%20generic&In-Reply-To=bug-660685-37086%40http.bugzilla.novell.com/">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002729.html">
   <LINK REL="Next"  HREF="002730.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Moonlight-bugs] [Bug 660685] generics verification fails if a more-constrained generic tries to access a less constrained generic</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:moonlight-bugs%40lists.ximian.com?Subject=%5BMoonlight-bugs%5D%20%5BBug%20660685%5D%20generics%20verification%20fails%20if%20a%0A%20more-constrained%20generic%20tries%20to%20access%20a%20less%20constrained%20generic&In-Reply-To=bug-660685-37086%40http.bugzilla.novell.com/"
       TITLE="[Moonlight-bugs] [Bug 660685] generics verification fails if a more-constrained generic tries to access a less constrained generic">bugzilla_noreply at novell.com
       </A><BR>
    <I>Tue Dec 21 15:51:40 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002729.html">[Moonlight-bugs] [Bug 660685] New: generics verification fails if a more-constrained generic tries to access a less constrained generic
</A></li>
        <LI>Next message: <A HREF="002730.html">[Moonlight-bugs] [Bug 652177] Apparent memory leak when using	Telerik RadGridView
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2732">[ date ]</a>
              <a href="thread.html#2732">[ thread ]</a>
              <a href="subject.html#2732">[ subject ]</a>
              <a href="author.html#2732">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=660685">https://bugzilla.novell.com/show_bug.cgi?id=660685</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=660685#c1">https://bugzilla.novell.com/show_bug.cgi?id=660685#c1</A>


--- Comment #1 from Keenan Forbes &lt;<A HREF="http://lists.ximian.com/mailman/listinfo/moonlight-bugs">keenan.forbes at ni.com</A>&gt; 2010-12-21 20:51:40 UTC ---
The problem comes up because the type that's being evaluated in LessConstrained
is the generic from MoreConstrained, but it doesn't have the
ReferenceTypeConstraint set in it's flags. So the test in
mono_generic_param_is_constraint_compatible() in verify.c fails because the
target requests the &quot;class&quot; constraint, but the candidate (T) doesn't have it
set. 
One fix might be to ignore the REFERENCE_TYPE_CONSTRAINT in the mask test,
since pklass.valuetype seems to be what's looked at in most places anyway.
However, it seems as though the mono code should be propagating the flag
properly to begin with -- so far I haven't had any luck figuring out where in
the class libraries those special flags actually get set.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002729.html">[Moonlight-bugs] [Bug 660685] New: generics verification fails if a more-constrained generic tries to access a less constrained generic
</A></li>
	<LI>Next message: <A HREF="002730.html">[Moonlight-bugs] [Bug 652177] Apparent memory leak when using	Telerik RadGridView
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2732">[ date ]</a>
              <a href="thread.html#2732">[ thread ]</a>
              <a href="subject.html#2732">[ subject ]</a>
              <a href="author.html#2732">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/moonlight-bugs">More information about the Moonlight-bugs
mailing list</a><br>
</body></html>
