<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Moonlight-bugs] [Bug 660685] New: generics verification fails if a more-constrained generic tries to access a less constrained generic
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:moonlight-bugs%40lists.ximian.com?Subject=%5BMoonlight-bugs%5D%20%5BBug%20660685%5D%20New%3A%20generics%20verification%20fails%20if%20a%0A%20more-constrained%20generic%20tries%20to%20access%20a%20less%20constrained%20generic&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002728.html">
   <LINK REL="Next"  HREF="002732.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Moonlight-bugs] [Bug 660685] New: generics verification fails if a more-constrained generic tries to access a less constrained generic</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:moonlight-bugs%40lists.ximian.com?Subject=%5BMoonlight-bugs%5D%20%5BBug%20660685%5D%20New%3A%20generics%20verification%20fails%20if%20a%0A%20more-constrained%20generic%20tries%20to%20access%20a%20less%20constrained%20generic&In-Reply-To="
       TITLE="[Moonlight-bugs] [Bug 660685] New: generics verification fails if a more-constrained generic tries to access a less constrained generic">bugzilla_noreply at novell.com
       </A><BR>
    <I>Mon Dec 20 18:18:04 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002728.html">[Moonlight-bugs] Your Bugzilla bug list needs attention.
</A></li>
        <LI>Next message: <A HREF="002732.html">[Moonlight-bugs] [Bug 660685] generics verification fails if a more-constrained generic tries to access a less constrained generic
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2729">[ date ]</a>
              <a href="thread.html#2729">[ thread ]</a>
              <a href="subject.html#2729">[ subject ]</a>
              <a href="author.html#2729">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=660685">https://bugzilla.novell.com/show_bug.cgi?id=660685</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=660685#c0">https://bugzilla.novell.com/show_bug.cgi?id=660685#c0</A>


           Summary: generics verification fails if a more-constrained
                    generic tries to access a less constrained generic
    Classification: Mono
           Product: Moonlight
           Version: SVN
          Platform: All
        OS/Version: All
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: engine
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/moonlight-bugs">moonlight-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/moonlight-bugs">keenan.forbes at ni.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/moonlight-bugs">moonlight-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Created an attachment (id=405729)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=405729">http://bugzilla.novell.com/attachment.cgi?id=405729</A>)
example of verification failure of generic constraints

User-Agent:       Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US;
rv:1.9.2.13) Gecko/20101203 Firefox/3.6.13

If one generic needs to call another one, the verification should not require
that both have the same constraints - only that both are valid. I put together
a quick little example where there are two generics, one with specific
constraints (Control) and one with only basic constraints (class). The problem
is that the more specifically constrained generic can't reference the less
generic one even though all the constraints are met. 
Note that if you change &quot;class&quot; to something else more specific like
&quot;FrameworkElement&quot; this works just fine, so it must have something to do with
the handling of that special primary constraint...

Reproducible: Always

Steps to Reproduce:
Run the attached code in a Moonlight application. (works on Silverlight)
Actual Results:  
System.TypeLoadException: Error verifying test.MoreConstrained`1:test (T):
Invalid generic type instantiation of type test.LessConstrained`1 (generic args
don't respect target's constraints) at 0x0000


Expected Results:  
should see a printout of three lines on the console (starting with &quot;More&quot;,
&quot;Less&quot; and &quot;Less&quot;).

Let me know if you need me to provide a full xap rather than just the app code.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002728.html">[Moonlight-bugs] Your Bugzilla bug list needs attention.
</A></li>
	<LI>Next message: <A HREF="002732.html">[Moonlight-bugs] [Bug 660685] generics verification fails if a more-constrained generic tries to access a less constrained generic
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2729">[ date ]</a>
              <a href="thread.html#2729">[ thread ]</a>
              <a href="subject.html#2729">[ subject ]</a>
              <a href="author.html#2729">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/moonlight-bugs">More information about the Moonlight-bugs
mailing list</a><br>
</body></html>
