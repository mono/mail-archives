<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Moonlight-bugs] [Bug 660293] New: Converter for List&lt;&gt; property doesn't like new list
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:moonlight-bugs%40lists.ximian.com?Subject=%5BMoonlight-bugs%5D%20%5BBug%20660293%5D%20New%3A%20Converter%20for%20List%3C%3E%20property%0A%20doesn%27t%20like%20new%20list&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002724.html">
   <LINK REL="Next"  HREF="002726.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Moonlight-bugs] [Bug 660293] New: Converter for List&lt;&gt; property doesn't like new list</H1>
    <B>bugzilla_noreply at novell.com</B> 
    <A HREF="mailto:moonlight-bugs%40lists.ximian.com?Subject=%5BMoonlight-bugs%5D%20%5BBug%20660293%5D%20New%3A%20Converter%20for%20List%3C%3E%20property%0A%20doesn%27t%20like%20new%20list&In-Reply-To="
       TITLE="[Moonlight-bugs] [Bug 660293] New: Converter for List&lt;&gt; property doesn't like new list">bugzilla_noreply at novell.com
       </A><BR>
    <I>Fri Dec 17 14:33:16 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002724.html">[Moonlight-bugs] [Bug 652177] Apparent memory leak when using	Telerik RadGridView
</A></li>
        <LI>Next message: <A HREF="002726.html">[Moonlight-bugs] [Bug 660293] Converter for List&lt;&gt; property doesn't	like new list
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2725">[ date ]</a>
              <a href="thread.html#2725">[ thread ]</a>
              <a href="subject.html#2725">[ subject ]</a>
              <a href="author.html#2725">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=660293">https://bugzilla.novell.com/show_bug.cgi?id=660293</A>

<A HREF="https://bugzilla.novell.com/show_bug.cgi?id=660293#c0">https://bugzilla.novell.com/show_bug.cgi?id=660293#c0</A>


           Summary: Converter for List&lt;&gt; property doesn't like new list
    Classification: Mono
           Product: Moonlight
           Version: SVN
          Platform: Other
        OS/Version: Other
            Status: NEW
          Severity: Normal
          Priority: P5 - None
         Component: engine
        AssignedTo: <A HREF="http://lists.ximian.com/mailman/listinfo/moonlight-bugs">moonlight-bugs at lists.ximian.com</A>
        ReportedBy: <A HREF="http://lists.ximian.com/mailman/listinfo/moonlight-bugs">rui at ruicraveiro.com</A>
         QAContact: <A HREF="http://lists.ximian.com/mailman/listinfo/moonlight-bugs">moonlight-bugs at lists.ximian.com</A>
          Found By: ---
           Blocker: ---


Created an attachment (id=405438)
 --&gt; (<A HREF="http://bugzilla.novell.com/attachment.cgi?id=405438">http://bugzilla.novell.com/attachment.cgi?id=405438</A>)
Test Case A (plain SL)

User-Agent:       Mozilla/5.0 (X11; U; Linux x86_64; en-US) AppleWebKit/534.7
(KHTML, like Gecko) Chrome/7.0.517.41 Safari/534.7

If you find this explanation too complex, please just run the test cases I am
attaching in SL and ML, spot the differences and you'll probably figure out
faster what I am reporting than by reading what follows.

My customer's application has a property converter to be used with the
databinding between the Items property of a combobox and a List property of an
object I'll call Model. The property converter is meant to insert a new item to
the list the will act as the default empty item.

Rather than doing list.Insert(...), it takes the approach of creating a new
list, adding the &quot;empty&quot; element and then copying the remaining elements from
the original list into the new one.

It just so happens that if the combobox has it's selectedIndex property also
bound to a different property of the model, when the usercontrol is
initialized, instead of the combobox assuming the value of the Model, it will
override the model's property with the default value and then assume that
value.

I am attaching two test-cases. One is pure SL and the second uses a Telerik
RadComboBox. The behaviour is similar. While I extracted the test-case
originally from the version that uses Telerik, I created the telerik-less
version to determine whether it is a Telerik specific problem or not. It isn't.

Reproducible: Always

Steps to Reproduce:
1. Run TestPage on either test case I am attaching in both Silverlight and
Moonlight.
2. Notice that in Silverlight you will have the &quot;default&quot; element selected and
in Moonlight you don't.
3. Notice the messages I am spitting into the console... They are coming from
the setter of the Model's property used to determine the selected element. From
reading those, you can figure that the property is being called when it
shouldn't with the type's default value. This is wrong behaviour.
Actual Results:  
ComboBox with no selected element.

Expected Results:  
ComboBox with first element selected.

-- 
Configure bugmail: <A HREF="https://bugzilla.novell.com/userprefs.cgi?tab=email">https://bugzilla.novell.com/userprefs.cgi?tab=email</A>
------- You are receiving this mail because: -------
You are the QA contact for the bug.
You are the assignee for the bug.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002724.html">[Moonlight-bugs] [Bug 652177] Apparent memory leak when using	Telerik RadGridView
</A></li>
	<LI>Next message: <A HREF="002726.html">[Moonlight-bugs] [Bug 660293] Converter for List&lt;&gt; property doesn't	like new list
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2725">[ date ]</a>
              <a href="thread.html#2725">[ thread ]</a>
              <a href="subject.html#2725">[ subject ]</a>
              <a href="author.html#2725">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/moonlight-bugs">More information about the Moonlight-bugs
mailing list</a><br>
</body></html>
